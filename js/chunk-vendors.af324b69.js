(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"0392":function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"taskList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"taskItem+",parseHTML(){return[{tag:'ul[data-type="taskList"]',priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Object(r["n"])(e,{"data-type":"taskList"}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList("taskList","taskItem")}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});t["a"]=i},"056c":function(e,t,n){"use strict";var r=n("9980");const i=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,o=r["d"].create({name:"image",defaultOptions:{inline:!1,HTMLAttributes:{}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:"img[src]"}]},renderHTML({HTMLAttributes:e}){return["img",Object(r["n"])(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Object(r["o"])(i,this.type,e=>{const[,t,n,r]=e;return{src:n,alt:t,title:r}})]}});t["a"]=o},"057f":function(e,t,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},"058a":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));let r=[];const i=()=>{for(let e=0;e<r.length;e++)r[e]();r=[]},o=e=>{r.push(e),1===r.length&&setTimeout(i,0)},s=e=>class{constructor(e){this._=e}destroy(){e(this._)}},a=s(clearTimeout),c=(e,t)=>new a(setTimeout(t,e));s(clearInterval),s(e=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(e)),s(e=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(e))},"06cf":function(e,t,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),s=n("fc6a"),a=n("a04b"),c=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=s(e),t=a(t),u)try{return l(e,t)}catch(n){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},"0ac0":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return T})),n.d(t,"f",(function(){return A})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return x}));var r=n("304a"),i=65535,o=Math.pow(2,16);function s(e,t){return e+t*o}function a(e){return e&i}function c(e){return(e-(e&i))/o}var u=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},l=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};l.prototype.recover=function(e){var t=0,n=a(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+c(e)},l.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},l.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},l.prototype._map=function(e,t,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;var l=this.ranges[a+i],h=this.ranges[a+o],f=c+l;if(e<=f){var d=l?e==c?-1:e==f?1:t:t,p=c+r+(d<0?0:h);if(n)return p;var m=e==(t<0?c:f)?null:s(a/3,e-c);return new u(p,t<0?e!=c:e!=f,m)}r+=h-l}return n?e+r:new u(e+r)},l.prototype.touches=function(e,t){for(var n=0,r=a(t),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?n:0);if(c>e)break;var u=this.ranges[s+i],l=c+u;if(e<=l&&s==3*r)return!0;n+=this.ranges[s+o]-u}return!1},l.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+t],u=this.ranges[r+n];e(s,s+c,a,a+u),i+=u-c}},l.prototype.invert=function(){return new l(this.ranges,!this.inverted)},l.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},l.offset=function(e){return 0==e?l.empty:new l(e<0?[0,-e,0]:[0,0,e])},l.empty=new l([]);var h=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function f(e){var t=Error.call(this,e);return t.__proto__=f.prototype,t}h.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new h(this.maps,this.mirror,e,t)},h.prototype.copy=function(){return new h(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},h.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},h.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},h.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},h.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},h.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},h.prototype.invert=function(){var e=new h;return e.appendMappingInverted(this),e},h.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},h.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},h.prototype._map=function(e,t,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(e,t);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,e=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),e=s.pos}return n?e:new u(e,r)},f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="TransformError";var d=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new h},p={before:{configurable:!0},docChanged:{configurable:!0}};function m(){throw new Error("Override me")}p.before.get=function(){return this.docs.length?this.docs[0]:this.doc},d.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new f(t.failed);return this},d.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},p.docChanged.get=function(){return this.steps.length>0},d.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(d.prototype,p);var v=Object.create(null),g=function(){};g.prototype.apply=function(e){return m()},g.prototype.getMap=function(){return l.empty},g.prototype.invert=function(e){return m()},g.prototype.map=function(e){return m()},g.prototype.merge=function(e){return null},g.prototype.toJSON=function(){return m()},g.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=v[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},g.jsonID=function(e,t){if(e in v)throw new RangeError("Duplicate use of step JSON ID "+e);return v[e]=t,t.prototype.jsonID=e,t};var y=function(e,t){this.doc=e,this.failed=t};y.ok=function(e){return new y(e,null)},y.fail=function(e){return new y(null,e)},y.fromReplace=function(e,t,n,i){try{return y.ok(e.replace(t,n,i))}catch(o){if(o instanceof r["h"])return y.fail(o.message);throw o}};var b=function(e){function t(t,n,r,i){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&k(e,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new l([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r["j"].empty:new r["j"](e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?r["j"].empty:new r["j"](this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r["j"].fromJSON(e,n.slice),!!n.structure)},t}(g);g.jsonID("replace",b);var w=function(e){function t(t,n,r,i,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(k(e,this.from,this.gapFrom)||k(e,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return y.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?y.fromReplace(e,this.from,this.to,n):y.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r["j"].fromJSON(e,n.slice),n.insert,!!n.structure)},t}(g);function k(e,t,n){var r=e.resolve(t),i=n-t,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function S(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function x(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var i=e.$from.node(r),o=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(o,s,n))return r;if(0==r||i.type.spec.isolating||!S(i,o,s))break}}function _(e,t,n,r){void 0===r&&(r=e);var i=O(e,t),o=i&&M(r,t);return o?i.map(C).concat({type:t,attrs:n}).concat(o.map(C)):null}function C(e){return{type:e,attrs:null}}function O(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}function M(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=s.length?s[s.length-1]:t,c=a.contentMatch,u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return c&&c.validEnd?s:null}function E(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function A(e,t,n,r){void 0===n&&(n=1);var i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,c=n-2;a>o;a--,c--){var u=i.node(a),l=i.index(a);if(u.type.spec.isolating)return!1;var h=u.content.cutByIndex(l,u.childCount),f=r&&r[c]||u;if(f!=u&&(h=h.replaceChild(0,f.type.create(f.attrs))),!u.canReplace(l+1,u.childCount)||!f.type.validContent(h))return!1}var d=i.indexAfter(o),p=r&&r[0];return i.node(o).canReplaceWith(d,d,p?p.type:i.node(o+1).type)}function T(e,t){var n=e.resolve(t),r=n.index();return R(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function R(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function D(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),i=r.depth;;i--){var o=void 0,s=void 0,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&R(o,s)&&r.node(i).canReplace(a,a+1))return t;if(0==i)break;t=n<0?r.before(i):r.after(i)}}function I(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function N(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0),l=r.node(a),h=!1;if(1==s)h=l.canReplace(u,u,i);else{var f=l.contentMatchAt(u).findWrapping(i.firstChild.type);h=f&&l.canReplaceWith(u,u,f[0])}if(h)return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function P(e,t,n){for(var i=[],o=0;o<e.childCount;o++){var s=e.child(o);s.content.size&&(s=s.copy(P(s.content,t,s))),s.isInline&&(s=t(s,n,o)),i.push(s)}return r["c"].fromArray(i)}g.jsonID("replaceAround",w),d.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,o=e.depth,s=n.before(o+1),a=i.after(o+1),c=s,u=a,l=r["c"].empty,h=0,f=o,d=!1;f>t;f--)d||n.index(f)>0?(d=!0,l=r["c"].from(n.node(f).copy(l)),h++):c--;for(var p=r["c"].empty,m=0,v=o,g=!1;v>t;v--)g||i.after(v+1)<i.end(v)?(g=!0,p=r["c"].from(i.node(v).copy(p)),m++):u++;return this.step(new w(c,u,s,a,new r["j"](l.append(p),h,m),l.size-h,!0))},d.prototype.wrap=function(e,t){for(var n=r["c"].empty,i=t.length-1;i>=0;i--)n=r["c"].from(t[i].type.create(t[i].attrs,n));var o=e.start,s=e.end;return this.step(new w(o,s,o,s,new r["j"](n,0,0),t.length,!0))},d.prototype.setBlockType=function(e,t,n,i){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&E(o.doc,o.mapping.slice(s).map(t),n)){o.clearIncompatible(o.mapping.slice(s).map(t,1),n);var a=o.mapping.slice(s),c=a.map(t,1),u=a.map(t+e.nodeSize,1);return o.step(new w(c,u,c+1,u-1,new r["j"](r["c"].from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},d.prototype.setNodeMarkup=function(e,t,n,i){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var s=t.create(n,null,i||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new w(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new r["j"](r["c"].from(s),0,0),1,!0))},d.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),o=r["c"].empty,s=r["c"].empty,a=i.depth,c=i.depth-t,u=t-1;a>c;a--,u--){o=r["c"].from(i.node(a).copy(o));var l=n&&n[u];s=r["c"].from(l?l.type.create(l.attrs,s):i.node(a).copy(s))}return this.step(new b(e,e,new r["j"](o.append(s),t,t),!0))},d.prototype.join=function(e,t){void 0===t&&(t=1);var n=new b(e-t,e+t,r["j"].empty,!0);return this.step(n)};var j=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new r["j"](P(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return y.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new L(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(g);g.jsonID("addMark",j);var L=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new r["j"](P(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return y.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new j(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(g);function F(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=r["j"].empty),t==n&&!i.size)return null;var o=e.resolve(t),s=e.resolve(n);return B(o,s,i)?new b(t,n,i):new z(o,s,i).fit()}function B(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}g.jsonID("removeMark",L),d.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,u){if(r.isInline){var l=r.marks;if(!n.isInSet(l)&&u.type.allowsMarkType(n.type)){for(var h=Math.max(c,e),f=Math.min(c+r.nodeSize,t),d=n.addToSet(l),p=0;p<l.length;p++)l[p].isInSet(d)||(s&&s.to==h&&s.mark.eq(l[p])?s.to=f:i.push(s=new L(h,f,l[p])));a&&a.to==h?a.to=f:o.push(a=new j(h,f,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},d.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var o=[],s=0;return this.doc.nodesBetween(e,t,(function(i,a){if(i.isInline){s++;var c=null;if(n instanceof r["e"]){var u,l=i.marks;while(u=n.isInSet(l))(c||(c=[])).push(u),l=u.removeFromSet(l)}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length)for(var h=Math.min(a+i.nodeSize,t),f=0;f<c.length;f++){for(var d=c[f],p=void 0,m=0;m<o.length;m++){var v=o[m];v.step==s-1&&d.eq(o[m].style)&&(p=v)}p?(p.to=h,p.step=s):o.push({style:d,from:Math.max(a,e),to:h,step:s})}}})),o.forEach((function(e){return i.step(new L(e.from,e.to,e.style))})),this},d.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),o=[],s=e+1,a=0;a<i.childCount;a++){var c=i.child(a),u=s+c.nodeSize,l=n.matchType(c.type,c.attrs);if(l){n=l;for(var h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||this.step(new L(s,u,c.marks[h]))}else o.push(new b(s,u,r["j"].empty));s=u}if(!n.validEnd){var f=n.fillBefore(r["c"].empty,!0);this.replace(s,s,new r["j"](f,0,0))}for(var d=o.length-1;d>=0;d--)this.step(o[d]);return this},d.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r["j"].empty);var i=F(this.doc,e,t,n);return i&&this.step(i),this},d.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r["j"](r["c"].from(n),0,0))},d.prototype.delete=function(e,t){return this.replace(e,t,r["j"].empty)},d.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var z=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var i=0;i<=e.depth;i++){var o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}this.placed=r["c"].empty;for(var s=e.depth;s>0;s--)this.placed=r["c"].from(e.node(s).copy(this.placed))},$={depth:{configurable:!0}};function U(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(U(e.firstChild.content,t-1,n)))}function H(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(H(e.lastChild.content,t-1,n)))}function V(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function W(e,t,n){if(t<=0)return e;var i=e.content;return t>1&&(i=i.replaceChild(0,W(i.firstChild,t-1,1==i.childCount?n-1:0))),t>0&&(i=e.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(r["c"].empty,!0)))),e.copy(i)}function q(e,t,n,r,i){var o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!K(n,o.content,s)?a:null}function K(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function J(e,t,n,i,o){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(J(s.content,t+1,n,i,s)))}if(t>i){var a=o.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r["c"].empty,!0))}return e}function Y(e,t){for(var n=[],r=Math.min(e.depth,t.depth),i=r;i>=0;i--){var o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;o==t.start(i)&&n.push(i)}return n}$.depth.get=function(){return this.frontier.length-1},z.prototype.fit=function(){while(this.unplaced.size){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(t<0?this.$to:i.doc.resolve(t));if(!o)return null;var s=this.placed,a=i.depth,c=o.depth;while(a&&c&&1==s.childCount)s=s.firstChild.content,a--,c--;var u=new r["j"](s,a,c);return t>-1?new w(i.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||i.pos!=this.$to.pos?new b(i.pos,o.pos,u):void 0},z.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--){var n=void 0,i=void 0;t?(i=V(this.unplaced.content,t-1).firstChild,n=i.content):n=this.unplaced.content;for(var o=n.firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],c=a.type,u=a.match,l=void 0,h=void 0;if(1==e&&(o?u.matchType(o.type)||(h=u.fillBefore(r["c"].from(o),!1)):c.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:s,parent:i,inject:h};if(2==e&&o&&(l=u.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:s,parent:i,wrap:l};if(i&&u.matchType(i.type))break}}},z.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,o=V(t,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new r["j"](t,n+1,Math.max(i,o.size+n>=t.size-i?n+1:0)),!0)},z.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,i=e.openEnd,o=V(t,n);if(o.childCount<=1&&n>0){var s=t.size-n<=n+o.size;this.unplaced=new r["j"](U(t,n-1,1),n-1,s?n-1:i)}else this.unplaced=new r["j"](U(t,n,1),n,i)},z.prototype.placeNodes=function(e){var t=e.sliceDepth,n=e.frontierDepth,i=e.parent,o=e.inject,s=e.wrap;while(this.depth>n)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,u=i?i.content:c.content,l=c.openStart-t,h=0,f=[],d=this.frontier[n],p=d.match,m=d.type;if(o){for(var v=0;v<o.childCount;v++)f.push(o.child(v));p=p.matchFragment(o)}var g=u.size+t-(c.content.size-c.openEnd);while(h<u.childCount){var y=u.child(h),b=p.matchType(y.type);if(!b)break;h++,(h>1||0==l||y.content.size)&&(p=b,f.push(W(y.mark(m.allowedMarks(y.marks)),1==h?l:0,h==u.childCount?g:-1)))}var w=h==u.childCount;w||(g=-1),this.placed=H(this.placed,n,r["c"].from(f)),this.frontier[n].match=p,w&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,S=u;k<g;k++){var x=S.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),S=x.content}this.unplaced=w?0==t?r["j"].empty:new r["j"](U(c.content,t-1,1),t-1,g<0?c.openEnd:t-1):new r["j"](U(c.content,t,h),c.openStart,c.openEnd)},z.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!q(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;var n=this.$to,r=n.depth,i=this.$to.after(r);while(r>1&&i==this.$to.end(--r))++i;return i},z.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,i=n.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=q(e,t,i,r,o);if(s){for(var a=t-1;a>=0;a--){var c=this.frontier[a],u=c.match,l=c.type,h=q(e,a,l,u,!0);if(!h||h.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}},z.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=H(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,i)}return e},z.prototype.openFrontierNode=function(e,t,n){var i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=H(this.placed,this.depth,r["c"].from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},z.prototype.closeFrontierNode=function(){var e=this.frontier.pop(),t=e.match.fillBefore(r["c"].empty,!0);t.childCount&&(this.placed=H(this.placed,this.frontier.length,t))},Object.defineProperties(z.prototype,$),d.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),o=this.doc.resolve(t);if(B(i,o,n))return this.step(new b(e,t,n));var s=Y(i,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var c=i.depth,u=i.pos-1;c>0;c--,u--){var l=i.node(c).type.spec;if(l.defining||l.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==u&&s.splice(1,0,-c)}for(var h=s.indexOf(a),f=[],d=n.openStart,p=n.content,m=0;;m++){var v=p.firstChild;if(f.push(v),m==n.openStart)break;p=v.content}d>0&&f[d-1].type.spec.defining&&i.node(h).type!=f[d-1].type?d-=1:d>=2&&f[d-1].isTextblock&&f[d-2].type.spec.defining&&i.node(h).type!=f[d-2].type&&(d-=2);for(var g=n.openStart;g>=0;g--){var y=(g+d+1)%(n.openStart+1),w=f[y];if(w)for(var k=0;k<s.length;k++){var S=s[(k+h)%s.length],x=!0;S<0&&(x=!1,S=-S);var _=i.node(S-1),C=i.index(S-1);if(_.canReplaceWith(C,C,w.type,w.marks))return this.replace(i.before(S),x?o.after(S):t,new r["j"](J(n.content,0,n.openStart,y),y,n.openEnd))}}for(var O=this.steps.length,M=s.length-1;M>=0;M--){if(this.replace(e,t,n),this.steps.length>O)break;var E=s[M];E<0||(e=i.before(E),t=o.after(E))}return this},d.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=I(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new r["j"](r["c"].from(n),0,0))},d.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=Y(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},"0b42":function(e,t,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),s=o("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)?r(t)&&(t=t[s],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"0b6c":function(e,t,n){"use strict";var r,i,o=n("9980"),s=n("5313"),a=n("304a"),c=n("7f06"),u=n("576a"),l=n("0ac0");if("undefined"!=typeof WeakMap){var h=new WeakMap;r=function(e){return h.get(e)},i=function(e,t){return h.set(e,t),t}}else{var f=[],d=10,p=0;r=function(e){for(var t=0;t<f.length;t+=2)if(f[t]==e)return f[t+1]},i=function(e,t){return p==d&&(p=0),f[p++]=e,f[p++]=t}}var m=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},v=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function g(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=y(e),n=e.childCount,r=[],i=0,o=null,s=[],a=0,c=t*n;a<c;a++)r[a]=0;for(var u=0,l=0;u<n;u++){var h=e.child(u);l++;for(var f=0;;f++){while(i<r.length&&0!=r[i])i++;if(f==h.childCount)break;for(var d=h.child(f),p=d.attrs,m=p.colspan,g=p.rowspan,w=p.colwidth,k=0;k<g;k++){if(k+u>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:l,n:g-k});break}for(var S=i+k*t,x=0;x<m;x++){0==r[S+x]?r[S+x]=l:(o||(o=[])).push({type:"collision",row:u,pos:l,n:m-x});var _=w&&w[x];if(_){var C=(S+x)%t*2,O=s[C];null==O||O!=_&&1==s[C+1]?(s[C]=_,s[C+1]=1):O==_&&s[C+1]++}}}i+=m,l+=d.nodeSize}var M=(u+1)*t,E=0;while(i<M)0==r[i++]&&E++;E&&(o||(o=[])).push({type:"missing",row:u,n:E}),l++}for(var A=new v(t,n,r,o),T=!1,R=0;!T&&R<s.length;R+=2)null!=s[R]&&s[R+1]<n&&(T=!0);return T&&b(A,s,e),A}function y(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var i=e.child(r),o=0;if(n)for(var s=0;s<r;s++)for(var a=e.child(s),c=0;c<a.childCount;c++){var u=a.child(c);s+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}for(var l=0;l<i.childCount;l++){var h=i.child(l);o+=h.attrs.colspan,h.attrs.rowspan>1&&(n=!0)}-1==t?t=o:t!=o&&(t=Math.max(t,o))}return t}function b(e,t,n){e.problems||(e.problems=[]);for(var r=0,i={};r<e.map.length;r++){var o=e.map[r];if(!i[o]){i[o]=!0;for(var s=n.nodeAt(o),a=null,c=0;c<s.attrs.colspan;c++){var u=(r+c)%e.width,l=t[2*u];null==l||s.attrs.colwidth&&s.attrs.colwidth[c]==l||((a||(a=w(s.attrs)))[c]=l)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}function w(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function k(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}return t}v.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,i=t/this.width|0,o=r+1,s=i+1,a=1;o<this.width&&this.map[t+a]==n;a++)o++;for(var c=1;s<this.height&&this.map[t+this.width*c]==n;c++)s++;return new m(r,i,o,s)}}throw new RangeError("No cell with offset "+e+" found")},v.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},v.prototype.nextCell=function(e,t,n){var r=this.findCell(e),i=r.left,o=r.right,s=r.top,a=r.bottom;return"horiz"==t?(n<0?0==i:o==this.width)?null:this.map[s*this.width+(n<0?i-1:o)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},v.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,i=n.right,o=n.top,s=n.bottom,a=this.findCell(t),c=a.left,u=a.right,l=a.top,h=a.bottom;return new m(Math.min(r,c),Math.min(o,l),Math.max(i,u),Math.max(s,h))},v.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var i=e.left;i<e.right;i++){var o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==e.left&&i&&this.map[o-1]==s||r==e.top&&r&&this.map[o-this.width]==s||t.push(s))}return t},v.prototype.positionAt=function(e,t,n){for(var r=0,i=0;;r++){var o=i+n.child(r).nodeSize;if(r==e){var s=t+e*this.width,a=(e+1)*this.width;while(s<a&&this.map[s]<i)s++;return s==a?o-1:this.map[s]}i=o}},v.get=function(e){return r(e)||i(e,g(e))};var S=new s["e"]("selectingCells");function x(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function _(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function C(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function O(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:x(t.$head)||M(t.$head)}function M(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var i=e.nodeBefore,o=e.pos;i;i=i.lastChild,o--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(o-i.nodeSize)}}function E(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function A(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function T(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function R(e,t,n){var r=e.start(-1),i=v.get(e.node(-1)),o=i.nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function D(e,t,n){var r={};for(var i in e)r[i]=e[i];return r[t]=n,r}function I(e,t,n){void 0===n&&(n=1);var r=D(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function N(e,t,n){void 0===n&&(n=1);var r=D(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}function P(e,t,n){for(var r=k(t.type.schema).header_cell,i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0}var j=function(e){function t(t,n){void 0===n&&(n=t);var r=t.node(-1),i=v.get(r),o=t.start(-1),a=i.rectBetween(t.pos-o,n.pos-o),c=t.node(0),u=i.cellsInRect(a).filter((function(e){return e!=n.pos-o}));u.unshift(n.pos-o);var l=u.map((function(e){var t=r.nodeAt(e),n=e+o+1;return new s["g"](c.resolve(n),c.resolve(n+t.content.size))}));e.call(this,l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(E(r)&&E(i)&&T(r,i)){var o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?t.rowSelection(r,i):o&&this.isColSelection()?t.colSelection(r,i):new t(r,i)}return s["h"].between(r,i)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=v.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[],s=r.top;s<r.bottom;s++){for(var c=[],u=s*t.width+r.left,l=r.left;l<r.right;l++,u++){var h=t.map[u];if(!i[h]){i[h]=!0;var f=t.findCell(h),d=e.nodeAt(h),p=r.left-f.left,m=f.right-r.right;if(p>0||m>0){var g=d.attrs;p>0&&(g=I(g,0,p)),m>0&&(g=I(g,g.colspan-m,m)),d=f.left<r.left?d.type.createAndFill(g):d.type.create(g,d.content)}if(f.top<r.top||f.bottom>r.bottom){var y=D(d.attrs,"rowspan",Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top));d=f.top<r.top?d.type.createAndFill(y):d.type.create(y,d.content)}c.push(d)}}o.push(e.child(s).copy(a["c"].from(c)))}var b=this.isColSelection()&&this.isRowSelection()?e:o;return new a["j"](a["c"].from(b),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=a["j"].empty);for(var r=t.steps.length,i=this.ranges,o=0;o<i.length;o++){var s=i[o],c=s.$from,u=s.$to,l=t.mapping.slice(r);t.replace(l.map(c.pos),l.map(u.pos),o?a["j"].empty:n)}var h=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);h&&t.setSelection(h)},t.prototype.replaceWith=function(e,t){this.replace(e,new a["j"](a["c"].from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=v.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<i.length;o++)e(t.nodeAt(i[o]),r+i[o])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=v.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),s=r.findCell(n.pos-i),a=e.node(0);return o.top<=s.top?(o.top>0&&(e=a.resolve(i+r.map[o.left])),s.bottom<r.height&&(n=a.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+r.map[s.left])),o.bottom<r.height&&(e=a.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=v.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,o)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=v.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),s=r.findCell(n.pos-i),a=e.node(0);return o.left<=s.left?(o.left>0&&(e=a.resolve(i+r.map[o.top*r.width])),s.right<r.width&&(n=a.resolve(i+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+r.map[s.top*r.width])),o.right<r.width&&(e=a.resolve(i+r.map[r.width*(o.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new L(this.$anchorCell.pos,this.$headCell.pos)},t}(s["f"]);j.prototype.visible=!1,s["f"].jsonID("cell",j);var L=function(e,t){this.anchor=e,this.head=t};function F(e){if(!(e.selection instanceof j))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(u["a"].node(n,n+e.nodeSize,{class:"selectedCell"}))})),u["b"].create(e.doc,t)}function B(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,i=n.pos,o=t.depth;o>=0;o--,r++)if(t.after(o+1)<t.end(o))break;for(var s=n.depth;s>=0;s--,i--)if(n.before(s+1)>n.start(s))break;return r==i&&/row|table/.test(t.node(o).type.spec.tableRole)}function z(e){for(var t,n,r=e.$from,i=e.$to,o=r.depth;o>0;o--){var s=r.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){t=s;break}}for(var a=i.depth;a>0;a--){var c=i.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return t!==n&&0===i.parentOffset}function $(e,t,n){var r,i,o=(t||e).selection,a=(t||e).doc;if(o instanceof s["c"]&&(i=o.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)r=j.create(a,o.from);else if("row"==i){var c=a.resolve(o.from+1);r=j.rowSelection(c,c)}else if(!n){var u=v.get(o.node),l=o.from+1,h=l+u.map[u.width*u.height-1];r=j.create(a,l+1,h)}}else o instanceof s["h"]&&B(o)?r=s["h"].create(a,o.from):o instanceof s["h"]&&z(o)&&(r=s["h"].create(a,o.$from.start(),o.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}function U(e){if(!e.size)return null;var t=e.content,n=e.openStart,r=e.openEnd;while(1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole))n--,r--,t=t.firstChild.content;var i=t.firstChild,o=i.type.spec.tableRole,s=i.type.schema,c=[];if("row"==o)for(var u=0;u<t.childCount;u++){var l=t.child(u).content,h=u?0:Math.max(0,n-1),f=u<t.childCount-1?0:Math.max(0,r-1);(h||f)&&(l=V(k(s).row,new a["j"](l,h,f)).content),c.push(l)}else{if("cell"!=o&&"header_cell"!=o)return null;c.push(n||r?V(k(s).row,new a["j"](t,n,r)).content:t)}return H(s,c)}function H(e,t){for(var n=[],r=0;r<t.length;r++)for(var i=t[r],o=i.childCount-1;o>=0;o--)for(var s=i.child(o).attrs,c=s.rowspan,u=s.colspan,l=r;l<r+c;l++)n[l]=(n[l]||0)+u;for(var h=0,f=0;f<n.length;f++)h=Math.max(h,n[f]);for(var d=0;d<n.length;d++)if(d>=t.length&&t.push(a["c"].empty),n[d]<h){for(var p=k(e).cell.createAndFill(),m=[],v=n[d];v<h;v++)m.push(p);t[d]=t[d].append(a["c"].from(m))}return{height:t.length,width:h,rows:t}}function V(e,t){var n=e.createAndFill(),r=new l["d"](n).replace(0,n.content.size,t);return r.doc}function W(e,t,n){var r=e.width,i=e.height,o=e.rows;if(r!=t){for(var s=[],c=[],u=0;u<o.length;u++){for(var l=o[u],h=[],f=s[u]||0,d=0;f<t;d++){var p=l.child(d%l.childCount);f+p.attrs.colspan>t&&(p=p.type.create(I(p.attrs,p.attrs.colspan,f+p.attrs.colspan-t),p.content)),h.push(p),f+=p.attrs.colspan;for(var m=1;m<p.attrs.rowspan;m++)s[u+m]=(s[u+m]||0)+p.attrs.colspan}c.push(a["c"].from(h))}o=c,r=t}if(i!=n){for(var v=[],g=0,y=0;g<n;g++,y++){for(var b=[],w=o[y%i],k=0;k<w.childCount;k++){var S=w.child(k);g+S.attrs.rowspan>n&&(S=S.type.create(D(S.attrs,"rowspan",Math.max(1,n-S.attrs.rowspan)),S.content)),b.push(S)}v.push(a["c"].from(b))}o=v,i=n}return{width:r,height:i,rows:o}}function q(e,t,n,r,i,o,s){var c,u,l=e.doc.type.schema,h=k(l);if(i>t.width)for(var f=0,d=0;f<t.height;f++){var p=n.child(f);d+=p.nodeSize;var m=[],v=void 0;v=null==p.lastChild||p.lastChild.type==h.cell?c||(c=h.cell.createAndFill()):u||(u=h.header_cell.createAndFill());for(var g=t.width;g<i;g++)m.push(v);e.insert(e.mapping.slice(s).map(d-1+r),m)}if(o>t.height){for(var y=[],b=0,w=(t.height-1)*t.width;b<Math.max(t.width,i);b++){var S=!(b>=t.width)&&n.nodeAt(t.map[w+b]).type==h.header_cell;y.push(S?u||(u=h.header_cell.createAndFill()):c||(c=h.cell.createAndFill()))}for(var x=h.row.create(null,a["c"].from(y)),_=[],C=t.height;C<o;C++)_.push(x);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),_)}return!(!c&&!u)}function K(e,t,n,r,i,o,s,a){if(0==s||s==t.height)return!1;for(var c=!1,u=i;u<o;u++){var l=s*t.width+u,h=t.map[l];if(t.map[l-t.width]==h){c=!0;var f=n.nodeAt(h),d=t.findCell(h),p=d.top,m=d.left;e.setNodeMarkup(e.mapping.slice(a).map(h+r),null,D(f.attrs,"rowspan",s-p)),e.insert(e.mapping.slice(a).map(t.positionAt(s,m,n)),f.type.createAndFill(D(f.attrs,"rowspan",p+f.attrs.rowspan-s))),u+=f.attrs.colspan-1}}return c}function J(e,t,n,r,i,o,s,a){if(0==s||s==t.width)return!1;for(var c=!1,u=i;u<o;u++){var l=u*t.width+s,h=t.map[l];if(t.map[l-1]==h){c=!0;var f=n.nodeAt(h),d=t.colCount(h),p=e.mapping.slice(a).map(h+r);e.setNodeMarkup(p,null,I(f.attrs,s-d,f.attrs.colspan-(s-d))),e.insert(p+f.nodeSize,f.type.createAndFill(I(f.attrs,0,s-d))),u+=f.attrs.rowspan-1}}return c}function Y(e,t,n,r,i){var o=n?e.doc.nodeAt(n-1):e.doc,s=v.get(o),c=r.top,u=r.left,l=u+i.width,h=c+i.height,f=e.tr,d=0;function p(){o=n?f.doc.nodeAt(n-1):f.doc,s=v.get(o),d=f.mapping.maps.length}q(f,s,o,n,l,h,d)&&p(),K(f,s,o,n,u,l,c,d)&&p(),K(f,s,o,n,u,l,h,d)&&p(),J(f,s,o,n,c,h,u,d)&&p(),J(f,s,o,n,c,h,l,d)&&p();for(var m=c;m<h;m++){var g=s.positionAt(m,u,o),y=s.positionAt(m,l,o);f.replace(f.mapping.slice(d).map(g+n),f.mapping.slice(d).map(y+n),new a["j"](i.rows[m-c],0,0))}p(),f.setSelection(new j(f.doc.resolve(n+s.positionAt(c,u,o)),f.doc.resolve(n+s.positionAt(h-1,l-1,o)))),t(f)}L.prototype.map=function(e){return new L(e.map(this.anchor),e.map(this.head))},L.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&T(t,n)?new j(t,n):s["f"].near(n,1)};var G=Object(c["a"])({ArrowLeft:Q("horiz",-1),ArrowRight:Q("horiz",1),ArrowUp:Q("vert",-1),ArrowDown:Q("vert",1),"Shift-ArrowLeft":Z("horiz",-1),"Shift-ArrowRight":Z("horiz",1),"Shift-ArrowUp":Z("vert",-1),"Shift-ArrowDown":Z("vert",1),Backspace:ee,"Mod-Backspace":ee,Delete:ee,"Mod-Delete":ee});function X(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Q(e,t){return function(n,r,i){var o=n.selection;if(o instanceof j)return X(n,r,s["f"].near(o.$headCell,t));if("horiz"!=e&&!o.empty)return!1;var a=ie(i,e,t);if(null==a)return!1;if("horiz"==e)return X(n,r,s["f"].near(n.doc.resolve(o.head+t),t));var c,u=n.doc.resolve(a),l=R(u,e,t);return c=l?s["f"].near(l,1):t<0?s["f"].near(n.doc.resolve(u.before(-1)),-1):s["f"].near(n.doc.resolve(u.after(-1)),1),X(n,r,c)}}function Z(e,t){return function(n,r,i){var o=n.selection;if(!(o instanceof j)){var s=ie(i,e,t);if(null==s)return!1;o=new j(n.doc.resolve(s))}var a=R(o.$headCell,e,t);return!!a&&X(n,r,new j(o.$anchorCell,a))}}function ee(e,t){var n=e.selection;if(!(n instanceof j))return!1;if(t){var r=e.tr,i=k(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(i)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new a["j"](i,0,0))})),r.docChanged&&t(r)}return!0}function te(e,t){var n=e.state.doc,r=x(n.resolve(t));return!!r&&(e.dispatch(e.state.tr.setSelection(new j(r))),!0)}function ne(e,t,n){if(!C(e.state))return!1;var r=U(n),i=e.state.selection;if(i instanceof j){r||(r={width:1,height:1,rows:[a["c"].from(V(k(e.state.schema).cell,n))]});var o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),c=v.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=W(r,c.right-c.left,c.bottom-c.top),Y(e.state,e.dispatch,s,c,r),!0}if(r){var u=O(e.state),l=u.start(-1);return Y(e.state,e.dispatch,l,v.get(u.node(-1)).findCell(u.pos-l),r),!0}return!1}function re(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=oe(e,t.target);if(t.shiftKey&&e.state.selection instanceof j)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=x(e.state.selection.$anchor))&&se(e,t).pos!=n.pos)i(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",s)}function i(t,n){var r=se(e,n),i=null==S.getState(e.state);if(!r||!T(t,r)){if(!i)return;r=t}var o=new j(t,r);if(i||!e.state.selection.eq(o)){var s=e.state.tr.setSelection(o);i&&s.setMeta(S,t.pos),e.dispatch(s)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",s),null!=S.getState(e.state)&&e.dispatch(e.state.tr.setMeta(S,-1))}function s(n){var s,a=S.getState(e.state);if(null!=a)s=e.state.doc.resolve(a);else if(oe(e,n.target)!=r&&(s=se(e,t),!s))return o();s&&i(s,n)}}function ie(e,t,n){if(!(e.state.selection instanceof s["h"]))return null;for(var r=e.state.selection,i=r.$head,o=i.depth-1;o>=0;o--){var a=i.node(o),c=n<0?i.index(o):i.indexAfter(o);if(c!=(n<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var u=i.before(o),l="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?u:null}}return null}function oe(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function se(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?x(e.state.doc.resolve(n.pos)):null}var ae=new s["e"]("fix-tables");function ce(e,t,n,r){var i=e.childCount,o=t.childCount;e:for(var s=0,a=0;s<o;s++){for(var c=t.child(s),u=a,l=Math.min(i,s+3);u<l;u++)if(e.child(u)==c){a=u+1,n+=c.nodeSize;continue e}r(c,n),a<i&&e.child(a).sameMarkup(c)?ce(e.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function ue(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=le(e,t,r,n))};return t?t.doc!=e.doc&&ce(t.doc,e.doc,0,r):e.doc.descendants(r),n}function le(e,t,n,r){var i=v.get(t);if(!i.problems)return r;r||(r=e.tr);for(var o,s,a=[],c=0;c<i.height;c++)a.push(0);for(var u=0;u<i.problems.length;u++){var l=i.problems[u];if("collision"==l.type){for(var h=t.nodeAt(l.pos),f=0;f<h.attrs.rowspan;f++)a[l.row+f]+=l.n;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,I(h.attrs,h.attrs.colspan-l.n,l.n))}else if("missing"==l.type)a[l.row]+=l.n;else if("overlong_rowspan"==l.type){var d=t.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,D(d.attrs,"rowspan",d.attrs.rowspan-l.n))}else if("colwidth mismatch"==l.type){var p=t.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,D(p.attrs,"colwidth",l.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==o&&(o=m),s=m);for(var g=0,y=n+1;g<i.height;g++){var b=t.child(g),w=y+b.nodeSize,S=a[g];if(S>0){var x="cell";b.firstChild&&(x=b.firstChild.type.spec.tableRole);for(var _=[],C=0;C<S;C++)_.push(k(e.schema)[x].createAndFill());var O=0!=g&&o!=g-1||s!=g?w-1:y+1;r.insert(r.mapping.map(O),_)}y=w}return r.setMeta(ae,{fixTables:!0})}function he(e){var t,n=e.selection,r=O(e),i=r.node(-1),o=r.start(-1),s=v.get(i);return t=n instanceof j?s.rectBetween(n.$anchorCell.pos-o,n.$headCell.pos-o):s.findCell(r.pos-o),t.tableStart=o,t.map=s,t.table=i,t}function fe(e,t,n){var r=t.map,i=t.tableStart,o=t.table,s=n>0?-1:0;P(r,o,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var u=r.map[c],l=o.nodeAt(u);e.setNodeMarkup(e.mapping.map(i+u),null,N(l.attrs,n-r.colCount(u))),a+=l.attrs.rowspan-1}else{var h=null==s?k(o.type.schema).cell:o.nodeAt(r.map[c+s]).type,f=r.positionAt(a,n,o);e.insert(e.mapping.map(i+f),h.createAndFill())}}return e}function de(e,t){if(!C(e))return!1;if(t){var n=he(e);t(fe(e.tr,n,n.left))}return!0}function pe(e,t){if(!C(e))return!1;if(t){var n=he(e);t(fe(e.tr,n,n.right))}return!0}function me(e,t,n){for(var r=t.map,i=t.table,o=t.tableStart,s=e.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,u=r.map[c],l=i.nodeAt(u);if(n>0&&r.map[c-1]==u||n<r.width-1&&r.map[c+1]==u)e.setNodeMarkup(e.mapping.slice(s).map(o+u),null,I(l.attrs,n-r.colCount(u)));else{var h=e.mapping.slice(s).map(o+u);e.delete(h,h+l.nodeSize)}a+=l.attrs.rowspan}}function ve(e,t){if(!C(e))return!1;if(t){var n=he(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;;i--){if(me(r,n,i),i==n.left)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=v.get(n.table)}t(r)}return!0}function ge(e,t,n){for(var r=k(t.type.schema).header_cell,i=0;i<e.width;i++)if(t.nodeAt(e.map[i+n*e.width]).type!=r)return!1;return!0}function ye(e,t,n){for(var r=t.map,i=t.tableStart,o=t.table,s=i,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=[],u=n>0?-1:0;ge(r,o,n+u)&&(u=0==n||n==r.height?null:0);for(var l=0,h=r.width*n;l<r.width;l++,h++)if(n>0&&n<r.height&&r.map[h]==r.map[h-r.width]){var f=r.map[h],d=o.nodeAt(f).attrs;e.setNodeMarkup(i+f,null,D(d,"rowspan",d.rowspan+1)),l+=d.colspan-1}else{var p=null==u?k(o.type.schema).cell:o.nodeAt(r.map[h+u*r.width]).type;c.push(p.createAndFill())}return e.insert(s,k(o.type.schema).row.create(null,c)),e}function be(e,t){if(!C(e))return!1;if(t){var n=he(e);t(ye(e.tr,n,n.top))}return!0}function we(e,t){if(!C(e))return!1;if(t){var n=he(e);t(ye(e.tr,n,n.bottom))}return!0}function ke(e,t,n){for(var r=t.map,i=t.table,o=t.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=s+i.child(n).nodeSize,u=e.mapping.maps.length;e.delete(s+o,c+o);for(var l=0,h=n*r.width;l<r.width;l++,h++){var f=r.map[h];if(n>0&&f==r.map[h-r.width]){var d=i.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(u).map(f+o),null,D(d,"rowspan",d.rowspan-1)),l+=d.colspan-1}else if(n<r.width&&f==r.map[h+r.width]){var p=i.nodeAt(f),m=p.type.create(D(p.attrs,"rowspan",p.attrs.rowspan-1),p.content),v=r.positionAt(n+1,l,i);e.insert(e.mapping.slice(u).map(o+v),m),l+=p.attrs.colspan-1}}}function Se(e,t){if(!C(e))return!1;if(t){var n=he(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;;i--){if(ke(r,n,i),i==n.top)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=v.get(n.table)}t(r)}return!0}function xe(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function _e(e,t){for(var n=e.width,r=e.height,i=e.map,o=t.top*n+t.left,s=o,a=(t.bottom-1)*n+t.left,c=o+(t.right-t.left-1),u=t.top;u<t.bottom;u++){if(t.left>0&&i[s]==i[s-1]||t.right<n&&i[c]==i[c+1])return!0;s+=n,c+=n}for(var l=t.left;l<t.right;l++){if(t.top>0&&i[o]==i[o-n]||t.bottom<r&&i[a]==i[a+n])return!0;o++,a++}return!1}function Ce(e,t){var n=e.selection;if(!(n instanceof j)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=he(e),i=r.map;if(_e(i,r))return!1;if(t){for(var o,s,c=e.tr,u={},l=a["c"].empty,h=r.top;h<r.bottom;h++)for(var f=r.left;f<r.right;f++){var d=i.map[h*i.width+f],p=r.table.nodeAt(d);if(!u[d])if(u[d]=!0,null==o)o=d,s=p;else{xe(p)||(l=l.append(p.content));var m=c.mapping.map(d+r.tableStart);c.delete(m,m+p.nodeSize)}}if(c.setNodeMarkup(o+r.tableStart,null,D(N(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),l.size){var v=o+1+s.content.size,g=xe(s)?o+1:v;c.replaceWith(g+r.tableStart,v+r.tableStart,l)}c.setSelection(new j(c.doc.resolve(o+r.tableStart))),t(c)}return!0}function Oe(e,t){var n=k(e.schema);return Me((function(e){var t=e.node;return n[t.type.spec.tableRole]}))(e,t)}function Me(e){return function(t,n){var r,i,o=t.selection;if(o instanceof j){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;r=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(r=_(o.$from),!r)return!1;i=x(o.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=D(s,"rowspan",1)),s.colspan>1&&(s=D(s,"colspan",1));for(var u,l=he(t),h=t.tr,f=0;f<l.right-l.left;f++)a.push(c?D(s,"colwidth",c&&c[f]?[c[f]]:null):s);for(var d=l.top;d<l.bottom;d++){var p=l.map.positionAt(d,l.left,l.table);d==l.top&&(p+=r.nodeSize);for(var m=l.left,v=0;m<l.right;m++,v++)m==l.left&&d==l.top||h.insert(u=h.mapping.map(p+l.tableStart,1),e({node:r,row:d,col:m}).createAndFill(a[v]))}h.setNodeMarkup(i,e({node:r,row:l.top,col:l.left}),a[0]),o instanceof j&&h.setSelection(new j(h.doc.resolve(o.$anchorCell.pos),u&&h.doc.resolve(u))),n(h)}return!0}}function Ee(e,t){return function(n,r){if(!C(n))return!1;var i=O(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){var o=n.tr;n.selection instanceof j?n.selection.forEachCell((function(n,r){n.attrs[e]!==t&&o.setNodeMarkup(r,null,D(n.attrs,e,t))})):o.setNodeMarkup(i.pos,null,D(i.nodeAfter.attrs,e,t)),r(o)}return!0}}function Ae(e){return function(t,n){if(!C(t))return!1;if(n){for(var r=k(t.schema),i=he(t),o=t.tr,s=i.map.cellsInRect("column"==e?new m(i.left,0,i.right,i.map.height):"row"==e?new m(0,i.top,i.map.width,i.bottom):i),a=s.map((function(e){return i.table.nodeAt(e)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[c],r.cell,a[c].attrs);if(0==o.steps.length)for(var u=0;u<s.length;u++)o.setNodeMarkup(i.tableStart+s[u],r.header_cell,a[u].attrs);n(o)}return!0}}function Te(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),i=0;i<r.length;i++){var o=t.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Re(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Ae(e):function(t,n){if(!C(t))return!1;if(n){var r=k(t.schema),i=he(t),o=t.tr,s=Te("row",i,r),a=Te("column",i,r),c="column"===e?s:"row"===e&&a,u=c?1:0,l="column"==e?new m(0,u,1,i.map.height):"row"==e?new m(u,0,i.map.width,1):i,h="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(l).forEach((function(e){var t=e+i.tableStart,n=o.doc.nodeAt(t);n&&o.setNodeMarkup(t,h,n.attrs)})),n(o)}return!0}}var De=Re("row",{useDeprecatedLogic:!0}),Ie=Re("column",{useDeprecatedLogic:!0}),Ne=Re("cell",{useDeprecatedLogic:!0});function Pe(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,i=e.before();r>=0;r--){var o=e.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),a=e.indexAfter(-1),c=e.after();a<s.childCount;a++){var u=s.child(a);if(u.childCount)return c+1;c+=u.nodeSize}}}function je(e){return function(t,n){if(!C(t))return!1;var r=Pe(O(t),e);if(null!=r){if(n){var i=t.doc.resolve(r);n(t.tr.setSelection(s["h"].between(i,A(i))).scrollIntoView())}return!0}}}function Le(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){var i=n.node(r);if("table"==i.type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Fe=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Be(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Be(e,t,n,r,i,o){for(var s=0,a=!0,c=t.firstChild,u=e.firstChild,l=0,h=0;l<u.childCount;l++)for(var f=u.child(l).attrs,d=f.colspan,p=f.colwidth,m=0;m<d;m++,h++){var v=i==h?o:p&&p[m],g=v?v+"px":"";s+=v||r,v||(a=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=g}while(c){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Fe.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,Be(e,this.colgroup,this.table,this.cellMinWidth),!0)},Fe.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var ze=new s["e"]("tableColumnResizing");function $e(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var r=e.View;void 0===r&&(r=Fe);var i=e.lastColumnResizable;void 0===i&&(i=!0);var o=new s["d"]({key:ze,state:{init:function(e,t){return this.spec.props.nodeViews[k(t.schema).table.name]=function(e,t){return new r(e,n,t)},new Ue(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){var t=ze.getState(e);return t.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,r){He(e,r,t,n,i)},mouseleave:function(e){Ve(e)},mousedown:function(e,t){We(e,t,n)}},decorations:function(e){var t=ze.getState(e);if(t.activeHandle>-1)return et(e,t.activeHandle)},nodeViews:{}}});return o}var Ue=function(e,t){this.activeHandle=e,this.dragging=t};function He(e,t,n,r,i){var o=ze.getState(e.state);if(!o.dragging){var s=Ke(t.target),a=-1;if(s){var c=s.getBoundingClientRect(),u=c.left,l=c.right;t.clientX-u<=n?a=Je(e,t,"left"):l-t.clientX<=n&&(a=Je(e,t,"right"))}if(a!=o.activeHandle){if(!i&&-1!==a){var h=e.state.doc.resolve(a),f=h.node(-1),d=v.get(f),p=h.start(-1),m=d.colCount(h.pos-p)+h.nodeAfter.attrs.colspan-1;if(m==d.width-1)return}Ge(e,a)}}}function Ve(e){var t=ze.getState(e.state);t.activeHandle>-1&&!t.dragging&&Ge(e,-1)}function We(e,t,n){var r=ze.getState(e.state);if(-1==r.activeHandle||r.dragging)return!1;var i=e.state.doc.nodeAt(r.activeHandle),o=qe(e,r.activeHandle,i.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=ze.getState(e.state);r.dragging&&(Xe(e,r.activeHandle,Ye(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(ze,{setDragging:null})))}function a(t){if(!t.which)return s(t);var r=ze.getState(e.state),i=Ye(r.dragging,t,n);Qe(e,r.activeHandle,i,n)}return e.dispatch(e.state.tr.setMeta(ze,{setDragging:{startX:t.clientX,startWidth:o}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function qe(e,t,n){var r=n.colspan,i=n.colwidth,o=i&&i[i.length-1];if(o)return o;var s=e.domAtPos(t),a=s.node.childNodes[s.offset],c=a.offsetWidth,u=r;if(i)for(var l=0;l<r;l++)i[l]&&(c-=i[l],u--);return c/u}function Ke(e){while(e&&"TD"!=e.nodeName&&"TH"!=e.nodeName)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Je(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;var i=r.pos,o=x(e.state.doc.resolve(i));if(!o)return-1;if("right"==n)return o.pos;var s=v.get(o.node(-1)),a=o.start(-1),c=s.map.indexOf(o.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function Ye(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Ge(e,t){e.dispatch(e.state.tr.setMeta(ze,{setHandle:t}))}function Xe(e,t,n){for(var r=e.state.doc.resolve(t),i=r.node(-1),o=v.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=e.state.tr,u=0;u<o.height;u++){var l=u*o.width+a;if(!u||o.map[l]!=o.map[l-o.width]){var h=o.map[l],f=i.nodeAt(h),d=f.attrs,p=1==d.colspan?0:a-o.colCount(h);if(!d.colwidth||d.colwidth[p]!=n){var m=d.colwidth?d.colwidth.slice():Ze(d.colspan);m[p]=n,c.setNodeMarkup(s+h,null,D(d,"colwidth",m))}}}c.docChanged&&e.dispatch(c)}function Qe(e,t,n,r){var i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=v.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,c=e.domAtPos(i.start(-1)).node;while("TABLE"!=c.nodeName)c=c.parentNode;Be(o,c.firstChild,c,r,a,n)}function Ze(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function et(e,t){for(var n=[],r=e.doc.resolve(t),i=r.node(-1),o=v.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,c=0;c<o.height;c++){var l=a+c*o.width-1;if((a==o.width||o.map[l]!=o.map[l+1])&&(0==c||o.map[l-1]!=o.map[l-1-o.width])){var h=o.map[l],f=s+h+i.nodeAt(h).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",n.push(u["a"].widget(f,d))}}return u["b"].create(e.doc,n)}function tt(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new s["d"]({key:S,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(S);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:F,handleDOMEvents:{mousedown:re},createSelectionBetween:function(e){if(null!=S.getState(e.state))return e.state.selection},handleTripleClick:te,handleKeyDown:G,handlePaste:ne},appendTransaction:function(e,n,r){return $(r,ue(r,n),t)}})}function nt(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var i=e.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=nt(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function rt(e,t,n,r){for(var i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=e.child(--i),a=t.child(--o),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var u=0,l=Math.min(s.text.length,a.text.length);while(u<l&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1])u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=rt(s.content,a.content,n-1,r-1);if(h)return h}n-=c,r-=c}else n-=c,r-=c}}Ue.prototype.apply=function(e){var t=this,n=e.getMeta(ze);if(n&&null!=n.setHandle)return new Ue(n.setHandle,null);if(n&&void 0!==n.setDragging)return new Ue(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);E(e.doc.resolve(r))||(r=null),t=new Ue(r,t.dragging)}return t};var it=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},ot={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};it.prototype.nodesBetween=function(e,t,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],c=s+a.nodeSize;if(c>e&&!1!==n(a,r+s,i,o)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,t-u),n,r+u)}s=c}},it.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},it.prototype.textBetween=function(e,t,n,r){var i="",o=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(i+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},it.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new it(r,this.size+e.size)},it.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var i=0,o=0;o<t;i++){var s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new it(n,r)},it.prototype.cutByIndex=function(e,t){return e==t?it.empty:0==e&&t==this.content.length?this:new it(this.content.slice(e,t))},it.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new it(r,i)},it.prototype.addToStart=function(e){return new it([e].concat(this.content),this.size+e.nodeSize)},it.prototype.addToEnd=function(e){return new it(this.content.concat(e),this.size+e.nodeSize)},it.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},ot.firstChild.get=function(){return this.content.length?this.content[0]:null},ot.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},ot.childCount.get=function(){return this.content.length},it.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},it.prototype.maybeChild=function(e){return this.content[e]},it.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},it.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),nt(this,e,t)},it.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),rt(this,e,t,n)},it.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return at(0,e);if(e==this.size)return at(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e||t>0?at(n+1,o):at(n,r);r=o}},it.prototype.toString=function(){return"<"+this.toStringInner()+">"},it.prototype.toStringInner=function(){return this.content.join(", ")},it.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},it.fromJSON=function(e,t){if(!t)return it.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new it(t.map(e.nodeFromJSON))},it.fromArray=function(e){if(!e.length)return it.empty;for(var t,n=0,r=0;r<e.length;r++){var i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new it(t||e,n)},it.from=function(e){if(!e)return it.empty;if(e instanceof it)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new it([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(it.prototype,ot);var st={index:0,offset:0};function at(e,t){return st.index=e,st.offset=t,st}function ct(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!ct(e[r],t[r]))return!1}else{for(var i in e)if(!(i in t)||!ct(e[i],t[i]))return!1;for(var o in t)if(!(o in e))return!1}return!0}it.empty=new it([],0);var ut=function(e,t){this.type=e,this.attrs=t};function lt(e){var t=Error.call(this,e);return t.__proto__=lt.prototype,t}ut.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t},ut.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},ut.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},ut.prototype.eq=function(e){return this==e||this.type==e.type&&ct(this.attrs,e.attrs)},ut.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},ut.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},ut.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},ut.setFrom=function(e){if(!e||0==e.length)return ut.none;if(e instanceof ut)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},ut.none=[],lt.prototype=Object.create(Error.prototype),lt.prototype.constructor=lt,lt.prototype.name="ReplaceError";var ht=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},ft={size:{configurable:!0}};function dt(e,t,n){var r=e.findIndex(t),i=r.index,o=r.offset,s=e.maybeChild(i),a=e.findIndex(n),c=a.index,u=a.offset;if(o==t||s.isText){if(u!=n&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(i,s.copy(dt(s.content,t-o-1,n-o-1)))}function pt(e,t,n,r){var i=e.findIndex(t),o=i.index,s=i.offset,a=e.maybeChild(o);if(s==t||a.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));var c=pt(a.content,t-s-1,n);return c&&e.replaceChild(o,a.copy(c))}function mt(e,t,n){if(n.openStart>e.depth)throw new lt("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new lt("Inconsistent open depths");return vt(e,t,n,0)}function vt(e,t,n,r){var i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){var s=vt(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var a=_t(n,e),c=a.start,u=a.end;return kt(o,St(e,c,u,t,r))}var l=e.parent,h=l.content;return kt(l,h.cut(0,e.parentOffset).append(n.content).append(h.cut(t.parentOffset)))}return kt(o,xt(e,t,r))}function gt(e,t){if(!t.type.compatibleContent(e.type))throw new lt("Cannot join "+t.type.name+" onto "+e.type.name)}function yt(e,t,n){var r=e.node(n);return gt(r,t.node(n)),r}function bt(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function wt(e,t,n,r){var i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(bt(e.nodeAfter,r),o++));for(var a=o;a<s;a++)bt(i.child(a),r);t&&t.depth==n&&t.textOffset&&bt(t.nodeBefore,r)}function kt(e,t){if(!e.type.validContent(t))throw new lt("Invalid content for node "+e.type.name);return e.copy(t)}function St(e,t,n,r,i){var o=e.depth>i&&yt(e,t,i+1),s=r.depth>i&&yt(n,r,i+1),a=[];return wt(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(gt(o,s),bt(kt(o,St(e,t,n,r,i+1)),a)):(o&&bt(kt(o,xt(e,t,i+1)),a),wt(t,n,i,a),s&&bt(kt(s,xt(n,r,i+1)),a)),wt(r,null,i,a),new it(a)}function xt(e,t,n){var r=[];if(wt(null,e,n,r),e.depth>n){var i=yt(e,t,n+1);bt(kt(i,xt(e,t,n+1)),r)}return wt(t,null,n,r),new it(r)}function _t(e,t){for(var n=t.depth-e.openStart,r=t.node(n),i=r.copy(e.content),o=n-1;o>=0;o--)i=t.node(o).copy(it.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}ft.size.get=function(){return this.content.size-this.openStart-this.openEnd},ht.prototype.insertAt=function(e,t){var n=pt(this.content,e+this.openStart,t,null);return n&&new ht(n,this.openStart,this.openEnd)},ht.prototype.removeBetween=function(e,t){return new ht(dt(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},ht.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},ht.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},ht.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},ht.fromJSON=function(e,t){if(!t)return ht.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new ht(it.fromJSON(e,t.content),n,r)},ht.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new ht(e,n,r)},Object.defineProperties(ht.prototype,ft),ht.empty=new ht(it.empty,0,0);var Ct=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},Ot={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Ct.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},Ot.parent.get=function(){return this.node(this.depth)},Ot.doc.get=function(){return this.node(0)},Ct.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},Ct.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},Ct.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},Ct.prototype.start=function(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1},Ct.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},Ct.prototype.before=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},Ct.prototype.after=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},Ot.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Ot.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},Ot.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},Ct.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,i=0;i<e;i++)r+=n.child(i).nodeSize;return r},Ct.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return ut.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},Ct.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},Ct.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},Ct.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Tt(this,e,n)},Ct.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},Ct.prototype.max=function(e){return e.pos>this.pos?e:this},Ct.prototype.min=function(e){return e.pos<this.pos?e:this},Ct.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},Ct.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,i=t,o=e;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,u=i-c;if(n.push(o,a,r+c),!u)break;if(o=o.child(a),o.isText)break;i=u-1,r+=c+1}return new Ct(t,n,i)},Ct.resolveCached=function(e,t){for(var n=0;n<Mt.length;n++){var r=Mt[n];if(r.pos==t&&r.doc==e)return r}var i=Mt[Et]=Ct.resolve(e,t);return Et=(Et+1)%At,i},Object.defineProperties(Ct.prototype,Ot);var Mt=[],Et=0,At=12,Tt=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},Rt={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Rt.start.get=function(){return this.$from.before(this.depth+1)},Rt.end.get=function(){return this.$to.after(this.depth+1)},Rt.parent.get=function(){return this.$from.node(this.depth)},Rt.startIndex.get=function(){return this.$from.index(this.depth)},Rt.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Tt.prototype,Rt);var Dt=Object.create(null),It=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||it.empty,this.marks=r||ut.none},Nt={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};function Pt(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}Nt.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Nt.childCount.get=function(){return this.content.childCount},It.prototype.child=function(e){return this.content.child(e)},It.prototype.maybeChild=function(e){return this.content.maybeChild(e)},It.prototype.forEach=function(e){this.content.forEach(e)},It.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},It.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},Nt.textContent.get=function(){return this.textBetween(0,this.content.size,"")},It.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},Nt.firstChild.get=function(){return this.content.firstChild},Nt.lastChild.get=function(){return this.content.lastChild},It.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},It.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},It.prototype.hasMarkup=function(e,t,n){return this.type==e&&ct(this.attrs,t||e.defaultAttrs||Dt)&&ut.sameSet(this.marks,n||ut.none)},It.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},It.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},It.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},It.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return ht.empty;var r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new ht(c,r.depth-o,i.depth-o)},It.prototype.replace=function(e,t,n){return mt(this.resolve(e),this.resolve(t),n)},It.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,i=n.offset;if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}},It.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},It.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},It.prototype.resolve=function(e){return Ct.resolveCached(this,e)},It.prototype.resolveNoCache=function(e){return Ct.resolve(this,e)},It.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},Nt.isBlock.get=function(){return this.type.isBlock},Nt.isTextblock.get=function(){return this.type.isTextblock},Nt.inlineContent.get=function(){return this.type.inlineContent},Nt.isInline.get=function(){return this.type.isInline},Nt.isText.get=function(){return this.type.isText},Nt.isLeaf.get=function(){return this.type.isLeaf},Nt.isAtom.get=function(){return this.type.isAtom},It.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Pt(this.marks,e)},It.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},It.prototype.canReplace=function(e,t,n,r,i){void 0===n&&(n=it.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},It.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd},It.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},It.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=ut.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!ut.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},It.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},It.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=it.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(It.prototype,Nt);var jt=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Lt={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};jt.parse=function(e,t){var n=new Ft(e,t);if(null==n.next)return jt.empty;var r=zt(n);n.next&&n.err("Unexpected trailing text");var i=Gt(Kt(r));return Xt(i,n),i},jt.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},jt.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r},Lt.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},Lt.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},jt.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},jt.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];function i(o,s){var a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return it.from(s.map((function(e){return e.createAndFill()})));for(var c=0;c<o.next.length;c+=2){var u=o.next[c],l=o.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var h=i(l,s.concat(u));if(h)return h}}}return i(this,[])},jt.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},jt.prototype.computeWrapping=function(e){var t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(e)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},Lt.edgeCount.get=function(){return this.next.length>>1},jt.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},jt.prototype.toString=function(){var e=[];function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}return t(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",i=0;i<t.next.length;i+=2)r+=(i?", ":"")+t.next[i].name+"->"+e.indexOf(t.next[i+1]);return r})).join("\n")},Object.defineProperties(jt.prototype,Lt),jt.empty=new jt(!0);var Ft=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Bt={next:{configurable:!0}};function zt(e){var t=[];do{t.push($t(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function $t(e){var t=[];do{t.push(Ut(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Ut(e){for(var t=qt(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Vt(e,t)}return t}function Ht(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Vt(e,t){var n=Ht(e),r=n;return e.eat(",")&&(r="}"!=e.next?Ht(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Wt(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(t)>-1&&i.push(s)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}function qt(e){if(e.eat("(")){var t=zt(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=Wt(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}function Kt(e){var t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(o(n,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=o(e.exprs[s],t);if(s==e.exprs.length-1)return a;i(a,t=n())}else{if("star"==e.type){var c=n();return r(t,c),i(o(e.expr,c),c),[r(c)]}if("plus"==e.type){var u=n();return i(o(e.expr,t),u),i(o(e.expr,u),u),[r(u)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){for(var l=t,h=0;h<e.min;h++){var f=n();i(o(e.expr,l),f),l=f}if(-1==e.max)i(o(e.expr,l),l);else for(var d=e.min;d<e.max;d++){var p=n();r(l,p),i(o(e.expr,l),p),l=p}return[r(l)]}if("name"==e.type)return[r(t,null,e.value)]}}}function Jt(e,t){return t-e}function Yt(e,t){var n=[];return r(t),n.sort(Jt);function r(t){var i=e[t];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(t);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function Gt(e){var t=Object.create(null);return n(Yt(e,0));function n(r){var i=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];Yt(e,r).forEach((function(e){s||i.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var o=t[r.join(",")]=new jt(r.indexOf(e.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Jt);o.next.push(i[s],t[a.join(",")]||n(a))}return o}}function Xt(e,t){for(var n=0,r=[e];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],u=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(u)&&r.push(u)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Qt(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Zt(e,t){var n=Object.create(null);for(var r in e){var i=t&&t[r];if(void 0===i){var o=e[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function en(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new rn(e[n]);return t}Bt.next.get=function(){return this.tokens[this.pos]},Ft.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Ft.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Ft.prototype,Bt);var tn=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=en(n.attrs),this.defaultAttrs=Qt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},nn={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};nn.isInline.get=function(){return!this.isBlock},nn.isTextblock.get=function(){return this.isBlock&&this.inlineContent},nn.isLeaf.get=function(){return this.contentMatch==jt.empty},nn.isAtom.get=function(){return this.isLeaf||this.spec.atom},tn.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},tn.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},tn.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Zt(this.attrs,e)},tn.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new It(this,this.computeAttrs(e),it.from(t),ut.setFrom(n))},tn.prototype.createChecked=function(e,t,n){if(t=it.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new It(this,this.computeAttrs(e),t,ut.setFrom(n))},tn.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),t=it.from(t),t.size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(it.empty,!0);return i?new It(this,e,t.append(i),ut.setFrom(n)):null},tn.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},tn.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},tn.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},tn.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:ut.empty:e},tn.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new tn(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(tn.prototype,nn);var rn=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},on={isRequired:{configurable:!0}};on.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(rn.prototype,on);var sn=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=en(r.attrs),this.rank=t,this.excluded=null;var i=Qt(this.attrs);this.instance=i&&new ut(this,i)};sn.prototype.create=function(e){return!e&&this.instance?this.instance:new ut(this,Zt(this.attrs,e))},sn.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,i){return n[e]=new sn(e,r++,t,i)})),n},sn.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},sn.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},sn.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var an={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cn={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},un={ol:!0,ul:!0},ln=1,hn=2,fn=4;function dn(e){return(e?ln:0)|("full"===e?hn:0)}var pn=function(e,t,n,r,i,o,s){this.type=e,this.attrs=t,this.solid=i,this.match=o||(s&fn?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=ut.none,this.pendingMarks=r,this.stashMarks=[]};pn.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(it.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},pn.prototype.finish=function(e){if(!(this.options&ln)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=it.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(it.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},pn.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},pn.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):bn(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},pn.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!an.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var mn=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,i=t.topNode,o=dn(t.preserveWhitespace)|(n?fn:0);r=i?new pn(i.type,i.attrs,ut.none,ut.none,!0,t.topMatch||i.type.contentMatch,o):new pn(n?null:e.schema.topNodeType,null,ut.none,ut.none,!0,null,o),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},vn={top:{configurable:!0},currentPos:{configurable:!0}};function gn(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&un.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}function yn(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function bn(e,t){var n=t.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(e)){var o=[],s=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),i=r.type,a=r.next;if(i==t)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function wn(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}vn.top.get=function(){return this.nodes[this.open]},mn.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(yn(t)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},mn.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(n.options&hn||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&ln)t=n.options&hn?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},mn.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();un.hasOwnProperty(r)&&this.parser.normalizeLists&&gn(e);var i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:cn.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);var o,s=this.top,a=this.needsBlock;if(an.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,i,!1===i.consuming?n:null)},mn.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},mn.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},mn.prototype.readStyles=function(e){var t=ut.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(e[n],e[n+1],this,r);if(!i)continue e;if(i.ignore)return null;if(t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;r=i}return t},mn.prototype.addElementByRule=function(e,t,n){var r,i,o,s,a=this;t.node?(i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark],s=o.create(t.attrs),this.addPendingMark(s));var c=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e)}));else{var u=t.contentElement;"string"==typeof u?u=e.querySelector(u):"function"==typeof u&&(u=u(e)),u||(u=e),this.findAround(e,u,!0),this.addAll(u,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},mn.prototype.addAll=function(e,t,n,r){for(var i=n||0,o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o),t&&an.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,i)},mn.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},mn.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,i=0;i<e.marks.length;i++)n.type&&!n.type.allowsMarkType(e.marks[i].type)||(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},mn.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},mn.prototype.enterInner=function(e,t,n,r){this.closeExtra();var i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e,t);var o=null==r?i.options&~fn:dn(r);i.options&fn&&0==i.content.length&&(o|=fn),this.nodes.push(new pn(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},mn.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},mn.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},mn.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},vn.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},mn.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},mn.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},mn.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){var i=t.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}},mn.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},mn.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(e,a){for(;e>=0;e--){var c=n[e];if(""==c){if(e==n.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var u=a>0||0==a&&i?t.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},mn.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},mn.prototype.addPendingMark=function(e){var t=wn(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},mn.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(e);if(i>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var o=r.popFromStashMark(e);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(mn.prototype,vn);var kn=65535,Sn=Math.pow(2,16);function xn(e,t){return e+t*Sn}function _n(e){return e&kn}function Cn(e){return(e-(e&kn))/Sn}var On=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},Mn=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};Mn.prototype.recover=function(e){var t=0,n=_n(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+Cn(e)},Mn.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Mn.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Mn.prototype._map=function(e,t,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var c=this.ranges[s+i],u=this.ranges[s+o],l=a+c;if(e<=l){var h=c?e==a?-1:e==l?1:t:t,f=a+r+(h<0?0:u);if(n)return f;var d=e==(t<0?a:l)?null:xn(s/3,e-a);return new On(f,t<0?e!=a:e!=l,d)}r+=u-c}return n?e+r:new On(e+r)},Mn.prototype.touches=function(e,t){for(var n=0,r=_n(t),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var c=this.ranges[s+i],u=a+c;if(e<=u&&s==3*r)return!0;n+=this.ranges[s+o]-c}return!1},Mn.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+t],u=this.ranges[r+n];e(s,s+c,a,a+u),i+=u-c}},Mn.prototype.invert=function(){return new Mn(this.ranges,!this.inverted)},Mn.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Mn.offset=function(e){return 0==e?Mn.empty:new Mn(e<0?[0,-e,0]:[0,0,e])},Mn.empty=new Mn([]);var En=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function An(e){var t=Error.call(this,e);return t.__proto__=An.prototype,t}En.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new En(this.maps,this.mirror,e,t)},En.prototype.copy=function(){return new En(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},En.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},En.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},En.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},En.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},En.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},En.prototype.invert=function(){var e=new En;return e.appendMappingInverted(this),e},En.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},En.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},En.prototype._map=function(e,t,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(e,t);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,e=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),e=s.pos}return n?e:new On(e,r)},An.prototype=Object.create(Error.prototype),An.prototype.constructor=An,An.prototype.name="TransformError";var Tn=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new En},Rn={before:{configurable:!0},docChanged:{configurable:!0}};function Dn(){throw new Error("Override me")}Rn.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Tn.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new An(t.failed);return this},Tn.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},Rn.docChanged.get=function(){return this.steps.length>0},Tn.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(Tn.prototype,Rn);var In=Object.create(null),Nn=function(){};Nn.prototype.apply=function(e){return Dn()},Nn.prototype.getMap=function(){return Mn.empty},Nn.prototype.invert=function(e){return Dn()},Nn.prototype.map=function(e){return Dn()},Nn.prototype.merge=function(e){return null},Nn.prototype.toJSON=function(){return Dn()},Nn.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=In[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},Nn.jsonID=function(e,t){if(e in In)throw new RangeError("Duplicate use of step JSON ID "+e);return In[e]=t,t.prototype.jsonID=e,t};var Pn=function(e,t){this.doc=e,this.failed=t};Pn.ok=function(e){return new Pn(e,null)},Pn.fail=function(e){return new Pn(null,e)},Pn.fromReplace=function(e,t,n,r){try{return Pn.ok(e.replace(t,n,r))}catch(i){if(i instanceof lt)return Pn.fail(i.message);throw i}};var jn=function(e){function t(t,n,r,i){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&Fn(e,this.from,this.to)?Pn.fail("Structure replace would overwrite content"):Pn.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Mn([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?ht.empty:new ht(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?ht.empty:new ht(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,ht.fromJSON(e,n.slice),!!n.structure)},t}(Nn);Nn.jsonID("replace",jn);var Ln=function(e){function t(t,n,r,i,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(Fn(e,this.from,this.gapFrom)||Fn(e,this.gapTo,this.to)))return Pn.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Pn.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?Pn.fromReplace(e,this.from,this.to,n):Pn.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Mn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,ht.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(Nn);function Fn(e,t,n){var r=e.resolve(t),i=n-t,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Bn(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function zn(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function $n(e,t,n){for(var r=[],i=0;i<e.childCount;i++){var o=e.child(i);o.content.size&&(o=o.copy($n(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return it.fromArray(r)}Nn.jsonID("replaceAround",Ln),Tn.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,i=e.depth,o=n.before(i+1),s=r.after(i+1),a=o,c=s,u=it.empty,l=0,h=i,f=!1;h>t;h--)f||n.index(h)>0?(f=!0,u=it.from(n.node(h).copy(u)),l++):a--;for(var d=it.empty,p=0,m=i,v=!1;m>t;m--)v||r.after(m+1)<r.end(m)?(v=!0,d=it.from(r.node(m).copy(d)),p++):c++;return this.step(new Ln(a,c,o,s,new ht(u.append(d),l,p),u.size-l,!0))},Tn.prototype.wrap=function(e,t){for(var n=it.empty,r=t.length-1;r>=0;r--)n=it.from(t[r].type.create(t[r].attrs,n));var i=e.start,o=e.end;return this.step(new Ln(i,o,i,o,new ht(n,0,0),t.length,!0))},Tn.prototype.setBlockType=function(e,t,n,r){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&Bn(i.doc,i.mapping.slice(o).map(t),n)){i.clearIncompatible(i.mapping.slice(o).map(t,1),n);var s=i.mapping.slice(o),a=s.map(t,1),c=s.map(t+e.nodeSize,1);return i.step(new Ln(a,c,a+1,c-1,new ht(it.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},Tn.prototype.setNodeMarkup=function(e,t,n,r){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var o=t.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Ln(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new ht(it.from(o),0,0),1,!0))},Tn.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),i=it.empty,o=it.empty,s=r.depth,a=r.depth-t,c=t-1;s>a;s--,c--){i=it.from(r.node(s).copy(i));var u=n&&n[c];o=it.from(u?u.type.create(u.attrs,o):r.node(s).copy(o))}return this.step(new jn(e,e,new ht(i.append(o),t,t),!0))},Tn.prototype.join=function(e,t){void 0===t&&(t=1);var n=new jn(e-t,e+t,ht.empty,!0);return this.step(n)};var Un=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new ht($n(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return Pn.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new Hn(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Nn);Nn.jsonID("addMark",Un);var Hn=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new ht($n(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return Pn.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new Un(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Nn);function Vn(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=ht.empty),t==n&&!r.size)return null;var i=e.resolve(t),o=e.resolve(n);return Wn(i,o,r)?new jn(t,n,r):new qn(i,o,r).fit()}function Wn(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Nn.jsonID("removeMark",Hn),Tn.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,u){if(r.isInline){var l=r.marks;if(!n.isInSet(l)&&u.type.allowsMarkType(n.type)){for(var h=Math.max(c,e),f=Math.min(c+r.nodeSize,t),d=n.addToSet(l),p=0;p<l.length;p++)l[p].isInSet(d)||(s&&s.to==h&&s.mark.eq(l[p])?s.to=f:i.push(s=new Hn(h,f,l[p])));a&&a.to==h?a.to=f:o.push(a=new Un(h,f,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},Tn.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var i=[],o=0;return this.doc.nodesBetween(e,t,(function(r,s){if(r.isInline){o++;var a=null;if(n instanceof sn){var c,u=r.marks;while(c=n.isInSet(u))(a||(a=[])).push(c),u=c.removeFromSet(u)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var l=Math.min(s+r.nodeSize,t),h=0;h<a.length;h++){for(var f=a[h],d=void 0,p=0;p<i.length;p++){var m=i[p];m.step==o-1&&f.eq(i[p].style)&&(d=m)}d?(d.to=l,d.step=o):i.push({style:f,from:Math.max(s,e),to:l,step:o})}}})),i.forEach((function(e){return r.step(new Hn(e.from,e.to,e.style))})),this},Tn.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),i=[],o=e+1,s=0;s<r.childCount;s++){var a=r.child(s),c=o+a.nodeSize,u=n.matchType(a.type,a.attrs);if(u){n=u;for(var l=0;l<a.marks.length;l++)t.allowsMarkType(a.marks[l].type)||this.step(new Hn(o,c,a.marks[l]))}else i.push(new jn(o,c,ht.empty));o=c}if(!n.validEnd){var h=n.fillBefore(it.empty,!0);this.replace(o,o,new ht(h,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},Tn.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=ht.empty);var r=Vn(this.doc,e,t,n);return r&&this.step(r),this},Tn.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new ht(it.from(n),0,0))},Tn.prototype.delete=function(e,t){return this.replace(e,t,ht.empty)},Tn.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var qn=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var i=e.node(r);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(r))})}this.placed=it.empty;for(var o=e.depth;o>0;o--)this.placed=it.from(e.node(o).copy(this.placed))},Kn={depth:{configurable:!0}};function Jn(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Jn(e.firstChild.content,t-1,n)))}function Yn(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Yn(e.lastChild.content,t-1,n)))}function Gn(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Xn(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Xn(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(it.empty,!0)))),e.copy(r)}function Qn(e,t,n,r,i){var o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!Zn(n,o.content,s)?a:null}function Zn(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function er(e,t,n,r,i){if(t<n){var o=e.firstChild;e=e.replaceChild(0,o.copy(er(o.content,t+1,n,r,o)))}if(t>r){var s=i.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(it.empty,!0))}return e}function tr(e,t){for(var n=[],r=Math.min(e.depth,t.depth),i=r;i>=0;i--){var o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;o==t.start(i)&&n.push(i)}return n}Kn.depth.get=function(){return this.frontier.length-1},qn.prototype.fit=function(){while(this.unplaced.size){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;var o=this.placed,s=r.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;var c=new ht(o,s,a);return t>-1?new Ln(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new jn(r.pos,i.pos,c):void 0},qn.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--){var n=void 0,r=void 0;t?(r=Gn(this.unplaced.content,t-1).firstChild,n=r.content):n=this.unplaced.content;for(var i=n.firstChild,o=this.depth;o>=0;o--){var s=this.frontier[o],a=s.type,c=s.match,u=void 0,l=void 0;if(1==e&&(i?c.matchType(i.type)||(l=c.fillBefore(it.from(i),!1)):a.compatibleContent(r.type)))return{sliceDepth:t,frontierDepth:o,parent:r,inject:l};if(2==e&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:t,frontierDepth:o,parent:r,wrap:u};if(r&&c.matchType(r.type))break}}},qn.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=Gn(t,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new ht(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)},qn.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,i=Gn(t,n);if(i.childCount<=1&&n>0){var o=t.size-n<=n+i.size;this.unplaced=new ht(Jn(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ht(Jn(t,n,1),n,r)},qn.prototype.placeNodes=function(e){var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,i=e.inject,o=e.wrap;while(this.depth>n)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,c=r?r.content:a.content,u=a.openStart-t,l=0,h=[],f=this.frontier[n],d=f.match,p=f.type;if(i){for(var m=0;m<i.childCount;m++)h.push(i.child(m));d=d.matchFragment(i)}var v=c.size+t-(a.content.size-a.openEnd);while(l<c.childCount){var g=c.child(l),y=d.matchType(g.type);if(!y)break;l++,(l>1||0==u||g.content.size)&&(d=y,h.push(Xn(g.mark(p.allowedMarks(g.marks)),1==l?u:0,l==c.childCount?v:-1)))}var b=l==c.childCount;b||(v=-1),this.placed=Yn(this.placed,n,it.from(h)),this.frontier[n].match=d,b&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,k=c;w<v;w++){var S=k.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),k=S.content}this.unplaced=b?0==t?ht.empty:new ht(Jn(a.content,t-1,1),t-1,v<0?a.openEnd:t-1):new ht(Jn(a.content,t,l),a.openStart,a.openEnd)},qn.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Qn(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;var n=this.$to,r=n.depth,i=this.$to.after(r);while(r>1&&i==this.$to.end(--r))++i;return i},qn.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,i=n.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Qn(e,t,i,r,o);if(s){for(var a=t-1;a>=0;a--){var c=this.frontier[a],u=c.match,l=c.type,h=Qn(e,a,l,u,!0);if(!h||h.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}},qn.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=Yn(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,i)}return e},qn.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Yn(this.placed,this.depth,it.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},qn.prototype.closeFrontierNode=function(){var e=this.frontier.pop(),t=e.match.fillBefore(it.empty,!0);t.childCount&&(this.placed=Yn(this.placed,this.frontier.length,t))},Object.defineProperties(qn.prototype,Kn),Tn.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),i=this.doc.resolve(t);if(Wn(r,i,n))return this.step(new jn(e,t,n));var o=tr(r,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var s=-(r.depth+1);o.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;o.indexOf(a)>-1?s=a:r.before(a)==c&&o.splice(1,0,-a)}for(var l=o.indexOf(s),h=[],f=n.openStart,d=n.content,p=0;;p++){var m=d.firstChild;if(h.push(m),p==n.openStart)break;d=m.content}f>0&&h[f-1].type.spec.defining&&r.node(l).type!=h[f-1].type?f-=1:f>=2&&h[f-1].isTextblock&&h[f-2].type.spec.defining&&r.node(l).type!=h[f-2].type&&(f-=2);for(var v=n.openStart;v>=0;v--){var g=(v+f+1)%(n.openStart+1),y=h[g];if(y)for(var b=0;b<o.length;b++){var w=o[(b+l)%o.length],k=!0;w<0&&(k=!1,w=-w);var S=r.node(w-1),x=r.index(w-1);if(S.canReplaceWith(x,x,y.type,y.marks))return this.replace(r.before(w),k?i.after(w):t,new ht(er(n.content,0,n.openStart,g),g,n.openEnd))}}for(var _=this.steps.length,C=o.length-1;C>=0;C--){if(this.replace(e,t,n),this.steps.length>_)break;var O=o[C];O<0||(e=r.before(O),t=i.after(O))}return this},Tn.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=zn(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new ht(it.from(n),0,0))},Tn.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=tr(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)};var nr=Object.create(null),rr=function(e,t,n){this.ranges=n||[new or(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},ir={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};ir.anchor.get=function(){return this.$anchor.pos},ir.head.get=function(){return this.$head.pos},ir.from.get=function(){return this.$from.pos},ir.to.get=function(){return this.$to.pos},ir.$from.get=function(){return this.ranges[0].$from},ir.$to.get=function(){return this.ranges[0].$to},ir.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},rr.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},rr.prototype.replace=function(e,t){void 0===t&&(t=ht.empty);for(var n=t.content.lastChild,r=null,i=0;i<t.openEnd;i++)r=n,n=n.lastChild;for(var o=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],u=c.$from,l=c.$to,h=e.mapping.slice(o);e.replaceRange(h.map(u.pos),h.map(l.pos),a?ht.empty:t),0==a&&dr(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}},rr.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=e.mapping.slice(n),u=c.map(s.pos),l=c.map(a.pos);i?e.deleteRange(u,l):(e.replaceRangeWith(u,l,t),dr(e,n,t.isInline?-1:1))}},rr.findFrom=function(e,t,n){var r=e.parent.inlineContent?new sr(e):fr(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var i=e.depth-1;i>=0;i--){var o=t<0?fr(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):fr(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}},rr.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new lr(e.node(0))},rr.atStart=function(e){return fr(e,e,0,0,1)||new lr(e)},rr.atEnd=function(e){return fr(e,e,e.content.size,e.childCount,-1)||new lr(e)},rr.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=nr[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},rr.jsonID=function(e,t){if(e in nr)throw new RangeError("Duplicate use of selection JSON ID "+e);return nr[e]=t,t.prototype.jsonID=e,t},rr.prototype.getBookmark=function(){return sr.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(rr.prototype,ir),rr.prototype.visible=!0;var or=function(e,t){this.$from=e,this.$to=t},sr=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return e.near(i);var o=n.resolve(r.map(this.anchor));return new t(o.parent.inlineContent?o:i,i)},t.prototype.replace=function(t,n){if(void 0===n&&(n=ht.empty),e.prototype.replace.call(this,t,n),n==ht.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new ar(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,i,!0)||e.findFrom(r,-i,!0);if(!s)return e.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(e.findFrom(n,-i,!0)||e.findFrom(n,i,!0)).$anchor,n.pos<r.pos!=o<0&&(n=r))),new t(n,r)},Object.defineProperties(t.prototype,n),t}(rr);rr.jsonID("text",sr);var ar=function(e,t){this.anchor=e,this.head=t};ar.prototype.map=function(e){return new ar(e.map(this.anchor),e.map(this.head))},ar.prototype.resolve=function(e){return sr.between(e.resolve(this.anchor),e.resolve(this.head))};var cr=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new ht(it.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new ur(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(rr);cr.prototype.visible=!1,rr.jsonID("node",cr);var ur=function(e){this.anchor=e};ur.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new ar(r,r):new ur(r)},ur.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&cr.isSelectable(n)?new cr(t):rr.near(t)};var lr=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=ht.empty),n==ht.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return hr},t}(rr);rr.jsonID("all",lr);var hr={map:function(){return this},resolve:function(e){return new lr(e)}};function fr(e,t,n,r,i,o){if(t.inlineContent)return sr.create(e,n);for(var s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){var a=t.child(s);if(a.isAtom){if(!o&&cr.isSelectable(a))return cr.create(e,n-(i<0?a.nodeSize:0))}else{var c=fr(e,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function dr(e,t,n){var r=e.steps.length-1;if(!(r<t)){var i=e.steps[r];if(i instanceof jn||i instanceof Ln){var o,s=e.mapping.maps[r];s.forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(rr.near(e.doc.resolve(o),n))}}}var pr=1,mr=2,vr=4,gr=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|pr)&~mr,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&pr)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=mr,this},t.prototype.ensureMarks=function(e){return ut.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&mr)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=this.updated&~mr,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||ut.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(t);i=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(rr.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=vr,this},n.scrolledIntoView.get=function(){return(this.updated&vr)>0},Object.defineProperties(t.prototype,n),t}(Tn);function yr(e,t){return t&&e?e.bind(t):e}var br=function(e,t,n){this.name=e,this.init=yr(t.init,n),this.apply=yr(t.apply,n)},wr=[new br("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new br("selection",{init:function(e,t){return e.selection||rr.atStart(t.doc)},apply:function(e){return e.selection}}),new br("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new br("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],kr=function(e,t){var n=this;this.schema=e,this.fields=wr.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new br(e.key,e.spec.state,e))}))},Sr=function(e){this.config=e},xr={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};xr.schema.get=function(){return this.config.schema},xr.plugins.get=function(){return this.config.plugins},Sr.prototype.apply=function(e){return this.applyTransaction(e).state},Sr.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},Sr.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,u=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<o?{state:n,n:t.length}:{state:this,n:0})}t.push(u),n=n.applyInner(u),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}},Sr.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new Sr(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}for(var o=0;o<_r.length;o++)_r[o](this,e,t);return t},xr.tr.get=function(){return new gr(this)},Sr.create=function(e){for(var t=new kr(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Sr(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},Sr.prototype.reconfigure=function(e){for(var t=new kr(this.schema,e.plugins),n=t.fields,r=new Sr(t),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,r)}return r},Sr.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t},Sr.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new kr(e.schema,e.plugins),i=new Sr(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=It.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=rr.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var o in n){var s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[r.name]=a.fromJSON.call(s,e,t[o],i))}i[r.name]=r.init(e,i)}})),i},Sr.addApplyListener=function(e){_r.push(e)},Sr.removeApplyListener=function(e){var t=_r.indexOf(e);t>-1&&_r.splice(t,1)},Object.defineProperties(Sr.prototype,xr);var _r=[];function Cr(e,t){return t?e.createChecked(null,t):e.createAndFill()}function Or(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function Mr(e,t,n,r,i){const o=Or(e),s=[],a=[];for(let u=0;u<n;u+=1){const e=Cr(o.cell,i);if(e&&a.push(e),r){const e=Cr(o.header_cell,i);e&&s.push(e)}}const c=[];for(let u=0;u<t;u+=1)c.push(o.row.createChecked(null,r&&0===u?s:a));return o.table.createChecked(null,c)}function Er(e){return e instanceof j}const Ar=({editor:e})=>{const{selection:t}=e.state;if(!Er(t))return!1;let n=0;const r=Object(o["g"])(t.ranges[0].$from,e=>"table"===e.type.name);null===r||void 0===r||r.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(n+=1)});const i=n===t.ranges.length;return!!i&&(e.commands.deleteTable(),!0)};function Tr(e,t,n,r,i,o){let s=0,a=!0,c=t.firstChild;const u=e.firstChild;for(let l=0,h=0;l<u.childCount;l+=1){const{colspan:e,colwidth:n}=u.child(l).attrs;for(let u=0;u<e;u+=1,h+=1){const e=i===h?o:n&&n[u],l=e?e+"px":"";s+=e||r,e||(a=!1),c?(c.style.width!==l&&(c.style.width=l),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=l}}while(c){const e=c.nextSibling;c.parentNode.removeChild(c),c=e}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}class Rr{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Tr(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type===this.node.type&&(this.node=e,Tr(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}}const Dr=o["d"].create({name:"table",defaultOptions:{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Rr,lastColumnResizable:!0,allowTableNodeSelection:!1},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:e}){return["table",Object(o["n"])(this.options.HTMLAttributes,e),["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const s=Mr(o.schema,e,t,n);if(i){const e=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(sr.near(r.doc.resolve(e)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>de(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>pe(e,t),deleteColumn:()=>({state:e,dispatch:t})=>ve(e,t),addRowBefore:()=>({state:e,dispatch:t})=>be(e,t),addRowAfter:()=>({state:e,dispatch:t})=>we(e,t),deleteRow:()=>({state:e,dispatch:t})=>Se(e,t),deleteTable:()=>({state:e,dispatch:t})=>Le(e,t),mergeCells:()=>({state:e,dispatch:t})=>Ce(e,t),splitCell:()=>({state:e,dispatch:t})=>Oe(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>Ie(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>De(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>Ne(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>!!Ce(e,t)||Oe(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>Ee(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>je(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>je(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&ue(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const n=j.create(t.doc,e.anchorCell,e.headCell);t.setSelection(n)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Ar,"Mod-Backspace":Ar,Delete:Ar,"Mod-Delete":Ar}},addProseMirrorPlugins(){return[...this.options.resizable?[$e({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],tt({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options};return{tableRole:Object(o["f"])(Object(o["h"])(e,"tableRole",t))}}});t["a"]=Dr},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d03":function(e,t,n){var r=n("6eeb"),i=Date.prototype,o="Invalid Date",s="toString",a=i[s],c=i.getTime;String(new Date(NaN))!=o&&r(i,s,(function(){var e=c.call(this);return e===e?a.call(this):o}))},"0d3b":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("c430"),s=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t["delete"]("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},1037:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("9980"),i=n("5313"),o=n("0ac0");function s(e){return void 0===e&&(e={}),new i["d"]({view:function(t){return new a(t,e)}})}var a=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};a.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},a.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())},a.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},a.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var i=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,c,u=this.editorView.dom.offsetParent;if(this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!u||u==document.body&&"static"==getComputedStyle(u).position)a=-pageXOffset,c=-pageYOffset;else{var l=u.getBoundingClientRect();a=l.left-u.scrollLeft,c=l.top-u.scrollTop}this.element.style.left=e.left-a+"px",this.element.style.top=e.top-c+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},a.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},a.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(n=Object(o["g"])(this.editorView.state.doc,n,this.editorView.dragging.slice),null==n))return this.setCursor(null);this.setCursor(n),this.scheduleRemoval(5e3)}}},a.prototype.dragend=function(){this.scheduleRemoval(20)},a.prototype.drop=function(){this.scheduleRemoval(20)},a.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};const c=r["b"].create({name:"dropCursor",defaultOptions:{color:"currentColor",width:1,class:null},addProseMirrorPlugins(){return[s(this.options)]}})},"107c":function(e,t,n){var r=n("d039");e.exports=r((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14b4":function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"hardBreak",defaultOptions:{HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Object(r["n"])(this.options.HTMLAttributes,e)]},addCommands(){return{setHardBreak:()=>({commands:e})=>e.first([()=>e.exitCode(),()=>e.insertContent({type:this.name})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});t["a"]=i},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),s=n("9112");for(var a in i){var c=r[a],u=c&&c.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(l){u.forEach=o}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"1ab4":function(e,t,n){"use strict";n.d(t,"a",(function(){return bn}));var r=n("9980"),i=n("5313");function o(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function s(e){var t=o(e).Element;return e instanceof t||e instanceof Element}function a(e){var t=o(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function c(e){if("undefined"===typeof ShadowRoot)return!1;var t=o(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var u=Math.round;function l(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;return a(e)&&t&&(r=n.width/e.offsetWidth||1,i=n.height/e.offsetHeight||1),{width:u(n.width/r),height:u(n.height/i),top:u(n.top/i),right:u(n.right/r),bottom:u(n.bottom/i),left:u(n.left/r),x:u(n.left/r),y:u(n.top/i)}}function h(e){var t=o(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function f(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function d(e){return e!==o(e)&&a(e)?f(e):h(e)}function p(e){return e?(e.nodeName||"").toLowerCase():null}function m(e){return((s(e)?e.ownerDocument:e.document)||window.document).documentElement}function v(e){return l(m(e)).left+h(e).scrollLeft}function g(e){return o(e).getComputedStyle(e)}function y(e){var t=g(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function b(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return 1!==n||1!==r}function w(e,t,n){void 0===n&&(n=!1);var r=a(t),i=a(t)&&b(t),o=m(t),s=l(e,i),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==p(t)||y(o))&&(c=d(t)),a(t)?(u=l(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=v(o))),{x:s.left+c.scrollLeft-u.x,y:s.top+c.scrollTop-u.y,width:s.width,height:s.height}}function k(e){var t=l(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function S(e){return"html"===p(e)?e:e.assignedSlot||e.parentNode||(c(e)?e.host:null)||m(e)}function x(e){return["html","body","#document"].indexOf(p(e))>=0?e.ownerDocument.body:a(e)&&y(e)?e:x(S(e))}function _(e,t){var n;void 0===t&&(t=[]);var r=x(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=o(r),a=i?[s].concat(s.visualViewport||[],y(r)?r:[]):r,c=t.concat(a);return i?c:c.concat(_(S(a)))}function C(e){return["table","td","th"].indexOf(p(e))>=0}function O(e){return a(e)&&"fixed"!==g(e).position?e.offsetParent:null}function M(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&a(e)){var r=g(e);if("fixed"===r.position)return null}var i=S(e);while(a(i)&&["html","body"].indexOf(p(i))<0){var o=g(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}function E(e){var t=o(e),n=O(e);while(n&&C(n)&&"static"===g(n).position)n=O(n);return n&&("html"===p(n)||"body"===p(n)&&"static"===g(n).position)?t:n||M(e)||t}var A="top",T="bottom",R="right",D="left",I="auto",N=[A,T,R,D],P="start",j="end",L="clippingParents",F="viewport",B="popper",z="reference",$=N.reduce((function(e,t){return e.concat([t+"-"+P,t+"-"+j])}),[]),U=[].concat(N,[I]).reduce((function(e,t){return e.concat([t,t+"-"+P,t+"-"+j])}),[]),H="beforeRead",V="read",W="afterRead",q="beforeMain",K="main",J="afterMain",Y="beforeWrite",G="write",X="afterWrite",Q=[H,V,W,q,K,J,Y,G,X];function Z(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name);var o=[].concat(e.requires||[],e.requiresIfExists||[]);o.forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function ee(e){var t=Z(e);return Q.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}function te(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function ne(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}var re={placement:"bottom",modifiers:[],strategy:"absolute"};function ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function oe(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?re:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},re,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],c=!1,u={state:i,setOptions:function(n){h(),i.options=Object.assign({},o,i.options,n),i.scrollParents={reference:s(e)?_(e):e.contextElement?_(e.contextElement):[],popper:_(t)};var a=ee(ne([].concat(r,i.options.modifiers)));return i.orderedModifiers=a.filter((function(e){return e.enabled})),l(),u.update()},forceUpdate:function(){if(!c){var e=i.elements,t=e.reference,n=e.popper;if(ie(t,n)){i.rects={reference:w(t,E(n),"fixed"===i.options.strategy),popper:k(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,l=void 0===a?{}:a,h=o.name;"function"===typeof s&&(i=s({state:i,options:l,name:h,instance:u})||i)}else i.reset=!1,r=-1}}},update:te((function(){return new Promise((function(e){u.forceUpdate(),e(i)}))})),destroy:function(){h(),c=!0}};if(!ie(e,t))return u;function l(){i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:u,options:r}),c=function(){};a.push(s||c)}}))}function h(){a.forEach((function(e){return e()})),a=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var se={passive:!0};function ae(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,a=r.resize,c=void 0===a||a,u=o(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",n.update,se)})),c&&u.addEventListener("resize",n.update,se),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",n.update,se)})),c&&u.removeEventListener("resize",n.update,se)}}var ce={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ae,data:{}};function ue(e){return e.split("-")[0]}function le(e){return e.split("-")[1]}function he(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function fe(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?ue(i):null,s=i?le(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case A:t={x:a,y:n.y-r.height};break;case T:t={x:a,y:n.y+n.height};break;case R:t={x:n.x+n.width,y:c};break;case D:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=o?he(o):null;if(null!=u){var l="y"===u?"height":"width";switch(s){case P:t[u]=t[u]-(n[l]/2-r[l]/2);break;case j:t[u]=t[u]+(n[l]/2-r[l]/2);break;default:}}return t}function de(e){var t=e.state,n=e.name;t.modifiersData[n]=fe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var pe={name:"popperOffsets",enabled:!0,phase:"read",fn:de,data:{}},me=Math.max,ve=Math.min,ge=Math.round,ye={top:"auto",right:"auto",bottom:"auto",left:"auto"};function be(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:ge(ge(t*i)/i)||0,y:ge(ge(n*i)/i)||0}}function we(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.offsets,a=e.position,c=e.gpuAcceleration,u=e.adaptive,l=e.roundOffsets,h=!0===l?be(s):"function"===typeof l?l(s):s,f=h.x,d=void 0===f?0:f,p=h.y,v=void 0===p?0:p,y=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),w=D,k=A,S=window;if(u){var x=E(n),_="clientHeight",C="clientWidth";x===o(n)&&(x=m(n),"static"!==g(x).position&&(_="scrollHeight",C="scrollWidth")),x=x,i===A&&(k=T,v-=x[_]-r.height,v*=c?1:-1),i===D&&(w=R,d-=x[C]-r.width,d*=c?1:-1)}var O,M=Object.assign({position:a},u&&ye);return c?Object.assign({},M,(O={},O[k]=b?"0":"",O[w]=y?"0":"",O.transform=(S.devicePixelRatio||1)<2?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",O)):Object.assign({},M,(t={},t[k]=b?v+"px":"",t[w]=y?d+"px":"",t.transform="",t))}function ke(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,u={placement:ue(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,we(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,we(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Se={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ke,data:{}};function xe(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];a(i)&&p(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))}function _e(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]),s=o.reduce((function(e,t){return e[t]="",e}),{});a(r)&&p(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}}var Ce={name:"applyStyles",enabled:!0,phase:"write",fn:xe,effect:_e,requires:["computeStyles"]};function Oe(e,t,n){var r=ue(e),i=[D,A].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[D,R].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Me(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=U.reduce((function(e,n){return e[n]=Oe(n,t.rects,o),e}),{}),a=s[t.placement],c=a.x,u=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=s}var Ee={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Me},Ae={left:"right",right:"left",bottom:"top",top:"bottom"};function Te(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ae[e]}))}var Re={start:"end",end:"start"};function De(e){return e.replace(/start|end/g,(function(e){return Re[e]}))}function Ie(e){var t=o(e),n=m(e),r=t.visualViewport,i=n.clientWidth,s=n.clientHeight,a=0,c=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,c=r.offsetTop)),{width:i,height:s,x:a+v(e),y:c}}function Ne(e){var t,n=m(e),r=h(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=me(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=me(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+v(e),c=-r.scrollTop;return"rtl"===g(i||n).direction&&(a+=me(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function Pe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&c(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function je(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Le(e){var t=l(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Fe(e,t){return t===F?je(Ie(e)):a(t)?Le(t):je(Ne(m(e)))}function Be(e){var t=_(S(e)),n=["absolute","fixed"].indexOf(g(e).position)>=0,r=n&&a(e)?E(e):e;return s(r)?t.filter((function(e){return s(e)&&Pe(e,r)&&"body"!==p(e)})):[]}function ze(e,t,n){var r="clippingParents"===t?Be(e):[].concat(t),i=[].concat(r,[n]),o=i[0],s=i.reduce((function(t,n){var r=Fe(e,n);return t.top=me(r.top,t.top),t.right=ve(r.right,t.right),t.bottom=ve(r.bottom,t.bottom),t.left=me(r.left,t.left),t}),Fe(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function $e(){return{top:0,right:0,bottom:0,left:0}}function Ue(e){return Object.assign({},$e(),e)}function He(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Ve(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?L:o,c=n.rootBoundary,u=void 0===c?F:c,h=n.elementContext,f=void 0===h?B:h,d=n.altBoundary,p=void 0!==d&&d,v=n.padding,g=void 0===v?0:v,y=Ue("number"!==typeof g?g:He(g,N)),b=f===B?z:B,w=e.elements.reference,k=e.rects.popper,S=e.elements[p?b:f],x=ze(s(S)?S:S.contextElement||m(e.elements.popper),a,u),_=l(w),C=fe({reference:_,element:k,strategy:"absolute",placement:i}),O=je(Object.assign({},k,C)),M=f===B?O:_,E={top:x.top-M.top+y.top,bottom:M.bottom-x.bottom+y.bottom,left:x.left-M.left+y.left,right:M.right-x.right+y.right},D=e.modifiersData.offset;if(f===B&&D){var I=D[i];Object.keys(E).forEach((function(e){var t=[R,T].indexOf(e)>=0?1:-1,n=[A,T].indexOf(e)>=0?"y":"x";E[e]+=I[n]*t}))}return E}function We(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?U:c,l=le(r),h=l?a?$:$.filter((function(e){return le(e)===l})):N,f=h.filter((function(e){return u.indexOf(e)>=0}));0===f.length&&(f=h);var d=f.reduce((function(t,n){return t[n]=Ve(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[ue(n)],t}),{});return Object.keys(d).sort((function(e,t){return d[e]-d[t]}))}function qe(e){if(ue(e)===I)return[];var t=Te(e);return[De(e),t,De(t)]}function Ke(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,u=n.padding,l=n.boundary,h=n.rootBoundary,f=n.altBoundary,d=n.flipVariations,p=void 0===d||d,m=n.allowedAutoPlacements,v=t.options.placement,g=ue(v),y=g===v,b=c||(y||!p?[Te(v)]:qe(v)),w=[v].concat(b).reduce((function(e,n){return e.concat(ue(n)===I?We(t,{placement:n,boundary:l,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),k=t.rects.reference,S=t.rects.popper,x=new Map,_=!0,C=w[0],O=0;O<w.length;O++){var M=w[O],E=ue(M),N=le(M)===P,j=[A,T].indexOf(E)>=0,L=j?"width":"height",F=Ve(t,{placement:M,boundary:l,rootBoundary:h,altBoundary:f,padding:u}),B=j?N?R:D:N?T:A;k[L]>S[L]&&(B=Te(B));var z=Te(B),$=[];if(o&&$.push(F[E]<=0),a&&$.push(F[B]<=0,F[z]<=0),$.every((function(e){return e}))){C=M,_=!1;break}x.set(M,$)}if(_)for(var U=p?3:1,H=function(e){var t=w.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},V=U;V>0;V--){var W=H(V);if("break"===W)break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}}var Je={name:"flip",enabled:!0,phase:"main",fn:Ke,requiresIfExists:["offset"],data:{_skip:!1}};function Ye(e){return"x"===e?"y":"x"}function Ge(e,t,n){return me(e,ve(t,n))}function Xe(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,h=n.padding,f=n.tether,d=void 0===f||f,p=n.tetherOffset,m=void 0===p?0:p,v=Ve(t,{boundary:c,rootBoundary:u,padding:h,altBoundary:l}),g=ue(t.placement),y=le(t.placement),b=!y,w=he(g),S=Ye(w),x=t.modifiersData.popperOffsets,_=t.rects.reference,C=t.rects.popper,O="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,M={x:0,y:0};if(x){if(o||a){var I="y"===w?A:D,N="y"===w?T:R,j="y"===w?"height":"width",L=x[w],F=x[w]+v[I],B=x[w]-v[N],z=d?-C[j]/2:0,$=y===P?_[j]:C[j],U=y===P?-C[j]:-_[j],H=t.elements.arrow,V=d&&H?k(H):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:$e(),q=W[I],K=W[N],J=Ge(0,_[j],V[j]),Y=b?_[j]/2-z-J-q-O:$-J-q-O,G=b?-_[j]/2+z+J+K+O:U+J+K+O,X=t.elements.arrow&&E(t.elements.arrow),Q=X?"y"===w?X.clientTop||0:X.clientLeft||0:0,Z=t.modifiersData.offset?t.modifiersData.offset[t.placement][w]:0,ee=x[w]+Y-Z-Q,te=x[w]+G-Z;if(o){var ne=Ge(d?ve(F,ee):F,L,d?me(B,te):B);x[w]=ne,M[w]=ne-L}if(a){var re="x"===w?A:D,ie="x"===w?T:R,oe=x[S],se=oe+v[re],ae=oe-v[ie],ce=Ge(d?ve(se,ee):se,oe,d?me(ae,te):ae);x[S]=ce,M[S]=ce-oe}}t.modifiersData[r]=M}}var Qe={name:"preventOverflow",enabled:!0,phase:"main",fn:Xe,requiresIfExists:["offset"]},Ze=function(e,t){return e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,Ue("number"!==typeof e?e:He(e,N))};function et(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ue(n.placement),c=he(a),u=[D,R].indexOf(a)>=0,l=u?"height":"width";if(o&&s){var h=Ze(i.padding,n),f=k(o),d="y"===c?A:D,p="y"===c?T:R,m=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],v=s[c]-n.rects.reference[c],g=E(o),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,b=m/2-v/2,w=h[d],S=y-f[l]-h[p],x=y/2-f[l]/2+b,_=Ge(w,x,S),C=c;n.modifiersData[r]=(t={},t[C]=_,t.centerOffset=_-x,t)}}function tt(e){var t=e.state,n=e.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i),i))&&Pe(t.elements.popper,i)&&(t.elements.arrow=i)}var nt={name:"arrow",enabled:!0,phase:"main",fn:et,effect:tt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function rt(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function it(e){return[A,R,T,D].some((function(t){return e[t]>=0}))}function ot(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=Ve(t,{elementContext:"reference"}),a=Ve(t,{altBoundary:!0}),c=rt(s,r),u=rt(a,i,o),l=it(c),h=it(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}var st={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ot},at=[ce,pe,Se,Ce,Ee,Je,Qe,nt,st],ct=oe({defaultModifiers:at}),ut="tippy-box",lt="tippy-content",ht="tippy-backdrop",ft="tippy-arrow",dt="tippy-svg-arrow",pt={passive:!0,capture:!0};function mt(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function vt(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function gt(e,t){return"function"===typeof e?e.apply(void 0,t):e}function yt(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function bt(e){return e.split(/\s+/).filter(Boolean)}function wt(e){return[].concat(e)}function kt(e,t){-1===e.indexOf(t)&&e.push(t)}function St(e){return e.filter((function(t,n){return e.indexOf(t)===n}))}function xt(e){return e.split("-")[0]}function _t(e){return[].slice.call(e)}function Ct(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function Ot(){return document.createElement("div")}function Mt(e){return["Element","Fragment"].some((function(t){return vt(e,t)}))}function Et(e){return vt(e,"NodeList")}function At(e){return vt(e,"MouseEvent")}function Tt(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function Rt(e){return Mt(e)?[e]:Et(e)?_t(e):Array.isArray(e)?e:_t(document.querySelectorAll(e))}function Dt(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function It(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Nt(e){var t,n=wt(e),r=n[0];return(null==r||null==(t=r.ownerDocument)?void 0:t.body)?r.ownerDocument:document}function Pt(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,i=e.popperState,o=e.props,s=o.interactiveBorder,a=xt(i.placement),c=i.modifiersData.offset;if(!c)return!0;var u="bottom"===a?c.top.y:0,l="top"===a?c.bottom.y:0,h="right"===a?c.left.x:0,f="left"===a?c.right.x:0,d=t.top-r+u>s,p=r-t.bottom-l>s,m=t.left-n+h>s,v=n-t.right-f>s;return d||p||m||v}))}function jt(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}var Lt={isTouch:!1},Ft=0;function Bt(){Lt.isTouch||(Lt.isTouch=!0,window.performance&&document.addEventListener("mousemove",zt))}function zt(){var e=performance.now();e-Ft<20&&(Lt.isTouch=!1,document.removeEventListener("mousemove",zt)),Ft=e}function $t(){var e=document.activeElement;if(Tt(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Ut(){document.addEventListener("touchstart",Bt,pt),window.addEventListener("blur",$t)}var Ht="undefined"!==typeof window&&"undefined"!==typeof document,Vt=Ht?navigator.userAgent:"",Wt=/MSIE |Trident\//.test(Vt);var qt={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Kt={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Jt=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},qt,{},Kt),Yt=Object.keys(Jt),Gt=function(e){var t=Object.keys(e);t.forEach((function(t){Jt[t]=e[t]}))};function Xt(e){var t=e.plugins||[],n=t.reduce((function(t,n){var r=n.name,i=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:i),t}),{});return Object.assign({},e,{},n)}function Qt(e,t){var n=t?Object.keys(Xt(Object.assign({},Jt,{plugins:t}))):Yt,r=n.reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(i){t[n]=r}return t}),{});return r}function Zt(e,t){var n=Object.assign({},t,{content:gt(t.content,[e])},t.ignoreAttributes?{}:Qt(e,t.plugins));return n.aria=Object.assign({},Jt.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var en=function(){return"innerHTML"};function tn(e,t){e[en()]=t}function nn(e){var t=Ot();return!0===e?t.className=ft:(t.className=dt,Mt(e)?t.appendChild(e):tn(t,e)),t}function rn(e,t){Mt(t.content)?(tn(e,""),e.appendChild(t.content)):"function"!==typeof t.content&&(t.allowHTML?tn(e,t.content):e.textContent=t.content)}function on(e){var t=e.firstElementChild,n=_t(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(lt)})),arrow:n.find((function(e){return e.classList.contains(ft)||e.classList.contains(dt)})),backdrop:n.find((function(e){return e.classList.contains(ht)}))}}function sn(e){var t=Ot(),n=Ot();n.className=ut,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ot();function i(n,r){var i=on(t),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||rn(s,e.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(nn(r.arrow))):o.appendChild(nn(r.arrow)):a&&o.removeChild(a)}return r.className=lt,r.setAttribute("data-state","hidden"),rn(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}sn.$$tippy=!0;var an=1,cn=[],un=[];function ln(e,t){var n,r,i,o,s,a,c,u=Zt(e,Object.assign({},Jt,{},Xt(Ct(t)))),l=!1,h=!1,f=!1,d=!1,p=[],m=yt(G,u.interactiveDebounce),v=an++,g=null,y=St(u.plugins),b={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},w={id:v,reference:e,popper:Ot(),popperInstance:g,props:u,state:b,plugins:y,clearDelayTimeouts:ce,setProps:ue,setContent:le,show:he,hide:fe,hideWithInteractivity:de,enable:se,disable:ae,unmount:pe,destroy:me};if(!u.render)return w;var k=u.render(w),S=k.popper,x=k.onUpdate;S.setAttribute("data-tippy-root",""),S.id="tippy-"+w.id,w.popper=S,e._tippy=w,S._tippy=w;var _=y.map((function(e){return e.fn(w)})),C=e.hasAttribute("aria-expanded");return K(),j(),I(),N("onCreate",[w]),u.showOnCreate&&ie(),S.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),S.addEventListener("mouseleave",(function(e){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(T().addEventListener("mousemove",m),m(e))})),w;function O(){var e=w.props.touch;return Array.isArray(e)?e:[e,0]}function M(){return"hold"===O()[0]}function E(){var e;return!!(null==(e=w.props.render)?void 0:e.$$tippy)}function A(){return c||e}function T(){var e=A().parentNode;return e?Nt(e):document}function R(){return on(S)}function D(e){return w.state.isMounted&&!w.state.isVisible||Lt.isTouch||o&&"focus"===o.type?0:mt(w.props.delay,e?0:1,Jt.delay)}function I(){S.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",S.style.zIndex=""+w.props.zIndex}function N(e,t,n){var r;(void 0===n&&(n=!0),_.forEach((function(n){n[e]&&n[e].apply(void 0,t)})),n)&&(r=w.props)[e].apply(r,t)}function P(){var t=w.props.aria;if(t.content){var n="aria-"+t.content,r=S.id,i=wt(w.props.triggerTarget||e);i.forEach((function(e){var t=e.getAttribute(n);if(w.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}}))}}function j(){if(!C&&w.props.aria.expanded){var t=wt(w.props.triggerTarget||e);t.forEach((function(e){w.props.interactive?e.setAttribute("aria-expanded",w.state.isVisible&&e===A()?"true":"false"):e.removeAttribute("aria-expanded")}))}}function L(){T().removeEventListener("mousemove",m),cn=cn.filter((function(e){return e!==m}))}function F(e){if((!Lt.isTouch||!f&&"mousedown"!==e.type)&&(!w.props.interactive||!S.contains(e.target))){if(A().contains(e.target)){if(Lt.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[w,e]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),h=!0,setTimeout((function(){h=!1})),w.state.isMounted||U())}}function B(){f=!0}function z(){f=!1}function $(){var e=T();e.addEventListener("mousedown",F,!0),e.addEventListener("touchend",F,pt),e.addEventListener("touchstart",z,pt),e.addEventListener("touchmove",B,pt)}function U(){var e=T();e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchend",F,pt),e.removeEventListener("touchstart",z,pt),e.removeEventListener("touchmove",B,pt)}function H(e,t){W(e,(function(){!w.state.isVisible&&S.parentNode&&S.parentNode.contains(S)&&t()}))}function V(e,t){W(e,t)}function W(e,t){var n=R().box;function r(e){e.target===n&&(jt(n,"remove",r),t())}if(0===e)return t();jt(n,"remove",s),jt(n,"add",r),s=r}function q(t,n,r){void 0===r&&(r=!1);var i=wt(w.props.triggerTarget||e);i.forEach((function(e){e.addEventListener(t,n,r),p.push({node:e,eventType:t,handler:n,options:r})}))}function K(){M()&&(q("touchstart",Y,{passive:!0}),q("touchend",X,{passive:!0})),bt(w.props.trigger).forEach((function(e){if("manual"!==e)switch(q(e,Y),e){case"mouseenter":q("mouseleave",X);break;case"focus":q(Wt?"focusout":"blur",Q);break;case"focusin":q("focusout",Q);break}}))}function J(){p.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)})),p=[]}function Y(e){var t,n=!1;if(w.state.isEnabled&&!Z(e)&&!h){var r="focus"===(null==(t=o)?void 0:t.type);o=e,c=e.currentTarget,j(),!w.state.isVisible&&At(e)&&cn.forEach((function(t){return t(e)})),"click"===e.type&&(w.props.trigger.indexOf("mouseenter")<0||l)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:ie(e),"click"===e.type&&(l=!n),n&&!r&&oe(e)}}function G(e){var t=e.target,n=A().contains(t)||S.contains(t);if("mousemove"!==e.type||!n){var r=re().concat(S).map((function(e){var t,n=e._tippy,r=null==(t=n.popperInstance)?void 0:t.state;return r?{popperRect:e.getBoundingClientRect(),popperState:r,props:u}:null})).filter(Boolean);Pt(r,e)&&(L(),oe(e))}}function X(e){var t=Z(e)||w.props.trigger.indexOf("click")>=0&&l;t||(w.props.interactive?w.hideWithInteractivity(e):oe(e))}function Q(e){w.props.trigger.indexOf("focusin")<0&&e.target!==A()||w.props.interactive&&e.relatedTarget&&S.contains(e.relatedTarget)||oe(e)}function Z(e){return!!Lt.isTouch&&M()!==e.type.indexOf("touch")>=0}function ee(){te();var t=w.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,s=t.moveTransition,c=E()?on(S).arrow:null,u=o?{getBoundingClientRect:o,contextElement:o.contextElement||A()}:e,l={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(E()){var n=R(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?r.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?r.setAttribute("data-"+e,""):r.removeAttribute("data-"+e)})),t.attributes.popper={}}}},h=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},l];E()&&c&&h.push({name:"arrow",options:{element:c,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),w.popperInstance=ct(u,S,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:h}))}function te(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function ne(){var e,t=w.props.appendTo,n=A();e=w.props.interactive&&t===Jt.appendTo||"parent"===t?n.parentNode:gt(t,[n]),e.contains(S)||e.appendChild(S),ee()}function re(){return _t(S.querySelectorAll("[data-tippy-root]"))}function ie(e){w.clearDelayTimeouts(),e&&N("onTrigger",[w,e]),$();var t=D(!0),r=O(),i=r[0],o=r[1];Lt.isTouch&&"hold"===i&&o&&(t=o),t?n=setTimeout((function(){w.show()}),t):w.show()}function oe(e){if(w.clearDelayTimeouts(),N("onUntrigger",[w,e]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&l)){var t=D(!1);t?r=setTimeout((function(){w.state.isVisible&&w.hide()}),t):i=requestAnimationFrame((function(){w.hide()}))}}else U()}function se(){w.state.isEnabled=!0}function ae(){w.hide(),w.state.isEnabled=!1}function ce(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function ue(t){if(!w.state.isDestroyed){N("onBeforeUpdate",[w,t]),J();var n=w.props,r=Zt(e,Object.assign({},w.props,{},t,{ignoreAttributes:!0}));w.props=r,K(),n.interactiveDebounce!==r.interactiveDebounce&&(L(),m=yt(G,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?wt(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded"),j(),I(),x&&x(n,r),w.popperInstance&&(ee(),re().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),N("onAfterUpdate",[w,t])}}function le(e){w.setProps({content:e})}function he(){var e=w.state.isVisible,t=w.state.isDestroyed,n=!w.state.isEnabled,r=Lt.isTouch&&!w.props.touch,i=mt(w.props.duration,0,Jt.duration);if(!(e||t||n||r)&&!A().hasAttribute("disabled")&&(N("onShow",[w],!1),!1!==w.props.onShow(w))){if(w.state.isVisible=!0,E()&&(S.style.visibility="visible"),I(),$(),w.state.isMounted||(S.style.transition="none"),E()){var o=R(),s=o.box,c=o.content;Dt([s,c],0)}a=function(){var e;if(w.state.isVisible&&!d){if(d=!0,S.offsetHeight,S.style.transition=w.props.moveTransition,E()&&w.props.animation){var t=R(),n=t.box,r=t.content;Dt([n,r],i),It([n,r],"visible")}P(),j(),kt(un,w),null==(e=w.popperInstance)||e.forceUpdate(),w.state.isMounted=!0,N("onMount",[w]),w.props.animation&&E()&&V(i,(function(){w.state.isShown=!0,N("onShown",[w])}))}},ne()}}function fe(){var e=!w.state.isVisible,t=w.state.isDestroyed,n=!w.state.isEnabled,r=mt(w.props.duration,1,Jt.duration);if(!(e||t||n)&&(N("onHide",[w],!1),!1!==w.props.onHide(w))){if(w.state.isVisible=!1,w.state.isShown=!1,d=!1,l=!1,E()&&(S.style.visibility="hidden"),L(),U(),I(),E()){var i=R(),o=i.box,s=i.content;w.props.animation&&(Dt([o,s],r),It([o,s],"hidden"))}P(),j(),w.props.animation?E()&&H(r,w.unmount):w.unmount()}}function de(e){T().addEventListener("mousemove",m),kt(cn,m),m(e)}function pe(){w.state.isVisible&&w.hide(),w.state.isMounted&&(te(),re().forEach((function(e){e._tippy.unmount()})),S.parentNode&&S.parentNode.removeChild(S),un=un.filter((function(e){return e!==w})),w.state.isMounted=!1,N("onHidden",[w]))}function me(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),J(),delete e._tippy,w.state.isDestroyed=!0,N("onDestroy",[w]))}}function hn(e,t){void 0===t&&(t={});var n=Jt.plugins.concat(t.plugins||[]);Ut();var r=Object.assign({},t,{plugins:n}),i=Rt(e),o=i.reduce((function(e,t){var n=t&&ln(t,r);return n&&e.push(n),e}),[]);return Mt(e)?o[0]:o}hn.defaultProps=Jt,hn.setDefaultProps=Gt,hn.currentInput=Lt;Object.assign({},Ce,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});hn.setDefaultProps({render:sn});var fn=hn;class dn{constructor({editor:e,element:t,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null===e||void 0===e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(e={}){this.tippy=fn(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...e})}update(e,t){const{state:n,composing:i}=e,{doc:o,selection:s}=n,a=t&&t.doc.eq(o)&&t.selection.eq(s);if(i||a)return;const{empty:c,ranges:u}=s,l=Math.min(...u.map(e=>e.$from.pos)),h=Math.max(...u.map(e=>e.$to.pos)),f=!o.textBetween(l,h).length&&Object(r["k"])(e.state.selection);c||f?this.hide():(this.tippy.setProps({getReferenceClientRect:()=>{if(Object(r["j"])(e.state.selection)){const t=e.nodeDOM(l);if(t)return t.getBoundingClientRect()}return Object(r["p"])(e,l,h)}}),this.show())}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const pn=new i["e"]("menuBubble"),mn=e=>new i["d"]({key:pn,view:t=>new dn({view:t,...e})});r["b"].create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[mn({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});class vn{constructor({editor:e,element:t,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null===e||void 0===e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(e={}){this.tippy=fn(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...e})}update(e,t){const{state:n,composing:i}=e,{doc:o,selection:s}=n,a=t&&t.doc.eq(o)&&t.selection.eq(s);if(i||a)return;const{$anchor:c,empty:u,from:l,to:h}=s,f=1===c.depth,d=!s.$anchor.parent.isLeaf&&!s.$anchor.parent.textContent,p=f&&d;u&&p?(this.tippy.setProps({getReferenceClientRect:()=>Object(r["p"])(e,l,h)}),this.show()):this.hide()}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const gn=new i["e"]("menuFloating"),yn=e=>new i["d"]({key:gn,view:t=>new vn({view:t,...e})});r["b"].create({name:"floatingMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[yn({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});n("2b0e");r["a"];const bn={name:"EditorContent",props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(e){e&&e.options.element&&this.$nextTick(()=>{const t=this.$el;t&&e.options.element.firstChild&&(t.append(...e.options.element.childNodes),e.contentComponent=this,e.setOptions({element:t}),e.createNodeViews())})}}},render(e){return e("div")},beforeDestroy(){const{editor:e}=this;if(!e)return;if(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}};Boolean;r["e"]},"1b25":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"h",(function(){return h})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return _}));var r=n("d72c"),i=n("c77f"),o=n("ca0e");class s{constructor(e){this.arr=e,this.pos=0}}const a=e=>new s(e),c=e=>e.pos!==e.arr.length,u=(e,t)=>{const n=r["c"](e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},l=e=>u(e,f(e)),h=e=>e.arr[e.pos++],f=e=>{let t=0,n=0;while(1){const r=e.arr[e.pos++];if(t|=(r&i["k"])<<n,n+=7,r<i["g"])return t>>>0;if(n>35)throw new Error("Integer out of range!")}},d=e=>{let t=e.arr[e.pos++],n=t&i["j"],r=6;const o=(t&i["f"])>0?-1:1;if(0===(t&i["g"]))return o*n;while(1){if(t=e.arr[e.pos++],n|=(t&i["k"])<<r,r+=7,t<i["g"])return o*(n>>>0);if(r>41)throw new Error("Integer out of range!")}},p=e=>{let t=f(e);if(0===t)return"";{let n=String.fromCodePoint(h(e));if(--t<100)while(t--)n+=String.fromCodePoint(h(e));else while(t>0){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},m=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},v=e=>m(e,4).getFloat32(0,!1),g=e=>m(e,8).getFloat64(0,!1),y=e=>m(e,8).getBigInt64(0,!1),b=[e=>{},e=>null,d,v,g,y,e=>!1,e=>!0,p,e=>{const t=f(e),n={};for(let r=0;r<t;r++){const t=p(e);n[t]=w(e)}return n},e=>{const t=f(e),n=[];for(let r=0;r<t;r++)n.push(w(e));return n},l],w=e=>b[127-h(e)](e);class k extends s{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),c(this)?this.count=f(this)+1:this.count=-1),this.count--,this.s}}class S extends s{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=d(this);const e=o["d"](this.s);this.count=1,e&&(this.s=-this.s,this.count=f(this)+2)}return this.count--,this.s}}class x extends s{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=d(this),t=1&e;this.diff=e>>1,this.count=1,t&&(this.count=f(this)+2)}return this.s+=this.diff,this.count--,this.s}}class _{constructor(e){this.decoder=new S(e),this.str=p(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},"1b9f":function(e,t,n){!function(t,r){e.exports=r(n("753f"))}(self,(function(e){return(()=>{var t,n,r={156:e=>{self,e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};let n,r,i,o;var s;e.d(t,{default:()=>C}),function(e){e.SetSize="set-size",e.StreamItems="stream-items",e.StreamContextItem="stream-context-item",e.SaveItems="save-items",e.SelectItem="select-item",e.AssociateItem="associate-item",e.DeassociateItem="deassociate-item",e.ClearSelection="clear-selection",e.CreateItem="create-item",e.CreateItems="create-items",e.DeleteItems="delete-items",e.SetComponentData="set-component-data",e.InstallLocalComponent="install-local-component",e.ToggleActivateComponent="toggle-activate-component",e.RequestPermissions="request-permissions",e.PresentConflictResolution="present-conflict-resolution",e.DuplicateItem="duplicate-item",e.ComponentRegistered="component-registered",e.ActivateThemes="themes",e.Reply="reply",e.SaveSuccess="save-success",e.SaveError="save-error",e.ThemesActivated="themes-activated",e.KeyDown="key-down",e.KeyUp="key-up",e.Click="click"}(n||(n={})),function(e){e[e.Web=1]="Web",e[e.Desktop=2]="Desktop",e[e.Mobile=3]="Mobile"}(r||(r={})),function(e){e.Any="*",e.Item="SF|Item",e.RootKey="SN|RootKey|NoSync",e.ItemsKey="SN|ItemsKey",e.EncryptedStorage="SN|EncryptedStorage",e.Note="Note",e.Tag="Tag",e.SmartTag="SN|SmartTag",e.Component="SN|Component",e.Editor="SN|Editor",e.ActionsExtension="Extension",e.UserPrefs="SN|UserPreferences",e.HistorySession="SN|HistorySession",e.Theme="SN|Theme",e.Mfa="SF|MFA",e.ServerExtension="SF|Extension",e.FilesafeCredentials="SN|FileSafe|Credentials",e.FilesafeFileMetadata="SN|FileSafe|FileMetadata",e.FilesafeIntegration="SN|FileSafe|Integration",e.ExtensionRepo="SN|ExtensionRepo"}(i||(i={})),function(e){e.Pinned="pinned",e.Archived="archived",e.Locked="locked",e.UserModifiedDate="client_updated_at",e.DefaultEditor="defaultEditor",e.MobileRules="mobileRules",e.NotAvailableOnMobile="notAvailableOnMobile",e.MobileActive="mobileActive",e.LastSize="lastSize",e.PrefersPlainEditor="prefersPlainEditor",e.ComponentInstallError="installError"}(o||(o={}));var a=new Uint8Array(16);function c(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&u.test(e)};for(var h=[],f=0;f<256;++f)h.push((f+256).toString(16).substr(1));const d=function(e,t,n){var r=(e=e||{}).random||(e.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n}(r)},p=e=>{var t;const n={[r.Web]:"web",[r.Desktop]:"desktop",[r.Mobile]:"mobile"};return null!==(t=n[e])&&void 0!==t?t:n[r.Web]},m=e=>null!=e,v=()=>{};class g{static get isSupported(){return!(!window.console&&!console)}static get info(){return g.isSupported&&this.enabled?console.log.bind(console):v}static get error(){return g.isSupported?console.error.bind(console):v}}var y,b,w,k;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(b="enabled")in(y=g)?Object.defineProperty(y,b,{value:!1,enumerable:!0,configurable:!0,writable:!0}):y[b]=!1,function(e){e.Component="component"}(w||(w={})),function(e){e.Shift="Shift",e.Ctrl="Control",e.Meta="Meta"}(k||(k={}));class C{constructor(e){if(_(this,"contentWindow",void 0),_(this,"initialPermissions",void 0),_(this,"onReadyCallback",void 0),_(this,"component",{activeThemes:[],acceptsThemes:!0}),_(this,"sentMessages",[]),_(this,"messageQueue",[]),_(this,"lastStreamedItem",void 0),_(this,"pendingSaveItems",void 0),_(this,"pendingSaveTimeout",void 0),_(this,"pendingSaveParams",void 0),_(this,"coallesedSaving",!0),_(this,"coallesedSavingDelay",250),_(this,"messageHandler",void 0),_(this,"keyDownEventListener",void 0),_(this,"keyUpEventListener",void 0),_(this,"clickEventListener",void 0),!e||!e.targetWindow)throw new Error("contentWindow must be a valid Window object.");this.contentWindow=e.targetWindow,this.processParameters(e),this.registerMessageHandler(),this.registerKeyboardEventListeners(),this.registerMouseEventListeners()}processParameters(e){var t;const{initialPermissions:n,options:r,onReady:i}=e;var o;n&&n.length>0&&(this.initialPermissions=n),m(null==r?void 0:r.coallesedSaving)&&(this.coallesedSaving=r.coallesedSaving),m(null==r?void 0:r.coallesedSavingDelay)&&(this.coallesedSavingDelay=r.coallesedSavingDelay),m(null==r?void 0:r.acceptsThemes)&&(this.component.acceptsThemes=null===(o=null==r?void 0:r.acceptsThemes)||void 0===o||o),m(i)&&(this.onReadyCallback=i),g.enabled=null!==(t=null==r?void 0:r.debug)&&void 0!==t&&t}deinit(){this.onReadyCallback=void 0,this.component={acceptsThemes:!0,activeThemes:[]},this.messageQueue=[],this.sentMessages=[],this.lastStreamedItem=void 0,this.pendingSaveItems=void 0,this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0,this.messageHandler&&(this.contentWindow.document.removeEventListener("message",this.messageHandler),this.contentWindow.removeEventListener("message",this.messageHandler)),this.keyDownEventListener&&this.contentWindow.removeEventListener("keydown",this.keyDownEventListener),this.keyUpEventListener&&this.contentWindow.removeEventListener("keyup",this.keyUpEventListener),this.clickEventListener&&this.contentWindow.removeEventListener("click",this.clickEventListener)}registerMessageHandler(){this.messageHandler=e=>{if(g.info("Components API Message received:",e.data),document.referrer&&new URL(document.referrer).origin!==new URL(e.origin).origin)return;const{data:t}=e,r=(e=>{if("string"!=typeof e)return!1;try{const t=JSON.parse(e),n=Object.prototype.toString.call(t);return"[object Object]"===n||"[object Array]"===n}catch(e){return!1}})(t)?JSON.parse(t):t;if(r){if(console.log("component: ",this.component),console.log("component origin: ",this.component.origin),void 0===this.component.origin&&r.action===n.ComponentRegistered)this.component.origin=e.origin;else if(e.origin!==this.component.origin)return;this.handleMessage(r)}else g.error("Invalid data received. Skipping...")},this.contentWindow.document.addEventListener("message",this.messageHandler,!1),this.contentWindow.addEventListener("message",this.messageHandler,!1),g.info("Waiting for messages...")}registerKeyboardEventListeners(){this.keyDownEventListener=e=>{g.info("A key has been pressed: ".concat(e.key)),e.ctrlKey?this.keyDownEvent(k.Ctrl):e.shiftKey?this.keyDownEvent(k.Shift):(e.metaKey||"Meta"===e.key)&&this.keyDownEvent(k.Meta)},this.keyUpEventListener=e=>{g.info("A key has been released: ".concat(e.key)),"Control"===e.key?this.keyUpEvent(k.Ctrl):"Shift"===e.key?this.keyUpEvent(k.Shift):"Meta"===e.key&&this.keyUpEvent(k.Meta)},this.contentWindow.addEventListener("keydown",this.keyDownEventListener,!1),this.contentWindow.addEventListener("keyup",this.keyUpEventListener,!1)}registerMouseEventListeners(){this.clickEventListener=e=>{g.info("A click has been performed."),this.mouseClickEvent()},this.contentWindow.addEventListener("click",this.clickEventListener,!1)}handleMessage(e){switch(e.action){case n.ComponentRegistered:this.component.sessionKey=e.sessionKey,e.componentData&&(this.component.data=e.componentData),this.onReady(e.data),g.info("Component successfully registered with payload:",e);break;case n.ActivateThemes:this.activateThemes(e.data.themes);break;default:{var t,r;if(!e.original)return;const n=null===(t=this.sentMessages)||void 0===t?void 0:t.filter(t=>{var n;return t.messageId===(null===(n=e.original)||void 0===n?void 0:n.messageId)})[0];if(!n){const e=this.contentWindow.document.title,t=("The extension '".concat(e,"' is attempting to communicate with Standard Notes, ")+"but an error is preventing it from doing so. Please restart this extension and try again.").replace("  "," ");return void g.info(t)}null==n||null===(r=n.callback)||void 0===r||r.call(n,e.data);break}}}onReady(e){this.component.environment=e.environment,this.component.platform=e.platform,this.component.uuid=e.uuid,this.initialPermissions&&this.initialPermissions.length>0&&this.requestPermissions(this.initialPermissions);for(const t of this.messageQueue)this.postMessage(t.action,t.data,t.callback);this.messageQueue=[],g.info("Data passed to onReady:",e),this.activateThemes(e.activeThemeUrls||[]),this.postMessage(n.ThemesActivated,{}),this.onReadyCallback&&this.onReadyCallback()}getSelfComponentUUID(){return this.component.uuid}isRunningInDesktopApplication(){return this.component.environment===p(r.Desktop)}isRunningInMobileApplication(){return this.component.environment===p(r.Mobile)}getComponentDataValueForKey(e){if(this.component.data)return this.component.data[e]}setComponentDataValueForKey(e,t){if(!this.component.data)throw new Error("The component has not been initialized.");if(!e||e&&0===e.length)throw new Error("The key for the data value should be a valid string.");this.component.data=x(x({},this.component.data),{},{[e]:t}),this.postMessage(n.SetComponentData,{componentData:this.component.data})}clearComponentData(){this.component.data={},this.postMessage(n.SetComponentData,{componentData:this.component.data})}postMessage(e,t,n){if(!this.component.sessionKey)return void this.messageQueue.push({action:e,data:t,api:w.Component,callback:n});const r={action:e,data:t,messageId:this.generateUUID(),sessionKey:this.component.sessionKey,api:w.Component},i=JSON.parse(JSON.stringify(r));let o;i.callback=n,this.sentMessages.push(i),o=this.isRunningInMobileApplication()?JSON.stringify(r):r,g.info("Posting message:",o),this.contentWindow.parent.postMessage(o,this.component.origin)}requestPermissions(e,t){this.postMessage(n.RequestPermissions,{permissions:e},()=>{t&&t()})}activateThemes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.component.acceptsThemes)return;g.info("Incoming themes:",e);const{activeThemes:t}=this.component;if(t&&t.sort().toString()==e.sort().toString())return;let n=e;const r=[];for(const i of t)e.includes(i)?n=n.filter(e=>e!==i):r.push(i);g.info("Deactivating themes:",r),g.info("Activating themes:",n);for(const i of r)this.deactivateTheme(i);this.component.activeThemes=e;for(const i of n){if(!i)continue;const e=this.contentWindow.document.createElement("link");e.id=btoa(i),e.href=i,e.type="text/css",e.rel="stylesheet",e.media="screen,print",e.className="custom-theme",this.contentWindow.document.getElementsByTagName("head")[0].appendChild(e)}}themeElementForUrl(e){return Array.from(this.contentWindow.document.getElementsByClassName("custom-theme")).slice().find(t=>t.id==btoa(e))}deactivateTheme(e){const t=this.themeElementForUrl(e);t&&t.parentNode&&(t.setAttribute("disabled","true"),t.parentNode.removeChild(t))}generateUUID(){return d()}get platform(){return this.component.platform}get environment(){return this.component.environment}streamItems(e,t){this.postMessage(n.StreamItems,{content_types:e},e=>{t(e.items)})}streamContextItem(e){this.postMessage(n.StreamContextItem,{},t=>{const{item:n}=t;(!this.lastStreamedItem||this.lastStreamedItem.uuid!==n.uuid)&&this.pendingSaveTimeout&&(clearTimeout(this.pendingSaveTimeout),this._performSavingOfItems(this.pendingSaveParams),this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0),this.lastStreamedItem=n,e(this.lastStreamedItem)})}selectItem(e){this.postMessage(n.SelectItem,{item:this.jsonObjectForItem(e)})}clearSelection(){this.postMessage(n.ClearSelection,{content_type:i.Tag})}createItem(e,t){this.postMessage(n.CreateItem,{item:this.jsonObjectForItem(e)},e=>{let{item:n}=e;!n&&e.items&&e.items.length>0&&(n=e.items[0]),this.associateItem(n),t&&t(n)})}createItems(e,t){const r=e.map(e=>this.jsonObjectForItem(e));this.postMessage(n.CreateItems,{items:r},e=>{t&&t(e.items)})}associateItem(e){this.postMessage(n.AssociateItem,{item:this.jsonObjectForItem(e)})}deassociateItem(e){this.postMessage(n.DeassociateItem,{item:this.jsonObjectForItem(e)})}deleteItem(e,t){this.deleteItems([e],t)}deleteItems(e,t){const r={items:e.map(e=>this.jsonObjectForItem(e))};this.postMessage(n.DeleteItems,r,e=>{t&&t(e)})}sendCustomEvent(e,t,n){this.postMessage(e,t,e=>{n&&n(e)})}saveItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.saveItems([e],t,n)}saveItemWithPresave(e,t,n){this.saveItemsWithPresave([e],t,n)}saveItemsWithPresave(e,t,n){this.saveItems(e,n,!1,t)}_performSavingOfItems(e){let{items:t,presave:r,callback:i}=e;r&&r();const o=[];for(const n of t)o.push(this.jsonObjectForItem(n));this.postMessage(n.SaveItems,{items:o},()=>{i&&i()})}saveItems(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(this.pendingSaveItems||(this.pendingSaveItems=[]),this.coallesedSaving&&!n){this.pendingSaveTimeout&&clearTimeout(this.pendingSaveTimeout);const n=e.map(e=>e.uuid),i=this.pendingSaveItems.filter(e=>!n.includes(e.uuid));this.pendingSaveItems=i.concat(e),this.pendingSaveParams={items:this.pendingSaveItems,presave:r,callback:t},this.pendingSaveTimeout=setTimeout(()=>{this._performSavingOfItems(this.pendingSaveParams),this.pendingSaveItems=[],this.pendingSaveTimeout=void 0,this.pendingSaveParams=null},this.coallesedSavingDelay)}else this._performSavingOfItems({items:e,presave:r,callback:t})}setSize(e,t){this.postMessage(n.SetSize,{type:"container",width:e,height:t})}keyDownEvent(e){this.postMessage(n.KeyDown,{keyboardModifier:e})}keyUpEvent(e){this.postMessage(n.KeyUp,{keyboardModifier:e})}mouseClickEvent(){this.postMessage(n.Click,{})}jsonObjectForItem(e){const t=Object.assign({},e);return t.children=null,t.parent=null,t}getItemAppDataValue(e,t){var n,r;return null==e||null===(n=e.content)||void 0===n||null===(r=n.appData)||void 0===r?void 0:r["org.standardnotes.sn"][t]}}return t.default})()},695:t=>{"use strict";t.exports=e}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);o.r(i);var s={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach(t=>s[t]=()=>e[t]);return s.default=()=>e,o.d(i,s),i},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";o.d(s,{default:()=>p});var e=o(156),t=o.n(e);const n=async e=>{await new Promise(t=>setTimeout(t,1e3*e))};function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){this.options=e,r(this,"uuidToFileTempUrlAndTypeMapping",{}),r(this,"currentlyLoadingIds",[]),r(this,"statusElementMapping",{}),r(this,"fileTypeToElementType",{"image/png":"img","image/jpg":"img","image/jpeg":"img","image/gif":"img","image/tiff":"img","image/bmp":"img","video/mp4":"video","audio/mpeg":"audio","audio/mp3":"audio"})}fileTypeForElementType(e){return this.fileTypeToElementType[e.toLowerCase()]}loadFileSafeElements(){const e=this.options.getElementsBySelector("*[fsplaceholder]");for(const t of e)this.loadFileSafeElement(t)}async loadFileSafeElement(e){var t;const{fileSafeInstance:r}=this.options,i=e.getAttribute("fsid"),o=null!==(t=e.getAttribute("fsName"))&&void 0!==t?t:"",s=o&&"undefined"!=o?o:"file";if(!i)return!1;const a=this.uuidToFileTempUrlAndTypeMapping[i];if(a)return this.insertMediaElement({fsid:i,fsElement:e,url:a.url,fileType:a.fileType,fsName:a.fsName}),!1;if(this.currentlyLoadingIds.includes(i))return!1;const c=r.findFileDescriptor(i);if(!c)return this.setStatus({fsElement:e,fsid:i,status:"Unable to find ".concat(s," ").concat(i,"."),removable:!0}),!1;const u='[fsid="'.concat(c.uuid,'"][fscollapsable]');if(document.querySelectorAll("img".concat(u,", figure").concat(u,", video").concat(u,", audio").concat(u)).length>0)return!1;this.currentlyLoadingIds.push(i),this.setStatus({fsElement:e,fsid:i,status:"Downloading ".concat(s,"...")}),await n(.05);const l=await r.downloadFileFromDescriptor(c).catch(()=>{this.setStatus({fsElement:e,fsid:i,status:"Unable to download ".concat(s," ").concat(i,".")})});if(!l)return!1;this.setStatus({fsElement:e,fsid:i,status:"Decrypting ".concat(s,"...")}),await n(.05);const h=await r.decryptFile({fileDescriptor:c,fileItem:l}).catch(()=>{this.setStatus({fsElement:e,fsid:i,status:"Unable to decrypt ".concat(s," ").concat(i,".")})});if(!h)return!1;this.setStatus({fsElement:e,fsid:i}),await n(.05);const f=c.content.fileType,d=r.createTemporaryFileUrl({base64Data:h.decryptedData,dataType:f});return this.insertMediaElement({fsid:i,fileType:f,fsName:o,fsElement:e,url:d}),(()=>{this.currentlyLoadingIds.splice(this.currentlyLoadingIds.indexOf(i),1)})(),this.uuidToFileTempUrlAndTypeMapping[i]={fileType:f,url:d,fsName:o},!0}insertMediaElement(e){let t,{url:n,fsid:r,fsName:i,fileType:o,fsElement:s}=e;switch(this.fileTypeForElementType(o)){case"img":t=this.createImageElement({url:n,fsid:r,fsName:i,fsElement:s});break;case"video":t=this.createVideoElement({url:n,fsid:r,fileType:o,fsName:i,fsElement:s});break;case"audio":t=this.createAudioElement({url:n,fsid:r,fsName:i});break;default:t=this.createDownloadElement({url:n,fsid:r,fsName:i})}this.insertElementNearElement(t,s),s.remove()}wrapElementInTag(e){let{element:t,tagName:n,fsid:r,fsName:i}=e;const o=document.createElement(n);return o.setAttribute("fsid",r),o.setAttribute("fsName",i),o.setAttribute("fscollapsable","true"),o.setAttribute("contenteditable","true"),o.append(t),o}createImageElement(e){let{url:t,fsid:n,fsName:r,fsElement:i}=e;const o=document.createElement("img");o.setAttribute("src",t),o.setAttribute("srcset","".concat(t," 2x")),o.setAttribute("fsid",n),o.setAttribute("fsName",r),o.setAttribute("fscollapsable","true");const s=i.getAttribute("width");s&&o.setAttribute("width",s);const a=i.getAttribute("height");return a&&o.setAttribute("height",a),o}createVideoElement(e){let{url:t,fsid:n,fileType:r,fsName:i,fsElement:o}=e;const s=document.createElement("video");s.setAttribute("controls","true"),s.setAttribute("fsid",n),s.setAttribute("fsName",i),s.setAttribute("fscollapsable","true");const a=o.getAttribute("width");a&&s.setAttribute("width",a);const c=o.getAttribute("height");c&&s.setAttribute("height",c);const u=document.createElement("source");return u.setAttribute("src",t),u.setAttribute("type",r),s.append(u),this.wrapElementInTag({fsid:n,fsName:i,element:s,tagName:"p"})}createDownloadElement(e){let{url:t,fsid:n,fsName:r}=e;const i=document.createElement("a");return i.setAttribute("fsid",n),i.setAttribute("fsName",r),i.setAttribute("ghost","true"),i.setAttribute("fscollapsable","true"),i.setAttribute("href",t),i.textContent="".concat(r),i}createAudioElement(e){let{url:t,fsid:n,fsName:r}=e;const i=document.createElement("audio");return i.setAttribute("src",t),i.setAttribute("controls","true"),i.setAttribute("fsid",n),i.setAttribute("fsName",r),i.setAttribute("fscollapsable","true"),this.wrapElementInTag({fsid:n,fsName:r,element:i,tagName:"p"})}setStatus(e){let{status:t,fsElement:n,fsid:r,removable:i=!1}=e;if(r){const e=this.statusElementMapping[r];e&&(e.remove(),delete this.statusElementMapping[r])}if(t){let e=document.createElement("label");return e.setAttribute("id",r),e.setAttribute("ghost","true"),e.setAttribute("contenteditable","false"),e.style.fontWeight="bold",e.textContent=t,i&&(e.style.userSelect="all"),e=this.insertElementNearElement(e,n),r&&(this.statusElementMapping[r]=e),e}}insertStatusAtCursor(e){const t=Math.random().toString(36).substring(7);return this.setStatus({status:e,fsid:t,fsElement:null}),t}removeCursorStatus(e){const t=this.options.getElementsBySelector("#".concat(e));t.length>0&&t[0].remove()}insertElementNearElement(e,t){const n=this.options.preprocessElement(e);let r="child";if(t&&"figure"==n.tagName.toLowerCase()){const e=t.closest("p");e&&(t=e,r="afterend")}return this.options.insertElement(n,t,r),n}}class a{constructor(e){this.options=e}onKeyUp(e){let{isEnter:t,isPaste:n,isSpace:r}=e;(t||n||r)&&this.searchPatterns({searchPreviousLine:null!=t&&t})}searchPatterns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchPreviousLine:!1};const t=e.searchPreviousLine?this.options.getPreviousLineText():this.options.getCurrentLineText();for(const n of this.options.patterns){const r=n.regex.exec(t);if(!r)continue;const i=r[0];if(i){const t=n.callback(i);this.replaceSelection(n.regex,t,e.searchPreviousLine)}}}replaceSelection(e,t,n){var r,i,o;null!==(r=this.options)&&void 0!==r&&r.beforeExpand&&this.options.beforeExpand(),this.options.replaceText({regex:e,replacement:t,searchPreviousLine:n}),null!==(i=this.options)&&void 0!==i&&i.afterExpand&&(null===(o=this.options)||void 0===o||o.afterExpand())}}const c=/(<p>)?\[FileSafe[^\]]*\](<\/p>)?/g,u=e=>e.replace(c,e=>h(e)),l=e=>"[FileSafe:".concat(e.uuid,":").concat(e.content.fileName,"]"),h=e=>{const t=(e=(e=(e=e.replace("<p>","")).replace("</p>","")).replace("[","").replace("]","")).split(":"),n=t[1],r=t[2],i=t[3];let o="";if(i){const e=i.split("x");o="width=".concat(e[0]," height=").concat(e[1])}return"<p fsplaceholder=true style='display: none;' fscollapsable=true ghost=true fsid='".concat(n,"' fsname='").concat(r,"' ").concat(o,"></p>")};function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d;!function(e){e.PlainText="plaintext",e.Html="html",e.Markdown="markdown",e.Json="json"}(d||(d={}));class p{constructor(e,t){this.delegate=e,this.options=t,f(this,"fileIdsPendingAssociation",[]),f(this,"componentRelay",void 0),f(this,"fileLoader",void 0),f(this,"textExpander",void 0),f(this,"fileSafeLoading",void 0),f(this,"fileSafeClass",void 0),f(this,"fileSafeInstance",void 0),f(this,"note",void 0),f(this,"ignoreNextTextChange",void 0),f(this,"needsFileSafeElementLoad",void 0),f(this,"previousText",void 0),this.connectToBridge(),this.options.supportsFileSafe&&(this.fileSafeLoading=this.importFileSafe())}connectToBridge(){const{coallesedSaving:e,coallesedSavingDelay:n,mode:r,supportsFileSafe:i}=this.options;this.componentRelay=new(t())({targetWindow:window,options:{coallesedSaving:e,coallesedSavingDelay:n},onReady:()=>{const{platform:e}=this.componentRelay;e&&document.documentElement.classList.add(e)}}),this.componentRelay.streamContextItem(async e=>{let t=!0;this.note&&this.note.uuid==e.uuid&&(t=!1);const n=this.note;if(i){const t=this.fileSafeClass.getSFItemClass();this.note=new t(e),this.fileSafeInstance.setCurrentNote(this.note)}else this.note=e;if(e.isMetadataUpdate)return;let o=e.content.text;if(r===d.Html&&t&&(/<[a-z][\s\S]*>/i.test(o)||(this.ignoreNextTextChange=!0)),this.previousText=o,i&&(this.needsFileSafeElementLoad=!0,o=u(o)),this.delegate.onNoteValueChange&&await this.delegate.onNoteValueChange(e),this.delegate.setEditorRawText(o),this.delegate.onNoteLockToggle){var s,a;const e=null!==(s=this.componentRelay.getItemAppDataValue(n,"locked"))&&void 0!==s&&s,t=null!==(a=this.componentRelay.getItemAppDataValue(this.note,"locked"))&&void 0!==a&&a;e!==t&&this.delegate.onNoteLockToggle(t)}t&&this.delegate.clearUndoHistory()})}async importFileSafe(){return Promise.resolve().then(o.t.bind(o,695,23)).then(e=>(this.fileSafeClass=e.default,this.configureFileSafe(),this.fileSafeInstance))}configureFileSafe(){this.fileSafeInstance=new this.fileSafeClass({componentManager:this.componentRelay}),this.fileSafeInstance.addDataChangeObserver(()=>{const e=this.fileSafeInstance.getAllFileDescriptors();if(this.note&&this.fileIdsPendingAssociation.length>0){let t=!1;for(const n of this.fileIdsPendingAssociation.slice()){const r=e.find(e=>e.uuid==n);if(!r)continue;t=!0,this.fileIdsPendingAssociation.splice(this.fileIdsPendingAssociation.indexOf(n),1);const i=l(r);this.delegate.insertRawText(i)}t&&this.textExpander.searchPatterns()}e.length>0&&this.fileLoader.loadFileSafeElements()}),this.fileSafeInstance.addNewFileDescriptorHandler(e=>{this.fileIdsPendingAssociation.push(e.uuid)}),this.fileLoader=new i({fileSafeInstance:this.fileSafeInstance,getElementsBySelector:this.delegate.getElementsBySelector,insertElement:this.delegate.insertElement,preprocessElement:this.delegate.preprocessElement}),this.textExpander=new a({afterExpand:()=>this.fileLoader.loadFileSafeElements(),getCurrentLineText:this.delegate.getCurrentLineText,getPreviousLineText:this.delegate.getPreviousLineText,replaceText:this.delegate.replaceText,patterns:[{regex:c,callback:e=>u(e)}]})}async getFileSafe(){return!this.fileSafeInstance&&this.fileSafeLoading?this.fileSafeLoading:this.importFileSafe()}onEditorKeyUp(e){let{isSpace:t,isEnter:n}=e;this.textExpander.onKeyUp({isSpace:t,isEnter:n})}onEditorPaste(){this.textExpander.onKeyUp({isPaste:!0})}onEditorValueChanged(e){const{mode:t,supportsFileSafe:n}=this.options;if(this.needsFileSafeElementLoad&&(this.needsFileSafeElementLoad=!1,this.fileLoader.loadFileSafeElements()),this.ignoreNextTextChange)return void(this.ignoreNextTextChange=!1);if(n&&(e=(e=>{const t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("*[fscollapsable]");for(const r of n){const e=r.getAttribute("fsid"),t=r.getAttribute("fsname"),n=r.getAttribute("width"),i=r.getAttribute("height"),o=["FileSafe",e,t];if(n&&i){const e="".concat(n,"x").concat(i);o.push(e)}const s="<p>[".concat(o.join(":"),"]</p>");r.insertAdjacentHTML("afterend",s),r.remove()}return t.querySelectorAll("*[ghost]").forEach(e=>e.remove()),t.body.innerHTML})(e),this.previousText==e))return;if(this.previousText=e,!this.note)return;const r=this.note;this.componentRelay.saveItemWithPresave(r,()=>{if(r.content.text=e,this.delegate.generateCustomPreview){const t=this.delegate.generateCustomPreview(e);t.html?r.content.preview_html=t.html:t.plain&&(r.content.preview_plain=t.plain)}else{if(t===d.Html){let t=e.replace(c,e=>"");t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return e.length<=t?e:e.substring(0,t)+"..."}((e=>{const t=document.implementation.createHTMLDocument().body;return t.innerHTML=e,t.textContent||t.innerText||""})(t)),r.content.preview_plain=t.length>0?t:" "}else r.content.preview_plain=e;r.content.preview_html=null}})}canUploadFiles(){const e=this.fileSafeInstance.getAllCredentials(),t=this.fileSafeInstance.getAllIntegrations();return e.length>0&&t.length>0}async uploadJSFileObject(e){const t=this.fileLoader.insertStatusAtCursor("Processing file...");return this.fileSafeInstance.encryptAndUploadJavaScriptFileObject(e).then(()=>{this.fileLoader.removeCursorStatus(t)})}saveItemWithPresave(e,t){this.componentRelay.saveItemWithPresave(e,t)}}})(),s.default})()}))},"1bd2":function(e,t,n){"use strict";var r=n("9980"),i=n("7428"),o=n("576a"),s=n("5313"),a=(n("f248"),n("9a61")),c=n("70a9"),u=n("ca0e");const l=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style","border-color: "+e.color);const n=document.createElement("div");return n.setAttribute("style","background-color: "+e.color),n.insertBefore(document.createTextNode(e.name),null),t.insertBefore(n,null),t},h=(e,t,n)=>{const r=c["b"].getState(e),s=r.doc,l=[];return null!=r.snapshot||null!=r.prevSnapshot||null===r.binding?o["b"].create(e.doc,[]):(t.getStates().forEach((t,c)=>{if(c!==s.clientID&&null!=t.cursor){const h=t.user||{};null==h.color&&(h.color="#ffa500"),null==h.name&&(h.name="User: "+c);let f=Object(a["c"])(s,r.type,i["r"](t.cursor.anchor),r.binding.mapping),d=Object(a["c"])(s,r.type,i["r"](t.cursor.head),r.binding.mapping);if(null!==f&&null!==d){const t=u["f"](e.doc.content.size-1,0);f=u["g"](f,t),d=u["g"](d,t),l.push(o["a"].widget(d,()=>n(h),{key:c+"",side:10}));const r=u["g"](f,d),i=u["f"](f,d);l.push(o["a"].inline(r,i,{style:`background-color: ${h.color}70`},{inclusiveEnd:!0,inclusiveStart:!1}))}}}),o["b"].create(e.doc,l))},f=(e,{cursorBuilder:t=l,getSelection:n=(e=>e.selection)}={},r="cursor")=>new s["d"]({key:c["a"],state:{init(n,r){return h(r,e,t)},apply(n,r,i,o){const s=c["b"].getState(o),a=n.getMeta(c["a"]);return s&&s.isChangeOrigin||a&&a.awarenessUpdated?h(o,e,t):r.map(n.mapping,n.doc)}},props:{decorations:e=>c["a"].getState(e)},view:t=>{const o=()=>{t.docView&&Object(a["d"])(t,c["a"],{awarenessUpdated:!0})},s=()=>{const o=c["b"].getState(t.state),s=e.getLocalState()||{};if(t.hasFocus()&&null!==o.binding){const c=n(t.state),u=Object(a["a"])(c.anchor,o.type,o.binding.mapping),l=Object(a["a"])(c.head,o.type,o.binding.mapping);null!=s.cursor&&i["n"](i["r"](s.cursor.anchor),u)&&i["n"](i["r"](s.cursor.head),l)||e.setLocalStateField(r,{anchor:u,head:l})}else null!=s.cursor&&null!==Object(a["c"])(o.doc,o.type,i["r"](s.cursor.anchor),o.binding.mapping)&&e.setLocalStateField(r,null)};return e.on("change",o),t.dom.addEventListener("focusin",s),t.dom.addEventListener("focusout",s),{update:s,destroy:()=>{t.dom.removeEventListener("focusin",s),t.dom.removeEventListener("focusout",s),e.off("change",o),e.setLocalStateField(r,null)}}}}),d=e=>Array.from(e.entries()).map(([e,t])=>({clientId:e,...t.user})),p=r["b"].create({name:"collaborationCursor",priority:1e3,defaultOptions:{provider:null,user:{name:null,color:null},render:e=>{const t=document.createElement("span");t.classList.add("collaboration-cursor__caret"),t.setAttribute("style","border-color: "+e.color);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style","background-color: "+e.color),n.insertBefore(document.createTextNode(e.name),null),t.insertBefore(n,null),t},onUpdate:()=>null},addCommands(){return{user:e=>()=>(this.options.user=e,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0)}},addProseMirrorPlugins(){return[f((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.options.provider.awareness.on("change",()=>{this.options.onUpdate(d(this.options.provider.awareness.states))}),this.options.provider.awareness.on("update",()=>{this.options.onUpdate(d(this.options.provider.awareness.states))}),this.options.provider.on("status",e=>{"connected"===e.status&&this.options.provider.awareness.setLocalStateField("user",this.options.user)}),this.options.onUpdate(d(this.options.provider.awareness.states)),this.options.provider.awareness))(),{cursorBuilder:this.options.render})]}});t["a"]=p},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c35":function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function s(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=u.prototype):(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?v(e,t,n,r):"string"===typeof t?p(e,t,n):g(e,t)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return h(t),t<=0?c(e,t):void 0!==n?"string"===typeof r?c(e,t).fill(n,r):c(e,t).fill(n):c(e,t)}function d(e,t){if(h(t),e=c(e,t<0?0:0|y(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(t,n);e=c(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function m(e,t){var n=t.length<0?0:0|y(t.length);e=c(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function v(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=u.prototype):e=m(e,t),e}function g(e,t){if(u.isBuffer(t)){var n=0|y(t.length);return e=c(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?c(e,0):m(e,t);if("Buffer"===t.type&&o(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),u.alloc(+e)}function w(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function k(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return D(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return j(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var h=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){h=!1;break}if(h)return o}return-1}function C(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function O(e,t,n,r){return ee(G(t,e.length-n),e,n,r)}function M(e,t,n,r){return ee(X(t),e,n,r)}function E(e,t,n,r){return M(e,t,n,r)}function A(e,t,n,r){return ee(Z(t),e,n,r)}function T(e,t,n,r){return ee(Q(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function D(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var o,s,a,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:o=e[i+1],128===(192&o)&&(c=(31&u)<<6|63&o,c>127&&(l=c));break;case 3:o=e[i+1],s=e[i+2],128===(192&o)&&128===(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return N(r)}t.Buffer=u,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:s(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return f(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=w,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):k.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function N(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Y(e[o]);return i}function F(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function H(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,o){return o||H(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,o){return o||H(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);var r=this[e+--t],i=1;while(t>0&&(i*=256))r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);var r=t,i=1,o=this[e+--r];while(r>0&&(i*=256))o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;z(this,e,t,n,i,0)}var o=1,s=0;this[t]=255&e;while(++s<n&&(o*=256))this[t+s]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;z(this,e,t,n,i,0)}var o=n-1,s=1;this[t+o]=255&e;while(--o>=0&&(s*=256))this[t+o]=e/s&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;this[t]=255&e;while(++o<n&&(s*=256))e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;this[t+o]=255&e;while(--o>=0&&(s*=256))e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:G(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function K(e){if(e=J(e).replace(q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function J(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n,r,i,o=[],s=0;s<e.length;++s){if((t-=2)<0)break;n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Z(e){return r.toByteArray(K(e))}function ee(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function te(e){return e!==e}}).call(this,n("c8ba"))},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},"1d1c":function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("37e8");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:o})},"1d2f":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));Object.assign;const r=Object.keys,i=e=>r(e).length,o=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},s=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a=(e,t)=>e===t||i(e)===i(t)&&o(e,(e,n)=>(void 0!==e||s(t,n))&&t[n]===e)},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1d8c":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var r=n("2309"),i=n("5da9"),o=n("e394"),s=n("c823");const a="undefined"!==typeof e&&e.release&&/node|io\.js/.test(e.release.name),c="undefined"!==typeof window&&!a;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let u;const l=[],h=()=>{if(void 0===u)if(a){u=r["c"]();const t=e.argv;let n=null;for(let e=0;e<t.length;e++){const r=t[e];"-"===r[0]?(null!==n&&u.set(n,""),n=r):null!==n?(u.set(n,r),n=null):l.push(r)}null!==n&&u.set(n,"")}else"object"===typeof location?(u=r["c"](),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,n]=e.split("=");u.set("--"+i["b"](t,"-"),n),u.set("-"+i["b"](t,"-"),n)}})):u=r["c"]();return u},f=e=>h().has(e),d=e=>a?o["a"](Object({NODE_ENV:"production",BASE_URL:"/TipTapSN/"})[e.toUpperCase()]):o["a"](s["b"].getItem(e)),p=e=>f("--"+e)||null!==d(e);p("production")}).call(this,n("4362"))},"1d91":function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"text",group:"inline"});t["a"]=i},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("2d00"),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1e58":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));const r=e=>new Error(e),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},"1fb5":function(e,t,n){"use strict";t.byteLength=l,t.toByteArray=f,t.fromByteArray=m;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function l(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function h(e,t,n){return 3*(t+n)/4-n}function f(e){var t,n,r=u(e),s=r[0],a=r[1],c=new o(h(e,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c}function d(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function p(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(d(r));return i.join("")}function m(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(p(e,a,a+s>c?c:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2163:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a}));n("fca1");var r=n("1d2f");const i=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&i(e,t,n+1)}},o=()=>{},s=(e,t)=>e===t,a=(e,t)=>{if(null==e||null==t)return s(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!a(e.get(n),t.get(n)))return!1;break;case Object:if(r["d"](e)!==r["d"](t))return!1;for(const n in e)if(!r["b"](e,n)||!a(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;break;default:return!1}return!0}},2266:function(e,t,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),s=n("0366"),a=n("35a1"),c=n("2a62"),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,h,f,d,p,m,v,g=n&&n.that,y=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),k=s(t,g,1+y+w),S=function(e){return l&&c(l),new u(!0,e)},x=function(e){return y?(r(e),w?k(e[0],e[1],S):k(e[0],e[1])):w?k(e,S):k(e)};if(b)l=e;else{if(h=a(e),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(f=0,d=o(e.length);d>f;f++)if(p=x(e[f]),p&&p instanceof u)return p;return new u(!1)}l=h.call(e)}m=l.next;while(!(v=m.call(l)).done){try{p=x(v.value)}catch(_){throw c(l),_}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},2309:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return a}));const r=()=>new Map,i=e=>{const t=r();return e.forEach((e,n)=>{t.set(n,e)}),t},o=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},s=(e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n},a=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1}},"23cb":function(e,t,n){var r=n("a691"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),s=n("6eeb"),a=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,h,f,d,p,m=e.target,v=e.global,g=e.stat;if(l=v?r:g?r[m]||a(m,{}):(r[m]||{}).prototype,l)for(h in t){if(d=t[h],e.noTargetGet?(p=i(l,h),f=p&&p.value):f=l[h],n=u(v?h:m+(g?".":"#")+h,e.forced),!n&&void 0!==f){if(typeof d===typeof f)continue;c(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),s(l,h,d,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},2532:function(e,t,n){"use strict";var r=n("23e7"),i=n("5a34"),o=n("1d80"),s=n("577e"),a=n("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~s(o(this)).indexOf(s(i(e)),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),i=n("825a"),o=n("577e"),s=n("d039"),a=n("ad6d"),c="toString",u=RegExp.prototype,l=u[c],h=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=c;(h||f)&&r(RegExp.prototype,c,(function(){var e=i(this),t=o(e.source),n=e.flags,r=o(void 0===n&&e instanceof RegExp&&!("flags"in u)?a.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),s=n("83ab"),a=o("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},2684:function(e,t,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,o=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,s=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,a=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm,c=r["c"].create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark("italic"),toggleItalic:()=>({commands:e})=>e.toggleMark("italic"),unsetItalic:()=>({commands:e})=>e.unsetMark("italic")}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Object(r["l"])(i,this.type),Object(r["l"])(s,this.type)]},addPasteRules(){return[Object(r["m"])(o,this.type),Object(r["m"])(a,this.type)]}});t["a"]=c},2718:function(e,t,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^\s*([-+*])\s$/,s=r["d"].create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList("bulletList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Object(i["e"])(o,this.type)]}});t["a"]=s},2877:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},"29a1":function(e,t,n){e.exports=n.p+"img/remixicon.symbol.f09b1c74.svg"},"2a62":function(e,t,n){var r=n("825a");e.exports=function(e){var t=e["return"];if(void 0!==t)return r(t.call(e)).value}},"2b0e":function(e,t,n){"use strict";(function(e){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function o(e){return!0===e}function s(e){return!1===e}function a(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var u=Object.prototype.toString;function l(e){return"[object Object]"===u.call(e)}function h(e){return"[object RegExp]"===u.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function d(e){return i(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===u?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}v("slot,component",!0);var g=v("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function w(e,t){return b.call(e,t)}function k(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var S=/-(\w)/g,x=k((function(e){return e.replace(S,(function(e,t){return t?t.toUpperCase():""}))})),_=k((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),C=/\B([A-Z])/g,O=k((function(e){return e.replace(C,"-$1").toLowerCase()}));function M(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function E(e,t){return e.bind(t)}var A=Function.prototype.bind?E:M;function T(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function R(e,t){for(var n in t)e[n]=t[n];return e}function D(e){for(var t={},n=0;n<e.length;n++)e[n]&&R(t,e[n]);return t}function I(e,t,n){}var N=function(e,t,n){return!1},P=function(e){return e};function j(e,t){if(e===t)return!0;var n=c(e),r=c(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return j(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every((function(n){return j(e[n],t[n])}))}catch(u){return!1}}function L(e,t){for(var n=0;n<e.length;n++)if(j(e[n],t))return n;return-1}function F(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var B="data-server-rendered",z=["component","directive","filter"],$=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:N,isReservedAttr:N,isUnknownElement:N,getTagNamespace:I,parsePlatformTagName:P,mustUseProp:N,async:!0,_lifecycleHooks:$},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^"+H.source+".$_\\d]");function K(e){if(!q.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var J,Y="__proto__"in{},G="undefined"!==typeof window,X="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Q=X&&WXEnvironment.platform.toLowerCase(),Z=G&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ne=Z&&Z.indexOf("edge/")>0,re=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===Q),ie=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),oe={}.watch,se=!1;if(G)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){se=!0}}),window.addEventListener("test-passive",null,ae)}catch(_s){}var ce=function(){return void 0===J&&(J=!G&&!X&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),J},ue=G&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function le(e){return"function"===typeof e&&/native code/.test(e.toString())}var he,fe="undefined"!==typeof Symbol&&le(Symbol)&&"undefined"!==typeof Reflect&&le(Reflect.ownKeys);he="undefined"!==typeof Set&&le(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var de=I,pe=0,me=function(){this.id=pe++,this.subs=[]};me.prototype.addSub=function(e){this.subs.push(e)},me.prototype.removeSub=function(e){y(this.subs,e)},me.prototype.depend=function(){me.target&&me.target.addDep(this)},me.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},me.target=null;var ve=[];function ge(e){ve.push(e),me.target=e}function ye(){ve.pop(),me.target=ve[ve.length-1]}var be=function(e,t,n,r,i,o,s,a){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},we={child:{configurable:!0}};we.child.get=function(){return this.componentInstance},Object.defineProperties(be.prototype,we);var ke=function(e){void 0===e&&(e="");var t=new be;return t.text=e,t.isComment=!0,t};function Se(e){return new be(void 0,void 0,void 0,String(e))}function xe(e){var t=new be(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var _e=Array.prototype,Ce=Object.create(_e),Oe=["push","pop","shift","unshift","splice","sort","reverse"];Oe.forEach((function(e){var t=_e[e];W(Ce,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&s.observeArray(i),s.dep.notify(),o}))}));var Me=Object.getOwnPropertyNames(Ce),Ee=!0;function Ae(e){Ee=e}var Te=function(e){this.value=e,this.dep=new me,this.vmCount=0,W(e,"__ob__",this),Array.isArray(e)?(Y?Re(e,Ce):De(e,Ce,Me),this.observeArray(e)):this.walk(e)};function Re(e,t){e.__proto__=t}function De(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];W(e,o,t[o])}}function Ie(e,t){var n;if(c(e)&&!(e instanceof be))return w(e,"__ob__")&&e.__ob__ instanceof Te?n=e.__ob__:Ee&&!ce()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Te(e)),t&&n&&n.vmCount++,n}function Ne(e,t,n,r,i){var o=new me,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set;a&&!c||2!==arguments.length||(n=e[t]);var u=!i&&Ie(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return me.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Le(t))),t},set:function(t){var r=a?a.call(e):n;t===r||t!==t&&r!==r||a&&!c||(c?c.call(e,t):n=t,u=!i&&Ie(t),o.notify())}})}}function Pe(e,t,n){if(Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Ne(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function je(e,t){if(Array.isArray(e)&&f(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||w(e,t)&&(delete e[t],n&&n.dep.notify())}}function Le(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Le(t)}Te.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Ne(e,t[n])},Te.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ie(e[t])};var Fe=U.optionMergeStrategies;function Be(e,t){if(!t)return e;for(var n,r,i,o=fe?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(r=e[n],i=t[n],w(e,n)?r!==i&&l(r)&&l(i)&&Be(r,i):Pe(e,n,i));return e}function ze(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?Be(r,i):i}:t?e?function(){return Be("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function $e(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?Ue(n):n}function Ue(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function He(e,t,n,r){var i=Object.create(e||null);return t?R(i,t):i}Fe.data=function(e,t,n){return n?ze(e,t,n):t&&"function"!==typeof t?e:ze(e,t)},$.forEach((function(e){Fe[e]=$e})),z.forEach((function(e){Fe[e+"s"]=He})),Fe.watch=function(e,t,n,r){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in R(i,e),t){var s=i[o],a=t[o];s&&!Array.isArray(s)&&(s=[s]),i[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return i},Fe.props=Fe.methods=Fe.inject=Fe.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return R(i,e),t&&R(i,t),i},Fe.provide=ze;var Ve=function(e,t){return void 0===t?e:t};function We(e,t){var n=e.props;if(n){var r,i,o,s={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=x(i),s[o]={type:null})}else if(l(n))for(var a in n)i=n[a],o=x(a),s[o]=l(i)?i:{type:i};else 0;e.props=s}}function qe(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var s=n[o];r[o]=l(s)?R({from:o},s):{from:s}}else 0}}function Ke(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function Je(e,t,n){if("function"===typeof t&&(t=t.options),We(t,n),qe(t,n),Ke(t),!t._base&&(t.extends&&(e=Je(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Je(e,t.mixins[r],n);var o,s={};for(o in e)a(o);for(o in t)w(e,o)||a(o);function a(r){var i=Fe[r]||Ve;s[r]=i(e[r],t[r],n,r)}return s}function Ye(e,t,n,r){if("string"===typeof n){var i=e[t];if(w(i,n))return i[n];var o=x(n);if(w(i,o))return i[o];var s=_(o);if(w(i,s))return i[s];var a=i[n]||i[o]||i[s];return a}}function Ge(e,t,n,r){var i=t[e],o=!w(n,e),s=n[e],a=tt(Boolean,i.type);if(a>-1)if(o&&!w(i,"default"))s=!1;else if(""===s||s===O(e)){var c=tt(String,i.type);(c<0||a<c)&&(s=!0)}if(void 0===s){s=Xe(r,i,e);var u=Ee;Ae(!0),Ie(s),Ae(u)}return s}function Xe(e,t,n){if(w(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Ze(t.type)?r.call(e):r}}var Qe=/^\s*function (\w+)/;function Ze(e){var t=e&&e.toString().match(Qe);return t?t[1]:""}function et(e,t){return Ze(e)===Ze(t)}function tt(e,t){if(!Array.isArray(t))return et(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(et(t[n],e))return n;return-1}function nt(e,t,n){ge();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var s=!1===i[o].call(r,e,t,n);if(s)return}catch(_s){it(_s,r,"errorCaptured hook")}}}it(e,t,n)}finally{ye()}}function rt(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&d(o)&&!o._handled&&(o.catch((function(e){return nt(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(_s){nt(_s,r,i)}return o}function it(e,t,n){if(U.errorHandler)try{return U.errorHandler.call(null,e,t,n)}catch(_s){_s!==e&&ot(_s,null,"config.errorHandler")}ot(e,t,n)}function ot(e,t,n){if(!G&&!X||"undefined"===typeof console)throw e;console.error(e)}var st,at=!1,ct=[],ut=!1;function lt(){ut=!1;var e=ct.slice(0);ct.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&le(Promise)){var ht=Promise.resolve();st=function(){ht.then(lt),re&&setTimeout(I)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!le(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())st="undefined"!==typeof setImmediate&&le(setImmediate)?function(){setImmediate(lt)}:function(){setTimeout(lt,0)};else{var ft=1,dt=new MutationObserver(lt),pt=document.createTextNode(String(ft));dt.observe(pt,{characterData:!0}),st=function(){ft=(ft+1)%2,pt.data=String(ft)},at=!0}function mt(e,t){var n;if(ct.push((function(){if(e)try{e.call(t)}catch(_s){nt(_s,t,"nextTick")}else n&&n(t)})),ut||(ut=!0,st()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var vt=new he;function gt(e){yt(e,vt),vt.clear()}function yt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!c(e)||Object.isFrozen(e)||e instanceof be)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)yt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)yt(e[r[n]],t)}}}var bt=k((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function wt(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return rt(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)rt(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function kt(e,t,n,i,s,a){var c,u,l,h;for(c in e)u=e[c],l=t[c],h=bt(c),r(u)||(r(l)?(r(u.fns)&&(u=e[c]=wt(u,a)),o(h.once)&&(u=e[c]=s(h.name,u,h.capture)),n(h.name,u,h.capture,h.passive,h.params)):u!==l&&(l.fns=u,e[c]=l));for(c in t)r(e[c])&&(h=bt(c),i(h.name,t[c],h.capture))}function St(e,t,n){var s;e instanceof be&&(e=e.data.hook||(e.data.hook={}));var a=e[t];function c(){n.apply(this,arguments),y(s.fns,c)}r(a)?s=wt([c]):i(a.fns)&&o(a.merged)?(s=a,s.fns.push(c)):s=wt([a,c]),s.merged=!0,e[t]=s}function xt(e,t,n){var o=t.options.props;if(!r(o)){var s={},a=e.attrs,c=e.props;if(i(a)||i(c))for(var u in o){var l=O(u);_t(s,c,u,l,!0)||_t(s,a,u,l,!1)}return s}}function _t(e,t,n,r,o){if(i(t)){if(w(t,n))return e[n]=t[n],o||delete t[n],!0;if(w(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function Ct(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Ot(e){return a(e)?[Se(e)]:Array.isArray(e)?Et(e):void 0}function Mt(e){return i(e)&&i(e.text)&&s(e.isComment)}function Et(e,t){var n,s,c,u,l=[];for(n=0;n<e.length;n++)s=e[n],r(s)||"boolean"===typeof s||(c=l.length-1,u=l[c],Array.isArray(s)?s.length>0&&(s=Et(s,(t||"")+"_"+n),Mt(s[0])&&Mt(u)&&(l[c]=Se(u.text+s[0].text),s.shift()),l.push.apply(l,s)):a(s)?Mt(u)?l[c]=Se(u.text+s):""!==s&&l.push(Se(s)):Mt(s)&&Mt(u)?l[c]=Se(u.text+s.text):(o(e._isVList)&&i(s.tag)&&r(s.key)&&i(t)&&(s.key="__vlist"+t+"_"+n+"__"),l.push(s)));return l}function At(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Tt(e){var t=Rt(e.$options.inject,e);t&&(Ae(!1),Object.keys(t).forEach((function(n){Ne(e,n,t[n])})),Ae(!0))}function Rt(e,t){if(e){for(var n=Object.create(null),r=fe?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var s=e[o].from,a=t;while(a){if(a._provided&&w(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in e[o]){var c=e[o].default;n[o]="function"===typeof c?c.call(t):c}else 0}}return n}}function Dt(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==t&&o.fnContext!==t||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,c=n[a]||(n[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(It)&&delete n[u];return n}function It(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Nt(e){return e.isComment&&e.asyncFactory}function Pt(e,t,r){var i,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==n&&a===r.$key&&!o&&!r.$hasNormal)return r;for(var c in i={},e)e[c]&&"$"!==c[0]&&(i[c]=jt(t,c,e[c]))}else i={};for(var u in t)u in i||(i[u]=Lt(t,u));return e&&Object.isExtensible(e)&&(e._normalized=i),W(i,"$stable",s),W(i,"$key",a),W(i,"$hasNormal",o),i}function jt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:Ot(e);var t=e&&e[0];return e&&(!t||1===e.length&&t.isComment&&!Nt(t))?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Lt(e,t){return function(){return e[t]}}function Ft(e,t){var n,r,o,s,a;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(c(e))if(fe&&e[Symbol.iterator]){n=[];var u=e[Symbol.iterator](),l=u.next();while(!l.done)n.push(t(l.value,n.length)),l=u.next()}else for(s=Object.keys(e),n=new Array(s.length),r=0,o=s.length;r<o;r++)a=s[r],n[r]=t(e[a],a,r);return i(n)||(n=[]),n._isVList=!0,n}function Bt(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=R(R({},r),n)),i=o(n)||("function"===typeof t?t():t)):i=this.$slots[e]||("function"===typeof t?t():t);var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function zt(e){return Ye(this.$options,"filters",e,!0)||P}function $t(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ut(e,t,n,r,i){var o=U.keyCodes[t]||n;return i&&r&&!U.keyCodes[t]?$t(i,r):o?$t(o,e):r?O(r)!==t:void 0===e}function Ht(e,t,n,r,i){if(n)if(c(n)){var o;Array.isArray(n)&&(n=D(n));var s=function(s){if("class"===s||"style"===s||g(s))o=e;else{var a=e.attrs&&e.attrs.type;o=r||U.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=x(s),u=O(s);if(!(c in o)&&!(u in o)&&(o[s]=n[s],i)){var l=e.on||(e.on={});l["update:"+s]=function(e){n[s]=e}}};for(var a in n)s(a)}else;return e}function Vt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),qt(r,"__static__"+e,!1)),r}function Wt(e,t,n){return qt(e,"__once__"+t+(n?"_"+n:""),!0),e}function qt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Kt(e[r],t+"_"+r,n);else Kt(e,t,n)}function Kt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Jt(e,t){if(t)if(l(t)){var n=e.on=e.on?R({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function Yt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?Yt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Gt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Xt(e,t){return"string"===typeof e?t+e:e}function Qt(e){e._o=Wt,e._n=m,e._s=p,e._l=Ft,e._t=Bt,e._q=j,e._i=L,e._m=Vt,e._f=zt,e._k=Ut,e._b=Ht,e._v=Se,e._e=ke,e._u=Yt,e._g=Jt,e._d=Gt,e._p=Xt}function Zt(e,t,r,i,s){var a,c=this,u=s.options;w(i,"_uid")?(a=Object.create(i),a._original=i):(a=i,i=i._original);var l=o(u._compiled),h=!l;this.data=e,this.props=t,this.children=r,this.parent=i,this.listeners=e.on||n,this.injections=Rt(u.inject,i),this.slots=function(){return c.$slots||Pt(e.scopedSlots,c.$slots=Dt(r,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Pt(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Pt(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,r){var o=dn(a,e,t,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return dn(a,e,t,n,r,h)}}function en(e,t,r,o,s){var a=e.options,c={},u=a.props;if(i(u))for(var l in u)c[l]=Ge(l,u,t||n);else i(r.attrs)&&nn(c,r.attrs),i(r.props)&&nn(c,r.props);var h=new Zt(r,c,s,o,e),f=a.render.call(null,h._c,h);if(f instanceof be)return tn(f,r,h.parent,a,h);if(Array.isArray(f)){for(var d=Ot(f)||[],p=new Array(d.length),m=0;m<d.length;m++)p[m]=tn(d[m],r,h.parent,a,h);return p}}function tn(e,t,n,r,i){var o=xe(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function nn(e,t){for(var n in t)e[x(n)]=t[n]}Qt(Zt.prototype);var rn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;rn.prepatch(n,n)}else{var r=e.componentInstance=an(e,Rn);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;jn(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,zn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Zn(n):Fn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Bn(t,!0):t.$destroy())}},on=Object.keys(rn);function sn(e,t,n,s,a){if(!r(e)){var u=n.$options._base;if(c(e)&&(e=u.extend(e)),"function"===typeof e){var l;if(r(e.cid)&&(l=e,e=xn(l,u),void 0===e))return Sn(l,t,n,s,a);t=t||{},Sr(e),i(t.model)&&ln(e.options,t);var h=xt(t,e,a);if(o(e.options.functional))return en(e,h,t,n,s);var f=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var d=t.slot;t={},d&&(t.slot=d)}cn(t);var p=e.options.name||a,m=new be("vue-component-"+e.cid+(p?"-"+p:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:h,listeners:f,tag:a,children:s},l);return m}}}function an(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function cn(e){for(var t=e.hook||(e.hook={}),n=0;n<on.length;n++){var r=on[n],i=t[r],o=rn[r];i===o||i&&i._merged||(t[r]=i?un(o,i):o)}}function un(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function ln(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),s=o[r],a=t.model.callback;i(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[r]=[a].concat(s)):o[r]=a}var hn=1,fn=2;function dn(e,t,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=fn),pn(e,t,n,r,i)}function pn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return ke();if(i(n)&&i(n.is)&&(t=n.is),!t)return ke();var s,a,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===fn?r=Ot(r):o===hn&&(r=Ct(r)),"string"===typeof t)?(a=e.$vnode&&e.$vnode.ns||U.getTagNamespace(t),s=U.isReservedTag(t)?new be(U.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!i(c=Ye(e.$options,"components",t))?new be(t,n,r,void 0,void 0,e):sn(c,n,e,r,t)):s=sn(t,n,e,r);return Array.isArray(s)?s:i(s)?(i(a)&&mn(s,a),i(n)&&vn(n),s):ke()}function mn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var s=0,a=e.children.length;s<a;s++){var c=e.children[s];i(c.tag)&&(r(c.ns)||o(n)&&"svg"!==c.tag)&&mn(c,t,n)}}function vn(e){c(e.style)&&gt(e.style),c(e.class)&&gt(e.class)}function gn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,i=r&&r.context;e.$slots=Dt(t._renderChildren,i),e.$scopedSlots=n,e._c=function(t,n,r,i){return dn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return dn(e,t,n,r,i,!0)};var o=r&&r.data;Ne(e,"$attrs",o&&o.attrs||n,null,!0),Ne(e,"$listeners",t._parentListeners||n,null,!0)}var yn,bn=null;function wn(e){Qt(e.prototype),e.prototype.$nextTick=function(e){return mt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=Pt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{bn=t,e=r.call(t._renderProxy,t.$createElement)}catch(_s){nt(_s,t,"render"),e=t._vnode}finally{bn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof be||(e=ke()),e.parent=i,e}}function kn(e,t){return(e.__esModule||fe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function Sn(e,t,n,r,i){var o=ke();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function xn(e,t){if(o(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=bn;if(n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var s=e.owners=[n],a=!0,u=null,l=null;n.$on("hook:destroyed",(function(){return y(s,n)}));var h=function(e){for(var t=0,n=s.length;t<n;t++)s[t].$forceUpdate();e&&(s.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},f=F((function(n){e.resolved=kn(n,t),a?s.length=0:h(!0)})),p=F((function(t){i(e.errorComp)&&(e.error=!0,h(!0))})),m=e(f,p);return c(m)&&(d(m)?r(e.resolved)&&m.then(f,p):d(m.component)&&(m.component.then(f,p),i(m.error)&&(e.errorComp=kn(m.error,t)),i(m.loading)&&(e.loadingComp=kn(m.loading,t),0===m.delay?e.loading=!0:u=setTimeout((function(){u=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,h(!1))}),m.delay||200)),i(m.timeout)&&(l=setTimeout((function(){l=null,r(e.resolved)&&p(null)}),m.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}function _n(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Nt(n)))return n}}function Cn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&An(e,t)}function On(e,t){yn.$on(e,t)}function Mn(e,t){yn.$off(e,t)}function En(e,t){var n=yn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function An(e,t,n){yn=e,kt(t,n||{},On,Mn,En,e),yn=void 0}function Tn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var a=s.length;while(a--)if(o=s[a],o===t||o.fn===t){s.splice(a,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?T(n):n;for(var r=T(arguments,1),i='event handler for "'+e+'"',o=0,s=n.length;o<s;o++)rt(n[o],t,r,t,i)}return t}}var Rn=null;function Dn(e){var t=Rn;return Rn=e,function(){Rn=t}}function In(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Nn(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Dn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){zn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),zn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Pn(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=ke),zn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new rr(e,r,I,{before:function(){e._isMounted&&!e._isDestroyed&&zn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,zn(e,"mounted")),e}function jn(e,t,r,i,o){var s=i.data.scopedSlots,a=e.$scopedSlots,c=!!(s&&!s.$stable||a!==n&&!a.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),u=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Ae(!1);for(var l=e._props,h=e.$options._propKeys||[],f=0;f<h.length;f++){var d=h[f],p=e.$options.props;l[d]=Ge(d,p,t,e)}Ae(!0),e.$options.propsData=t}r=r||n;var m=e.$options._parentListeners;e.$options._parentListeners=r,An(e,r,m),u&&(e.$slots=Dt(o,i.context),e.$forceUpdate())}function Ln(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Fn(e,t){if(t){if(e._directInactive=!1,Ln(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Fn(e.$children[n]);zn(e,"activated")}}function Bn(e,t){if((!t||(e._directInactive=!0,!Ln(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Bn(e.$children[n]);zn(e,"deactivated")}}function zn(e,t){ge();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)rt(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),ye()}var $n=[],Un=[],Hn={},Vn=!1,Wn=!1,qn=0;function Kn(){qn=$n.length=Un.length=0,Hn={},Vn=Wn=!1}var Jn=0,Yn=Date.now;if(G&&!ee){var Gn=window.performance;Gn&&"function"===typeof Gn.now&&Yn()>document.createEvent("Event").timeStamp&&(Yn=function(){return Gn.now()})}function Xn(){var e,t;for(Jn=Yn(),Wn=!0,$n.sort((function(e,t){return e.id-t.id})),qn=0;qn<$n.length;qn++)e=$n[qn],e.before&&e.before(),t=e.id,Hn[t]=null,e.run();var n=Un.slice(),r=$n.slice();Kn(),er(n),Qn(r),ue&&U.devtools&&ue.emit("flush")}function Qn(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&zn(r,"updated")}}function Zn(e){e._inactive=!1,Un.push(e)}function er(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Fn(e[t],!0)}function tr(e){var t=e.id;if(null==Hn[t]){if(Hn[t]=!0,Wn){var n=$n.length-1;while(n>qn&&$n[n].id>e.id)n--;$n.splice(n+1,0,e)}else $n.push(e);Vn||(Vn=!0,mt(Xn))}}var nr=0,rr=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++nr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new he,this.newDepIds=new he,this.expression="","function"===typeof t?this.getter=t:(this.getter=K(t),this.getter||(this.getter=I)),this.value=this.lazy?void 0:this.get()};rr.prototype.get=function(){var e;ge(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(_s){if(!this.user)throw _s;nt(_s,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&gt(e),ye(),this.cleanupDeps()}return e},rr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},rr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},rr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},rr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'+this.expression+'"';rt(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},rr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},rr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},rr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var ir={enumerable:!0,configurable:!0,get:I,set:I};function or(e,t,n){ir.get=function(){return this[t][n]},ir.set=function(e){this[t][n]=e},Object.defineProperty(e,n,ir)}function sr(e){e._watchers=[];var t=e.$options;t.props&&ar(e,t.props),t.methods&&mr(e,t.methods),t.data?cr(e):Ie(e._data={},!0),t.computed&&hr(e,t.computed),t.watch&&t.watch!==oe&&vr(e,t.watch)}function ar(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||Ae(!1);var s=function(o){i.push(o);var s=Ge(o,t,n,e);Ne(r,o,s),o in e||or(e,"_props",o)};for(var a in t)s(a);Ae(!0)}function cr(e){var t=e.$options.data;t=e._data="function"===typeof t?ur(t,e):t||{},l(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&w(r,o)||V(o)||or(e,"_data",o)}Ie(t,!0)}function ur(e,t){ge();try{return e.call(t,t)}catch(_s){return nt(_s,t,"data()"),{}}finally{ye()}}var lr={lazy:!0};function hr(e,t){var n=e._computedWatchers=Object.create(null),r=ce();for(var i in t){var o=t[i],s="function"===typeof o?o:o.get;0,r||(n[i]=new rr(e,s||I,I,lr)),i in e||fr(e,i,o)}}function fr(e,t,n){var r=!ce();"function"===typeof n?(ir.get=r?dr(t):pr(n),ir.set=I):(ir.get=n.get?r&&!1!==n.cache?dr(t):pr(n.get):I,ir.set=n.set||I),Object.defineProperty(e,t,ir)}function dr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),me.target&&t.depend(),t.value}}function pr(e){return function(){return e.call(this,this)}}function mr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?I:A(t[n],e)}function vr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)gr(e,n,r[i]);else gr(e,n,r)}}function gr(e,t,n,r){return l(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function yr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Pe,e.prototype.$delete=je,e.prototype.$watch=function(e,t,n){var r=this;if(l(t))return gr(r,e,t,n);n=n||{},n.user=!0;var i=new rr(r,e,t,n);if(n.immediate){var o='callback for immediate watcher "'+i.expression+'"';ge(),rt(t,r,[i.value],r,o),ye()}return function(){i.teardown()}}}var br=0;function wr(e){e.prototype._init=function(e){var t=this;t._uid=br++,t._isVue=!0,e&&e._isComponent?kr(t,e):t.$options=Je(Sr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,In(t),Cn(t),gn(t),zn(t,"beforeCreate"),Tt(t),sr(t),At(t),zn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function kr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Sr(e){var t=e.options;if(e.super){var n=Sr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=xr(e);i&&R(e.extendOptions,i),t=e.options=Je(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function xr(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function _r(e){this._init(e)}function Cr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=T(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Or(e){e.mixin=function(e){return this.options=Je(this.options,e),this}}function Mr(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var s=function(e){this._init(e)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=t++,s.options=Je(n.options,e),s["super"]=n,s.options.props&&Er(s),s.options.computed&&Ar(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,z.forEach((function(e){s[e]=n[e]})),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=R({},s.options),i[r]=s,s}}function Er(e){var t=e.options.props;for(var n in t)or(e.prototype,"_props",n)}function Ar(e){var t=e.options.computed;for(var n in t)fr(e.prototype,n,t[n])}function Tr(e){z.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Rr(e){return e&&(e.Ctor.options.name||e.tag)}function Dr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!h(e)&&e.test(t)}function Ir(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var s=n[o];if(s){var a=s.name;a&&!t(a)&&Nr(n,o,r,i)}}}function Nr(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,y(n,t)}wr(_r),yr(_r),Tn(_r),Nn(_r),wn(_r);var Pr=[String,RegExp,Array],jr={name:"keep-alive",abstract:!0,props:{include:Pr,exclude:Pr,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,r=e.vnodeToCache,i=e.keyToCache;if(r){var o=r.tag,s=r.componentInstance,a=r.componentOptions;t[i]={name:Rr(a),tag:o,componentInstance:s},n.push(i),this.max&&n.length>parseInt(this.max)&&Nr(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Nr(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Ir(e,(function(e){return Dr(t,e)}))})),this.$watch("exclude",(function(t){Ir(e,(function(e){return!Dr(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=_n(e),n=t&&t.componentOptions;if(n){var r=Rr(n),i=this,o=i.include,s=i.exclude;if(o&&(!r||!Dr(o,r))||s&&r&&Dr(s,r))return t;var a=this,c=a.cache,u=a.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[l]?(t.componentInstance=c[l].componentInstance,y(u,l),u.push(l)):(this.vnodeToCache=t,this.keyToCache=l),t.data.keepAlive=!0}return t||e&&e[0]}},Lr={KeepAlive:jr};function Fr(e){var t={get:function(){return U}};Object.defineProperty(e,"config",t),e.util={warn:de,extend:R,mergeOptions:Je,defineReactive:Ne},e.set=Pe,e.delete=je,e.nextTick=mt,e.observable=function(e){return Ie(e),e},e.options=Object.create(null),z.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,R(e.options.components,Lr),Cr(e),Or(e),Mr(e),Tr(e)}Fr(_r),Object.defineProperty(_r.prototype,"$isServer",{get:ce}),Object.defineProperty(_r.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_r,"FunctionalRenderContext",{value:Zt}),_r.version="2.6.14";var Br=v("style,class"),zr=v("input,textarea,option,select,progress"),$r=function(e,t,n){return"value"===n&&zr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Ur=v("contenteditable,draggable,spellcheck"),Hr=v("events,caret,typing,plaintext-only"),Vr=function(e,t){return Yr(t)||"false"===t?"false":"contenteditable"===e&&Hr(t)?t:"true"},Wr=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),qr="http://www.w3.org/1999/xlink",Kr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Jr=function(e){return Kr(e)?e.slice(6,e.length):""},Yr=function(e){return null==e||!1===e};function Gr(e){var t=e.data,n=e,r=e;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Xr(r.data,t));while(i(n=n.parent))n&&n.data&&(t=Xr(t,n.data));return Qr(t.staticClass,t.class)}function Xr(e,t){return{staticClass:Zr(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function Qr(e,t){return i(e)||i(t)?Zr(e,ei(t)):""}function Zr(e,t){return e?t?e+" "+t:e:t||""}function ei(e){return Array.isArray(e)?ti(e):c(e)?ni(e):"string"===typeof e?e:""}function ti(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=ei(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ni(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ri={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ii=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oi=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),si=function(e){return ii(e)||oi(e)};function ai(e){return oi(e)?"svg":"math"===e?"math":void 0}var ci=Object.create(null);function ui(e){if(!G)return!0;if(si(e))return!1;if(e=e.toLowerCase(),null!=ci[e])return ci[e];var t=document.createElement(e);return e.indexOf("-")>-1?ci[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ci[e]=/HTMLUnknownElement/.test(t.toString())}var li=v("text,number,password,search,email,tel,url");function hi(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function fi(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function di(e,t){return document.createElementNS(ri[e],t)}function pi(e){return document.createTextNode(e)}function mi(e){return document.createComment(e)}function vi(e,t,n){e.insertBefore(t,n)}function gi(e,t){e.removeChild(t)}function yi(e,t){e.appendChild(t)}function bi(e){return e.parentNode}function wi(e){return e.nextSibling}function ki(e){return e.tagName}function Si(e,t){e.textContent=t}function xi(e,t){e.setAttribute(t,"")}var _i=Object.freeze({createElement:fi,createElementNS:di,createTextNode:pi,createComment:mi,insertBefore:vi,removeChild:gi,appendChild:yi,parentNode:bi,nextSibling:wi,tagName:ki,setTextContent:Si,setStyleScope:xi}),Ci={create:function(e,t){Oi(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Oi(e,!0),Oi(t))},destroy:function(e){Oi(e,!0)}};function Oi(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,s=r.$refs;t?Array.isArray(s[n])?y(s[n],o):s[n]===o&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var Mi=new be("",{},[]),Ei=["create","activate","update","remove","destroy"];function Ai(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&Ti(e,t)||o(e.isAsyncPlaceholder)&&r(t.asyncFactory.error))}function Ti(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o||li(r)&&li(o)}function Ri(e,t,n){var r,o,s={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(s[o]=r);return s}function Di(e){var t,n,s={},c=e.modules,u=e.nodeOps;for(t=0;t<Ei.length;++t)for(s[Ei[t]]=[],n=0;n<c.length;++n)i(c[n][Ei[t]])&&s[Ei[t]].push(c[n][Ei[t]]);function l(e){return new be(u.tagName(e).toLowerCase(),{},[],void 0,e)}function h(e,t){function n(){0===--n.listeners&&f(e)}return n.listeners=t,n}function f(e){var t=u.parentNode(e);i(t)&&u.removeChild(t,e)}function d(e,t,n,r,s,a,c){if(i(e.elm)&&i(a)&&(e=a[c]=xe(e)),e.isRootInsert=!s,!p(e,t,n,r)){var l=e.data,h=e.children,f=e.tag;i(f)?(e.elm=e.ns?u.createElementNS(e.ns,f):u.createElement(f,e),S(e),b(e,h,t),i(l)&&k(e,t),y(n,e.elm,r)):o(e.isComment)?(e.elm=u.createComment(e.text),y(n,e.elm,r)):(e.elm=u.createTextNode(e.text),y(n,e.elm,r))}}function p(e,t,n,r){var s=e.data;if(i(s)){var a=i(e.componentInstance)&&s.keepAlive;if(i(s=s.hook)&&i(s=s.init)&&s(e,!1),i(e.componentInstance))return m(e,t),y(n,e.elm,r),o(a)&&g(e,t,n,r),!0}}function m(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,w(e)?(k(e,t),S(e)):(Oi(e),t.push(e))}function g(e,t,n,r){var o,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,i(o=a.data)&&i(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Mi,a);t.push(a);break}y(n,e.elm,r)}function y(e,t,n){i(e)&&(i(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function b(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)d(t[r],n,e.elm,null,!0,t,r)}else a(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function w(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function k(e,n){for(var r=0;r<s.create.length;++r)s.create[r](Mi,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(Mi,e),i(t.insert)&&n.push(e))}function S(e){var t;if(i(t=e.fnScopeId))u.setStyleScope(e.elm,t);else{var n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent}i(t=Rn)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t)}function x(e,t,n,r,i,o){for(;r<=i;++r)d(n[r],o,e,t,!1,n,r)}function _(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)_(e.children[n])}function C(e,t,n){for(;t<=n;++t){var r=e[t];i(r)&&(i(r.tag)?(O(r),_(r)):f(r.elm))}}function O(e,t){if(i(t)||i(e.data)){var n,r=s.remove.length+1;for(i(t)?t.listeners+=r:t=h(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&O(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else f(e.elm)}function M(e,t,n,o,s){var a,c,l,h,f=0,p=0,m=t.length-1,v=t[0],g=t[m],y=n.length-1,b=n[0],w=n[y],k=!s;while(f<=m&&p<=y)r(v)?v=t[++f]:r(g)?g=t[--m]:Ai(v,b)?(A(v,b,o,n,p),v=t[++f],b=n[++p]):Ai(g,w)?(A(g,w,o,n,y),g=t[--m],w=n[--y]):Ai(v,w)?(A(v,w,o,n,y),k&&u.insertBefore(e,v.elm,u.nextSibling(g.elm)),v=t[++f],w=n[--y]):Ai(g,b)?(A(g,b,o,n,p),k&&u.insertBefore(e,g.elm,v.elm),g=t[--m],b=n[++p]):(r(a)&&(a=Ri(t,f,m)),c=i(b.key)?a[b.key]:E(b,t,f,m),r(c)?d(b,o,e,v.elm,!1,n,p):(l=t[c],Ai(l,b)?(A(l,b,o,n,p),t[c]=void 0,k&&u.insertBefore(e,l.elm,v.elm)):d(b,o,e,v.elm,!1,n,p)),b=n[++p]);f>m?(h=r(n[y+1])?null:n[y+1].elm,x(e,h,n,p,y,o)):p>y&&C(t,f,m)}function E(e,t,n,r){for(var o=n;o<r;o++){var s=t[o];if(i(s)&&Ai(e,s))return o}}function A(e,t,n,a,c,l){if(e!==t){i(t.elm)&&i(a)&&(t=a[c]=xe(t));var h=t.elm=e.elm;if(o(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?D(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var f,d=t.data;i(d)&&i(f=d.hook)&&i(f=f.prepatch)&&f(e,t);var p=e.children,m=t.children;if(i(d)&&w(t)){for(f=0;f<s.update.length;++f)s.update[f](e,t);i(f=d.hook)&&i(f=f.update)&&f(e,t)}r(t.text)?i(p)&&i(m)?p!==m&&M(h,p,m,n,l):i(m)?(i(e.text)&&u.setTextContent(h,""),x(h,null,m,0,m.length-1,n)):i(p)?C(p,0,p.length-1):i(e.text)&&u.setTextContent(h,""):e.text!==t.text&&u.setTextContent(h,t.text),i(d)&&i(f=d.hook)&&i(f=f.postpatch)&&f(e,t)}}}function T(e,t,n){if(o(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var R=v("attrs,class,staticClass,staticStyle,key");function D(e,t,n,r){var s,a=t.tag,c=t.data,u=t.children;if(r=r||c&&c.pre,t.elm=e,o(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(s=c.hook)&&i(s=s.init)&&s(t,!0),i(s=t.componentInstance)))return m(t,n),!0;if(i(a)){if(i(u))if(e.hasChildNodes())if(i(s=c)&&i(s=s.domProps)&&i(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var l=!0,h=e.firstChild,f=0;f<u.length;f++){if(!h||!D(h,u[f],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else b(t,u,n);if(i(c)){var d=!1;for(var p in c)if(!R(p)){d=!0,k(t,n);break}!d&&c["class"]&&gt(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,a){if(!r(t)){var c=!1,h=[];if(r(e))c=!0,d(t,h);else{var f=i(e.nodeType);if(!f&&Ai(e,t))A(e,t,h,null,null,a);else{if(f){if(1===e.nodeType&&e.hasAttribute(B)&&(e.removeAttribute(B),n=!0),o(n)&&D(e,t,h))return T(t,h,!0),e;e=l(e)}var p=e.elm,m=u.parentNode(p);if(d(t,h,p._leaveCb?null:m,u.nextSibling(p)),i(t.parent)){var v=t.parent,g=w(t);while(v){for(var y=0;y<s.destroy.length;++y)s.destroy[y](v);if(v.elm=t.elm,g){for(var b=0;b<s.create.length;++b)s.create[b](Mi,v);var k=v.data.hook.insert;if(k.merged)for(var S=1;S<k.fns.length;S++)k.fns[S]()}else Oi(v);v=v.parent}}i(m)?C([e],0,0):i(e.tag)&&_(e)}}return T(t,h,c),t.elm}i(e)&&_(e)}}var Ii={create:Ni,update:Ni,destroy:function(e){Ni(e,Mi)}};function Ni(e,t){(e.data.directives||t.data.directives)&&Pi(e,t)}function Pi(e,t){var n,r,i,o=e===Mi,s=t===Mi,a=Li(e.data.directives,e.context),c=Li(t.data.directives,t.context),u=[],l=[];for(n in c)r=a[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Bi(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(Bi(i,"bind",t,e),i.def&&i.def.inserted&&u.push(i));if(u.length){var h=function(){for(var n=0;n<u.length;n++)Bi(u[n],"inserted",t,e)};o?St(t,"insert",h):h()}if(l.length&&St(t,"postpatch",(function(){for(var n=0;n<l.length;n++)Bi(l[n],"componentUpdated",t,e)})),!o)for(n in a)c[n]||Bi(a[n],"unbind",e,e,s)}var ji=Object.create(null);function Li(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=ji),i[Fi(r)]=r,r.def=Ye(t.$options,"directives",r.name,!0);return i}function Fi(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Bi(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(_s){nt(_s,n.context,"directive "+e.name+" "+t+" hook")}}var zi=[Ci,Ii];function $i(e,t){var n=t.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var o,s,a,c=t.elm,u=e.data.attrs||{},l=t.data.attrs||{};for(o in i(l.__ob__)&&(l=t.data.attrs=R({},l)),l)s=l[o],a=u[o],a!==s&&Ui(c,o,s,t.data.pre);for(o in(ee||ne)&&l.value!==u.value&&Ui(c,"value",l.value),u)r(l[o])&&(Kr(o)?c.removeAttributeNS(qr,Jr(o)):Ur(o)||c.removeAttribute(o))}}function Ui(e,t,n,r){r||e.tagName.indexOf("-")>-1?Hi(e,t,n):Wr(t)?Yr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Ur(t)?e.setAttribute(t,Vr(t,n)):Kr(t)?Yr(n)?e.removeAttributeNS(qr,Jr(t)):e.setAttributeNS(qr,t,n):Hi(e,t,n)}function Hi(e,t,n){if(Yr(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Vi={create:$i,update:$i};function Wi(e,t){var n=t.elm,o=t.data,s=e.data;if(!(r(o.staticClass)&&r(o.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=Gr(t),c=n._transitionClasses;i(c)&&(a=Zr(a,ei(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var qi,Ki={create:Wi,update:Wi},Ji="__r",Yi="__c";function Gi(e){if(i(e[Ji])){var t=ee?"change":"input";e[t]=[].concat(e[Ji],e[t]||[]),delete e[Ji]}i(e[Yi])&&(e.change=[].concat(e[Yi],e.change||[]),delete e[Yi])}function Xi(e,t,n){var r=qi;return function i(){var o=t.apply(null,arguments);null!==o&&eo(e,i,n,r)}}var Qi=at&&!(ie&&Number(ie[1])<=53);function Zi(e,t,n,r){if(Qi){var i=Jn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}qi.addEventListener(e,t,se?{capture:n,passive:r}:n)}function eo(e,t,n,r){(r||qi).removeEventListener(e,t._wrapper||t,n)}function to(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};qi=t.elm,Gi(n),kt(n,i,Zi,eo,Xi,t.context),qi=void 0}}var no,ro={create:to,update:to};function io(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,o,s=t.elm,a=e.data.domProps||{},c=t.data.domProps||{};for(n in i(c.__ob__)&&(c=t.data.domProps=R({},c)),a)n in c||(s[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=o;var u=r(o)?"":String(o);oo(s,u)&&(s.value=u)}else if("innerHTML"===n&&oi(s.tagName)&&r(s.innerHTML)){no=no||document.createElement("div"),no.innerHTML="<svg>"+o+"</svg>";var l=no.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(l.firstChild)s.appendChild(l.firstChild)}else if(o!==a[n])try{s[n]=o}catch(_s){}}}}function oo(e,t){return!e.composing&&("OPTION"===e.tagName||so(e,t)||ao(e,t))}function so(e,t){var n=!0;try{n=document.activeElement!==e}catch(_s){}return n&&e.value!==t}function ao(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var co={create:io,update:io},uo=k((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function lo(e){var t=ho(e.style);return e.staticStyle?R(e.staticStyle,t):t}function ho(e){return Array.isArray(e)?D(e):"string"===typeof e?uo(e):e}function fo(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=lo(i.data))&&R(r,n)}(n=lo(e.data))&&R(r,n);var o=e;while(o=o.parent)o.data&&(n=lo(o.data))&&R(r,n);return r}var po,mo=/^--/,vo=/\s*!important$/,go=function(e,t,n){if(mo.test(t))e.style.setProperty(t,n);else if(vo.test(n))e.style.setProperty(O(t),n.replace(vo,""),"important");else{var r=bo(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},yo=["Webkit","Moz","ms"],bo=k((function(e){if(po=po||document.createElement("div").style,e=x(e),"filter"!==e&&e in po)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<yo.length;n++){var r=yo[n]+t;if(r in po)return r}}));function wo(e,t){var n=t.data,o=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var s,a,c=t.elm,u=o.staticStyle,l=o.normalizedStyle||o.style||{},h=u||l,f=ho(t.data.style)||{};t.data.normalizedStyle=i(f.__ob__)?R({},f):f;var d=fo(t,!0);for(a in h)r(d[a])&&go(c,a,"");for(a in d)s=d[a],s!==h[a]&&go(c,a,null==s?"":s)}}var ko={create:wo,update:wo},So=/\s+/;function xo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(So).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function _o(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(So).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Co(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&R(t,Oo(e.name||"v")),R(t,e),t}return"string"===typeof e?Oo(e):void 0}}var Oo=k((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Mo=G&&!te,Eo="transition",Ao="animation",To="transition",Ro="transitionend",Do="animation",Io="animationend";Mo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(To="WebkitTransition",Ro="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Do="WebkitAnimation",Io="webkitAnimationEnd"));var No=G?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Po(e){No((function(){No(e)}))}function jo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),xo(e,t))}function Lo(e,t){e._transitionClasses&&y(e._transitionClasses,t),_o(e,t)}function Fo(e,t,n){var r=zo(e,t),i=r.type,o=r.timeout,s=r.propCount;if(!i)return n();var a=i===Eo?Ro:Io,c=0,u=function(){e.removeEventListener(a,l),n()},l=function(t){t.target===e&&++c>=s&&u()};setTimeout((function(){c<s&&u()}),o+1),e.addEventListener(a,l)}var Bo=/\b(transform|all)(,|$)/;function zo(e,t){var n,r=window.getComputedStyle(e),i=(r[To+"Delay"]||"").split(", "),o=(r[To+"Duration"]||"").split(", "),s=$o(i,o),a=(r[Do+"Delay"]||"").split(", "),c=(r[Do+"Duration"]||"").split(", "),u=$o(a,c),l=0,h=0;t===Eo?s>0&&(n=Eo,l=s,h=o.length):t===Ao?u>0&&(n=Ao,l=u,h=c.length):(l=Math.max(s,u),n=l>0?s>u?Eo:Ao:null,h=n?n===Eo?o.length:c.length:0);var f=n===Eo&&Bo.test(r[To+"Property"]);return{type:n,timeout:l,propCount:h,hasTransform:f}}function $o(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Uo(t)+Uo(e[n])})))}function Uo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ho(e,t){var n=e.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Co(e.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var s=o.css,a=o.type,u=o.enterClass,l=o.enterToClass,h=o.enterActiveClass,f=o.appearClass,d=o.appearToClass,p=o.appearActiveClass,v=o.beforeEnter,g=o.enter,y=o.afterEnter,b=o.enterCancelled,w=o.beforeAppear,k=o.appear,S=o.afterAppear,x=o.appearCancelled,_=o.duration,C=Rn,O=Rn.$vnode;while(O&&O.parent)C=O.context,O=O.parent;var M=!C._isMounted||!e.isRootInsert;if(!M||k||""===k){var E=M&&f?f:u,A=M&&p?p:h,T=M&&d?d:l,R=M&&w||v,D=M&&"function"===typeof k?k:g,I=M&&S||y,N=M&&x||b,P=m(c(_)?_.enter:_);0;var j=!1!==s&&!te,L=qo(D),B=n._enterCb=F((function(){j&&(Lo(n,T),Lo(n,A)),B.cancelled?(j&&Lo(n,E),N&&N(n)):I&&I(n),n._enterCb=null}));e.data.show||St(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),D&&D(n,B)})),R&&R(n),j&&(jo(n,E),jo(n,A),Po((function(){Lo(n,E),B.cancelled||(jo(n,T),L||(Wo(P)?setTimeout(B,P):Fo(n,a,B)))}))),e.data.show&&(t&&t(),D&&D(n,B)),j||L||B()}}}function Vo(e,t){var n=e.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Co(e.data.transition);if(r(o)||1!==n.nodeType)return t();if(!i(n._leaveCb)){var s=o.css,a=o.type,u=o.leaveClass,l=o.leaveToClass,h=o.leaveActiveClass,f=o.beforeLeave,d=o.leave,p=o.afterLeave,v=o.leaveCancelled,g=o.delayLeave,y=o.duration,b=!1!==s&&!te,w=qo(d),k=m(c(y)?y.leave:y);0;var S=n._leaveCb=F((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(Lo(n,l),Lo(n,h)),S.cancelled?(b&&Lo(n,u),v&&v(n)):(t(),p&&p(n)),n._leaveCb=null}));g?g(x):x()}function x(){S.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),b&&(jo(n,u),jo(n,h),Po((function(){Lo(n,u),S.cancelled||(jo(n,l),w||(Wo(k)?setTimeout(S,k):Fo(n,a,S)))}))),d&&d(n,S),b||w||S())}}function Wo(e){return"number"===typeof e&&!isNaN(e)}function qo(e){if(r(e))return!1;var t=e.fns;return i(t)?qo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ko(e,t){!0!==t.data.show&&Ho(t)}var Jo=G?{create:Ko,activate:Ko,remove:function(e,t){!0!==e.data.show?Vo(e,t):t()}}:{},Yo=[Vi,Ki,ro,co,ko,Jo],Go=Yo.concat(zi),Xo=Di({nodeOps:_i,modules:Go});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&os(e,"input")}));var Qo={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?St(n,"postpatch",(function(){Qo.componentUpdated(e,t,n)})):Zo(e,t,n.context),e._vOptions=[].map.call(e.options,ns)):("textarea"===n.tag||li(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",rs),e.addEventListener("compositionend",is),e.addEventListener("change",is),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Zo(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,ns);if(i.some((function(e,t){return!j(e,r[t])}))){var o=e.multiple?t.value.some((function(e){return ts(e,i)})):t.value!==t.oldValue&&ts(t.value,i);o&&os(e,"change")}}}};function Zo(e,t,n){es(e,t,n),(ee||ne)&&setTimeout((function(){es(e,t,n)}),0)}function es(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,s,a=0,c=e.options.length;a<c;a++)if(s=e.options[a],i)o=L(r,ns(s))>-1,s.selected!==o&&(s.selected=o);else if(j(ns(s),r))return void(e.selectedIndex!==a&&(e.selectedIndex=a));i||(e.selectedIndex=-1)}}function ts(e,t){return t.every((function(t){return!j(t,e)}))}function ns(e){return"_value"in e?e._value:e.value}function rs(e){e.target.composing=!0}function is(e){e.target.composing&&(e.target.composing=!1,os(e.target,"input"))}function os(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function ss(e){return!e.componentInstance||e.data&&e.data.transition?e:ss(e.componentInstance._vnode)}var as={bind:function(e,t,n){var r=t.value;n=ss(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Ho(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=ss(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Ho(n,(function(){e.style.display=e.__vOriginalDisplay})):Vo(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},cs={model:Qo,show:as},us={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ls(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?ls(_n(t.children)):e}function hs(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[x(o)]=i[o];return t}function fs(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ds(e){while(e=e.parent)if(e.data.transition)return!0}function ps(e,t){return t.key===e.key&&t.tag===e.tag}var ms=function(e){return e.tag||Nt(e)},vs=function(e){return"show"===e.name},gs={name:"transition",props:us,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(ms),n.length)){0;var r=this.mode;0;var i=n[0];if(ds(this.$vnode))return i;var o=ls(i);if(!o)return i;if(this._leaving)return fs(e,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=hs(this),u=this._vnode,l=ls(u);if(o.data.directives&&o.data.directives.some(vs)&&(o.data.show=!0),l&&l.data&&!ps(o,l)&&!Nt(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=R({},c);if("out-in"===r)return this._leaving=!0,St(h,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),fs(e,i);if("in-out"===r){if(Nt(o))return u;var f,d=function(){f()};St(c,"afterEnter",d),St(c,"enterCancelled",d),St(h,"delayLeave",(function(e){f=e}))}}return i}}},ys=R({tag:String,moveClass:String},us);delete ys.mode;var bs={props:ys,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Dn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],s=hs(this),a=0;a<i.length;a++){var c=i[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(r){for(var u=[],l=[],h=0;h<r.length;h++){var f=r[h];f.data.transition=s,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?u.push(f):l.push(f)}this.kept=e(t,null,u),this.removed=l}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ws),e.forEach(ks),e.forEach(Ss),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;jo(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Ro,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Ro,e),n._moveCb=null,Lo(n,t))})}})))},methods:{hasMove:function(e,t){if(!Mo)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){_o(n,e)})),xo(n,t),n.style.display="none",this.$el.appendChild(n);var r=zo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ws(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ks(e){e.data.newPos=e.elm.getBoundingClientRect()}function Ss(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var xs={Transition:gs,TransitionGroup:bs};_r.config.mustUseProp=$r,_r.config.isReservedTag=si,_r.config.isReservedAttr=Br,_r.config.getTagNamespace=ai,_r.config.isUnknownElement=ui,R(_r.options.directives,cs),R(_r.options.components,xs),_r.prototype.__patch__=G?Xo:I,_r.prototype.$mount=function(e,t){return e=e&&G?hi(e):void 0,Pn(this,e,t)},G&&setTimeout((function(){U.devtools&&ue&&ue.emit("init",_r)}),0),t["a"]=_r}).call(this,n("c8ba"))},"2b3d":function(e,t,n){"use strict";n("3ca3");var r,i=n("23e7"),o=n("83ab"),s=n("0d3b"),a=n("da84"),c=n("37e8"),u=n("6eeb"),l=n("19aa"),h=n("5135"),f=n("60da"),d=n("4df4"),p=n("6547").codeAt,m=n("5fb2"),v=n("577e"),g=n("d44e"),y=n("9861"),b=n("69f3"),w=a.URL,k=y.URLSearchParams,S=y.getState,x=b.set,_=b.getterFor("URL"),C=Math.floor,O=Math.pow,M="Invalid authority",E="Invalid scheme",A="Invalid host",T="Invalid port",R=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,I=/\d/,N=/^0x/i,P=/^[0-7]+$/,j=/^\d+$/,L=/^[\dA-Fa-f]+$/,F=/[\0\t\n\r #%/:<>?@[\\\]^|]/,B=/[\0\t\n\r #/:<>?@[\\\]^|]/,z=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,$=/[\t\n\r]/g,U=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return A;if(n=V(t.slice(1,-1)),!n)return A;e.host=n}else if(Z(e)){if(t=m(t),F.test(t))return A;if(n=H(t),null===n)return A;e.host=n}else{if(B.test(t))return A;for(n="",r=d(t),i=0;i<r.length;i++)n+=X(r[i],K);e.host=n}},H=function(e){var t,n,r,i,o,s,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),t=c.length,t>4)return e;for(n=[],r=0;r<t;r++){if(i=c[r],""==i)return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=N.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?j:8==o?P:L).test(i))return e;s=parseInt(i,o)}n.push(s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=O(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*O(256,3-r);return a},V=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,u++,l=u}while(f()){if(8==u)return;if(":"!=f()){t=n=0;while(n<4&&L.test(f()))t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,u>6)return;r=0;while(f()){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!I.test(f()))return;while(I.test(f())){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}c[u]=256*c[u]+i,r++,2!=r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;h++,u++,l=u}}if(null!==l){s=u-l,u=7;while(0!=u&&s>0)a=c[u],c[u--]=c[l+s-1],c[l+--s]=a}else if(8!=u)return;return c},W=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t},q=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=C(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=W(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},K={},J=f({},K,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=f({},J,{"#":1,"?":1,"{":1,"}":1}),G=f({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),X=function(e,t){var n=p(e,0);return n>32&&n<127&&!h(t,e)?e:encodeURIComponent(e)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Z=function(e){return h(Q,e.scheme)},ee=function(e){return""!=e.username||""!=e.password},te=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ne=function(e,t){var n;return 2==e.length&&R.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},re=function(e){var t;return e.length>1&&ne(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ie=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&ne(t[0],!0)||t.pop()},oe=function(e){return"."===e||"%2e"===e.toLowerCase()},se=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},ae={},ce={},ue={},le={},he={},fe={},de={},pe={},me={},ve={},ge={},ye={},be={},we={},ke={},Se={},xe={},_e={},Ce={},Oe={},Me={},Ee=function(e,t,n,i){var o,s,a,c,u=n||ae,l=0,f="",p=!1,m=!1,v=!1;n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(z,"")),t=t.replace($,""),o=d(t);while(l<=o.length){switch(s=o[l],u){case ae:if(!s||!R.test(s)){if(n)return E;u=ue;continue}f+=s.toLowerCase(),u=ce;break;case ce:if(s&&(D.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(n)return E;f="",u=ue,l=0;continue}if(n&&(Z(e)!=h(Q,f)||"file"==f&&(ee(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,n)return void(Z(e)&&Q[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?u=we:Z(e)&&i&&i.scheme==e.scheme?u=le:Z(e)?u=pe:"/"==o[l+1]?(u=he,l++):(e.cannotBeABaseURL=!0,e.path.push(""),u=Ce)}break;case ue:if(!i||i.cannotBeABaseURL&&"#"!=s)return E;if(i.cannotBeABaseURL&&"#"==s){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,u=Me;break}u="file"==i.scheme?we:fe;continue;case le:if("/"!=s||"/"!=o[l+1]){u=fe;continue}u=me,l++;break;case he:if("/"==s){u=ve;break}u=_e;continue;case fe:if(e.scheme=i.scheme,s==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==s||"\\"==s&&Z(e))u=de;else if("?"==s)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",u=Oe;else{if("#"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),u=_e;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",u=Me}break;case de:if(!Z(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,u=_e;continue}u=ve}else u=me;break;case pe:if(u=me,"/"!=s||"/"!=f.charAt(l+1))continue;l++;break;case me:if("/"!=s&&"\\"!=s){u=ve;continue}break;case ve:if("@"==s){p&&(f="%40"+f),p=!0,a=d(f);for(var g=0;g<a.length;g++){var y=a[g];if(":"!=y||v){var b=X(y,G);v?e.password+=b:e.username+=b}else v=!0}f=""}else if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(e)){if(p&&""==f)return M;l-=d(f).length+1,f="",u=ge}else f+=s;break;case ge:case ye:if(n&&"file"==e.scheme){u=Se;continue}if(":"!=s||m){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(e)){if(Z(e)&&""==f)return A;if(n&&""==f&&(ee(e)||null!==e.port))return;if(c=U(e,f),c)return c;if(f="",u=xe,n)return;continue}"["==s?m=!0:"]"==s&&(m=!1),f+=s}else{if(""==f)return A;if(c=U(e,f),c)return c;if(f="",u=be,n==ye)return}break;case be:if(!I.test(s)){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(e)||n){if(""!=f){var w=parseInt(f,10);if(w>65535)return T;e.port=Z(e)&&w===Q[e.scheme]?null:w,f=""}if(n)return;u=xe;continue}return T}f+=s;break;case we:if(e.scheme="file","/"==s||"\\"==s)u=ke;else{if(!i||"file"!=i.scheme){u=_e;continue}if(s==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==s)e.host=i.host,e.path=i.path.slice(),e.query="",u=Oe;else{if("#"!=s){re(o.slice(l).join(""))||(e.host=i.host,e.path=i.path.slice(),ie(e)),u=_e;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",u=Me}}break;case ke:if("/"==s||"\\"==s){u=Se;break}i&&"file"==i.scheme&&!re(o.slice(l).join(""))&&(ne(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),u=_e;continue;case Se:if(s==r||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&ne(f))u=_e;else if(""==f){if(e.host="",n)return;u=xe}else{if(c=U(e,f),c)return c;if("localhost"==e.host&&(e.host=""),n)return;f="",u=xe}continue}f+=s;break;case xe:if(Z(e)){if(u=_e,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=r&&(u=_e,"/"!=s))continue}else e.fragment="",u=Me;else e.query="",u=Oe;break;case _e:if(s==r||"/"==s||"\\"==s&&Z(e)||!n&&("?"==s||"#"==s)){if(se(f)?(ie(e),"/"==s||"\\"==s&&Z(e)||e.path.push("")):oe(f)?"/"==s||"\\"==s&&Z(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ne(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(s==r||"?"==s||"#"==s))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==s?(e.query="",u=Oe):"#"==s&&(e.fragment="",u=Me)}else f+=X(s,Y);break;case Ce:"?"==s?(e.query="",u=Oe):"#"==s?(e.fragment="",u=Me):s!=r&&(e.path[0]+=X(s,K));break;case Oe:n||"#"!=s?s!=r&&("'"==s&&Z(e)?e.query+="%27":e.query+="#"==s?"%23":X(s,K)):(e.fragment="",u=Me);break;case Me:s!=r&&(e.fragment+=X(s,J));break}l++}},Ae=function(e){var t,n,r=l(this,Ae,"URL"),i=arguments.length>1?arguments[1]:void 0,s=v(e),a=x(r,{type:"URL"});if(void 0!==i)if(i instanceof Ae)t=_(i);else if(n=Ee(t={},v(i)),n)throw TypeError(n);if(n=Ee(a,s,null,t),n)throw TypeError(n);var c=a.searchParams=new k,u=S(c);u.updateSearchParams(a.query),u.updateURL=function(){a.query=String(c)||null},o||(r.href=Re.call(r),r.origin=De.call(r),r.protocol=Ie.call(r),r.username=Ne.call(r),r.password=Pe.call(r),r.host=je.call(r),r.hostname=Le.call(r),r.port=Fe.call(r),r.pathname=Be.call(r),r.search=ze.call(r),r.searchParams=$e.call(r),r.hash=Ue.call(r))},Te=Ae.prototype,Re=function(){var e=_(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",ee(e)&&(u+=n+(r?":"+r:"")+"@"),u+=q(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},De=function(){var e=_(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Ae(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&Z(e)?t+"://"+q(e.host)+(null!==n?":"+n:""):"null"},Ie=function(){return _(this).scheme+":"},Ne=function(){return _(this).username},Pe=function(){return _(this).password},je=function(){var e=_(this),t=e.host,n=e.port;return null===t?"":null===n?q(t):q(t)+":"+n},Le=function(){var e=_(this).host;return null===e?"":q(e)},Fe=function(){var e=_(this).port;return null===e?"":String(e)},Be=function(){var e=_(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ze=function(){var e=_(this).query;return e?"?"+e:""},$e=function(){return _(this).searchParams},Ue=function(){var e=_(this).fragment;return e?"#"+e:""},He=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&c(Te,{href:He(Re,(function(e){var t=_(this),n=v(e),r=Ee(t,n);if(r)throw TypeError(r);S(t.searchParams).updateSearchParams(t.query)})),origin:He(De),protocol:He(Ie,(function(e){var t=_(this);Ee(t,v(e)+":",ae)})),username:He(Ne,(function(e){var t=_(this),n=d(v(e));if(!te(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=X(n[r],G)}})),password:He(Pe,(function(e){var t=_(this),n=d(v(e));if(!te(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=X(n[r],G)}})),host:He(je,(function(e){var t=_(this);t.cannotBeABaseURL||Ee(t,v(e),ge)})),hostname:He(Le,(function(e){var t=_(this);t.cannotBeABaseURL||Ee(t,v(e),ye)})),port:He(Fe,(function(e){var t=_(this);te(t)||(e=v(e),""==e?t.port=null:Ee(t,e,be))})),pathname:He(Be,(function(e){var t=_(this);t.cannotBeABaseURL||(t.path=[],Ee(t,v(e),xe))})),search:He(ze,(function(e){var t=_(this);e=v(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ee(t,e,Oe)),S(t.searchParams).updateSearchParams(t.query)})),searchParams:He($e),hash:He(Ue,(function(e){var t=_(this);e=v(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ee(t,e,Me)):t.fragment=null}))}),u(Te,"toJSON",(function(){return Re.call(this)}),{enumerable:!0}),u(Te,"toString",(function(){return Re.call(this)}),{enumerable:!0}),w){var Ve=w.createObjectURL,We=w.revokeObjectURL;Ve&&u(Ae,"createObjectURL",(function(e){return Ve.apply(w,arguments)})),We&&u(Ae,"revokeObjectURL",(function(e){return We.apply(w,arguments)}))}g(Ae,"URL"),i({global:!0,forced:!s,sham:!o},{URL:Ae})},"2cf4":function(e,t,n){var r,i,o,s,a=n("da84"),c=n("d039"),u=n("0366"),l=n("1be4"),h=n("cc12"),f=n("1cdc"),d=n("605d"),p=a.setImmediate,m=a.clearImmediate,v=a.process,g=a.MessageChannel,y=a.Dispatch,b=0,w={},k="onreadystatechange";try{r=a.location}catch(O){}var S=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},x=function(e){return function(){S(e)}},_=function(e){S(e.data)},C=function(e){a.postMessage(String(e),r.protocol+"//"+r.host)};p&&m||(p=function(e){var t=[],n=arguments.length,r=1;while(n>r)t.push(arguments[r++]);return w[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},m=function(e){delete w[e]},d?i=function(e){v.nextTick(x(e))}:y&&y.now?i=function(e){y.now(x(e))}:g&&!f?(o=new g,s=o.port2,o.port1.onmessage=_,i=u(s.postMessage,s,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&r&&"file:"!==r.protocol&&!c(C)?(i=C,a.addEventListener("message",_,!1)):i=k in h("script")?function(e){l.appendChild(h("script"))[k]=function(){l.removeChild(this),S(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:p,clear:m}},"2d00":function(e,t,n){var r,i,o=n("da84"),s=n("342f"),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l?(r=l.split("."),i=r[0]<4?1:r[0]+r[1]):s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=r[1]))),e.exports=i&&+i},"304a":function(e,t,n){"use strict";function r(e){this.content=e}n.d(t,"a",(function(){return de})),n.d(t,"b",(function(){return Te})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return le})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return he})),n.d(t,"j",(function(){return m})),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,o=i.find(e),s=i.content.slice();return-1==o?s.push(n||e,t):(s[o+1]=t,n&&(s[o]=n)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice(),s=i.find(e);return o.splice(-1==s?o.length:s,0,t,n),new r(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=r.from(e),e.size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=r.from(e),e.size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};var i=r,o=i;function s(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var i=e.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){var c=s(i.content,o.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}function a(e,t,n,r){for(var i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=e.child(--i),c=t.child(--o),u=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){var l=0,h=Math.min(s.text.length,c.text.length);while(l<h&&s.text[s.text.length-l-1]==c.text[c.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var f=a(s.content,c.content,n-1,r-1);if(f)return f}n-=u,r-=u}else n-=u,r-=u}}var c=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},u={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};c.prototype.nodesBetween=function(e,t,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],c=s+a.nodeSize;if(c>e&&!1!==n(a,r+s,i,o)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,t-u),n,r+u)}s=c}},c.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},c.prototype.textBetween=function(e,t,n,r){var i="",o=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(i+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},c.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new c(r,this.size+e.size)},c.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var i=0,o=0;o<t;i++){var s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new c(n,r)},c.prototype.cutByIndex=function(e,t){return e==t?c.empty:0==e&&t==this.content.length?this:new c(this.content.slice(e,t))},c.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new c(r,i)},c.prototype.addToStart=function(e){return new c([e].concat(this.content),this.size+e.nodeSize)},c.prototype.addToEnd=function(e){return new c(this.content.concat(e),this.size+e.nodeSize)},c.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},u.firstChild.get=function(){return this.content.length?this.content[0]:null},u.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},u.childCount.get=function(){return this.content.length},c.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},c.prototype.maybeChild=function(e){return this.content[e]},c.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},c.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),s(this,e,t)},c.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),a(this,e,t,n)},c.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return h(0,e);if(e==this.size)return h(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e||t>0?h(n+1,o):h(n,r);r=o}},c.prototype.toString=function(){return"<"+this.toStringInner()+">"},c.prototype.toStringInner=function(){return this.content.join(", ")},c.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},c.fromJSON=function(e,t){if(!t)return c.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(t.map(e.nodeFromJSON))},c.fromArray=function(e){if(!e.length)return c.empty;for(var t,n=0,r=0;r<e.length;r++){var i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new c(t||e,n)},c.from=function(e){if(!e)return c.empty;if(e instanceof c)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new c([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(c.prototype,u);var l={index:0,offset:0};function h(e,t){return l.index=e,l.offset=t,l}function f(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!f(e[r],t[r]))return!1}else{for(var i in e)if(!(i in t)||!f(e[i],t[i]))return!1;for(var o in t)if(!(o in e))return!1}return!0}c.empty=new c([],0);var d=function(e,t){this.type=e,this.attrs=t};function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}d.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t},d.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},d.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},d.prototype.eq=function(e){return this==e||this.type==e.type&&f(this.attrs,e.attrs)},d.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},d.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},d.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},d.setFrom=function(e){if(!e||0==e.length)return d.none;if(e instanceof d)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},d.none=[],p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="ReplaceError";var m=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},v={size:{configurable:!0}};function g(e,t,n){var r=e.findIndex(t),i=r.index,o=r.offset,s=e.maybeChild(i),a=e.findIndex(n),c=a.index,u=a.offset;if(o==t||s.isText){if(u!=n&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(i,s.copy(g(s.content,t-o-1,n-o-1)))}function y(e,t,n,r){var i=e.findIndex(t),o=i.index,s=i.offset,a=e.maybeChild(o);if(s==t||a.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));var c=y(a.content,t-s-1,n);return c&&e.replaceChild(o,a.copy(c))}function b(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return w(e,t,n,0)}function w(e,t,n,r){var i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){var s=w(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var a=E(n,e),c=a.start,u=a.end;return C(o,O(e,c,u,t,r))}var l=e.parent,h=l.content;return C(l,h.cut(0,e.parentOffset).append(n.content).append(h.cut(t.parentOffset)))}return C(o,M(e,t,r))}function k(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function S(e,t,n){var r=e.node(n);return k(r,t.node(n)),r}function x(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function _(e,t,n,r){var i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(x(e.nodeAfter,r),o++));for(var a=o;a<s;a++)x(i.child(a),r);t&&t.depth==n&&t.textOffset&&x(t.nodeBefore,r)}function C(e,t){if(!e.type.validContent(t))throw new p("Invalid content for node "+e.type.name);return e.copy(t)}function O(e,t,n,r,i){var o=e.depth>i&&S(e,t,i+1),s=r.depth>i&&S(n,r,i+1),a=[];return _(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(k(o,s),x(C(o,O(e,t,n,r,i+1)),a)):(o&&x(C(o,M(e,t,i+1)),a),_(t,n,i,a),s&&x(C(s,M(n,r,i+1)),a)),_(r,null,i,a),new c(a)}function M(e,t,n){var r=[];if(_(null,e,n,r),e.depth>n){var i=S(e,t,n+1);x(C(i,M(e,t,n+1)),r)}return _(t,null,n,r),new c(r)}function E(e,t){for(var n=t.depth-e.openStart,r=t.node(n),i=r.copy(e.content),o=n-1;o>=0;o--)i=t.node(o).copy(c.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}v.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(e,t){var n=y(this.content,e+this.openStart,t,null);return n&&new m(n,this.openStart,this.openEnd)},m.prototype.removeBetween=function(e,t){return new m(g(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},m.fromJSON=function(e,t){if(!t)return m.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new m(c.fromJSON(e,t.content),n,r)},m.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new m(e,n,r)},Object.defineProperties(m.prototype,v),m.empty=new m(c.empty,0,0);var A=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},T={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};A.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},T.parent.get=function(){return this.node(this.depth)},T.doc.get=function(){return this.node(0)},A.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},A.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},A.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},A.prototype.start=function(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1},A.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},A.prototype.before=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},A.prototype.after=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},T.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},T.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},T.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},A.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,i=0;i<e;i++)r+=n.child(i).nodeSize;return r},A.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return d.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},A.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},A.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},A.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new N(this,e,n)},A.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},A.prototype.max=function(e){return e.pos>this.pos?e:this},A.prototype.min=function(e){return e.pos<this.pos?e:this},A.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},A.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,i=t,o=e;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,u=i-c;if(n.push(o,a,r+c),!u)break;if(o=o.child(a),o.isText)break;i=u-1,r+=c+1}return new A(t,n,i)},A.resolveCached=function(e,t){for(var n=0;n<R.length;n++){var r=R[n];if(r.pos==t&&r.doc==e)return r}var i=R[D]=A.resolve(e,t);return D=(D+1)%I,i},Object.defineProperties(A.prototype,T);var R=[],D=0,I=12,N=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},P={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};P.start.get=function(){return this.$from.before(this.depth+1)},P.end.get=function(){return this.$to.after(this.depth+1)},P.parent.get=function(){return this.$from.node(this.depth)},P.startIndex.get=function(){return this.$from.index(this.depth)},P.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(N.prototype,P);var j=Object.create(null),L=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||c.empty,this.marks=r||d.none},F={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};F.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},F.childCount.get=function(){return this.content.childCount},L.prototype.child=function(e){return this.content.child(e)},L.prototype.maybeChild=function(e){return this.content.maybeChild(e)},L.prototype.forEach=function(e){this.content.forEach(e)},L.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},L.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},F.textContent.get=function(){return this.textBetween(0,this.content.size,"")},L.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},F.firstChild.get=function(){return this.content.firstChild},F.lastChild.get=function(){return this.content.lastChild},L.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},L.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},L.prototype.hasMarkup=function(e,t,n){return this.type==e&&f(this.attrs,t||e.defaultAttrs||j)&&d.sameSet(this.marks,n||d.none)},L.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},L.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},L.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},L.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return m.empty;var r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new m(c,r.depth-o,i.depth-o)},L.prototype.replace=function(e,t,n){return b(this.resolve(e),this.resolve(t),n)},L.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,i=n.offset;if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}},L.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},L.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},L.prototype.resolve=function(e){return A.resolveCached(this,e)},L.prototype.resolveNoCache=function(e){return A.resolve(this,e)},L.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},F.isBlock.get=function(){return this.type.isBlock},F.isTextblock.get=function(){return this.type.isTextblock},F.inlineContent.get=function(){return this.type.inlineContent},F.isInline.get=function(){return this.type.isInline},F.isText.get=function(){return this.type.isText},F.isLeaf.get=function(){return this.type.isLeaf},F.isAtom.get=function(){return this.type.isAtom},L.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),z(this.marks,e)},L.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},L.prototype.canReplace=function(e,t,n,r,i){void 0===n&&(n=c.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},L.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd},L.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},L.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=d.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!d.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},L.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},L.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=c.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(L.prototype,F);var B=function(e){function t(t,n,r,i){if(e.call(this,t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(L);function z(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var $=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},U={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};$.parse=function(e,t){var n=new H(e,t);if(null==n.next)return $.empty;var r=W(n);n.next&&n.err("Unexpected trailing text");var i=te(Q(r));return ne(i,n),i},$.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},$.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r},U.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},U.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},$.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},$.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];function i(o,s){var a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return c.from(s.map((function(e){return e.createAndFill()})));for(var u=0;u<o.next.length;u+=2){var l=o.next[u],h=o.next[u+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var f=i(h,s.concat(l));if(f)return f}}}return i(this,[])},$.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},$.prototype.computeWrapping=function(e){var t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(e)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},U.edgeCount.get=function(){return this.next.length>>1},$.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},$.prototype.toString=function(){var e=[];function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}return t(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",i=0;i<t.next.length;i+=2)r+=(i?", ":"")+t.next[i].name+"->"+e.indexOf(t.next[i+1]);return r})).join("\n")},Object.defineProperties($.prototype,U),$.empty=new $(!0);var H=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},V={next:{configurable:!0}};function W(e){var t=[];do{t.push(q(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function q(e){var t=[];do{t.push(K(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function K(e){for(var t=X(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Y(e,t)}return t}function J(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Y(e,t){var n=J(e),r=n;return e.eat(",")&&(r="}"!=e.next?J(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function G(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(t)>-1&&i.push(s)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}function X(e){if(e.eat("(")){var t=W(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=G(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}function Q(e){var t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(o(n,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=o(e.exprs[s],t);if(s==e.exprs.length-1)return a;i(a,t=n())}else{if("star"==e.type){var c=n();return r(t,c),i(o(e.expr,c),c),[r(c)]}if("plus"==e.type){var u=n();return i(o(e.expr,t),u),i(o(e.expr,u),u),[r(u)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){for(var l=t,h=0;h<e.min;h++){var f=n();i(o(e.expr,l),f),l=f}if(-1==e.max)i(o(e.expr,l),l);else for(var d=e.min;d<e.max;d++){var p=n();r(l,p),i(o(e.expr,l),p),l=p}return[r(l)]}if("name"==e.type)return[r(t,null,e.value)]}}}function Z(e,t){return t-e}function ee(e,t){var n=[];return r(t),n.sort(Z);function r(t){var i=e[t];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(t);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function te(e){var t=Object.create(null);return n(ee(e,0));function n(r){var i=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];ee(e,r).forEach((function(e){s||i.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var o=t[r.join(",")]=new $(r.indexOf(e.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Z);o.next.push(i[s],t[a.join(",")]||n(a))}return o}}function ne(e,t){for(var n=0,r=[e];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],u=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(u)&&r.push(u)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function re(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function ie(e,t){var n=Object.create(null);for(var r in e){var i=t&&t[r];if(void 0===i){var o=e[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function oe(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new ce(e[n]);return t}V.next.get=function(){return this.tokens[this.pos]},H.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},H.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(H.prototype,V);var se=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=oe(n.attrs),this.defaultAttrs=re(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},ae={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};ae.isInline.get=function(){return!this.isBlock},ae.isTextblock.get=function(){return this.isBlock&&this.inlineContent},ae.isLeaf.get=function(){return this.contentMatch==$.empty},ae.isAtom.get=function(){return this.isLeaf||this.spec.atom},se.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},se.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},se.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:ie(this.attrs,e)},se.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new L(this,this.computeAttrs(e),c.from(t),d.setFrom(n))},se.prototype.createChecked=function(e,t,n){if(t=c.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new L(this,this.computeAttrs(e),t,d.setFrom(n))},se.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),t=c.from(t),t.size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(c.empty,!0);return i?new L(this,e,t.append(i),d.setFrom(n)):null},se.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},se.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},se.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},se.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:d.empty:e},se.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new se(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(se.prototype,ae);var ce=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},ue={isRequired:{configurable:!0}};ue.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(ce.prototype,ue);var le=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=oe(r.attrs),this.rank=t,this.excluded=null;var i=re(this.attrs);this.instance=i&&new d(this,i)};le.prototype.create=function(e){return!e&&this.instance?this.instance:new d(this,ie(this.attrs,e))},le.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,i){return n[e]=new le(e,r++,t,i)})),n},le.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},le.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},le.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var he=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=o.from(e.nodes),this.spec.marks=o.from(e.marks),this.nodes=se.compile(this.spec.nodes,this),this.marks=le.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=$.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?fe(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],l=u.spec.excludes;u.excluded=null==l?[u]:""==l?[]:fe(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function fe(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(var a in e.marks){var c=e.marks[a];("_"==i||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}he.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof se))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},he.prototype.text=function(e,t){var n=this.nodes.text;return new B(n,n.defaultAttrs,e,d.setFrom(t))},he.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},he.prototype.nodeFromJSON=function(e){return L.fromJSON(this,e)},he.prototype.markFromJSON=function(e){return d.fromJSON(this,e)},he.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var de=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};de.prototype.parse=function(e,t){void 0===t&&(t={});var n=new Se(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},de.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new Se(this,t,!0);return n.addAll(e,null,t.from,t.to),m.maxOpen(n.finish())},de.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var i=this.tags[r];if(Ce(e,i.tag)&&(void 0===i.namespace||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}},de.prototype.matchStyle=function(e,t,n,r){for(var i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){var o=this.styles[i];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},de.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var i=t[r],o=null==i.priority?50:i.priority;if(o<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Me(e)),e.mark=t}))};for(var i in e.marks)r(i);var o=function(t){var r=e.nodes[s].spec.parseDOM;r&&r.forEach((function(e){n(e=Me(e)),e.node=s}))};for(var s in e.nodes)o();return t},de.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new de(e,de.schemaRules(e)))};var pe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},me={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ve={ol:!0,ul:!0},ge=1,ye=2,be=4;function we(e){return(e?ge:0)|("full"===e?ye:0)}var ke=function(e,t,n,r,i,o,s){this.type=e,this.attrs=t,this.solid=i,this.match=o||(s&be?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=d.none,this.pendingMarks=r,this.stashMarks=[]};ke.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(c.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ke.prototype.finish=function(e){if(!(this.options&ge)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=c.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},ke.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},ke.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Ee(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},ke.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var Se=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,i=t.topNode,o=we(t.preserveWhitespace)|(n?be:0);r=i?new ke(i.type,i.attrs,d.none,d.none,!0,t.topMatch||i.type.contentMatch,o):new ke(n?null:e.schema.topNodeType,null,d.none,d.none,!0,null,o),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},xe={top:{configurable:!0},currentPos:{configurable:!0}};function _e(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&ve.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}function Ce(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Oe(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function Me(e){var t={};for(var n in e)t[n]=e[n];return t}function Ee(e,t){var n=t.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(e)){var o=[],s=function(e){o.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),i=r.type,a=r.next;if(i==t)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function Ae(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}xe.top.get=function(){return this.nodes[this.open]},Se.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(Oe(t)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},Se.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(n.options&ye||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&ge)t=n.options&ye?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},Se.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();ve.hasOwnProperty(r)&&this.parser.normalizeLists&&_e(e);var i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:me.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);var o,s=this.top,a=this.needsBlock;if(pe.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,i,!1===i.consuming?n:null)},Se.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},Se.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},Se.prototype.readStyles=function(e){var t=d.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(e[n],e[n+1],this,r);if(!i)continue e;if(i.ignore)return null;if(t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;r=i}return t},Se.prototype.addElementByRule=function(e,t,n){var r,i,o,s,a=this;t.node?(i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark],s=o.create(t.attrs),this.addPendingMark(s));var c=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e)}));else{var u=t.contentElement;"string"==typeof u?u=e.querySelector(u):"function"==typeof u&&(u=u(e)),u||(u=e),this.findAround(e,u,!0),this.addAll(u,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},Se.prototype.addAll=function(e,t,n,r){for(var i=n||0,o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o),t&&pe.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,i)},Se.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},Se.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,i=0;i<e.marks.length;i++)n.type&&!n.type.allowsMarkType(e.marks[i].type)||(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},Se.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},Se.prototype.enterInner=function(e,t,n,r){this.closeExtra();var i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e,t);var o=null==r?i.options&~be:we(r);i.options&be&&0==i.content.length&&(o|=be),this.nodes.push(new ke(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},Se.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},Se.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Se.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},xe.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},Se.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},Se.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},Se.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){var i=t.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Se.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},Se.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(e,a){for(;e>=0;e--){var c=n[e];if(""==c){if(e==n.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var u=a>0||0==a&&i?t.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},Se.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},Se.prototype.addPendingMark=function(e){var t=Ae(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},Se.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(e);if(i>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var o=r.popFromStashMark(e);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(Se.prototype,xe);var Te=function(e,t){this.nodes=e||{},this.marks=t||{}};function Re(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function De(e){return e.document||window.document}Te.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=De(t).createDocumentFragment());var i=n,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);var n=0,s=0;while(n<o.length&&s<e.marks.length){var a=e.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<o.length)i=o.pop(),o.pop();while(s<e.marks.length){var c=e.marks[s++],u=r.serializeMark(c,e.isInline,t);u&&(o.push(c,i),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(r.serializeNodeInner(e,t))})),n},Te.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var n=Te.renderSpec(De(t),this.nodes[e.type.name](e)),r=n.dom,i=n.contentDOM;if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,i,t):this.serializeFragment(e.content,t,i)}return r},Te.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},Te.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&Te.renderSpec(De(n),r(e,t))},Te.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r=t[0],i=r.indexOf(" ");i>0&&(n=r.slice(0,i),r=r.slice(i+1));var o=null,s=n?e.createElementNS(n,r):e.createElement(r),a=t[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)if(null!=a[u]){var l=u.indexOf(" ");l>0?s.setAttributeNS(u.slice(0,l),u.slice(l+1),a[u]):s.setAttribute(u,a[u])}for(var h=c;h<t.length;h++){var f=t[h];if(0===f){if(h<t.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var d=Te.renderSpec(e,f,n),p=d.dom,m=d.contentDOM;if(s.appendChild(p),m){if(o)throw new RangeError("Multiple content holes");o=m}}return{dom:s,contentDOM:o}},Te.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Te(this.nodesFromSchema(e),this.marksFromSchema(e)))},Te.nodesFromSchema=function(e){var t=Re(e.nodes);return t.text||(t.text=function(e){return e.text}),t},Te.marksFromSchema=function(e){return Re(e.marks)}},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),s=o("iterator");e.exports=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||i[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),s=n("df75");e.exports=r?Object.defineProperties:function(e,t){o(e);var n,r=s(t),a=r.length,c=0;while(a>c)i.f(e,n=r[c++],t[n]);return e}},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("577e"),o=n("69f3"),s=n("7dd0"),a="String Iterator",c=o.set,u=o.getterFor(a);s(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3edb":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}}},"3f8c":function(e,t){e.exports={}},4160:function(e,t,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(e,t,n){var r=n("da84");e.exports=r},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},4377:function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"doc",topNode:!0,content:"block+"});t["a"]=i},"44ad":function(e,t,n){var r=n("d039"),i=n("c6b6"),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),s=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},4674:function(e,t,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^\s*>\s$/gm,s=r["d"].create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn("blockquote"),toggleBlockquote:()=>({commands:e})=>e.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:e})=>e.lift("blockquote")}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Object(i["e"])(o,this.type)]}});t["a"]=s},4795:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("342f"),s=[].slice,a=/MSIE .\./.test(o),c=function(e){return function(t,n){var r=arguments.length>2,i=r?s.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};r({global:!0,bind:!0,forced:a},{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},4840:function(e,t,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),s=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[s])?t:i(n)}},"485a":function(e,t,n){var r=n("861d");e.exports=function(e,t){var n,i;if("string"===t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},4930:function(e,t,n){var r=n("2d00"),i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4976:function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"tableCell",defaultOptions:{HTMLAttributes:{}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth"),n=t?[parseInt(t,10)]:null;return{colwidth:n}}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",Object(r["n"])(this.options.HTMLAttributes,e),0]}});t["a"]=i},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4aa6":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=()=>new Set},"4d64":function(e,t,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),s=function(e){return function(t,n,s){var a,c=r(t),u=i(c.length),l=o(s,u);if(e&&n!=n){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),s=o("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),o=n("9bdd"),s=n("e95a"),a=n("50c4"),c=n("8418"),u=n("35a1");e.exports=function(e){var t,n,l,h,f,d,p=i(e),m="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,y=void 0!==g,b=u(p),w=0;if(y&&(g=r(g,v>2?arguments[2]:void 0,2)),void 0==b||m==Array&&s(b))for(t=a(p.length),n=new m(t);t>w;w++)d=y?g(p[w],w):p[w],c(n,w,d);else for(h=b.call(p),f=h.next,n=new m;!(l=f.call(h)).done;w++)d=y?o(h,g,[l.value,w],!0):l.value,c(n,w,d);return n.length=w,n}},"50c4":function(e,t,n){var r=n("a691"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},5135:function(e,t,n){var r=n("7b0b"),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},5313:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return u}));var r=n("304a"),i=n("0ac0"),o=Object.create(null),s=function(e,t,n){this.ranges=n||[new c(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(e,t){void 0===t&&(t=r["j"].empty);for(var n=t.content.lastChild,i=null,o=0;o<t.openEnd;o++)i=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var u=a[c],l=u.$from,h=u.$to,f=e.mapping.slice(s);e.replaceRange(f.map(l.pos),f.map(h.pos),c?r["j"].empty:t),0==c&&v(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}},s.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=e.mapping.slice(n),u=c.map(s.pos),l=c.map(a.pos);i?e.deleteRange(u,l):(e.replaceRangeWith(u,l,t),v(e,n,t.isInline?-1:1))}},s.findFrom=function(e,t,n){var r=e.parent.inlineContent?new u(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var i=e.depth-1;i>=0;i--){var o=t<0?m(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):m(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}},s.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new d(e.node(0))},s.atStart=function(e){return m(e,e,0,0,1)||new d(e)},s.atEnd=function(e){return m(e,e,e.content.size,e.childCount,-1)||new d(e)},s.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=o[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function(e,t){if(e in o)throw new RangeError("Duplicate use of selection JSON ID "+e);return o[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function(){return u.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(e,t){this.$from=e,this.$to=t},u=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return e.near(i);var o=n.resolve(r.map(this.anchor));return new t(o.parent.inlineContent?o:i,i)},t.prototype.replace=function(t,n){if(void 0===n&&(n=r["j"].empty),e.prototype.replace.call(this,t,n),n==r["j"].empty){var i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new l(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,i,!0)||e.findFrom(r,-i,!0);if(!s)return e.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(e.findFrom(n,-i,!0)||e.findFrom(n,i,!0)).$anchor,n.pos<r.pos!=o<0&&(n=r))),new t(n,r)},Object.defineProperties(t.prototype,n),t}(s);s.jsonID("text",u);var l=function(e,t){this.anchor=e,this.head=t};l.prototype.map=function(e){return new l(e.map(this.anchor),e.map(this.head))},l.prototype.resolve=function(e){return u.between(e.resolve(this.anchor),e.resolve(this.head))};var h=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new r["j"](r["c"].from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new f(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(s);h.prototype.visible=!1,s.jsonID("node",h);var f=function(e){this.anchor=e};f.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new l(r,r):new f(r)},f.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&h.isSelectable(n)?new h(t):s.near(t)};var d=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=r["j"].empty),n==r["j"].empty){t.delete(0,t.doc.content.size);var i=e.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return p},t}(s);s.jsonID("all",d);var p={map:function(){return this},resolve:function(e){return new d(e)}};function m(e,t,n,r,i,o){if(t.inlineContent)return u.create(e,n);for(var s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){var a=t.child(s);if(a.isAtom){if(!o&&h.isSelectable(a))return h.create(e,n-(i<0?a.nodeSize:0))}else{var c=m(e,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function v(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof i["c"]||o instanceof i["b"]){var a,c=e.mapping.maps[r];c.forEach((function(e,t,n,r){null==a&&(a=r)})),e.setSelection(s.near(e.doc.resolve(a),n))}}}var g=1,y=2,b=4,w=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|g)&~y,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&g)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=y,this},t.prototype.ensureMarks=function(e){return r["d"].sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&y)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=this.updated&~y,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r["d"].none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(t);i=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=b,this},n.scrolledIntoView.get=function(){return(this.updated&b)>0},Object.defineProperties(t.prototype,n),t}(i["d"]);function k(e,t){return t&&e?e.bind(t):e}var S=function(e,t,n){this.name=e,this.init=k(t.init,n),this.apply=k(t.apply,n)},x=[new S("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new S("selection",{init:function(e,t){return e.selection||s.atStart(t.doc)},apply:function(e){return e.selection}}),new S("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new S("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],_=function(e,t){var n=this;this.schema=e,this.fields=x.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new S(e.key,e.spec.state,e))}))},C=function(e){this.config=e},O={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};O.schema.get=function(){return this.config.schema},O.plugins.get=function(){return this.config.plugins},C.prototype.apply=function(e){return this.applyTransaction(e).state},C.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},C.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,u=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<o?{state:n,n:t.length}:{state:this,n:0})}t.push(u),n=n.applyInner(u),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}},C.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new C(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}for(var o=0;o<M.length;o++)M[o](this,e,t);return t},O.tr.get=function(){return new w(this)},C.create=function(e){for(var t=new _(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new C(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},C.prototype.reconfigure=function(e){for(var t=new _(this.schema,e.plugins),n=t.fields,r=new C(t),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,r)}return r},C.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t},C.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new _(e.schema,e.plugins),o=new C(i);return i.fields.forEach((function(i){if("doc"==i.name)o.doc=r["f"].fromJSON(e.schema,t.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],u=c.spec.state;if(c.key==i.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(o[i.name]=u.fromJSON.call(c,e,t[a],o))}o[i.name]=i.init(e,o)}})),o},C.addApplyListener=function(e){M.push(e)},C.removeApplyListener=function(e){var t=M.indexOf(e);t>-1&&M.splice(t,1)},Object.defineProperties(C.prototype,O);var M=[];function E(e,t,n){for(var r in e){var i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=E(i,t,{})),n[r]=i}return n}var A=function(e){this.props={},e.props&&E(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:R("plugin")};A.prototype.getState=function(e){return e[this.key]};var T=Object.create(null);function R(e){return e in T?e+"$"+ ++T[e]:(T[e]=0,e+"$")}var D=function(e){void 0===e&&(e="key"),this.key=R(e)};D.prototype.get=function(e){return e.config.pluginsByKey[this.key]},D.prototype.getState=function(e){return e[this.key]}},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("4160"),n("159b"),n("dbb4"),n("1d1c"),n("7a82");var r=n("ade3");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),i=n("241c"),o=n("7418"),s=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},"576a":function(e,t,n){"use strict";n.d(t,"a",(function(){return Sn})),n.d(t,"b",(function(){return On}));var r=n("5313"),i=n("304a"),o=n("0ac0"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var l=s.ie=!!(c||u||a);s.ie_version=c?document.documentMode||6:u?+u[1]:a?+a[1]:null,s.gecko=!l&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var h=!l&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!h,s.chrome_version=h&&+h[1],s.safari=!l&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var f=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},p=null,m=function(e,t,n){var r=p||(p=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},v=function(e,t,n,r){return n&&(y(e,t,n,r,-1)||y(e,t,n,r,1))},g=/^(img|br|input|textarea|hr)$/i;function y(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:b(e))){var o=e.parentNode;if(1!=o.nodeType||k(e)||g.test(e.nodeName)||"false"==e.contentEditable)return!1;t=f(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(i<0?-1:0)],"false"==e.contentEditable)return!1;t=i<0?b(e):0}}}function b(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function w(e,t,n){for(var r=0==t,i=t==b(e);r||i;){if(e==n)return!0;var o=f(e);if(e=e.parentNode,!e)return!1;r=r&&0==o,i=i&&o==b(e)}}function k(e){for(var t,n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var S=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function x(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function C(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function O(e,t){return"number"==typeof e?e:e[t]}function M(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function E(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=n||e.dom;;s=d(s)){if(!s)break;if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,c=a?C(o):M(s),u=0,l=0;if(t.top<c.top+O(r,"top")?l=-(c.top-t.top+O(i,"top")):t.bottom>c.bottom-O(r,"bottom")&&(l=t.bottom-c.bottom+O(i,"bottom")),t.left<c.left+O(r,"left")?u=-(c.left-t.left+O(i,"left")):t.right>c.right-O(r,"right")&&(u=t.right-c.right+O(i,"right")),u||l)if(a)o.defaultView.scrollBy(u,l);else{var h=s.scrollLeft,f=s.scrollTop;l&&(s.scrollTop+=l),u&&(s.scrollLeft+=u);var p=s.scrollLeft-h,m=s.scrollTop-f;t={left:t.left-p,top:t.top-m,right:t.right-p,bottom:t.bottom-m}}if(a)break}}}function A(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:T(e.dom)}}function T(e){for(var t=[],n=e.ownerDocument;e;e=d(e))if(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e==n)break;return t}function R(e){var t=e.refDOM,n=e.refTop,r=e.stack,i=t?t.getBoundingClientRect().top:0;D(r,0==i?0:i-n)}function D(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var I=null;function N(e){if(e.setActive)return e.setActive();if(I)return e.focus(I);var t=T(e);e.focus(null==I?{get preventScroll(){return I={preventScroll:!0},!0}}:void 0),I||(I=!1,D(t,0))}function P(e,t){for(var n,r,i=2e8,o=0,s=t.top,a=t.top,c=e.firstChild,u=0;c;c=c.nextSibling,u++){var l=void 0;if(1==c.nodeType)l=c.getClientRects();else{if(3!=c.nodeType)continue;l=m(c).getClientRects()}for(var h=0;h<l.length;h++){var f=l[h];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var d=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(d<i){n=c,i=d,r=d&&3==n.nodeType?{left:f.right<t.left?f.right:f.left,top:t.top}:t,1==c.nodeType&&d&&(o=u+(t.left>=(f.left+f.right)/2?1:0));continue}}!n&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(o=u+1)}}return n&&3==n.nodeType?j(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:P(n,r)}function j(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=H(r,1);if(o.top!=o.bottom&&L(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function L(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function F(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function B(e,t,n){var r=P(t,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}function z(e,t,n,r){for(var i=-1,o=t;;){if(o==e.dom)break;var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}function $(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){var s=e.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var u=a[c];if(L(t,u))return $(s,t,u)}if((o=(o+1)%r)==i)break}return e}function U(e,t){var n,r,i,o,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(n=c,i=n.offsetNode,o=n.offset)}catch(_){}if(!i&&a.caretRangeFromPoint){var u=a.caretRangeFromPoint(t.left,t.top);u&&(r=u,i=r.startContainer,o=r.startOffset)}var l,h=a.elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var f=e.dom.getBoundingClientRect();if(!L(t,f))return null;if(h=$(e.dom,t,f),!h)return null}if(s.safari&&h.draggable&&(i=o=null),h=F(h,t),i){if(s.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){var d,p=i.childNodes[o];"IMG"==p.nodeName&&(d=p.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&o++}i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(l=z(e,i,o,t))}null==l&&(l=B(e,h,t));var m=e.docView.nearestDesc(h,!0);return{pos:l,inside:m?m.posAtStart-m.border:-1}}function H(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var V=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function W(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),i=r.node,o=r.offset,a=s.webkit||s.gecko;if(3==i.nodeType){if(!a||!V.test(i.nodeValue)&&(n<0?o:o!=i.nodeValue.length)){var c=o,u=o,l=n<0?1:-1;return n<0&&!o?(u++,l=-1):n>=0&&o==i.nodeValue.length?(c--,l=1):n<0?c--:u++,q(H(m(i,c,u),l),l<0)}var h=H(m(i,o,o),n);if(s.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var f=H(m(i,o-1,o-1),-1);if(f.top==h.top){var d=H(m(i,o,o+1),-1);if(d.top!=h.top)return q(d,d.left<f.left)}}return h}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(n<0||o==b(i))){var p=i.childNodes[o-1];if(1==p.nodeType)return K(p.getBoundingClientRect(),!1)}if(o<b(i)){var v=i.childNodes[o];if(1==v.nodeType)return K(v.getBoundingClientRect(),!0)}return K(i.getBoundingClientRect(),n>=0)}if(o&&(n<0||o==b(i))){var g=i.childNodes[o-1],y=3==g.nodeType?m(g,b(g)-(a?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(y)return q(H(y,1),!1)}if(o<b(i)){var w=i.childNodes[o],k=3==w.nodeType?m(w,0,a?0:1):1==w.nodeType?w:null;if(k)return q(H(k,-1),!0)}return q(H(3==i.nodeType?m(i):i,-n),n>=0)}function q(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function K(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function J(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function Y(e,t,n){var r=t.selection,i="up"==n?r.$from:r.$to;return J(e,t,(function(){for(var t=e.docView.domFromPos(i.pos,"up"==n?-1:1),r=t.node;;){var o=e.docView.nearestDesc(r,!0);if(!o)break;if(o.node.isBlock){r=o.dom;break}r=o.dom.parentNode}for(var s=W(e,i.pos,1),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=m(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<c.length;u++){var l=c[u];if(l.bottom>l.top&&("up"==n?l.bottom<s.top+1:l.top>s.bottom-1))return!1}}return!0}))}var G=/[\u0590-\u08ac]/;function X(e,t,n){var r=t.selection,i=r.$head;if(!i.parent.isTextblock)return!1;var o=i.parentOffset,s=!o,a=o==i.parent.content.size,c=getSelection();return G.test(i.parent.textContent)&&c.modify?J(e,t,(function(){var t=c.getRangeAt(0),r=c.focusNode,o=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=i.depth?e.docView.domAfterPos(i.before()):e.dom,u=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&o==c.focusOffset;return c.removeAllRanges(),c.addRange(t),null!=s&&(c.caretBidiLevel=s),u})):"left"==n||"backward"==n?s:a}var Q=null,Z=null,ee=!1;function te(e,t,n){return Q==t&&Z==n?ee:(Q=t,Z=n,ee="up"==n||"down"==n?Y(e,t,n):X(e,t,n))}var ne=0,re=1,ie=2,oe=3,se=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=ne},ae={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};se.prototype.matchesWidget=function(){return!1},se.prototype.matchesMark=function(){return!1},se.prototype.matchesNode=function(){return!1},se.prototype.matchesHack=function(){return!1},ae.beforePosition.get=function(){return!1},se.prototype.parseRule=function(){return null},se.prototype.stopEvent=function(){return!1},ae.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},ae.border.get=function(){return 0},se.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},se.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},ae.posBefore.get=function(){return this.parent.posBeforeChild(this)},ae.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},ae.posAfter.get=function(){return this.posBefore+this.size},ae.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},se.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;r=e.previousSibling}while(r&&(!(i=r.pmViewDesc)||i.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;o=e.nextSibling}while(o&&(!(s=o.pmViewDesc)||s.parent!=this))o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var u=e;;u=u.parentNode){if(u==this.dom){a=!0;break}if(u.parentNode.lastChild!=u)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},se.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==e.nodeType?e:e.parentNode):i.nodeDOM==e))return i;n=!1}}},se.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},se.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1},se.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}},se.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,i=!0;;r++,i=!1){while(r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM))n+=this.children[r++].size;var o=r==this.children.length?null:this.children[r];if(n==e&&(0==t||!o||o.border||t<0&&i)||o&&o.domAtom&&e<n+o.size)return{node:this.contentDOM,offset:o?f(o.dom):this.contentDOM.childNodes.length};if(!o)throw new Error("Invalid position "+e);var s=n+o.size;if(!o.domAtom&&(t<0&&!o.border?s>=e:s>e))return o.domFromPos(e-n-o.border,t);n=s}},se.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&e<=c){var u=o+a.border;if(e>=u&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,u);e=o;for(var l=s;l>0;l--){var h=this.children[l-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=f(h.dom)+1;break}e-=h.size}-1==r&&(r=0)}if(r>-1&&(c>t||s==this.children.length-1)){t=c;for(var d=s+1;d<this.children.length;d++){var p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){i=f(p.dom);break}t+=p.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}},se.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},se.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},se.prototype.setSelection=function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),a=0,c=0;a<this.children.length;a++){var u=this.children[a],l=c+u.size;if(i>c&&o<l)return u.setSelection(e-c-u.border,t-c-u.border,n,r);c=l}var h=this.domFromPos(e,e?-1:1),f=t==e?h:this.domFromPos(t,t?-1:1),d=n.getSelection(),p=!1;if((s.gecko||s.safari)&&e==t)if(3==h.node.nodeType)p=h.offset&&"\n"==h.node.nodeValue[h.offset-1];else{var m=h.node.childNodes[h.offset-1];p=m&&("BR"==m.nodeName||"false"==m.contentEditable)}if(r||p&&s.safari||!v(h.node,h.offset,d.anchorNode,d.anchorOffset)||!v(f.node,f.offset,d.focusNode,d.focusOffset)){var g=!1;if((d.extend||e==t)&&!p){d.collapse(h.node,h.offset);try{e!=t&&d.extend(f.node,f.offset),g=!0}catch(w){if(!(w instanceof DOMException))throw w}}if(!g){if(e>t){var y=h;h=f,f=y}var b=document.createRange();b.setEnd(f.node,f.offset),b.setStart(h.node,h.offset),d.removeAllRanges(),d.addRange(b)}}},se.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},ae.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},se.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var s=n+i.border,a=o-i.border;if(e>=s&&t<=a)return this.dirty=e==n||t==o?ie:re,void(e!=s||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-s,t-s):i.dirty=oe);i.dirty=oe}n=o}this.dirty=ie},se.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?ie:re;t.dirty<n&&(t.dirty=n)}},ae.domAtom.get=function(){return!1},Object.defineProperties(se.prototype,ae);var ce=[],ue=function(e){function t(t,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,ce,s,null),this.widget=n,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return this.dirty==ne&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(se),le=function(e){function t(t,n,r,i){e.call(this,t,ce,n,null),this.textDOM=r,this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(se),he=function(e){function t(t,n,r,i){e.call(this,t,[],r,i),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i["b"].renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return this.dirty!=oe&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),this.dirty!=ne){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ne}},t.prototype.slice=function(e,n,r){var i=t.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Ie(o,n,s,r)),e>0&&(o=Ie(o,0,e,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},t}(se),fe=function(e){function t(t,n,r,i,o,s,a,c,u){e.call(this,t,n.isLeaf?ce:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,u)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,o,s,a){var c,u,l=s.nodeViews[n.type.name],h=l&&l(n,s,(function(){return u?u.parent?u.parent.posBeforeChild(u):void 0:a}),r),f=h&&h.dom,d=h&&h.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(c=i["b"].renderSpec(document,n.type.spec.toDOM(n)),f=c.dom,d=c.contentDOM);d||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var p=f;return f=xe(f,r,n),h?u=new ve(e,n,r,o,f,d,p,h,s,a+1):n.isText?new pe(e,n,r,o,f,p,s):new t(e,n,r,o,f,d,p,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?i["c"].empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return this.dirty==ne&&e.eq(this.node)&&_e(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,a=r&&e.composing&&this.localCompositionNode(e,t),c=new Oe(this,a&&a.node);Ae(this.node,this.innerDeco,(function(t,s,a){t.spec.marks?c.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&c.syncToMarks(s==n.node.childCount?i["d"].none:n.node.child(s).marks,r,e),c.placeWidget(t,e,o)}),(function(t,n,i,s){c.syncToMarks(t.marks,r,e),c.findNodeMatch(t,n,i,s)||c.updateNextNode(t,n,i,e,s)||c.addNode(t,n,i,e,o),o+=t.nodeSize})),c.syncToMarks(ce,r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==ie)&&(a&&this.protectLocalComposition(e,a),ge(this.contentDOM,this.children,e),s.ios&&Te(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,i=n.from,o=n.to;if(!(!(e.state.selection instanceof r["h"])||i<t||o>t+this.node.content.size)){var s=e.root.getSelection(),a=Re(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,u=De(this.node.content,c,i-t,o-t);return u<0?null:{node:a,pos:u,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;;o=o.parentNode){if(o.parentNode==this.contentDOM)break;while(o.previousSibling)o.parentNode.removeChild(o.previousSibling);while(o.nextSibling)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new le(this,o,n,i);e.compositionNodes.push(s),this.children=Ie(this.children,r,r+i.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(this.dirty==oe||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ne},t.prototype.updateOuterDeco=function(e){if(!_e(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ke(this.dom,this.nodeDOM,we(this.outerDeco,this.node,t),we(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(se);function de(e,t,n,r,i){return xe(r,t,e),new fe(null,e,t,n,r,r,r,i,0)}var pe=function(e){function t(t,n,r,i,o,s,a){e.call(this,t,n,r,i,o,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){var e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(this.dirty==oe||this.dirty!=ne&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==ne&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ne,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var i=this.node.cut(e,n),o=document.createTextNode(i.text);return new t(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(fe),me=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return this.dirty==ne},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(se),ve=function(e){function t(t,n,r,i,o,s,a,c,u,l){e.call(this,t,n,r,i,o,s,a,u,l),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,i){if(this.dirty==oe)return!1;if(this.spec.update){var o=this.spec.update(t,n);return o&&this.updateInner(t,n,r,i),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(fe);function ge(e,t,n){for(var r=e.firstChild,i=!1,o=0;o<t.length;o++){var s=t[o],a=s.dom;if(a.parentNode==e){while(a!=r)r=Ce(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof he){var c=r?r.previousSibling:e.lastChild;ge(s.contentDOM,s.children,n),r=c?c.nextSibling:e.firstChild}}while(r)r=Ce(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}function ye(e){e&&(this.nodeName=e)}ye.prototype=Object.create(null);var be=[new ye];function we(e,t,n){if(0==e.length)return be;for(var r=n?be[0]:new ye,i=[r],o=0;o<e.length;o++){var s=e[o].type.attrs;if(s)for(var a in s.nodeName&&i.push(r=new ye(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==i.length&&i.push(r=new ye(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return i}function ke(e,t,n,r){if(n==be&&r==be)return t;for(var i=t,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=be[0]),i=c}Se(i,a||be[0],s)}return i}function Se(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" "):ce,s=n.class?n.class.split(" "):ce,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style){var u,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(u=l.exec(t.style))e.style.removeProperty(u[1])}n.style&&(e.style.cssText+=n.style)}}function xe(e,t,n){return ke(e,e,be,we(t,n,1!=e.nodeType))}function _e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Ce(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Oe=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=Me(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function Me(e,t){for(var n=[],r=e.childCount,i=t.length-1;r>0&&i>=0;i--){var o=t[i],s=o.node;if(s){if(s!=e.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}function Ee(e,t){return e.type.side-t.type.side}function Ae(e,t,n,r){var i=t.locals(e),o=0;if(0!=i.length)for(var s=0,a=[],c=null,u=0;;){if(s<i.length&&i[s].to==o){var l=i[s++],h=void 0;while(s<i.length&&i[s].to==o)(h||(h=[l])).push(i[s++]);if(h){h.sort(Ee);for(var f=0;f<h.length;f++)n(h[f],u,!!c)}else n(l,u,!!c)}var d=void 0,p=void 0;if(c)p=-1,d=c,c=null;else{if(!(u<e.childCount))break;p=u,d=e.child(u++)}for(var m=0;m<a.length;m++)a[m].to<=o&&a.splice(m--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);var v=o+d.nodeSize;if(d.isText){var g=v;s<i.length&&i[s].from<g&&(g=i[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=d.cut(g-o),d=d.cut(0,g-o),v=g,p=-1)}var b=a.length?d.isInline&&!d.isLeaf?a.filter((function(e){return!e.inline})):a.slice():ce;r(d,b,t.forChild(o,d),p),o=v}else for(var w=0;w<e.childCount;w++){var k=e.child(w);r(k,i,t.forChild(o,k),w),o+=k.nodeSize}}function Te(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Re(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=b(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function De(e,t,n,r){for(var i=0,o=0;i<e.childCount&&o<=r;){var s=e.child(i++),a=o;if(o+=s.nodeSize,s.isText){var c=s.text;while(i<e.childCount){var u=e.child(i++);if(o+=u.nodeSize,!u.isText)break;c+=u.text}if(o>=n){var l=c.lastIndexOf(t,r-a);if(l>=0&&l+t.length+a>=n)return a+l}}}return-1}function Ie(e,t,n,r,i){for(var o=[],s=0,a=0;s<e.length;s++){var c=e[s],u=a,l=a+=c.size;u>=n||l<=t?o.push(c):(u<t&&o.push(c.slice(0,t-u,r)),i&&(o.push(i),i=null),l>n&&o.push(c.slice(n-u,c.size,r)))}return o}function Ne(e,t){var n=e.root.getSelection(),i=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,u,l=i.resolve(a);if(S(n)){c=l;while(o&&!o.node)o=o.parent;if(o&&o.node.isAtom&&r["c"].isSelectable(o.node)&&o.parent&&(!o.node.isInline||!w(n.focusNode,n.focusOffset,o.dom))){var h=o.posBefore;u=new r["c"](a==h?l:i.resolve(h))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;c=i.resolve(f)}if(!u){var d="pointer"==t||e.state.selection.head<l.pos&&!s?1:-1;u=Ve(e,c,l,d)}return u}function Pe(e,t){var n=e.state.selection;if(Ue(e,n),e.editable?e.hasFocus():qe(e)&&document.activeElement&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)$e(e);else{var i,o,s=n.anchor,a=n.head;!je||n instanceof r["h"]||(n.$from.parent.inlineContent||(i=Le(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Le(e,n.to))),e.docView.setSelection(s,a,e.root,t),je&&(i&&Be(i),o&&Be(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ze(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Oe.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},Oe.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Oe.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Oe.prototype.syncToMarks=function(e,t,n){var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=ne,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<e.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=he.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},Oe.prototype.findNodeMatch=function(e,t,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(o&&o.matchesNode(e,t,n))i=s.indexOf(o);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var u=s[a];if(u.matchesNode(e,t,n)&&this.preMatched.indexOf(u)<0){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Oe.prototype.updateNextNode=function(e,t,n,r,i){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof fe){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=i)return!1;var c=s.dom,u=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=oe&&_e(t,s.outerDeco));if(!u&&s.update(e,t,n,r))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Oe.prototype.addNode=function(e,t,n,r,i){this.top.children.splice(this.index++,0,fe.create(this.top,e,t,n,r,i)),this.changed=!0},Oe.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var i=new ue(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++},Oe.prototype.addTextblockHacks=function(){var e=this.top.children[this.index-1];while(e instanceof he)e=e.children[e.children.length-1];if(!e||!(e instanceof pe)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new me(this.top,ce,t,null)),this.changed=!0}};var je=s.safari||s.chrome&&s.chrome_version<63;function Le(e,t){var n=e.docView.domFromPos(t,0),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(s.safari&&o&&"false"==o.contentEditable)return Fe(o);if((!o||"false"==o.contentEditable)&&(!a||"false"==a.contentEditable)){if(o)return Fe(o);if(a)return Fe(a)}}function Fe(e){return e.contentEditable="true",s.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Be(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function ze(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}function $e(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,f(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Ue(e,t){if(t instanceof r["c"]){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(He(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else He(e)}function He(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ve(e,t,n,i){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r["h"].between(t,n,i)}function We(e){return(!e.editable||e.root.activeElement==e.dom)&&qe(e)}function qe(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(_){return!1}}function Ke(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return v(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Je(e,t){var n=e.selection,i=n.$anchor,o=n.$head,s=t>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r["f"].findFrom(a,t)}function Ye(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ge(e,t,n){var i=e.state.selection;if(!(i instanceof r["h"])){if(i instanceof r["c"]&&i.node.isInline)return Ye(e,new r["h"](t>0?i.$to:i.$from));var o=Je(e.state,t);return!!o&&Ye(e,o)}if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var a=Je(e.state,t);return!!(a&&a instanceof r["c"])&&Ye(e,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,u=i.$head,l=u.textOffset?null:t<0?u.nodeBefore:u.nodeAfter;if(!l||l.isText)return!1;var h=t<0?u.pos-l.nodeSize:u.pos;return!!(l.isAtom||(c=e.docView.descAt(h))&&!c.contentDOM)&&(r["c"].isSelectable(l)?Ye(e,new r["c"](t<0?e.state.doc.resolve(u.pos-l.nodeSize):u)):!!s.webkit&&Ye(e,new r["h"](e.state.doc.resolve(t<0?h:h+l.nodeSize))))}}function Xe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Qe(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Ze(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,a=!1;for(s.gecko&&1==n.nodeType&&r<Xe(n)&&Qe(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Qe(c))i=n,o=--r;else{if(3!=c.nodeType)break;n=c,r=n.nodeValue.length}}else{if(tt(n))break;var u=n.previousSibling;while(u&&Qe(u))i=n.parentNode,o=f(u),u=u.previousSibling;if(u)n=u,r=Xe(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}a?nt(e,t,n,r):i&&nt(e,t,i,o)}}function et(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,s=Xe(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Qe(a))break;i=n,o=++r}else{if(tt(n))break;var c=n.nextSibling;while(c&&Qe(c))i=c.parentNode,o=f(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=Xe(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}i&&nt(e,t,i,o)}}function tt(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function nt(e,t,n,r){if(S(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var o=e.state;setTimeout((function(){e.state==o&&Pe(e)}),50)}function rt(e,t,n){var i=e.state.selection;if(i instanceof r["h"]&&!i.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var o=i.$from,a=i.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=Je(e.state,t);if(c&&c instanceof r["c"])return Ye(e,c)}if(!o.parent.inlineContent){var u=r["f"].findFrom(t<0?o:a,t);return!u||Ye(e,u)}return!1}function it(e,t){if(!(e.state.selection instanceof r["h"]))return!0;var n=e.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!i.textOffset&&(t<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),e.dispatch(c),!0}return!1}function ot(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function st(e){if(s.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;ot(e,i,!0),setTimeout((function(){return ot(e,i,!1)}),20)}}}function at(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function ct(e,t){var n=t.keyCode,r=at(t);return 8==n||s.mac&&72==n&&"c"==r?it(e,-1)||Ze(e):46==n||s.mac&&68==n&&"c"==r?it(e,1)||et(e):13==n||27==n||(37==n?Ge(e,-1,r)||Ze(e):39==n?Ge(e,1,r)||et(e):38==n?rt(e,-1,r)||Ze(e):40==n?st(e)||rt(e,1,r)||et(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function ut(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,a=r.fromOffset,c=r.toOffset,u=r.from,l=r.to,h=e.root.getSelection(),f=null,d=h.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(f=[{node:d,offset:h.anchorOffset}],S(h)||f.push({node:h.focusNode,offset:h.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var p=c;p>a;p--){var m=o.childNodes[p-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=p;break}if(!v||v.size)break}var g=e.state.doc,y=e.someProp("domParser")||i["a"].fromSchema(e.state.schema),b=g.resolve(u),w=null,k=y.parse(o,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:f,ruleFromNode:lt,context:b});if(f&&null!=f[0].pos){var x=f[0].pos,_=f[1]&&f[1].pos;null==_&&(_=x),w={anchor:x+u,head:_+u}}return{doc:k,sel:w,from:u,to:l}}function lt(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function ht(e,t,n,i,o){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,c=Ne(e,a);if(c&&!e.state.selection.eq(c)){var u=e.state.tr.setSelection(c);"pointer"==a?u.setMeta("pointer",!0):"key"==a&&u.scrollIntoView(),e.dispatch(u)}}else{var l=e.state.doc.resolve(t),h=l.sharedDepth(n);t=l.before(h+1),n=e.state.doc.resolve(n).after(h+1);var f=e.state.selection,d=ut(e,t,n);if(s.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var p=e.cursorWrapper.deco.type.toDOM.nextSibling,m=p&&p.nodeValue?p.nodeValue.length:1;d.sel={anchor:d.sel.anchor+m,head:d.sel.anchor+m}}var v,g,y=e.state.doc,b=y.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(v=e.state.selection.to,g="end"):(v=e.state.selection.from,g="start"),e.lastKeyCode=null;var w=vt(b.content,d.doc.content,d.from,v,g);if(!w){if(!(i&&f instanceof r["h"]&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(s.ios&&e.lastIOSEnter>Date.now()-225&&o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var k=ft(e,e.state.doc,d.sel);k&&!k.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(k))}return}w={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&w.start==w.endB&&e.state.selection instanceof r["h"]&&(w.start>e.state.selection.from&&w.start<=e.state.selection.from+2?w.start=e.state.selection.from:w.endA<e.state.selection.to&&w.endA>=e.state.selection.to-2&&(w.endB+=e.state.selection.to-w.endA,w.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>d.from&&"  "==d.doc.textBetween(w.start-d.from-1,w.start-d.from+1)&&(w.start--,w.endA--,w.endB--);var S,_=d.doc.resolveNoCache(w.start-d.from),C=d.doc.resolveNoCache(w.endB-d.from),O=_.sameParent(C)&&_.parent.inlineContent;if((s.ios&&e.lastIOSEnter>Date.now()-225&&(!O||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!O&&_.pos<d.doc.content.size&&(S=r["f"].findFrom(d.doc.resolve(_.pos+1),1,!0))&&S.head==C.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>w.start&&pt(y,w.start,w.endA,_,C)&&e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{s.android&&!O&&_.start()!=C.start()&&0==C.parentOffset&&_.depth==C.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==w.endA&&(w.endB-=2,C=d.doc.resolveNoCache(w.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))}))}),20));var M,E,A,T,R=w.start,D=w.endA;if(O)if(_.pos==C.pos)s.ie&&s.ie_version<=11&&0==_.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Pe(e)}),20)),M=e.state.tr.delete(R,D),E=y.resolve(w.start).marksAcross(y.resolve(w.endA));else if(w.endA==w.endB&&(T=y.resolve(w.start))&&(A=dt(_.parent.content.cut(_.parentOffset,C.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start()))))M=e.state.tr,"add"==A.type?M.addMark(R,D,A.mark):M.removeMark(R,D,A.mark);else if(_.parent.child(_.index()).isText&&_.index()==C.index()-(C.textOffset?0:1)){var I=_.parent.textBetween(_.parentOffset,C.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,R,D,I)})))return;M=e.state.tr.insertText(I,R,D)}if(M||(M=e.state.tr.replace(R,D,d.doc.slice(w.start-d.from,w.endB-d.from))),d.sel){var N=ft(e,M.doc,d.sel);N&&!(s.chrome&&s.android&&e.composing&&N.empty&&(N.head==R||N.head==M.mapping.map(D)-1)||s.ie&&N.empty&&N.head==R)&&M.setSelection(N)}E&&M.ensureMarks(E),e.dispatch(M.scrollIntoView())}}}function ft(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ve(e,t.resolve(n.anchor),t.resolve(n.head))}function dt(e,t){for(var n,r,o,s=e.firstChild.marks,a=t.firstChild.marks,c=s,u=a,l=0;l<a.length;l++)c=a[l].removeFromSet(c);for(var h=0;h<s.length;h++)u=s[h].removeFromSet(u);if(1==c.length&&0==u.length)r=c[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=u.length)return null;r=u[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(o(t.child(d)));if(i["c"].from(f).eq(e))return{mark:r,type:n}}function pt(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||mt(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(mt(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||mt(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function mt(e,t,n){var r=e.depth,i=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,i++,t=!1;if(n){var o=e.node(r).maybeChild(e.indexAfter(r));while(o&&!o.isLeaf)o=o.firstChild,i++}return i}function vt(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==i){var u=Math.max(0,o-Math.min(a,c));r-=a+u-o}if(a<o&&e.size<t.size){var l=r<=o&&r>=a?o-r:0;o-=l,c=o+(c-a),a=o}else if(c<o){var h=r<=o&&r>=c?o-r:0;o-=h,a=o+(a-c),c=o}return{start:o,endA:a,endB:c}}function gt(e,t){var n=[],r=t.content,o=t.openStart,s=t.openEnd;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||i["b"].fromSchema(e.state.schema),u=Mt(),l=u.createElement("div");l.appendChild(c.serializeFragment(r,{document:u}));var h,f=l.firstChild;while(f&&1==f.nodeType&&(h=Ct[f.nodeName.toLowerCase()])){for(var d=h.length-1;d>=0;d--){var p=u.createElement(h[d]);while(l.firstChild)p.appendChild(l.firstChild);l.appendChild(p)}f=l.firstChild}f&&1==f.nodeType&&f.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n));var m=e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:l,text:m}}function yt(e,t,n,r,o){var s,a,c=o.parent.type.spec.code;if(!n&&!t)return null;var u=t&&(r||c||!n);if(u){if(e.someProp("transformPastedText",(function(e){t=e(t,c||r)})),c)return new i["j"](i["c"].from(e.state.schema.text(t)),0,0);var l=e.someProp("clipboardTextParser",(function(e){return e(t,o,r)}));l?a=l:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=Et(n);var h=s&&s.querySelector("[data-pm-slice]"),f=h&&/^(\d+) (\d+) (.*)/.exec(h.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||i["a"].fromSchema(e.state.schema);a=d.parseSlice(s,{preserveWhitespace:!(!u&&!f),context:o})}return a=f?At(_t(a,+f[1],+f[2]),f[3]):i["j"].maxOpen(bt(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function bt(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n),o=r.contentMatchAt(t.index(n)),s=void 0,a=[];if(e.forEach((function(e){if(a){var t,n=o.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&s.length&&kt(n,s,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=St(a[a.length-1],s.length));var r=wt(e,n);a.push(r),o=o.matchType(r.type,r.attrs),s=n}}})),a)return{v:i["c"].from(a)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}function wt(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,i["c"].from(e));return e}function kt(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var s=kt(e,t,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));var a=r.contentMatchAt(r.childCount);if(a.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(i["c"].from(wt(n,e,o+1))))}}function St(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,St(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(i["c"].empty,!0);return e.copy(n.append(r))}function xt(e,t,n,r,o,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return o<r-1&&(c=xt(c,t,n,r,o+1,s)),o>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i["c"].empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}function _t(e,t,n){return t<e.openStart&&(e=new i["j"](xt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new i["j"](xt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Ct={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ot=null;function Mt(){return Ot||(Ot=document.implementation.createHTMLDocument("title"))}function Et(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Mt().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&Ct[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length),r.innerHTML=e;for(var s=0;s<o;s++)r=r.firstChild;return r}function At(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}for(var o=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var u=r.nodes[n[c]];if(!u||u.hasRequiredAttrs())break;o=i["c"].from(u.create(n[c+1],o)),s++,a++}return new i["j"](o,s,a)}var Tt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Rt=s.ie&&s.ie_version<=11,Dt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Dt.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Dt.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var It=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Dt,Rt&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};It.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},It.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},It.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Tt),Rt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},It.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Rt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},It.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},It.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},It.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},It.prototype.onSelectionChange=function(){if(We(this.view)){if(this.suppressingSelectionUpdates)return Pe(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},It.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},It.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},It.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&qe(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var u=this.registerMutation(e[c],a);u&&(r=r<0?u.from:Math.min(u.from,r),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(o=!0))}if(s.gecko&&a.length>1){var l=a.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var h=l[0],f=l[1];h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),Pt(this.view)),this.handleDOMChange(r,i,o,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Pe(this.view))}},It.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],c=a.previousSibling,u=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u)}for(var l=r&&r.parentNode==e.target?f(r)+1:0,h=n.localPosFromDOM(e.target,l,-1),d=i&&i.parentNode==e.target?f(i):e.target.childNodes.length,p=0;p<e.addedNodes.length;p++)t.push(e.addedNodes[p]);var m=n.localPosFromDOM(e.target,d,1);return{from:h,to:m}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Nt=!1;function Pt(e){Nt||(Nt=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var jt={},Lt={};function Ft(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new It(e,(function(t,n,r,i){return ht(e,t,n,r,i)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=jt[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!Ht(e,t)||Ut(e,t)||!e.editable&&t.type in Lt||n(e,t)})};for(var n in jt)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),$t(e)}function Bt(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function zt(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function $t(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ut(e,t)})}))}function Ut(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Ht(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Vt(e,t){Ut(e,t)||!jt[t.type]||!e.editable&&t.type in Lt||jt[t.type](e,t)}function Wt(e){return{left:e.clientX,top:e.clientY}}function qt(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Kt(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Jt(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Yt(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&r["c"].isSelectable(i))&&(Jt(e,new r["c"](n),"pointer"),!0)}function Gt(e,t){if(-1==t)return!1;var n,i,o=e.state.selection;o instanceof r["c"]&&(n=o.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r["c"].isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(Jt(e,r["c"].create(e.state.doc,i),"pointer"),!0)}function Xt(e,t,n,r,i){return Kt(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?Gt(e,n):Yt(e,n))}function Qt(e,t,n,r){return Kt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function Zt(e,t,n,r){return Kt(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||en(e,n)}function en(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Jt(e,r["h"].create(n,0,n.content.size),"pointer"),!0);for(var i=n.resolve(t),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Jt(e,r["h"].create(n,a+1,a+1+s.content.size),"pointer");else{if(!r["c"].isSelectable(s))continue;Jt(e,r["c"].create(n,a),"pointer")}return!0}}function tn(e){return un(e)}Lt.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!on(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!s.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||ct(e,t)?t.preventDefault():Bt(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Lt.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Lt.keypress=function(e,t){if(!(on(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r["h"])||!n.$from.sameParent(n.$to)){var i=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,i)}))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}}};var nn=s.mac?"metaKey":"ctrlKey";jt.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=tn(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&qt(t,e.lastClick)&&!t[nn]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(Wt(t));o&&("singleClick"==i?e.mouseDown=new rn(e,o,t,n):("doubleClick"==i?Qt:Zt)(e,o.pos,o.inside,t)?t.preventDefault():Bt(e,"pointer"))};var rn=function(e,t,n,i){var o,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=i,this.selectNode=n[nn],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{var u=e.state.doc.resolve(t.pos);o=u.parent,a=u.depth?u.before():0}this.mightDrag=null;var l=i?null:n.target,h=l?e.docView.nearestDesc(l,!0):null;this.target=h?h.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof r["c"]&&a==e.state.selection.from)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Bt(e,"pointer")};function on(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}rn.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},rn.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Wt(e))),this.allowDefault||!t?Bt(this.view,"pointer"):Xt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r["h"])&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(Jt(this.view,r["f"].near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Bt(this.view,"pointer")}},rn.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Bt(this.view,"pointer")},jt.touchdown=function(e){tn(e),Bt(e,"pointer")},jt.contextmenu=function(e){return tn(e)};var sn=s.android?5e3:-1;function an(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return un(e)}),t))}function cn(e){e.composing=!1;while(e.compositionNodes.length>0)e.compositionNodes.pop().markParentsDirty()}function un(e,t){if(e.domObserver.forceFlush(),cn(e),t||e.docView.dirty){var n=Ne(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}function ln(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}Lt.compositionstart=Lt.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),un(e,!0),e.markCursor=null;else if(un(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}e.composing=!0}an(e,sn)},Lt.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,an(e,20))};var hn=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function fn(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function dn(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?pn(e,r.value,null,t):pn(e,r.textContent,r.innerHTML,t)}),50)}}function pn(e,t,n,r){var o=yt(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,o||i["j"].empty)})))return!0;if(!o)return!1;var s=fn(o),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}jt.copy=Lt.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=hn?null:t.clipboardData,o=n.content(),s=gt(e,o),a=s.dom,c=s.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):ln(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Lt.paste=function(e,t){var n=hn?null:t.clipboardData;n&&pn(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():dn(e,t)};var mn=function(e,t){this.slice=e,this.move=t},vn=s.mac?"altKey":"ctrlKey";for(var gn in jt.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var i=e.state.selection,o=i.empty?null:e.posAtCoords(Wt(t));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r["c"]?i.to-1:i.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r["c"].create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(r["c"].create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=gt(e,a),u=c.dom,l=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(hn?"Text":"text/html",u.innerHTML),hn||t.dataTransfer.setData("text/plain",l),e.dragging=new mn(a,!t[vn])}},jt.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Lt.dragover=Lt.dragenter=function(e,t){return t.preventDefault()},Lt.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var s=e.posAtCoords(Wt(t));if(s){var a=e.state.doc.resolve(s.pos);if(a){var c=n&&n.slice||yt(e,t.dataTransfer.getData(hn?"Text":"text/plain"),hn?null:t.dataTransfer.getData("text/html"),!1,a),u=n&&!t[vn];if(e.someProp("handleDrop",(function(n){return n(e,t,c||i["j"].empty,u)})))t.preventDefault();else if(c){t.preventDefault();var l=c?Object(o["g"])(e.state.doc,a.pos,c):a.pos;null==l&&(l=a.pos);var h=e.state.tr;u&&h.deleteSelection();var f=h.mapping.map(l),d=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,p=h.doc;if(d?h.replaceRangeWith(f,f,c.content.firstChild):h.replaceRange(f,f,c),!h.doc.eq(p)){var m=h.doc.resolve(f);if(d&&r["c"].isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new r["c"](m));else{var v=h.mapping.map(l);h.mapping.maps[h.mapping.maps.length-1].forEach((function(e,t,n,r){return v=r})),h.setSelection(Ve(e,m,h.doc.resolve(v)))}e.focus(),e.dispatch(h.setMeta("uiEvent","drop"))}}}}}},jt.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Pe(e)}),20))},jt.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},jt.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))){var t=e.state.selection,r=t.$cursor;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},Lt)jt[gn]=Lt[gn];function yn(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var bn=function(e,t){this.spec=t||Cn,this.side=this.spec.side||0,this.toDOM=e};bn.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos,s=i.deleted;return s?null:new Sn(o-n,o-n,this)},bn.prototype.valid=function(){return!0},bn.prototype.eq=function(e){return this==e||e instanceof bn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&yn(this.spec,e.spec))};var wn=function(e,t){this.spec=t||Cn,this.attrs=e};wn.prototype.map=function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Sn(i,o,this)},wn.prototype.valid=function(e,t){return t.from<t.to},wn.prototype.eq=function(e){return this==e||e instanceof wn&&yn(this.attrs,e.attrs)&&yn(this.spec,e.spec)},wn.is=function(e){return e.type instanceof wn};var kn=function(e,t){this.spec=t||Cn,this.attrs=e};kn.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new Sn(i.pos-n,o.pos-n,this)},kn.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,i=n.offset;return i==t.from&&i+e.child(r).nodeSize==t.to},kn.prototype.eq=function(e){return this==e||e instanceof kn&&yn(this.attrs,e.attrs)&&yn(this.spec,e.spec)};var Sn=function(e,t,n){this.from=e,this.to=t,this.type=n},xn={spec:{configurable:!0},inline:{configurable:!0}};Sn.prototype.copy=function(e,t){return new Sn(e,t,this.type)},Sn.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Sn.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Sn.widget=function(e,t,n){return new Sn(e,e,new bn(t,n))},Sn.inline=function(e,t,n,r){return new Sn(e,t,new wn(n,r))},Sn.node=function(e,t,n,r){return new Sn(e,t,new kn(n,r))},xn.spec.get=function(){return this.type.spec},xn.inline.get=function(){return this.type instanceof wn},Object.defineProperties(Sn.prototype,xn);var _n=[],Cn={},On=function(e,t){this.local=e&&e.length?e:_n,this.children=t&&t.length?t:_n};On.create=function(e,t){return t.length?Nn(t,e,0,Cn):Mn},On.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},On.prototype.findInner=function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,i)}},On.prototype.map=function(e,t,n){return this==Mn||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Cn)},On.prototype.mapInner=function(e,t,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?An(this.children,o,e,t,n,r,i):o?new On(o.sort(Pn)):Mn},On.prototype.add=function(e,t){return t.length?this==Mn?On.create(e,t):this.addInner(e,t,0):this},On.prototype.addInner=function(e,t,n){var r,i=this,o=0;e.forEach((function(e,s){var a,c=s+n;if(a=Dn(t,e,c)){r||(r=i.children.slice());while(o<r.length&&r[o]<s)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(e,a,c+1):r.splice(o,0,s,s+e.nodeSize,Nn(a,e,c+1,Cn)),o+=3}}));var s=Tn(o?In(t):t,-n);return new On(s.length?this.local.concat(s).sort(Pn):this.local,r||this.children)},On.prototype.remove=function(e){return 0==e.length||this==Mn?this:this.removeInner(e,0)},On.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+t,a=n[i+1]+t,c=0,u=void 0;c<e.length;c++)(u=e[c])&&u.from>s&&u.to<a&&(e[c]=null,(o||(o=[])).push(u));if(o){n==this.children&&(n=this.children.slice());var l=n[i+2].removeInner(o,s+1);l!=Mn?n[i+2]=l:(n.splice(i,3),i-=3)}}if(r.length)for(var h=0,f=void 0;h<e.length;h++)if(f=e[h])for(var d=0;d<r.length;d++)r[d].eq(f,t)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return n==this.children&&r==this.local?this:r.length||n.length?new On(r,n):Mn},On.prototype.forChild=function(e,t){if(this==Mn)return this;if(t.isLeaf)return On.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(n=this.children[i+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof wn){var u=Math.max(o,c.from)-o,l=Math.min(s,c.to)-o;u<l&&(r||(r=[])).push(c.copy(u,l))}}if(r){var h=new On(r.sort(Pn));return n?new En([h,n]):h}return n||Mn},On.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof On)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},On.prototype.locals=function(e){return jn(this.localsInner(e))},On.prototype.localsInner=function(e){if(this==Mn)return _n;if(e.inlineContent||!this.local.some(wn.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof wn||t.push(this.local[n]);return t};var Mn=new On;On.empty=Mn,On.removeOverlap=jn;var En=function(e){this.members=e};function An(e,t,n,r,i,o,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],u=void 0;-1==c||e>c+o||(t>=a[s]+o?a[s+1]=-1:n>=i&&(u=r-n-(t-e))&&(a[s]+=u,a[s+1]+=u))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(c);for(var l=!1,h=0;h<a.length;h+=3)if(-1==a[h+1]){var f=n.map(e[h]+o),d=f-i;if(d<0||d>=r.content.size){l=!0;continue}var p=n.map(e[h+1]+o,-1),m=p-i,v=r.content.findIndex(d),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==d&&y+b.nodeSize==m){var w=a[h+2].mapInner(n,b,f+1,e[h]+o+1,s);w!=Mn?(a[h]=d,a[h+1]=m,a[h+2]=w):(a[h+1]=-2,l=!0)}else l=!0}if(l){var k=Rn(a,e,t||[],n,i,o,s),S=Nn(k,r,0,s);t=S.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var _=0,C=0;_<S.children.length;_+=3){var O=S.children[_];while(C<a.length&&a[C]<O)C+=3;a.splice(C,0,S.children[_],S.children[_+1],S.children[_+2])}}return new On(t&&t.sort(Pn),a)}function Tn(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new Sn(i.from+t,i.to+t,i.type))}return n}function Rn(e,t,n,r,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[o].spec)}for(var u=0;u<e.children.length;u+=3)a(e.children[u+2],e.children[u]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+o+1);return n}function Dn(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,i=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function In(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Nn(e,t,n,r){var i=[],o=!1;t.forEach((function(t,s){var a=Dn(e,t,s+n);if(a){o=!0;var c=Nn(a,t,n+s+1,r);c!=Mn&&i.push(s,s+t.nodeSize,c)}}));for(var s=Tn(o?In(e):e,-n).sort(Pn),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new On(s,i):Mn}function Pn(e,t){return e.from-t.from||e.to-t.to}function jn(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Ln(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),Ln(t,i+1,o.copy(r.to,o.to)))}}return t}function Ln(e,t,n){while(t<e.length&&Pn(n,e[t])>0)t++;e.splice(t,0,n)}function Fn(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Mn&&t.push(r)})),e.cursorWrapper&&t.push(On.create(e.state.doc,[e.cursorWrapper.deco])),En.from(t)}En.prototype.forChild=function(e,t){if(t.isLeaf)return On.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(e,t);i!=Mn&&(i instanceof En?n=n.concat(i.members):n.push(i))}return En.from(n)},En.prototype.eq=function(e){if(!(e instanceof En)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},En.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?jn(n?t:t.sort(Pn)):_n},En.from=function(e){switch(e.length){case 0:return Mn;case 1:return e[0];default:return new En(e)}};var Bn=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Hn(this),this.markCursor=null,this.cursorWrapper=null,Un(this),this.nodeViews=Wn(this),this.docView=de(this.state.doc,$n(this),Fn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Ft(this),this.pluginViews=[],this.updatePluginViews()},zn={props:{configurable:!0},root:{configurable:!0}};function $n(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Sn.node(0,e.state.doc.content.size,t)]}function Un(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Sn.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Hn(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Vn(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Wn(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function qn(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r}zn.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Bn.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&$t(this),this._props=e,this.updateStateInner(e.state,!0)},Bn.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Bn.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Bn.prototype.updateStateInner=function(e,t){var n=this,i=this.state,o=!1,a=!1;if(e.storedMarks&&this.composing&&(cn(this),a=!0),this.state=e,t){var c=Wn(this);qn(c,this.nodeViews)&&(this.nodeViews=c,o=!0),$t(this)}this.editable=Hn(this),Un(this);var u=Fn(this),l=$n(this),h=t?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,l,u);!f&&e.selection.eq(i.selection)||(a=!0);var d="preserve"==h&&a&&null==this.dom.style.overflowAnchor&&A(this);if(a){this.domObserver.stop();var p=f&&(s.ie||s.chrome)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Vn(i.selection,e.selection);if(f){var m=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,l,u,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=de(e.doc,l,u,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Ke(this))?Pe(this,p):(Ue(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==h)this.dom.scrollTop=0;else if("to selection"==h){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r["c"]?E(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):E(this,this.coordsAtPos(e.selection.head,1),v))}else d&&R(d)},Bn.prototype.destroyPluginViews=function(){var e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()},Bn.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Bn.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var s=i[o].props[e];if(null!=s&&(n=t?t(s):s))return n}},Bn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Bn.prototype.focus=function(){this.domObserver.stop(),this.editable&&N(this.dom),Pe(this),this.domObserver.start()},zn.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Bn.prototype.posAtCoords=function(e){return U(this,e)},Bn.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),W(this,e,t)},Bn.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Bn.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Bn.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Bn.prototype.endOfTextblock=function(e,t){return te(this,t||this.state,e)},Bn.prototype.destroy=function(){this.docView&&(zt(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Bn.prototype.dispatchEvent=function(e){return Vt(this,e)},Bn.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Bn.prototype,zn)},"577e":function(e,t,n){var r=n("d9b5");e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),i=n("577e"),o=n("5899"),s="["+o+"]",a=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e){return function(t){var n=i(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},5924:function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.toggleNode("paragraph","paragraph")}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});t["a"]=i},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5da9":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return f}));const r=String.fromCharCode,i=(String.fromCodePoint,e=>e.toLowerCase()),o=/^\s*/g,s=e=>e.replace(o,""),a=/([A-Z])/g,c=(e,t)=>s(e.replace(a,e=>`${t}${i(e)}`)),u=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},l="undefined"!==typeof TextEncoder?new TextEncoder:null,h=e=>l.encode(e),f=l?h:u;let d="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});d&&1===d.decode(new Uint8Array).length&&(d=null)},"5ea1":function(e,t,n){"use strict";n.d(t,"a",(function(){return ve}));var r=n("e6c4"),i=n("69a7"),o=n("ca0e");const s=1200,a=2500,c=3e4,u=e=>{if(e.shouldConnect&&null===e.ws){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=t=>{e.lastMessageReceived=i["a"]();const n=t.data,o="string"===typeof n?JSON.parse(n):n;o&&"pong"===o.type&&(clearTimeout(r),r=setTimeout(h,c/2)),e.emit("message",[o,e])};const l=t=>{null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(u,o["g"](o["e"](e.unsuccessfulReconnects+1)*s,a),e)),clearTimeout(r)},h=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>l(null),t.onerror=e=>l(e),t.onopen=()=>{e.lastMessageReceived=i["a"](),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(h,c/2)}}};class l extends r["a"]{constructor(e,{binaryType:t}={}){super(),this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&c<i["a"]()-this.lastMessageReceived&&this.ws.close()},c/2),u(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||u(this)}}var h=n("2309"),f=n("1e58"),d=n("c893"),p=n("dbda"),m=n("1b25"),v=n("679d");const g=e=>Promise.reject(e),y=e=>Promise.resolve(e);var b=n("d72c"),w=n("c823");const k=new Map;class S{constructor(e){this.room=e,this.onmessage=null,w["a"](t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:b["d"](t.newValue||"")}))}postMessage(e){w["b"].setItem(this.room,b["e"](b["b"](e)))}}const x="undefined"===typeof BroadcastChannel?S:BroadcastChannel,_=e=>h["e"](k,e,()=>{const t=new Set,n=new x(e);return n.onmessage=e=>t.forEach(t=>t(e.data)),{bc:n,subs:t}}),C=(e,t)=>_(e).subs.add(t),O=(e,t)=>_(e).subs.delete(t),M=(e,t)=>{const n=_(e);n.bc.postMessage(t),n.subs.forEach(e=>e(t))};var E=n("3edb"),A=n("8ac7"),T=n.n(A),R=n("7428");const D=0,I=1,N=2,P=(e,t)=>{p["m"](e,D);const n=R["v"](t);p["n"](e,n)},j=(e,t,n)=>{p["m"](e,I),p["n"](e,R["u"](t,n))},L=(e,t,n)=>j(t,n,m["l"](e)),F=(e,t,n)=>{try{R["m"](t,m["l"](e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},B=(e,t)=>{p["m"](e,N),p["n"](e,t)},z=F,$=(e,t,n,r)=>{const i=m["k"](e);switch(i){case D:L(e,t,n);break;case I:F(e,n,r);break;case N:z(e,n,r);break;default:throw new Error("Unknown message type")}return i};var U=n("f248"),H=n("5da9");const V=(e,t)=>{const n=H["a"](e).buffer,r=H["a"](t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},W=(e,t)=>{if(!t)return y(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(e=>{const t=p["e"]();return p["l"](t,"AES-GCM"),p["n"](t,n),p["n"](t,new Uint8Array(e)),p["f"](t)})},q=(e,t)=>{const n=p["e"]();return p["g"](n,e),W(p["f"](n),t)},K=(e,t)=>{if(!t)return y(e);const n=m["e"](e),r=m["j"](n);"AES-GCM"!==r&&g(f["a"]("Unknown encryption algorithm"));const i=m["l"](n),o=m["l"](n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,o).then(e=>new Uint8Array(e))},J=(e,t)=>K(e,t).then(e=>m["g"](m["e"](new Uint8Array(e)))),Y=v["g"]("y-webrtc"),G=0,X=3,Q=1,Z=4,ee=new Map,te=new Map,ne=e=>{let t=!0;e.webrtcConns.forEach(e=>{e.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),Y("synced ",v["a"],e.name,v["e"]," with all peers"))},re=(e,t,n)=>{const r=m["e"](t),i=p["e"](),o=m["k"](r);if(void 0===e)return null;const s=e.awareness,a=e.doc;let c=!1;switch(o){case G:{p["m"](i,G);const t=$(r,i,a,e);t!==I||e.synced||n(),t===D&&(c=!0);break}case X:p["m"](i,Q),p["n"](i,U["c"](s,Array.from(s.getStates().keys()))),c=!0;break;case Q:U["b"](s,m["l"](r),e);break;case Z:{const t=1===m["h"](r),n=m["j"](r);if(n!==e.peerId&&(e.bcConns.has(n)&&!t||!e.bcConns.has(n)&&t)){const r=[],i=[];t?(e.bcConns.add(n),i.push(n)):(e.bcConns.delete(n),r.push(n)),e.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),he(e)}break}default:return console.error("Unable to compute message"),i}return c?i:null},ie=(e,t)=>{const n=e.room;return Y("received message from ",v["a"],e.remotePeerId,v["b"]," (",n.name,")",v["e"],v["f"]),re(n,t,()=>{e.synced=!0,Y("synced ",v["a"],n.name,v["e"]," with ",v["a"],e.remotePeerId),ne(n)})},oe=(e,t)=>{Y("send message to ",v["a"],e.remotePeerId,v["e"],v["b"]," (",e.room.name,")",v["f"]);try{e.peer.send(p["f"](t))}catch(n){}},se=(e,t)=>{Y("broadcast message in ",v["a"],e.name,v["e"]),e.webrtcConns.forEach(e=>{try{e.peer.send(t)}catch(n){}})};class ae{constructor(e,t,n,r){Y("establishing connection to ",v["a"],n),this.room=r,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new T.a({initiator:t,...r.provider.peerOpts}),this.peer.on("signal",t=>{pe(e,r,{to:n,from:r.peerId,type:"signal",signal:t})}),this.peer.on("connect",()=>{Y("connected to ",v["a"],n),this.connected=!0;const e=r.provider,t=e.doc,i=r.awareness,o=p["e"]();p["m"](o,G),P(o,t),oe(this,o);const s=i.getStates();if(s.size>0){const e=p["e"]();p["m"](e,Q),p["n"](e,U["c"](i,Array.from(s.keys()))),oe(this,e)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),ne(r),this.peer.destroy(),Y("closed connection to ",v["a"],n),le(r)}),this.peer.on("error",e=>{Y("Error in connection to ",v["a"],n,": ",e),le(r)}),this.peer.on("data",e=>{const t=ie(this,e);null!==t&&oe(this,t)})}destroy(){this.peer.destroy()}}const ce=(e,t)=>W(t,e.key).then(t=>e.mux(()=>M(e.name,t))),ue=(e,t)=>{e.bcconnected&&ce(e,t),se(e,t)},le=e=>{ee.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&pe(t,e,{type:"announce",from:e.peerId}))})},he=e=>{if(e.provider.filterBcConns){const t=p["e"]();p["m"](t,Z),p["i"](t,1),p["l"](t,e.peerId),ce(e,p["f"](t))}};class fe{constructor(e,t,n,r){this.peerId=d["d"](),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Object(E["a"])(),this.bcconnected=!1,this._bcSubscriber=e=>K(new Uint8Array(e),r).then(e=>this.mux(()=>{const t=re(this,e,()=>{});t&&ce(this,p["f"](t))})),this._docUpdateHandler=(e,t)=>{const n=p["e"]();p["m"](n,G),B(n,e),ue(this,p["f"](n))},this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{const i=e.concat(t).concat(n),o=p["e"]();p["m"](o,Q),p["n"](o,U["c"](this.awareness,i)),ue(this,p["f"](o))},this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),window.addEventListener("beforeunload",()=>{U["d"](this.awareness,[e.clientID],"window unload"),te.forEach(e=>{e.disconnect()})})}connect(){le(this);const e=this.name;C(e,this._bcSubscriber),this.bcconnected=!0,he(this);const t=p["e"]();p["m"](t,G),P(t,this.doc),ce(this,p["f"](t));const n=p["e"]();p["m"](n,G),j(n,this.doc),ce(this,p["f"](n));const r=p["e"]();p["m"](r,X),ce(this,p["f"](r));const i=p["e"]();p["m"](i,Q),p["n"](i,U["c"](this.awareness,[this.doc.clientID])),ce(this,p["f"](i))}disconnect(){ee.forEach(e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})}),U["d"](this.awareness,[this.doc.clientID],"disconnect");const e=p["e"]();p["m"](e,Z),p["i"](e,0),p["l"](e,this.peerId),ce(this,p["f"](e)),O(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(e=>e.destroy())}destroy(){this.disconnect()}}const de=(e,t,n,r)=>{if(te.has(n))throw f["a"](`A Yjs Doc connected to room "${n}" already exists!`);const i=new fe(e,t,n,r);return te.set(n,i),i},pe=(e,t,n)=>{t.key?q(n,t.key).then(n=>{e.send({type:"publish",topic:t.name,data:b["e"](n)})}):e.send({type:"publish",topic:t.name,data:n})};class me extends l{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{Y(`connected (${e})`);const t=Array.from(te.keys());this.send({type:"subscribe",topics:t}),te.forEach(e=>pe(this,e,{type:"announce",from:e.peerId}))}),this.on("message",e=>{switch(e.type){case"publish":{const t=e.topic,n=te.get(t);if(null==n||"string"!==typeof t)return;const r=e=>{const t=n.webrtcConns,r=n.peerId;if(null==e||e.from===r||void 0!==e.to&&e.to!==r||n.bcConns.has(e.from))return;const i=t.has(e.from)?()=>{}:()=>n.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]);switch(e.type){case"announce":t.size<n.provider.maxConns&&(h["e"](t,e.from,()=>new ae(this,!0,e.from,n)),i());break;case"signal":e.to===r&&(h["e"](t,e.from,()=>new ae(this,!1,e.from,n)).peer.signal(e.signal),i());break}};n.key?"string"===typeof e.data&&J(b["d"](e.data),n.key).then(r):r(e.data)}}}),this.on("disconnect",()=>Y(`disconnect (${e})`))}}class ve extends r["a"]{constructor(e,t,{signaling:n=["ws://webrtc-signaling.sebtota.com"],password:r=null,awareness:i=new U["a"](t),maxConns:s=20+o["c"](15*d["b"]()),filterBcConns:a=!0,peerOpts:c={}}={}){super(),this.roomName=e,this.doc=t,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=s,this.peerOpts=c,this.key=r?V(r,e):y(null),this.room=null,this.key.then(n=>{this.room=de(t,this,e,n),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{const t=h["e"](ee,e,()=>new me(e));this.signalingConns.push(t),t.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),0===e.providers.size&&(e.destroy(),ee.delete(e.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),te.delete(this.roomName)}),super.destroy()}}},"5fb2":function(e,t,n){"use strict";var r=2147483647,i=36,o=1,s=26,a=38,c=700,u=72,l=128,h="-",f=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",m=i-o,v=Math.floor,g=String.fromCharCode,y=function(e){var t=[],n=0,r=e.length;while(n<r){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},b=function(e){return e+22+75*(e<26)},w=function(e,t,n){var r=0;for(e=n?v(e/c):e>>1,e+=v(e/t);e>m*s>>1;r+=i)e=v(e/m);return v(r+(m+1)*e/(e+a))},k=function(e){var t=[];e=y(e);var n,a,c=e.length,f=l,d=0,m=u;for(n=0;n<e.length;n++)a=e[n],a<128&&t.push(g(a));var k=t.length,S=k;k&&t.push(h);while(S<c){var x=r;for(n=0;n<e.length;n++)a=e[n],a>=f&&a<x&&(x=a);var _=S+1;if(x-f>v((r-d)/_))throw RangeError(p);for(d+=(x-f)*_,f=x,n=0;n<e.length;n++){if(a=e[n],a<f&&++d>r)throw RangeError(p);if(a==f){for(var C=d,O=i;;O+=i){var M=O<=m?o:O>=m+s?s:O-m;if(C<M)break;var E=C-M,A=i-M;t.push(g(b(M+E%A))),C=v(E/A)}t.push(g(b(C))),m=w(d,_,S==k),d=0,++S}}++d,++f}return t.join("")};e.exports=function(e){var t,n,r=[],i=e.toLowerCase().replace(d,".").split(".");for(t=0;t<i.length;t++)n=i[t],r.push(f.test(n)?"xn--"+k(n):n);return r.join(".")}},"605d":function(e,t,n){var r=n("c6b6"),i=n("da84");e.exports="process"==r(i.process)},6069:function(e,t){e.exports="object"==typeof window},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),s=n("7418"),a=n("d1e7"),c=n("7b0b"),u=n("44ad"),l=Object.assign,h=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||o(l({},t)).join("")!=i}))?function(e,t){var n=c(e),i=arguments.length,l=1,h=s.f,f=a.f;while(i>l){var d,p=u(arguments[l++]),m=h?o(p).concat(h(p)):o(p),v=m.length,g=0;while(v>g)d=m[g++],r&&!f.call(p,d)||(n[d]=p[d])}return n}:l},"64fe":function(e,t,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^```(?<language>[a-z]*)? $/,s=/^~~~(?<language>[a-z]*)? $/,a=r["d"].create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const n=null===(t=e.firstElementChild)||void 0===t?void 0:t.getAttribute("class");if(!n)return null;const r=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:n.replace(r,"")}},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode("codeBlock",e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode("codeBlock","paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())}}},addInputRules(){return[Object(i["c"])(o,this.type,({groups:e})=>e),Object(i["c"])(s,this.type,({groups:e})=>e)]}});t["a"]=a},6547:function(e,t,n){var r=n("a691"),i=n("577e"),o=n("1d80"),s=function(e){return function(t,n){var s,a,c=i(o(t)),u=r(n),l=c.length;return u<0||u>=l?e?"":void 0:(s=c.charCodeAt(u),s<55296||s>56319||u+1===l||(a=c.charCodeAt(u+1))<56320||a>57343?e?c.charAt(u):s:e?c.slice(u,u+2):a-56320+(s-55296<<10)+65536)}};e.exports={codeAt:s(!1),charAt:s(!0)}},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"679d":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return y})),n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return A}));var r=n("1d8c");const i=Symbol;var o=n("7749"),s=n("b6f5");JSON.stringify,JSON.parse;var a=n("2309"),c=(n("058a"),n("ca0e"),n("69a7")),u=n("2163");const l=i(),h=i(),f=i(),d=i(),p=i(),m=i(),v=i(),g=i(),y=i(),b={[l]:o["a"]("font-weight","bold"),[h]:o["a"]("font-weight","normal"),[f]:o["a"]("color","blue"),[p]:o["a"]("color","green"),[d]:o["a"]("color","grey"),[m]:o["a"]("color","red"),[v]:o["a"]("color","purple"),[g]:o["a"]("color","orange"),[y]:o["a"]("color","black")},w={[l]:"[1m",[h]:"[2m",[f]:"[34m",[p]:"[32m",[d]:"[37m",[m]:"[31m",[v]:"[35m",[g]:"[38;5;208m",[y]:"[0m"},k=e=>{const t=[],n=[],r=a["c"]();let i=[],o=0;for(;o<e.length;o++){const i=e[o],a=b[i];if(void 0!==a)r.set(a.left,a.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const e=s["e"](r);o>0||e.length>0?(t.push("%c"+i),n.push(e)):t.push(i)}}}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const t=e[o];t instanceof Symbol||i.push(t)}return i},S=e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const n=e[r],i=w[n];if(void 0!==i)t.push(i);else{if(n.constructor!==String&&n.constructor!==Number)break;t.push(n)}}for(r>0&&(t.push("[0m"),n.push(t.join("")));r<e.length;r++){const t=e[r];t instanceof Symbol||n.push(t)}return n},x=r["c"]?S:k,_=(...e)=>{console.log(...x(e)),C.forEach(t=>t.print(e))},C=new Set;const O=[p,v,g,f];let M=0,E=c["a"]();const A=e=>{const t=O[M],n=r["a"]("log"),i=null!==n&&("*"===n||"true"===n||new RegExp(n,"gi").test(e));return M=(M+1)%O.length,e+=": ",i?(...n)=>{const r=c["a"](),i=r-E;E=r,_(t,e,y,...n.map(e=>"string"===typeof e||"symbol"===typeof e?e:JSON.stringify(e)),t," +"+i+"ms")}:u["d"]}},"69a7":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("ca0e");const r=Date.now},"69f3":function(e,t,n){var r,i,o,s=n("7f9a"),a=n("da84"),c=n("861d"),u=n("9112"),l=n("5135"),h=n("c6cd"),f=n("f772"),d=n("d012"),p="Object already initialized",m=a.WeakMap,v=function(e){return o(e)?i(e):r(e,{})},g=function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(s||h.state){var y=h.state||(h.state=new m),b=y.get,w=y.has,k=y.set;r=function(e,t){if(w.call(y,e))throw new TypeError(p);return t.facade=e,k.call(y,e,t),t},i=function(e){return b.call(y,e)||{}},o=function(e){return w.call(y,e)}}else{var S=f("state");d[S]=!0,r=function(e,t){if(l(e,S))throw new TypeError(p);return t.facade=e,u(e,S,t),t},i=function(e){return l(e,S)?e[S]:{}},o=function(e){return l(e,S)}}e.exports={set:r,get:i,has:o,enforce:v,getterFor:g}},"6eeb":function(e,t,n){var r=n("da84"),i=n("9112"),o=n("5135"),s=n("ce4e"),a=n("8925"),c=n("69f3"),u=c.get,l=c.enforce,h=String(String).split("String");(e.exports=function(e,t,n,a){var c,u=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),c=l(n),c.source||(c.source=h.join("string"==typeof t?t:""))),e!==r?(u?!d&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},"70a9":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("5313");const i=new r["e"]("y-sync"),o=new r["e"]("y-undo"),s=new r["e"]("yjs-cursor")},7418:function(e,t){t.f=Object.getOwnPropertySymbols},7428:function(e,t,n){"use strict";n.d(t,"a",(function(){return Rn})),n.d(t,"b",(function(){return Ln})),n.d(t,"c",(function(){return Kn})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return Zn})),n.d(t,"f",(function(){return ge})),n.d(t,"g",(function(){return Ce})),n.d(t,"h",(function(){return cn})),n.d(t,"i",(function(){return Qe})),n.d(t,"j",(function(){return dn})),n.d(t,"k",(function(){return hn})),n.d(t,"l",(function(){return yn})),n.d(t,"m",(function(){return X})),n.d(t,"n",(function(){return _e})),n.d(t,"o",(function(){return xe})),n.d(t,"p",(function(){return A})),n.d(t,"q",(function(){return pe})),n.d(t,"r",(function(){return ye})),n.d(t,"s",(function(){return Se})),n.d(t,"t",(function(){return Oe})),n.d(t,"u",(function(){return ee})),n.d(t,"v",(function(){return se})),n.d(t,"w",(function(){return me})),n.d(t,"x",(function(){return C})),n.d(t,"y",(function(){return ve})),n.d(t,"z",(function(){return x})),n.d(t,"A",(function(){return Me})),n.d(t,"B",(function(){return Ct}));var r=n("e6c4"),i=n("fca1"),o=n("ca0e"),s=n("2309"),a=n("dbda"),c=n("1b25"),u=n("c893"),l=n("d72c"),h=n("1e58"),f=n("c77f"),d=n("2163"),p=n("4aa6"),m=n("679d"),v=n("69a7");const g=e=>({[Symbol.iterator](){return this},next:e}),y=(e,t)=>g(()=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n}),b=(e,t)=>g(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});var w=n("1d2f");r["a"];class k{constructor(e,t){this.clock=e,this.len=t}}class S{constructor(){this.clients=new Map}}const x=(e,t,n)=>t.clients.forEach((t,r)=>{const i=e.doc.store.clients.get(r);for(let o=0;o<t.length;o++){const r=t[o];$e(e,i,r.clock,r.len,n)}}),_=(e,t)=>{let n=0,r=e.length-1;while(n<=r){const i=o["c"]((n+r)/2),s=e[i],a=s.clock;if(a<=t){if(t<a+s.len)return i;n=i+1}else r=i-1}return null},C=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==_(n,t.clock)},O=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){const r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=o["f"](r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n})},M=e=>{const t=new S;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const s=r.slice();for(let t=n+1;t<e.length;t++)i["a"](s,e[t].clients.get(o)||[]);t.clients.set(o,s)}});return O(t),t},E=(e,t,n,r)=>{s["e"](e.clients,t,()=>[]).push(new k(n,r))},A=()=>new S,T=e=>{const t=A();return e.clients.forEach((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const i=n.id.clock;let o=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])o+=n.length;r.push(new k(i,o))}}r.length>0&&t.clients.set(n,r)}),t},R=(e,t)=>{a["m"](e.restEncoder,t.clients.size),t.clients.forEach((t,n)=>{e.resetDsCurVal(),a["m"](e.restEncoder,n);const r=t.length;a["m"](e.restEncoder,r);for(let i=0;i<r;i++){const n=t[i];e.writeDsClock(n.clock),e.writeDsLen(n.len)}})},D=e=>{const t=new S,n=c["k"](e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=c["k"](e.restDecoder),r=c["k"](e.restDecoder);if(r>0){const i=s["e"](t.clients,n,()=>[]);for(let t=0;t<r;t++)i.push(new k(e.readDsClock(),e.readDsLen()))}}return t},I=(e,t,n)=>{const r=new S,i=c["k"](e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const i=c["k"](e.restDecoder),o=c["k"](e.restDecoder),s=n.clients.get(i)||[],a=De(n,i);for(let n=0;n<o;n++){const n=e.readDsClock(),o=n+e.readDsLen();if(n<a){a<o&&E(r,i,a,o-a);let e=Ne(s,n),c=s[e];!c.deleted&&c.id.clock<n&&(s.splice(e+1,0,Xn(t,c,n-c.id.clock)),e++);while(e<s.length){if(c=s[e++],!(c.id.clock<o))break;c.deleted||(o<c.id.clock+c.length&&s.splice(e,0,Xn(t,c,o-c.id.clock)),c.delete(t))}}else E(r,i,n,o-n)}}if(r.clients.size>0){const e=new H;return a["m"](e.restEncoder,0),R(e,r),e.toUint8Array()}return null},N=u["c"];class P extends r["a"]{constructor({guid:e=u["d"](),gc:t=!0,gcFilter:n=(()=>!0),meta:r=null,autoLoad:i=!1}={}){super(),this.gc=t,this.gcFilter=n,this.clientID=N(),this.guid=e,this.share=new Map,this.store=new Te,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=i,this.autoLoad=i,this.meta=r}load(){const e=this._item;null===e||this.shouldLoad||Ye(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(e=>e.guid))}transact(e,t=null){Ye(this,e,t)}get(e,t=St){const n=s["e"](this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==St&&r!==t){if(r===St){const r=new t;r._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,$t)}getText(e=""){return this.get(e,cn)}getMap(e=""){return this.get(e,Vt)}getXmlFragment(e=""){return this.get(e,hn)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){i["c"](this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;e.deleted?t.doc=null:(t.doc=new P({guid:this.guid,...t.opts}),t.doc._item=e),Ye(e.parent.doc,n=>{e.deleted||n.subdocsAdded.add(t.doc),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class j{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return c["k"](this.restDecoder)}readDsLen(){return c["k"](this.restDecoder)}}class L extends j{readLeftID(){return pe(c["k"](this.restDecoder),c["k"](this.restDecoder))}readRightID(){return pe(c["k"](this.restDecoder),c["k"](this.restDecoder))}readClient(){return c["k"](this.restDecoder)}readInfo(){return c["h"](this.restDecoder)}readString(){return c["j"](this.restDecoder)}readParentInfo(){return 1===c["k"](this.restDecoder)}readTypeRef(){return c["k"](this.restDecoder)}readLen(){return c["k"](this.restDecoder)}readAny(){return c["g"](this.restDecoder)}readBuf(){return l["a"](c["l"](this.restDecoder))}readJSON(){return JSON.parse(c["j"](this.restDecoder))}readKey(){return c["j"](this.restDecoder)}}class F{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=c["k"](this.restDecoder),this.dsCurrVal}readDsLen(){const e=c["k"](this.restDecoder)+1;return this.dsCurrVal+=e,e}}class B extends F{constructor(e){super(e),this.keys=[],c["k"](e),this.keyClockDecoder=new c["a"](c["l"](e)),this.clientDecoder=new c["d"](c["l"](e)),this.leftClockDecoder=new c["a"](c["l"](e)),this.rightClockDecoder=new c["a"](c["l"](e)),this.infoDecoder=new c["b"](c["l"](e),c["h"]),this.stringDecoder=new c["c"](c["l"](e)),this.parentInfoDecoder=new c["b"](c["l"](e),c["h"]),this.typeRefDecoder=new c["d"](c["l"](e)),this.lenDecoder=new c["d"](c["l"](e))}readLeftID(){return new fe(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new fe(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return c["g"](this.restDecoder)}readBuf(){return c["l"](this.restDecoder)}readJSON(){return c["g"](this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class z{constructor(){this.restEncoder=a["e"]()}toUint8Array(){return a["f"](this.restEncoder)}resetDsCurVal(){}writeDsClock(e){a["m"](this.restEncoder,e)}writeDsLen(e){a["m"](this.restEncoder,e)}}class $ extends z{writeLeftID(e){a["m"](this.restEncoder,e.client),a["m"](this.restEncoder,e.clock)}writeRightID(e){a["m"](this.restEncoder,e.client),a["m"](this.restEncoder,e.clock)}writeClient(e){a["m"](this.restEncoder,e)}writeInfo(e){a["i"](this.restEncoder,e)}writeString(e){a["l"](this.restEncoder,e)}writeParentInfo(e){a["m"](this.restEncoder,e?1:0)}writeTypeRef(e){a["m"](this.restEncoder,e)}writeLen(e){a["m"](this.restEncoder,e)}writeAny(e){a["g"](this.restEncoder,e)}writeBuf(e){a["n"](this.restEncoder,e)}writeJSON(e){a["l"](this.restEncoder,JSON.stringify(e))}writeKey(e){a["l"](this.restEncoder,e)}}class U{constructor(){this.restEncoder=a["e"](),this.dsCurrVal=0}toUint8Array(){return a["f"](this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,a["m"](this.restEncoder,t)}writeDsLen(e){0===e&&h["c"](),a["m"](this.restEncoder,e-1),this.dsCurrVal+=e}}class H extends U{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a["a"],this.clientEncoder=new a["d"],this.leftClockEncoder=new a["a"],this.rightClockEncoder=new a["a"],this.infoEncoder=new a["b"](a["i"]),this.stringEncoder=new a["c"],this.parentInfoEncoder=new a["b"](a["i"]),this.typeRefEncoder=new a["d"],this.lenEncoder=new a["d"]}toUint8Array(){const e=a["e"]();return a["m"](e,0),a["n"](e,this.keyClockEncoder.toUint8Array()),a["n"](e,this.clientEncoder.toUint8Array()),a["n"](e,this.leftClockEncoder.toUint8Array()),a["n"](e,this.rightClockEncoder.toUint8Array()),a["n"](e,a["f"](this.infoEncoder)),a["n"](e,this.stringEncoder.toUint8Array()),a["n"](e,a["f"](this.parentInfoEncoder)),a["n"](e,this.typeRefEncoder.toUint8Array()),a["n"](e,this.lenEncoder.toUint8Array()),a["j"](e,a["f"](this.restEncoder)),a["f"](e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){a["g"](this.restEncoder,e)}writeBuf(e){a["n"](this.restEncoder,e)}writeJSON(e){a["g"](this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(this.keyClock++)}}const V=(e,t,n,r)=>{r=o["f"](r,t[0].id.clock);const i=Ne(t,r);a["m"](e.restEncoder,t.length-i),e.writeClient(n),a["m"](e.restEncoder,r);const s=t[i];s.write(e,r-s.id.clock);for(let o=i+1;o<t.length;o++)t[o].write(e,0)},W=(e,t,n)=>{const r=new Map;n.forEach((e,n)=>{De(t,n)>e&&r.set(n,e)}),Re(t).forEach((e,t)=>{n.has(t)||r.set(t,0)}),a["m"](e.restEncoder,r.size),Array.from(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(([n,r])=>{V(e,t.clients.get(n),n,r)})},q=(e,t)=>{const n=s["c"](),r=c["k"](e.restDecoder);for(let i=0;i<r;i++){const r=c["k"](e.restDecoder),i=new Array(r),o=e.readClient();let s=c["k"](e.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=e.readInfo();switch(f["i"]&r){case 0:{const t=e.readLen();i[n]=new Sn(pe(o,s),t),s+=t;break}case 10:{const t=c["k"](e.restDecoder);i[n]=new rr(pe(o,s),t),s+=t;break}default:{const a=0===(r&(f["f"]|f["g"])),c=new Zn(pe(o,s),null,(r&f["g"])===f["g"]?e.readLeftID():null,null,(r&f["f"])===f["f"]?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&(r&f["e"])===f["e"]?e.readString():null,er(e,r));i[n]=c,s+=c.length}}}}return n},K=(e,t,n)=>{const r=[];let i=Array.from(n.keys()).sort((e,t)=>e-t);if(0===i.length)return null;const o=()=>{if(0===i.length)return null;let e=n.get(i[i.length-1]);while(e.refs.length===e.i){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e};let c=o();if(null===c&&0===r.length)return null;const u=new Te,l=new Map,h=(e,t)=>{const n=l.get(e);(null==n||n>t)&&l.set(e,t)};let f=c.refs[c.i++];const d=new Map,p=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,u.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):u.clients.set(t,[e]),i=i.filter(e=>e!==t)}r.length=0};while(1){if(f.constructor!==rr){const i=s["e"](d,f.id.client,()=>De(t,f.id.client)),o=i-f.id.clock;if(o<0)r.push(f),h(f.id.client,f.id.clock-1),p();else{const i=f.getMissing(e,t);if(null!==i){r.push(f);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){f=e.refs[e.i++];continue}h(i,De(t,i)),p()}else(0===o||o<f.length)&&(f.integrate(e,o),d.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(null!==c&&c.i<c.refs.length)f=c.refs[c.i++];else{if(c=o(),null===c)break;f=c.refs[c.i++]}}if(u.clients.size>0){const e=new H;return W(e,u,new Map),a["m"](e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null},J=(e,t)=>W(e,t.doc.store,t.beforeState),Y=(e,t,n,r=new B(e))=>Ye(t,e=>{e.local=!1;let t=!1;const n=e.doc,i=n.store,o=q(r,n),s=K(e,i,o),a=i.pendingStructs;if(a){for(const[e,n]of a.missing)if(n<De(i,e)){t=!0;break}if(s){for(const[e,t]of s.missing){const n=a.missing.get(e);(null==n||n>t)&&a.missing.set(e,t)}a.update=it([a.update,s.update])}}else i.pendingStructs=s;const u=I(r,e,i);if(i.pendingDs){const t=new B(c["e"](i.pendingDs));c["k"](t.restDecoder);const n=I(t,e,i);i.pendingDs=u&&n?it([u,n]):u||n}else i.pendingDs=u;if(t){const t=i.pendingStructs.update;i.pendingStructs=null,G(e.doc,t)}},n,!1),G=(e,t,n,r=B)=>{const i=c["e"](t);Y(i,e,n,new r(i))},X=(e,t,n)=>G(e,t,n,L),Q=(e,t,n=new Map)=>{W(e,t.store,n),R(e,T(t.store))},Z=(e,t=new Uint8Array([0]),n=new H)=>{const r=ne(t);Q(n,e,r);const i=[n.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(ot(e.store.pendingStructs.update,t)),i.length>1){if(n.constructor===$)return nt(i.map((e,t)=>0===t?e:lt(e)));if(n.constructor===H)return it(i)}return i[0]},ee=(e,t)=>Z(e,t,new $),te=e=>{const t=new Map,n=c["k"](e.restDecoder);for(let r=0;r<n;r++){const n=c["k"](e.restDecoder),r=c["k"](e.restDecoder);t.set(n,r)}return t},ne=e=>te(new j(c["e"](e))),re=(e,t)=>(a["m"](e.restEncoder,t.size),t.forEach((t,n)=>{a["m"](e.restEncoder,n),a["m"](e.restEncoder,t)}),e),ie=(e,t)=>re(e,Re(t.store)),oe=(e,t=new U)=>(e instanceof Map?re(t,e):ie(t,e),t.toUint8Array()),se=e=>oe(e,new z);class ae{constructor(){this.l=[]}}const ce=()=>new ae,ue=(e,t)=>e.l.push(t),le=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},he=(e,t,n)=>d["a"](e.l,[t,n]);class fe{constructor(e,t){this.client=e,this.clock=t}}const de=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,pe=(e,t)=>new fe(e,t),me=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw h["c"]()},ve=(e,t)=>{while(null!==t){if(t.parent===e)return!0;t=t.parent._item}return!1};class ge{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const ye=e=>new ge(null==e.type?null:pe(e.type.client,e.type.clock),e.tname||null,null==e.item?null:pe(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class be{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const we=(e,t,n=0)=>new be(e,t,n),ke=(e,t,n)=>{let r=null,i=null;return null===e._item?i=me(e):r=pe(e._item.id.client,e._item.id.clock),new ge(r,i,t,n)},Se=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return ke(e,null,n);t--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>t)return ke(e,pe(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return ke(e,r.lastId,n);r=r.right}return ke(e,null,n)},xe=(e,t)=>{const n=t.store,r=e.item,i=e.type,o=e.tname,s=e.assoc;let a=null,c=0;if(null!==r){if(De(n,r.client)<=r.clock)return null;const e=Yn(n,r),t=e.item;if(!(t instanceof Zn))return null;if(a=t.parent,null===a._item||!a._item.deleted){c=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;while(null!==n)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==o)a=t.get(o);else{if(null===i)throw h["c"]();{if(De(n,i.client)<=i.clock)return null;const{item:e}=Yn(n,i);if(!(e instanceof Zn&&e.content instanceof Kn))return null;a=e.content.type}}c=s>=0?a._length:0}return we(a,c,e.assoc)},_e=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&de(e.item,t.item)&&de(e.type,t.type)&&e.assoc===t.assoc;class Ce{constructor(e,t){this.ds=e,this.sv=t}}const Oe=(e,t)=>new Ce(e,t),Me=(Oe(A(),new Map),e=>Oe(T(e.store),Re(e.store))),Ee=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!C(t.ds,e.id),Ae=(e,t)=>{const n=s["e"](e.meta,Ae,p["a"]),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<De(r,n)&&Fe(e,pe(n,t))}),x(e,t.ds,e=>{}),n.add(t))};class Te{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Re=e=>{const t=new Map;return e.clients.forEach((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},De=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Ie=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw h["c"]()}n.push(t)},Ne=(e,t)=>{let n=0,r=e.length-1,i=e[r],s=i.id.clock;if(s===t)return r;let a=o["c"](t/(s+i.length-1)*r);while(n<=r){if(i=e[a],s=i.id.clock,s<=t){if(t<s+i.length)return a;n=a+1}else r=a-1;a=o["c"]((n+r)/2)}throw h["c"]()},Pe=(e,t)=>{const n=e.clients.get(t.client);return n[Ne(n,t.clock)]},je=Pe,Le=(e,t,n)=>{const r=Ne(t,n),i=t[r];return i.id.clock<n&&i instanceof Zn?(t.splice(r+1,0,Xn(e,i,n-i.id.clock)),r+1):r},Fe=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Le(e,n,t.clock)]},Be=(e,t,n)=>{const r=t.clients.get(n.client),i=Ne(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Sn&&r.splice(i+1,0,Xn(e,o,n.clock-o.id.clock+1)),o},ze=(e,t,n)=>{const r=e.clients.get(t.id.client);r[Ne(r,t.id.clock)]=n},$e=(e,t,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Le(e,t,n);do{s=t[a++],o<s.id.clock+s.length&&Le(e,t,o),i(s)}while(a<t.length&&t[a].id.clock<o)};class Ue{constructor(e,t,n){this.doc=e,this.deleteSet=new S,this.beforeState=Re(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const He=(e,t)=>!(0===t.deleteSet.clients.size&&!s["a"](t.afterState,(e,n)=>t.beforeState.get(n)!==e))&&(O(t.deleteSet),J(e,t),R(e,t.deleteSet),!0),Ve=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&s["e"](e.changed,t,p["a"]).add(n)},We=(e,t)=>{const n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof Zn&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},qe=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Ne(e,o.clock),i=e[r];r<e.length&&i.id.clock<s;i=e[++r]){const i=e[r];if(o.clock+o.len<=i.id.clock)break;i instanceof Zn&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}},Ke=(e,t)=>{e.clients.forEach((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t],i=o["g"](r.length-1,1+Ne(r,n.clock+n.len-1));for(let e=i,t=r[e];e>0&&t.id.clock>=n.clock;t=r[--e])We(r,e)}})},Je=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{O(s),n.afterState=Re(n.doc.store),r._transaction=null,r.emit("beforeObserverCalls",[n,r]);const c=[];n.changed.forEach((e,t)=>c.push(()=>{null!==t._item&&t._item.deleted||t._callObserver(n,e)})),c.push(()=>{n.changedParentTypes.forEach((e,t)=>c.push(()=>{null!==t._item&&t._item.deleted||(e=e.filter(e=>null===e.target._item||!e.target._item.deleted),e.forEach(e=>{e.currentTarget=t}),e.sort((e,t)=>e.path.length-t.path.length),he(t._dEH,e,n))})),c.push(()=>r.emit("afterTransaction",[n,r]))}),Object(d["a"])(c,[])}finally{r.gc&&qe(s,i,r.gcFilter),Ke(s,i),n.afterState.forEach((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=i.clients.get(t),n=o["f"](Ne(e,r),1);for(let t=e.length-1;t>=n;t--)We(e,t)}});for(let e=0;e<a.length;e++){const{client:t,clock:n}=a[e].id,r=i.clients.get(t),o=Ne(r,n);o+1<r.length&&We(r,o+1),o>0&&We(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(r.clientID=N(),m["h"](m["c"],m["a"],"[yjs] ",m["e"],m["d"],"Changed the client-id because another client seems to be using it.")),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new $,t=He(e,n);t&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new H,t=He(e,n);t&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}n.subdocsAdded.forEach(e=>r.subdocs.add(e)),n.subdocsRemoved.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:n.subdocsLoaded,added:n.subdocsAdded,removed:n.subdocsRemoved}]),n.subdocsRemoved.forEach(e=>e.destroy()),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Je(e,t+1)}}},Ye=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1;null===e._transaction&&(o=!0,e._transaction=new Ue(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{o&&i[0]===e._transaction&&Je(i,0)}};class Ge{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const Xe=(e,t,n)=>{let r=null,i=null;const o=e.doc,s=e.scope;if(Ye(o,n=>{while(t.length>0&&null===r){const i=o.store,a=t.pop(),c=new Set,u=[];let l=!1;x(n,a.insertions,e=>{if(e instanceof Zn){if(null!==e.redone){let{item:t,diff:r}=Yn(i,e.id);r>0&&(t=Fe(n,pe(t.id.client,t.id.clock+r))),e=t}!e.deleted&&s.some(t=>ve(t,e))&&u.push(e)}}),x(n,a.deletions,e=>{e instanceof Zn&&s.some(t=>ve(t,e))&&!C(a.insertions,e.id)&&c.add(e)}),c.forEach(e=>{l=null!==Qn(n,e,c)||l});for(let t=u.length-1;t>=0;t--){const r=u[t];e.deleteFilter(r)&&(r.delete(n),l=!0)}r=l?a:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),i=n},e),null!=r){const t=i.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:t},e])}return r};class Qe extends r["a"]{constructor(e,{captureTimeout:t=500,deleteFilter:n=(()=>!0),trackedOrigins:r=new Set([null])}={}){super(),this.scope=e instanceof Array?e:[e],this.deleteFilter=n,r.add(this),this.trackedOrigins=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=this.scope[0].doc,this.lastChange=0,this.doc.on("afterTransaction",e=>{if(!this.scope.some(t=>e.changedParentTypes.has(t))||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;const n=this.undoing,r=this.redoing,i=n?this.redoStack:this.undoStack;n?this.stopCapturing():r||(this.redoStack=[]);const o=new S;e.afterState.forEach((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&E(o,n,r,i)});const s=v["a"]();if(s-this.lastChange<t&&i.length>0&&!n&&!r){const t=i[i.length-1];t.deletions=M([t.deletions,e.deleteSet]),t.insertions=M([t.insertions,o])}else i.push(new Ge(e.deleteSet,o));n||r||(this.lastChange=s),x(e,e.deleteSet,e=>{e instanceof Zn&&this.scope.some(t=>ve(t,e))&&Gn(e,!0)}),this.emit("stack-item-added",[{stackItem:i[i.length-1],origin:e.origin,type:n?"redo":"undo",changedParentTypes:e.changedParentTypes},this])})}clear(){this.doc.transact(e=>{const t=t=>{x(e,t.deletions,e=>{e instanceof Zn&&this.scope.some(t=>ve(t,e))&&Gn(e,!1)})};this.undoStack.forEach(t),this.redoStack.forEach(t)}),this.undoStack=[],this.redoStack=[]}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=Xe(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=Xe(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}}function*Ze(e){const t=c["k"](e.restDecoder);for(let n=0;n<t;n++){const t=c["k"](e.restDecoder),n=e.readClient();let r=c["k"](e.restDecoder);for(let i=0;i<t;i++){const t=e.readInfo();if(10===t){const t=c["k"](e.restDecoder);yield new rr(pe(n,r),t),r+=t}else if(0!==(f["i"]&t)){const i=0===(t&(f["f"]|f["g"])),o=new Zn(pe(n,r),null,(t&f["g"])===f["g"]?e.readLeftID():null,null,(t&f["f"])===f["f"]?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(t&f["e"])===f["e"]?e.readString():null,er(e,t));yield o,r+=o.length}else{const t=e.readLen();yield new Sn(pe(n,r),t),r+=t}}}}class et{constructor(e,t){this.gen=Ze(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===rr);return this.curr}}class tt{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const nt=e=>it(e,L,$),rt=(e,t)=>{if(e.constructor===Sn){const{client:n,clock:r}=e.id;return new Sn(pe(n,r+t),e.length-t)}if(e.constructor===rr){const{client:n,clock:r}=e.id;return new rr(pe(n,r+t),e.length-t)}{const n=e,{client:r,clock:i}=n.id;return new Zn(pe(r,i+t),null,pe(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},it=(e,t=B,n=H)=>{const r=e.map(e=>new t(c["e"](e)));let i=r.map(e=>new et(e,!0)),o=null;const s=new n,a=new tt(s);while(1){if(i=i.filter(e=>null!==e.curr),i.sort((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===rr?1:-1:n}return t.curr.id.client-e.curr.id.client}),0===i.length)break;const e=i[0],t=e.curr.id.client;if(null!==o){let n=e.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(t!==o.struct.id.client)at(a,o.struct,o.offset),o={struct:n,offset:0},e.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===rr)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{at(a,o.struct,o.offset);const e=n.id.clock-o.struct.id.clock-o.struct.length,r=new rr(pe(t,o.struct.id.clock+o.struct.length),e);o={struct:r,offset:0}}else{const t=o.struct.id.clock+o.struct.length-n.id.clock;t>0&&(o.struct.constructor===rr?o.struct.length-=t:n=rt(n,t)),o.struct.mergeWith(n)||(at(a,o.struct,o.offset),o={struct:n,offset:0},e.next())}}else o={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==rr;n=e.next())at(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(at(a,o.struct,o.offset),o=null),ct(a);const u=r.map(e=>D(e)),l=M(u);return R(s,l),s.toUint8Array()},ot=(e,t,n=B,r=H)=>{const i=ne(t),s=new r,a=new tt(s),u=new n(c["e"](e)),l=new et(u,!1);while(l.curr){const e=l.curr,t=e.id.client,n=i.get(t)||0;if(l.curr.constructor!==rr)if(e.id.clock+e.length>n){at(a,e,o["f"](n-e.id.clock,0)),l.next();while(l.curr&&l.curr.id.client===t)at(a,l.curr,0),l.next()}else while(l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=n)l.next();else l.next()}ct(a);const h=D(u);return R(s,h),s.toUint8Array()},st=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:a["f"](e.encoder.restEncoder)}),e.encoder.restEncoder=a["e"](),e.written=0)},at=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&st(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),a["m"](e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},ct=e=>{st(e);const t=e.encoder.restEncoder;a["m"](t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];a["m"](t,r.written),a["j"](t,r.restEncoder)}},ut=(e,t,n)=>{const r=new t(c["e"](e)),i=new et(r,!1),o=new n,s=new tt(o);for(let c=i.curr;null!==c;c=i.next())at(s,c,0);ct(s);const a=D(r);return R(o,a),o.toUint8Array()},lt=e=>ut(e,B,$);class ht{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null}get path(){return ft(this.currentTarget,this.target)}deletes(e){return C(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){const e=new Map,t=this.target,n=this.transaction.changed.get(t);n.forEach(n=>{if(null!==n){const r=t._map.get(n);let o,s;if(this.adds(r)){let e=r.left;while(null!==e&&this.adds(e))e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",s=i["d"](e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",s=i["d"](e.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=i["d"](r.content.getContent())}e.set(n,{action:o,oldValue:s})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){const t=this.target,n=p["a"](),r=p["a"](),i=[];e={added:n,deleted:r,delta:i,keys:this.keys};const o=this.transaction.changed.get(t);if(o.has(null)){let e=null;const o=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(o(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(o(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):(null!==e&&void 0!==e.retain||(o(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&o()}this._changes=e}return e}}const ft=(e,t)=>{const n=[];while(null!==t._item&&t!==e){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;while(r!==t._item&&null!==r)r.deleted||e++,r=r.right;n.unshift(e)}t=t._item.parent}return n},dt=80;let pt=0;class mt{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=pt++}}const vt=e=>{e.timestamp=pt++},gt=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=pt++},yt=(e,t,n)=>{if(e.length>=dt){const r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return gt(r,t,n),r}{const r=new mt(t,n);return e.push(r),r}},bt=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>o["a"](t-e.index)<o["a"](t-n.index)?e:n);let r=e._start,i=0;null!==n&&(r=n.p,i=n.index,vt(n));while(null!==r.right&&i<t){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>t)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&o["a"](n.index-i)<r.parent.length/dt?(gt(n,r,i),n):yt(e._searchMarker,r,i)},wt=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let t=i.p;t.marker=!1;while(t&&(t.deleted||!t.countable))t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}i.p=t,t.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=o["f"](t,i.index+n))}},kt=(e,t,n)=>{const r=e,i=t.changedParentTypes;while(1){if(s["e"](i,e,()=>[]).push(n),null===e._item)break;e=e._item.parent}he(r._eH,n,t)};class St{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ce(),this._dEH=ce(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw h["b"]()}clone(){throw h["b"]()}_write(e){}get _first(){let e=this._start;while(null!==e&&e.deleted)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){ue(this._eH,e)}observeDeep(e){ue(this._dEH,e)}unobserve(e){le(this._eH,e)}unobserveDeep(e){le(this._dEH,e)}toJSON(){}}const xt=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const e=o.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}o=o.right}return i},_t=e=>{const t=[];let n=e._start;while(null!==n){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},Ct=(e,t)=>{const n=[];let r=e._start;while(null!==r){if(r.countable&&Ee(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},Ot=(e,t)=>{let n=0,r=e._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)t(i[r],n++,e)}r=r.right}},Mt=(e,t)=>{const n=[];return Ot(e,(r,i)=>{n.push(t(r,i,e))}),n},Et=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==t&&t.deleted)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},At=(e,t)=>{const n=bt(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Tt=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,c=null===n?t._start:n.right;let u=[];const l=()=>{u.length>0&&(i=new Zn(pe(s,De(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Pn(u)),i.integrate(e,0),u=[])};r.forEach(n=>{switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(n);break;default:switch(l(),n.constructor){case Uint8Array:case ArrayBuffer:i=new Zn(pe(s,De(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new xn(new Uint8Array(n))),i.integrate(e,0);break;case P:i=new Zn(pe(s,De(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Mn(n)),i.integrate(e,0);break;default:if(!(n instanceof St))throw new Error("Unexpected content type in insert operation");i=new Zn(pe(s,De(a,s)),i,i&&i.lastId,c,c&&c.id,t,null,new Kn(n)),i.integrate(e,0)}}}),l()},Rt=h["a"]("Length exceeded!"),Dt=(e,t,n,r)=>{if(n>t._length)throw Rt;if(0===n)return t._searchMarker&&wt(t._searchMarker,n,r.length),Tt(e,t,null,r);const i=n,o=bt(t,n);let s=t._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Fe(e,pe(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&wt(t._searchMarker,i,r.length),Tt(e,t,s,r)},It=(e,t,n,r)=>{if(0===r)return;const i=n,o=r,s=bt(t,n);let a=t._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Fe(e,pe(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&Fe(e,pe(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw Rt;t._searchMarker&&wt(t._searchMarker,i,-o+r)},Nt=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Pt=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(null==r)a=new Pn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Pn([r]);break;case Uint8Array:a=new xn(r);break;case P:a=new Mn(r);break;default:if(!(r instanceof St))throw new Error("Unexpected content type");a=new Kn(r)}new Zn(pe(s,De(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},jt=(e,t)=>{const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Lt=e=>{const t={};return e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},Ft=(e,t)=>{const n=e._map.get(t);return void 0!==n&&!n.deleted},Bt=e=>y(e.entries(),e=>!e[1].deleted);class zt extends ht{constructor(e,t){super(e,t),this._transaction=t}}class $t extends St{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new $t;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new $t}clone(){const e=new $t;return e.insert(0,this.toArray().map(e=>e instanceof St?e.clone():e)),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),kt(this,e,new zt(this,e))}insert(e,t){null!==this.doc?Ye(this.doc,n=>{Dt(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Ye(this.doc,n=>{It(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return At(this,e)}toArray(){return _t(this)}slice(e=0,t=this.length){return xt(this,e,t)}toJSON(){return this.map(e=>e instanceof St?e.toJSON():e)}map(e){return Mt(this,e)}forEach(e){Ot(this,e)}[Symbol.iterator](){return Et(this)}_write(e){e.writeTypeRef(zn)}}const Ut=e=>new $t;class Ht extends ht{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Vt extends St{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new Vt}clone(){const e=new Vt;return this.forEach((t,n)=>{e.set(n,t instanceof St?t.clone():t)}),e}_callObserver(e,t){kt(this,e,new Ht(this,e,t))}toJSON(){const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof St?r.toJSON():r}}),e}get size(){return[...Bt(this._map)].length}keys(){return b(Bt(this._map),e=>e[0])}values(){return b(Bt(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return b(Bt(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){const t={};return this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}),t}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Ye(this.doc,t=>{Nt(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Ye(this.doc,n=>{Pt(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return jt(this,e)}has(e){return Ft(this,e)}clear(){null!==this.doc?Ye(this.doc,e=>{this.forEach((function(t,n,r){Nt(e,r,n)}))}):this._prelimContent.clear()}_write(e){e.writeTypeRef($n)}}const Wt=e=>new Vt,qt=(e,t)=>e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&w["a"](e,t);class Kt{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&h["c"](),this.right.content.constructor){case An:case Ln:this.right.deleted||(this.index+=this.right.length);break;case Rn:this.right.deleted||Xt(this.currentAttributes,this.right.content);break}this.left=this.right,this.right=this.right.right}}const Jt=(e,t,n)=>{while(null!==t.right&&n>0){switch(t.right.content.constructor){case An:case Ln:t.right.deleted||(n<t.right.length&&Fe(e,pe(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break;case Rn:t.right.deleted||Xt(t.currentAttributes,t.right.content);break}t.left=t.right,t.right=t.right.right}return t},Yt=(e,t,n)=>{const r=new Map,i=bt(t,n);if(i){const t=new Kt(i.p.left,i.p,i.index,r);return Jt(e,t,n-i.index)}{const i=new Kt(null,t._start,0,r);return Jt(e,i,n)}},Gt=(e,t,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Rn&&qt(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach((r,s)=>{const a=n.left,c=n.right,u=new Zn(pe(o,De(i.store,o)),a,a&&a.lastId,c,c&&c.id,t,null,new Rn(s,r));u.integrate(e,0),n.right=u,n.forward()})},Xt=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Qt=(e,t)=>{while(1){if(null===e.right)break;if(!(e.right.deleted||e.right.content.constructor===Rn&&qt(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},Zt=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],u=n.currentAttributes.get(a)||null;if(!qt(u,c)){s.set(a,u);const{left:r,right:l}=n;n.right=new Zn(pe(o,De(i.store,o)),r,r&&r.lastId,l,l&&l.id,t,null,new Rn(a,c)),n.right.integrate(e,0),n.forward()}}return s},en=(e,t,n,r,i)=>{n.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});const o=e.doc,s=o.clientID;Qt(n,i);const a=Zt(e,t,n,i),c=r.constructor===String?new Ln(r):new An(r);let{left:u,right:l,index:h}=n;t._searchMarker&&wt(t._searchMarker,n.index,c.getLength()),l=new Zn(pe(s,De(o.store,s)),u,u&&u.lastId,l,l&&l.id,t,null,c),l.integrate(e,0),n.right=l,n.index=h,n.forward(),Gt(e,t,n,a)},tn=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;Qt(n,i);const a=Zt(e,t,n,i);while(r>0&&null!==n.right){if(!n.right.deleted)switch(n.right.content.constructor){case Rn:{const{key:t,value:r}=n.right.content,o=i[t];void 0!==o&&(qt(o,r)?a.delete(t):a.set(t,r),n.right.delete(e));break}case An:case Ln:r<n.right.length&&Fe(e,pe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new Zn(pe(s,De(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Ln(i)),n.right.integrate(e,0),n.forward()}Gt(e,t,n,a)},nn=(e,t,n,r,i)=>{while(n&&n.content.constructor!==Ln&&n.content.constructor!==An)n.deleted||n.content.constructor!==Rn||Xt(i,n.content),n=n.right;let o=0;while(t!==n){if(!t.deleted){const n=t.content;switch(n.constructor){case Rn:{const{key:s,value:a}=n;(i.get(s)||null)===a&&(r.get(s)||null)!==a||(t.delete(e),o++);break}}}t=t.right}return o},rn=(e,t)=>{while(t&&t.right&&(t.right.deleted||t.right.content.constructor!==Ln&&t.right.content.constructor!==An))t=t.right;const n=new Set;while(t&&(t.deleted||t.content.constructor!==Ln&&t.content.constructor!==An)){if(!t.deleted&&t.content.constructor===Rn){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},on=e=>{let t=0;return Ye(e.doc,n=>{let r=e._start,i=e._start,o=s["c"]();const a=s["b"](o);while(i){if(!1===i.deleted)switch(i.content.constructor){case Rn:Xt(a,i.content);break;case An:case Ln:t+=nn(n,r,i,o,a),o=s["b"](a),r=i;break}i=i.right}}),t},sn=(e,t,n)=>{const r=n,i=s["b"](t.currentAttributes),o=t.right;while(n>0&&null!==t.right){if(!1===t.right.deleted)switch(t.right.content.constructor){case An:case Ln:n<t.right.length&&Fe(e,pe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&nn(e,o,t.right,i,s["b"](t.currentAttributes));const a=(t.left||t.right).parent;return a._searchMarker&&wt(a._searchMarker,t.index,-r+n),t};class an extends ht{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Ye(e,e=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",c=0,u=0;const l=()=>{if(null!==o){let e;switch(o){case"delete":e={delete:u},u=0;break;case"insert":e={insert:a},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)})),a="";break;case"retain":if(e={retain:c},Object.keys(s).length>0){e.attributes={};for(const t in s)e.attributes[t]=s[t]}c=0;break}t.push(e),o=null}};while(null!==i){switch(i.content.constructor){case An:this.adds(i)?this.deletes(i)||(l(),o="insert",a=i.content.embed,l()):this.deletes(i)?("delete"!==o&&(l(),o="delete"),u+=1):i.deleted||("retain"!==o&&(l(),o="retain"),c+=1);break;case Ln:this.adds(i)?this.deletes(i)||("insert"!==o&&(l(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(l(),o="delete"),u+=i.length):i.deleted||("retain"!==o&&(l(),o="retain"),c+=i.length);break;case Rn:{const{key:t,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const c=n.get(t)||null;qt(c,a)?i.delete(e):("retain"===o&&l(),qt(a,r.get(t)||null)?delete s[t]:s[t]=a)}}else if(this.deletes(i)){r.set(t,a);const e=n.get(t)||null;qt(e,a)||("retain"===o&&l(),s[t]=e)}else if(!i.deleted){r.set(t,a);const n=s[t];void 0!==n&&(qt(n,a)?i.delete(e):("retain"===o&&l(),null===a?s[t]=a:delete s[t]))}i.deleted||("insert"===o&&l(),Xt(n,i.content));break}}i=i.right}l();while(t.length>0){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class cn extends St{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(n){console.error(n)}this._pending=null}_copy(){return new cn}clone(){const e=new cn;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new an(this,e,t),r=e.doc;if(kt(this,e,n),!e.local){let t=!1;for(const[n,i]of e.afterState.entries()){const o=e.beforeState.get(n)||0;if(i!==o&&($e(e,r.store.clients.get(n),o,i,e=>{e.deleted||e.content.constructor!==Rn||(t=!0)}),t))break}t||x(e,e.deleteSet,e=>{e instanceof Sn||t||e.parent===this&&e.content.constructor===Rn&&(t=!0)}),Ye(r,e=>{t?on(this):x(e,e.deleteSet,t=>{t instanceof Sn||t.parent===this&&rn(e,t)})})}}toString(){let e="",t=this._start;while(null!==t)!t.deleted&&t.countable&&t.content.constructor===Ln&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Ye(this.doc,n=>{const r=new Kt(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(void 0!==o.insert){const s=t||"string"!==typeof o.insert||i!==e.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&en(n,this,r,s,o.attributes||{})}else void 0!==o.retain?tn(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&sn(n,r,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function c(){if(s.length>0){const e={};let t=!1;i.forEach((n,r)=>{t=!0,e[r]=n});const n={insert:s};t&&(n.attributes=e),r.push(n),s=""}}return Ye(o,o=>{e&&Ae(o,e),t&&Ae(o,t);while(null!==a){if(Ee(a,e)||void 0!==t&&Ee(a,t))switch(a.content.constructor){case Ln:{const r=i.get("ychange");void 0===e||Ee(a,e)?void 0===t||Ee(a,t)?void 0!==r&&(c(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.state||(c(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.state||(c(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case An:{c();const e={insert:a.content.embed};if(i.size>0){const t={};e.attributes=t,i.forEach((e,n)=>{t[n]=e})}r.push(e);break}case Rn:Ee(a,e)&&(c(),Xt(i,a.content));break}a=a.right}c()},Ae),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Ye(r,r=>{const i=Yt(r,this,e);n||(n={},i.currentAttributes.forEach((e,t)=>{n[t]=e})),en(r,this,i,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n={}){if(t.constructor!==Object)throw new Error("Embed must be an Object");const r=this.doc;null!==r?Ye(r,r=>{const i=Yt(r,this,e);en(r,this,i,t,n)}):this._pending.push(()=>this.insertEmbed(e,t,n))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Ye(n,n=>{sn(n,Yt(n,this,e),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Ye(r,r=>{const i=Yt(r,this,e);null!==i.right&&tn(r,this,i,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?Ye(this.doc,t=>{Nt(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?Ye(this.doc,n=>{Pt(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return jt(this,e)}getAttributes(e){return Lt(this)}_write(e){e.writeTypeRef(Un)}}const un=e=>new cn;class ln{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==dn&&t.constructor!==hn||null===t._start)while(null!==e){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class hn extends St{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new hn}clone(){const e=new hn;return e.insert(0,this.toArray().map(e=>e instanceof St?e.clone():e)),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new ln(this,e)}querySelector(e){e=e.toUpperCase();const t=new ln(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e),n=t.next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),Array.from(new ln(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){kt(this,e,new mn(this,t,e))}toString(){return Mt(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Ot(this,i=>{r.insertBefore(i.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?Ye(this.doc,n=>{Dt(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Ye(this.doc,n=>{const r=e&&e instanceof St?e._item:e;Tt(n,this,r,t)});else{const n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw h["a"]("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Ye(this.doc,n=>{It(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return _t(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return At(this,e)}slice(e=0,t=this.length){return xt(this,e,t)}_write(e){e.writeTypeRef(Vn)}}const fn=e=>new hn;class dn extends hn{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new dn(this.nodeName)}clone(){const e=new dn(this.nodeName),t=this.getAttributes();for(const n in t)e.setAttribute(n,t[n]);return e.insert(0,this.toArray().map(e=>e instanceof St?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const s in e)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];t.push(r+'="'+e[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?Ye(this.doc,t=>{Nt(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Ye(this.doc,n=>{Pt(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return jt(this,e)}hasAttribute(e){return Ft(this,e)}getAttributes(e){return Lt(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i)r.setAttribute(o,i[o]);return Ot(this,i=>{r.appendChild(i.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(Hn),e.writeKey(this.nodeName)}}const pn=e=>new dn(e.readKey());class mn extends ht{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class vn extends Vt{constructor(e){super(),this.hookName=e}_copy(){return new vn(this.hookName)}clone(){const e=new vn(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(e=document,t={},n){const r=t[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(Wn),e.writeKey(this.hookName)}}const gn=e=>new vn(e.readKey());class yn extends cn{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new yn}clone(){const e=new yn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const t=[];for(const r in e.attributes){const n=[];for(const t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:r,attrs:n})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let n="";for(let r=0;r<t.length;r++){const e=t[r];n+="<"+e.nodeName;for(let t=0;t<e.attrs.length;t++){const r=e.attrs[t];n+=` ${r.key}="${r.value}"`}n+=">"}n+=e.insert;for(let r=t.length-1;r>=0;r--)n+=`</${t[r].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(qn)}}const bn=e=>new yn;class wn{constructor(e,t){this.id=e,this.length=t}get deleted(){throw h["b"]()}mergeWith(e){return!1}write(e,t,n){throw h["b"]()}integrate(e,t){throw h["b"]()}}const kn=0;class Sn extends wn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Ie(e.doc.store,this)}write(e,t){e.writeInfo(kn),e.writeLen(this.length-t)}getMissing(e,t){return null}}class xn{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new xn(this.content)}splice(e){throw h["b"]()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}const _n=e=>new xn(e.readBuf());class Cn{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Cn(this.len)}splice(e){const t=new Cn(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){E(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const On=e=>new Cn(e.readLen());class Mn{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Mn(this.doc)}splice(e){throw h["b"]()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const En=e=>new Mn(new P({guid:e.readString(),...e.readAny()}));class An{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new An(this.embed)}splice(e){throw h["b"]()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}const Tn=e=>new An(e.readJSON());class Rn{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Rn(this.key,this.value)}splice(e){throw h["b"]()}mergeWith(e){return!1}integrate(e,t){t.parent._searchMarker=null}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Dn=e=>new Rn(e.readString(),e.readJSON());class In{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new In(this.arr)}splice(e){const t=new In(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const Nn=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new In(n)};class Pn{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Pn(this.arr)}splice(e){const t=new Pn(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}const jn=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Pn(n)};class Ln{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ln(this.str)}splice(e){const t=new Ln(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const Fn=e=>new Ln(e.readString()),Bn=[Ut,Wt,un,pn,fn,gn,bn],zn=0,$n=1,Un=2,Hn=3,Vn=4,Wn=5,qn=6;class Kn{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Kn(this.type._copy())}splice(e){throw h["b"]()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;while(null!==t)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;while(null!==t)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{while(null!==t)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Jn=e=>new Kn(Bn[e.readTypeRef()](e)),Yn=(e,t)=>{let n,r=t,i=0;do{i>0&&(r=pe(r.client,r.clock+i)),n=je(e,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Zn);return{item:n,diff:i}},Gn=(e,t)=>{while(null!==e&&e.keep!==t)e.keep=t,e=e.parent._item},Xn=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new Zn(pe(r,i+n),t,pe(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=pe(t.redone.client,t.redone.clock+n)),t.right=o,null!==o.right&&(o.right.left=o),e._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=n,o},Qn=(e,t,n)=>{const r=e.doc,i=r.store,o=r.clientID,s=t.redone;if(null!==s)return Fe(e,s);let a,c,u=t.parent._item;if(null===t.parentSub)a=t.left,c=t;else{a=t;while(null!==a.right)if(a=a.right,a.id.client!==o)return null;null!==a.right&&(a=t.parent._map.get(t.parentSub)),c=null}if(null!==u&&!0===u.deleted&&null===u.redone&&(!n.has(u)||null===Qn(e,u,n)))return null;if(null!==u&&null!==u.redone){while(null!==u.redone)u=Fe(e,u.redone);while(null!==a){let t=a;while(null!==t&&t.parent._item!==u)t=null===t.redone?null:Fe(e,t.redone);if(null!==t&&t.parent._item===u){a=t;break}a=a.left}while(null!==c){let t=c;while(null!==t&&t.parent._item!==u)t=null===t.redone?null:Fe(e,t.redone);if(null!==t&&t.parent._item===u){c=t;break}c=c.right}}const l=De(i,o),h=pe(o,l),f=new Zn(h,a,a&&a.lastId,c,c&&c.id,null===u?t.parent:u.content.type,t.parentSub,t.content.copy());return t.redone=h,Gn(f,!0),f.integrate(e,0),f};class Zn extends wn{constructor(e,t,n,r,i,o,s,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?f["b"]:0}set marker(e){(this.info&f["d"])>0!==e&&(this.info^=f["d"])}get marker(){return(this.info&f["d"])>0}get keep(){return(this.info&f["a"])>0}set keep(e){this.keep!==e&&(this.info^=f["a"])}get countable(){return(this.info&f["b"])>0}get deleted(){return(this.info&f["c"])>0}set deleted(e){this.deleted!==e&&(this.info^=f["c"])}markDeleted(){this.info|=f["c"]}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=De(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=De(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===fe&&this.id.client!==this.parent.client&&this.parent.clock>=De(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Be(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Fe(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Sn||this.right&&this.right.constructor===Sn)&&(this.parent=null),this.parent){if(this.parent.constructor===fe){const e=je(t,this.parent);e.constructor===Sn?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Zn&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Zn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Be(e,e.doc.store,pe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start;const r=new Set,i=new Set;while(null!==t&&t!==this.right){if(i.add(t),r.add(t),de(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(de(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(je(e.doc.store,t.origin)))break;r.has(je(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Ie(e.doc.store,this),this.content.integrate(e,this),Ve(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Sn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;while(null!==e&&e.deleted)e=e.right;return e}get prev(){let e=this.left;while(null!==e&&e.deleted)e=e.left;return e}get lastId(){return 1===this.length?this.id:pe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&de(e.origin,this.lastId)&&this.right===e&&de(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),E(e.deleteSet,this.id.client,this.id.clock,this.length),Ve(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw h["c"]();this.content.gc(e),t?ze(e,this,new Sn(this.id,this.length)):this.content=new Cn(this.length)}write(e,t){const n=t>0?pe(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&f["i"]|(null===n?0:f["g"])|(null===r?0:f["f"])|(null===i?0:f["e"]);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=me(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===fe?(e.writeParentInfo(!1),e.writeLeftID(t)):h["c"]();null!==i&&e.writeString(i)}this.content.write(e,t)}}const er=(e,t)=>tr[t&f["i"]](e),tr=[()=>{h["c"]()},On,Nn,_n,Fn,Tn,Dn,Jn,jn,En,()=>{h["c"]()}],nr=10;class rr extends wn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){h["c"]()}write(e,t){e.writeInfo(nr),a["m"](e.restEncoder,this.length-t)}getMissing(e,t){return null}}},"746f":function(e,t,n){var r=n("428f"),i=n("5135"),o=n("e538"),s=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},"753f":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){(function(t){var n;(function(t){e.exports=t()})((function(){return function(){function e(t,r,i){function o(a,c){if(!r[a]){if(!t[a]){var u="function"==typeof n&&n;if(!c&&u)return n(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};t[a][0].call(h.exports,(function(e){var n=t[a][1][e];return o(n||e)}),h,h.exports,e,t,r,i)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<i.length;a++)o(i[a]);return o}return e}()({1:[function(e,n,r){(function(e){var t=t||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);(function(){var e=t,n=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(t=i));i=[];for(var o=0,s=0;s<t;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<s%4*2,c=r.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|c)<<24-o%4*8,o++}return n.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(e){function n(e,t,n,r,i,o,s){return e=e+(t&n|~t&r)+i+s,(e<<o|e>>>32-o)+t}function r(e,t,n,r,i,o,s){return e=e+(t&r|n&~r)+i+s,(e<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,s){return e=e+(t^n^r)+i+s,(e<<o|e>>>32-o)+t}function o(e,t,n,r,i,o,s){return e=e+(n^(t|~r))+i+s,(e<<o|e>>>32-o)+t}for(var s=t,a=s.lib,c=a.WordArray,u=a.Hasher,l=(a=s.algo,[]),h=0;64>h;h++)l[h]=4294967296*e.abs(e.sin(h+1))|0;a=a.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;16>s;s++){var a=t+s,c=e[a];e[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}s=this._hash.words,a=e[t+0],c=e[t+1];var u=e[t+2],h=e[t+3],f=e[t+4],d=e[t+5],p=e[t+6],m=e[t+7],v=e[t+8],g=e[t+9],y=e[t+10],b=e[t+11],w=e[t+12],k=e[t+13],S=e[t+14],x=e[t+15],_=s[0],C=s[1],O=s[2],M=s[3];_=n(_,C,O,M,a,7,l[0]),M=n(M,_,C,O,c,12,l[1]),O=n(O,M,_,C,u,17,l[2]),C=n(C,O,M,_,h,22,l[3]),_=n(_,C,O,M,f,7,l[4]),M=n(M,_,C,O,d,12,l[5]),O=n(O,M,_,C,p,17,l[6]),C=n(C,O,M,_,m,22,l[7]),_=n(_,C,O,M,v,7,l[8]),M=n(M,_,C,O,g,12,l[9]),O=n(O,M,_,C,y,17,l[10]),C=n(C,O,M,_,b,22,l[11]),_=n(_,C,O,M,w,7,l[12]),M=n(M,_,C,O,k,12,l[13]),O=n(O,M,_,C,S,17,l[14]),C=n(C,O,M,_,x,22,l[15]),_=r(_,C,O,M,c,5,l[16]),M=r(M,_,C,O,p,9,l[17]),O=r(O,M,_,C,b,14,l[18]),C=r(C,O,M,_,a,20,l[19]),_=r(_,C,O,M,d,5,l[20]),M=r(M,_,C,O,y,9,l[21]),O=r(O,M,_,C,x,14,l[22]),C=r(C,O,M,_,f,20,l[23]),_=r(_,C,O,M,g,5,l[24]),M=r(M,_,C,O,S,9,l[25]),O=r(O,M,_,C,h,14,l[26]),C=r(C,O,M,_,v,20,l[27]),_=r(_,C,O,M,k,5,l[28]),M=r(M,_,C,O,u,9,l[29]),O=r(O,M,_,C,m,14,l[30]),C=r(C,O,M,_,w,20,l[31]),_=i(_,C,O,M,d,4,l[32]),M=i(M,_,C,O,v,11,l[33]),O=i(O,M,_,C,b,16,l[34]),C=i(C,O,M,_,S,23,l[35]),_=i(_,C,O,M,c,4,l[36]),M=i(M,_,C,O,f,11,l[37]),O=i(O,M,_,C,m,16,l[38]),C=i(C,O,M,_,y,23,l[39]),_=i(_,C,O,M,k,4,l[40]),M=i(M,_,C,O,a,11,l[41]),O=i(O,M,_,C,h,16,l[42]),C=i(C,O,M,_,p,23,l[43]),_=i(_,C,O,M,g,4,l[44]),M=i(M,_,C,O,w,11,l[45]),O=i(O,M,_,C,x,16,l[46]),C=i(C,O,M,_,u,23,l[47]),_=o(_,C,O,M,a,6,l[48]),M=o(M,_,C,O,m,10,l[49]),O=o(O,M,_,C,S,15,l[50]),C=o(C,O,M,_,d,21,l[51]),_=o(_,C,O,M,w,6,l[52]),M=o(M,_,C,O,h,10,l[53]),O=o(O,M,_,C,y,15,l[54]),C=o(C,O,M,_,c,21,l[55]),_=o(_,C,O,M,v,6,l[56]),M=o(M,_,C,O,x,10,l[57]),O=o(O,M,_,C,p,15,l[58]),C=o(C,O,M,_,k,21,l[59]),_=o(_,C,O,M,f,6,l[60]),M=o(M,_,C,O,b,10,l[61]),O=o(O,M,_,C,u,15,l[62]),C=o(C,O,M,_,g,21,l[63]);s[0]=s[0]+_|0,s[1]=s[1]+C|0,s[2]=s[2]+O|0,s[3]=s[3]+M|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=u._createHelper(a),s.HmacMD5=u._createHmacHelper(a)}(Math),function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=(n=e.algo,n.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,r=n.hasher.create(),o=i.create(),s=o.words,a=n.keySize;for(n=n.iterations;s.length<a;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var u=1;u<n;u++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*a,o}}));e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=n.enc.Base64,c=n.algo.EvpKDF,u=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?m:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?m:p).decrypt(e,t,n,r)}}}});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=n.mode={},h=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;o<r;o++)t[n+o]^=i[o]},f=(r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();f.Encryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;h.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),f.Decryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),h.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=f,f=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=(n=n-e.sigBytes%n,n<<24|n<<16|n<<8|n),i=[],s=0;s<n;s+=4)i.push(r);n=o.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:l,padding:f}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv;e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(l=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){e=a.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},r.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,d.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),m=(n=(n.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=o.random(8)),e=c.create({keySize:t+n}).compute(e,r),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},r.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:n}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}}))}(),function(){for(var e=t,n=e.lib.BlockCipher,r=e.algo,i=[],o=[],s=[],a=[],c=[],u=[],l=[],h=[],f=[],d=[],p=[],m=0;256>m;m++)p[m]=128>m?m<<1:m<<1^283;var v=0,g=0;for(m=0;256>m;m++){var y=g^g<<1^g<<2^g<<3^g<<4;y=y>>>8^255&y^99;i[v]=y,o[y]=v;var b=p[v],w=p[b],k=p[w],S=257*p[y]^16843008*y;s[v]=S<<24|S>>>8,a[v]=S<<16|S>>>16,c[v]=S<<8|S>>>24,u[v]=S,S=16843009*k^65537*w^257*b^16843008*v,l[y]=S<<24|S>>>8,h[y]=S<<16|S>>>16,f[y]=S<<8|S>>>24,d[y]=S,v?(v=b^p[p[p[k^b]]],g^=p[p[g]]):v=g=1}var x=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,r=(e=4*((this._nRounds=n+6)+1),this._keySchedule=[]),o=0;o<e;o++)if(o<n)r[o]=t[o];else{var s=r[o-1];o%n?6<n&&4==o%n&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=x[o/n|0]<<24),r[o]=r[o-n]^s}for(t=this._invKeySchedule=[],n=0;n<e;n++)o=e-n,s=n%4?r[o]:r[o-4],t[n]=4>n||4>=o?s:l[i[s>>>24]]^h[i[s>>>16&255]]^f[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,f,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],d=4,p=1;p<c;p++){var m=r[u>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^n[d++],v=r[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&u]^n[d++],g=r[h>>>24]^i[f>>>16&255]^o[u>>>8&255]^s[255&l]^n[d++];f=r[f>>>24]^i[u>>>16&255]^o[l>>>8&255]^s[255&h]^n[d++],u=m,l=v,h=g}m=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&u])^n[d++],g=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[d++],f=(a[f>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++],e[t]=m,e[t+1]=v,e[t+2]=g,e[t+3]=f},keySize:8});e.AES=n._createHelper(r)}();t=t||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);(function(e){for(var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,s=(r=n.algo,[]),a=[],c=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var h;e:{h=u;for(var f=e.sqrt(h),d=2;d<=f;d++)if(!(h%d)){h=!1;break e}h=!0}h&&(8>l&&(s[l]=c(e.pow(u,.5))),a[l]=c(e.pow(u,1/3)),l++),u++}var p=[];r=r.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)p[f]=0|e[t+f];else{var d=p[f-15],m=p[f-2];p[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[f-16]}d=h+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+a[f]+p[f],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),h=l,l=u,u=c,c=s+d|0,s=o,o=i,i=r,r=d+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(r),n.HmacSHA256=o._createHmacHelper(r)})(Math),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();t=t||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(r){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);(function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray;n=n.x64={};n.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),n.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})})(),function(){function e(){return o.create.apply(o,arguments)}for(var n=t,r=n.lib.Hasher,i=n.x64,o=i.Word,s=i.WordArray,a=(i=n.algo,[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)]),c=[],u=0;80>u;u++)c[u]=e();i=i.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],l=n[5],h=n[6],f=(n=n[7],r.high),d=r.low,p=i.high,m=i.low,v=o.high,g=o.low,y=s.high,b=s.low,w=u.high,k=u.low,S=l.high,x=l.low,_=h.high,C=h.low,O=n.high,M=n.low,E=f,A=d,T=p,R=m,D=v,I=g,N=y,P=b,j=w,L=k,F=S,B=x,z=_,$=C,U=O,H=M,V=0;80>V;V++){var W=c[V];if(16>V)var q=W.high=0|e[t+2*V],K=W.low=0|e[t+2*V+1];else{q=c[V-15],K=q.high;var J=q.low,Y=(q=(K>>>1|J<<31)^(K>>>8|J<<24)^K>>>7,J=(J>>>1|K<<31)^(J>>>8|K<<24)^(J>>>7|K<<25),c[V-2]),G=(K=Y.high,Y.low),X=(Y=(K>>>19|G<<13)^(K<<3|G>>>29)^K>>>6,G=(G>>>19|K<<13)^(G<<3|K>>>29)^(G>>>6|K<<26),K=c[V-7],K.high),Q=c[V-16],Z=Q.high;Q=Q.low,K=J+K.low,q=q+X+(K>>>0<J>>>0?1:0),K=K+G,q=q+Y+(K>>>0<G>>>0?1:0),K=K+Q,q=q+Z+(K>>>0<Q>>>0?1:0);W.high=q,W.low=K}X=j&F^~j&z,Q=L&B^~L&$,W=E&T^E&D^T&D;var ee=A&R^A&I^R&I,te=(J=(E>>>28|A<<4)^(E<<30|A>>>2)^(E<<25|A>>>7),Y=(A>>>28|E<<4)^(A<<30|E>>>2)^(A<<25|E>>>7),G=a[V],G.high),ne=G.low;G=H+((L>>>14|j<<18)^(L>>>18|j<<14)^(L<<23|j>>>9)),Z=U+((j>>>14|L<<18)^(j>>>18|L<<14)^(j<<23|L>>>9))+(G>>>0<H>>>0?1:0),G=G+Q,Z=Z+X+(G>>>0<Q>>>0?1:0),G=G+ne,Z=Z+te+(G>>>0<ne>>>0?1:0),G=G+K,Z=Z+q+(G>>>0<K>>>0?1:0),K=Y+ee,W=J+W+(K>>>0<Y>>>0?1:0),U=z,H=$,z=F,$=B,F=j,B=L,L=P+G|0,j=N+Z+(L>>>0<P>>>0?1:0)|0,N=D,P=I,D=T,I=R,T=E,R=A,A=G+K|0,E=Z+W+(A>>>0<G>>>0?1:0)|0}d=r.low=d+A,r.high=f+E+(d>>>0<A>>>0?1:0),m=i.low=m+R,i.high=p+T+(m>>>0<R>>>0?1:0),g=o.low=g+I,o.high=v+D+(g>>>0<I>>>0?1:0),b=s.low=b+P,s.high=y+N+(b>>>0<P>>>0?1:0),k=u.low=k+L,u.high=w+j+(k>>>0<L>>>0?1:0),x=l.low=x+B,l.high=S+F+(x>>>0<B>>>0?1:0),C=h.low=C+$,h.high=_+z+(C>>>0<$>>>0?1:0),M=n.low=M+H,n.high=O+U+(M>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),n.SHA512=r._createHelper(i),n.HmacSHA512=r._createHmacHelper(i)}(),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();t=t||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(a){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);(function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=[];n=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)o[u]=0|e[t+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+o[u],l=20>u?l+(1518500249+(i&s|~i&a)):40>u?l+(1859775393+(i^s^a)):60>u?l+((i&s|i&a|s&a)-1894007588):l+((i^s^a)-899497514),c=a,a=s,s=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(n),e.HmacSHA1=i._createHmacHelper(n)})(),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=(n=e.algo,n.HMAC),s=n.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,r=o.create(n.hasher,e),s=i.create(),a=i.create([1]),c=s.words,u=a.words,l=n.keySize;for(n=n.iterations;c.length<l;){var h=r.update(t).finalize(a);r.reset();for(var f=h.words,d=f.length,p=h,m=1;m<n;m++){p=r.finalize(p),r.reset();for(var v=p.words,g=0;g<d;g++)f[g]^=v[g]}s.concat(h),u[0]++}return s.sigBytes=4*l,s}});e.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}}();t=t||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);function n(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t){return h(e)||l(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){i=!0,o=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return n}}function h(e){if(Array.isArray(e))return e}function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){d(o,r,i,s,a,"next",e)}function a(e){d(o,r,i,s,a,"throw",e)}s(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}(function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=[];n=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)o[u]=0|e[t+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+o[u],l=20>u?l+(1518500249+(i&s|~i&a)):40>u?l+(1859775393+(i^s^a)):60>u?l+((i&s|i&a|s&a)-1894007588):l+((i^s^a)-899497514),c=a,a=s,s=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(n),e.HmacSHA1=i._createHmacHelper(n)})(),Object.defineProperty(r,"__esModule",{value:!0}),r.StandardFile=r.SFItemTransformer=r.SFCryptoWeb=r.SFCryptoJS=r.SFAbstractCrypto=r.SFItemHistoryEntry=r.SFItemHistory=r.SFHistorySession=r.SFPrivileges=r.SFPredicate=r.SFItemParams=r.SFItem=r.SFSyncManager=r.SFStorageManager=r.SFSingletonManager=r.SFSessionHistoryManager=r.SFPrivilegesManager=r.SFModelManager=r.SFMigrationManager=r.SFHttpManager=r.SFAuthManager=r.SFAlertManager=void 0;var y=function(){function e(){m(this,e)}return g(e,[{key:"alert",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){window.alert(t.text),e()})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirm",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){window.confirm(t.text)?e():n()})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();r.SFAlertManager=y;var b=function(){function e(t,n,r,i){m(this,e),e.DidSignOutEvent="DidSignOutEvent",e.WillSignInEvent="WillSignInEvent",e.DidSignInEvent="DidSignInEvent",this.httpManager=n,this.storageManager=t,this.alertManager=r||new y,this.$timeout=i||setTimeout.bind(window),this.eventHandlers=[]}return g(e,[{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){_.pull(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.eventHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(e,t||{})}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"saveKeys",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._keys=t,e.next=3,this.storageManager.setItem("mk",t.mk);case 3:return e.next=5,this.storageManager.setItem("ak",t.ak);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signout",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._keys=null,this._authParams=null,!n){t.next=6;break}return t.abrupt("return",this.storageManager.clearAllData().then((function(){r.notifyEvent(e.DidSignOutEvent)})));case 6:this.notifyEvent(e.DidSignOutEvent);case 7:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"keys",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._keys){e.next=11;break}return e.next=3,this.storageManager.getItem("mk");case 3:if(t=e.sent,t){e.next=6;break}return e.abrupt("return",null);case 6:return e.t0=t,e.next=9,this.storageManager.getItem("ak");case 9:e.t1=e.sent,this._keys={mk:e.t0,ak:e.t1};case 11:return e.abrupt("return",this._keys);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthParams",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._authParams){e.next=5;break}return e.next=3,this.storageManager.getItem("auth_params");case 3:t=e.sent,this._authParams=JSON.parse(t);case 5:if(!this._authParams||this._authParams.version){e.next=9;break}return e.next=8,this.defaultProtocolVersion();case 8:this._authParams.version=e.sent;case 9:return e.abrupt("return",this._authParams);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"defaultProtocolVersion",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.keys();case 2:if(t=e.sent,!t||!t.ak){e.next=7;break}return e.abrupt("return","002");case 7:return e.abrupt("return","001");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"protocolVersion",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthParams();case 2:if(t=e.sent,!t||!t.version){e.next=5;break}return e.abrupt("return",t.version);case 5:return e.abrupt("return",this.defaultProtocolVersion());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthParamsForEmail",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){var i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=_.merge({email:n},r),i["api"]=k.getApiVersion(),e.abrupt("return",new Promise((function(e,n){var r=t+"/auth/params";o.httpManager.getAbsolute(r,i,(function(t){e(t)}),(function(t){console.error("Error getting auth params",t),"object"!==f(t)&&(t={error:{message:"A server error occurred while trying to sign in. Please try again."}}),e(t)}))})));case 3:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"isLocked",value:function(){return 1==this.locked}},{key:"unlockAndResolve",value:function(e,t){this.unlock(),e(t)}},{key:"login",value:function(){var t=p(regeneratorRuntime.mark((function t(n,r,i,o,s){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=p(regeneratorRuntime.mark((function t(c,u){var l,h,d,m,v,g,y,b,w,S,x,C,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.keys();case 2:if(l=t.sent,null==l){t.next=6;break}return c({error:{message:"Cannot log in because already signed in."}}),t.abrupt("return");case 6:if(!a.isLocked()){t.next=9;break}return c({error:{message:"Login already in progress."}}),t.abrupt("return");case 9:return a.lock(),a.notifyEvent(e.WillSignInEvent),t.next=13,a.getAuthParamsForEmail(n,r,s);case 13:if(h=t.sent,h.identifier=r,!h.error){t.next=18;break}return a.unlockAndResolve(c,h),t.abrupt("return");case 18:if(h&&h.pw_cost){t.next=21;break}return a.unlockAndResolve(c,{error:{message:"Invalid email or password."}}),t.abrupt("return");case 21:if(SFJS.supportedVersions().includes(h.version)){t.next=25;break}return d=SFJS.isVersionNewerThanLibraryVersion(h.version)?"This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.":"The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.org/help/security for more information.",a.unlockAndResolve(c,{error:{message:d}}),t.abrupt("return");case 25:if(!SFJS.isProtocolVersionOutdated(h.version)){t.next=32;break}return m="The encryption version for your account, ".concat(h.version,", is outdated and requires upgrade. You may proceed with login, but are advised to perform a security update using the web or desktop application. Please visit standardnotes.org/help/security for more information."),v=!1,t.next=30,a.alertManager.confirm({title:"Update Needed",text:m,confirmButtonText:"Sign In"})["catch"]((function(){a.unlockAndResolve(c,{error:{}}),v=!0}));case 30:if(!v){t.next=32;break}return t.abrupt("return");case 32:if(SFJS.supportsPasswordDerivationCost(h.pw_cost)){t.next=36;break}return g="Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in.",a.unlockAndResolve(c,{error:{message:g}}),t.abrupt("return");case 36:if(y=SFJS.costMinimumForVersion(h.version),!(h.pw_cost<y)){t.next=41;break}return b="Unable to login due to insecure password parameters. Please visit standardnotes.org/help/security for more information.",a.unlockAndResolve(c,{error:{message:b}}),t.abrupt("return");case 41:if(!o){t.next=47;break}if(w=SFJS.version(),h.version===w){t.next=47;break}return S="Strict sign in refused server sign in parameters. The latest security version is ".concat(w,", but your account is reported to have version ").concat(h.version,". If you'd like to proceed with sign in anyway, please disable strict sign in and try again."),a.unlockAndResolve(c,{error:{message:S}}),t.abrupt("return");case 47:return t.next=49,SFJS.crypto.computeEncryptionKeysForUser(i,h);case 49:x=t.sent,C=n+"/auth/sign_in",O=_.merge({password:x.pw,email:r},s),O["api"]=k.getApiVersion(),a.httpManager.postAbsolute(C,O,function(){var t=p(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.handleAuthResponse(i,r,n,h,x);case 2:a.notifyEvent(e.DidSignInEvent),a.$timeout((function(){return a.unlockAndResolve(c,i)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){console.error("Error logging in",e),"object"!==f(e)&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),a.$timeout((function(){return a.unlockAndResolve(c,e)}))}));case 54:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function n(e,n,r,i,o){return t.apply(this,arguments)}return n}()},{key:"register",value:function(e,t,n){var r=this;return new Promise(function(){var i=p(regeneratorRuntime.mark((function i(o,s){var a,c,u,l,h,d,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!r.isLocked()){i.next=3;break}return o({error:{message:"Register already in progress."}}),i.abrupt("return");case 3:if(a=8,!(n.length<a)){i.next=8;break}return c="Your password must be at least ".concat(a," characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again."),o({error:{message:c}}),i.abrupt("return");case 8:return r.lock(),i.next=11,SFJS.crypto.generateInitialKeysAndAuthParamsForUser(t,n);case 11:u=i.sent,l=u.keys,h=u.authParams,d=e+"/auth",m=_.merge({password:l.pw,email:t},h),m["api"]=k.getApiVersion(),r.httpManager.postAbsolute(d,m,function(){var n=p(regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.handleAuthResponse(i,t,e,h,l);case 2:r.unlockAndResolve(o,i);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){console.error("Registration error",e),"object"!==f(e)&&(e={error:{message:"A server error occurred while trying to register. Please try again."}}),r.unlockAndResolve(o,e)}));case 18:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())}},{key:"changePassword",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i,o){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=p(regeneratorRuntime.mark((function e(a,c){var u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s.isLocked()){e.next=3;break}return a({error:{message:"Change password already in progress."}}),e.abrupt("return");case 3:s.lock(),u=i.pw,l=t+"/auth/change_pw",h=_.merge({new_password:u,current_password:r},o),h["api"]=k.getApiVersion(),s.httpManager.postAuthenticatedAbsolute(l,h,function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.handleAuthResponse(t,n,null,o,i);case 2:s.unlockAndResolve(a,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){"object"!==f(e)&&(e={error:{message:"Something went wrong while changing your password. Your password was not changed. Please try again."}}),s.unlockAndResolve(a,e)}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"handleAuthResponse",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,this.storageManager.setItem("server",r);case 3:return this._authParams=i,e.next=6,this.storageManager.setItem("auth_params",JSON.stringify(i));case 6:return e.next=8,this.storageManager.setItem("jwt",t.token);case 8:return e.abrupt("return",this.saveKeys(o));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()}]),e}();r.SFAuthManager=b;var w="undefined"!==typeof window?window:"undefined"!==typeof e?e:null,k=function(){function e(t,n){m(this,e),this.$timeout=t||setTimeout.bind(w)}return g(e,null,[{key:"getApiVersion",value:function(){return"20190520"}}]),g(e,[{key:"setJWTRequestHandler",value:function(e){this.jwtRequestHandler=e}},{key:"setAuthHeadersForRequest",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.jwtRequestHandler();case 2:n=e.sent,n&&t.setRequestHeader("Authorization","Bearer "+n);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postAbsolute",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("post",t,n,r,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"postAuthenticatedAbsolute",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("post",t,n,r,i,!0));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"patchAbsolute",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("patch",t,n,r,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"getAbsolute",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("get",t,n,r,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"httpRequest",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i,o){var s,a=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=c.length>5&&void 0!==c[5]&&c[5],e.abrupt("return",new Promise(function(){var e=p(regeneratorRuntime.mark((function e(c,u){var l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=new XMLHttpRequest,l.onreadystatechange=function(){if(4==l.readyState){var e=l.responseText;if(e)try{e=JSON.parse(e)}catch(t){}l.status>=200&&l.status<=299?a.$timeout((function(){i(e),c(e)})):(console.error("Request error:",e),a.$timeout((function(){o(e,l.status),u(e)})))}},"get"==t&&Object.keys(r).length>0&&(n=a.urlForUrlAndParams(n,r)),l.open(t,n,!0),l.setRequestHeader("Content-type","application/json"),!s){e.next=8;break}return e.next=8,a.setAuthHeadersForRequest(l);case 8:"post"==t||"patch"==t?l.send(JSON.stringify(r)):l.send();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"urlForUrlAndParams",value:function(e,t){var n=Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&");return e.includes("?")?e+"&"+n:e+"?"+n}}]),e}();r.SFHttpManager=k;var S=function(){function e(t,n,r,i){var o=this;m(this,e),this.modelManager=t,this.syncManager=n,this.storageManager=r,this.completionHandlers=[],this.loadMigrations();var s=!1,a=i.addEventHandler((function(e){e==b.DidSignInEvent&&(s=!0)}));this.receivedLocalDataEvent=n.initialDataLoaded(),this.syncManager.addEventHandler(function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r,c,u,l,h,f,d,p,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="local-data-loaded"==t,c="sync:completed"==t,!r&&!c){e.next=40;break}if(r?o.receivedLocalDataEvent=!0:c&&(o.receivedSyncCompletedEvent=!0),!o.receivedLocalDataEvent||!o.receivedSyncCompletedEvent){e.next=40;break}if(!s){e.next=39;break}return s=!1,i.removeEventHandler(a),e.next=10,o.getCompletedMigrations();case 10:u=e.sent.slice(),l=!0,h=!1,f=void 0,e.prev=14,d=u[Symbol.iterator]();case 16:if(l=(p=d.next()).done){e.next=25;break}return m=p.value,e.next=20,o.migrationForEncodedName(m);case 20:v=e.sent,v.runOnlyOnce||_.pull(o._completed,m);case 22:l=!0,e.next=16;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e["catch"](14),h=!0,f=e.t0;case 31:e.prev=31,e.prev=32,l||null==d["return"]||d["return"]();case 34:if(e.prev=34,!h){e.next=37;break}throw f;case 37:return e.finish(34);case 38:return e.finish(31);case 39:o.runPendingMigrations();case 40:case"end":return e.stop()}}),e,null,[[14,27,31,39],[32,,34,38]])})));return function(t,n){return e.apply(this,arguments)}}())}return g(e,[{key:"addCompletionHandler",value:function(e){this.completionHandlers.push(e)}},{key:"removeCompletionHandler",value:function(e){_.pull(this.completionHandlers,e)}},{key:"migrationForEncodedName",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.decode(t);case 2:return n=e.sent,e.abrupt("return",this.migrations.find((function(e){return e.name==n})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadMigrations",value:function(){this.migrations=this.registeredMigrations()}},{key:"registeredMigrations",value:function(){}},{key:"runPendingMigrations",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,u,l,h,f,d,p,m,v,g,y,b,w,k,S,x,_,C,O,M,E,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPendingMigrations();case 2:for(t=e.sent,n=!0,r=!1,i=void 0,e.prev=6,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)a=s.value,a.items=[];e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),r=!0,i=e.t0;case 14:e.prev=14,e.prev=15,n||null==o["return"]||o["return"]();case 17:if(e.prev=17,!r){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:c=!0,u=!1,l=void 0,e.prev=25,h=this.modelManager.allNondummyItems[Symbol.iterator]();case 27:if(c=(f=h.next()).done){e.next=51;break}for(d=f.value,p=!0,m=!1,v=void 0,e.prev=32,g=t[Symbol.iterator]();!(p=(y=g.next()).done);p=!0)a=y.value,d.content_type==a.content_type&&a.items.push(d);e.next=40;break;case 36:e.prev=36,e.t1=e["catch"](32),m=!0,v=e.t1;case 40:e.prev=40,e.prev=41,p||null==g["return"]||g["return"]();case 43:if(e.prev=43,!m){e.next=46;break}throw v;case 46:return e.finish(43);case 47:return e.finish(40);case 48:c=!0,e.next=27;break;case 51:e.next=57;break;case 53:e.prev=53,e.t2=e["catch"](25),u=!0,l=e.t2;case 57:e.prev=57,e.prev=58,c||null==h["return"]||h["return"]();case 60:if(e.prev=60,!u){e.next=63;break}throw l;case 63:return e.finish(60);case 64:return e.finish(57);case 65:b=!0,w=!1,k=void 0,e.prev=68,S=t[Symbol.iterator]();case 70:if(b=(x=S.next()).done){e.next=81;break}if(a=x.value,!(a.items&&a.items.length>0||a.customHandler)){e.next=77;break}return e.next=75,this.runMigration(a,a.items);case 75:e.next=78;break;case 77:this.markMigrationCompleted(a);case 78:b=!0,e.next=70;break;case 81:e.next=87;break;case 83:e.prev=83,e.t3=e["catch"](68),w=!0,k=e.t3;case 87:e.prev=87,e.prev=88,b||null==S["return"]||S["return"]();case 90:if(e.prev=90,!w){e.next=93;break}throw k;case 93:return e.finish(90);case 94:return e.finish(87);case 95:for(_=!0,C=!1,O=void 0,e.prev=98,M=this.completionHandlers[Symbol.iterator]();!(_=(E=M.next()).done);_=!0)A=E.value,A();e.next=106;break;case 102:e.prev=102,e.t4=e["catch"](98),C=!0,O=e.t4;case 106:e.prev=106,e.prev=107,_||null==M["return"]||M["return"]();case 109:if(e.prev=109,!C){e.next=112;break}throw O;case 112:return e.finish(109);case 113:return e.finish(106);case 114:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21],[25,53,57,65],[32,36,40,48],[41,,43,47],[58,,60,64],[68,83,87,95],[88,,90,94],[98,102,106,114],[107,,109,113]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"encode",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",window.btoa(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"decode",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",window.atob(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCompletedMigrations",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._completed){e.next=5;break}return e.next=3,this.storageManager.getItem("migrations");case 3:t=e.sent,this._completed=t?JSON.parse(t):[];case 5:return e.abrupt("return",this._completed);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPendingMigrations",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCompletedMigrations();case 2:t=e.sent,n=[],r=!0,i=!1,o=void 0,e.prev=7,s=this.migrations[Symbol.iterator]();case 9:if(r=(a=s.next()).done){e.next=22;break}return c=a.value,e.t0=t,e.next=14,this.encode(c.name);case 14:if(e.t1=e.sent,e.t2=e.t0.indexOf.call(e.t0,e.t1),e.t3=-1,e.t2!=e.t3){e.next=19;break}n.push(c);case 19:r=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t4=e["catch"](7),i=!0,o=e.t4;case 28:e.prev=28,e.prev=29,r||null==s["return"]||s["return"]();case 31:if(e.prev=31,!i){e.next=34;break}throw o;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",n);case 37:case"end":return e.stop()}}),e,this,[[7,24,28,36],[29,,31,35]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"markMigrationCompleted",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCompletedMigrations();case 2:return n=e.sent,e.t0=n,e.next=6,this.encode(t.name);case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),this.storageManager.setItem("migrations",JSON.stringify(n)),t.running=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"runMigration",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.running){e.next=2;break}return e.abrupt("return");case 2:if(console.log("Running migration:",t.name),t.running=!0,!t.customHandler){e.next=8;break}return e.abrupt("return",t.customHandler().then((function(){r.markMigrationCompleted(t)})));case 8:return e.abrupt("return",t.handler(n).then((function(){r.markMigrationCompleted(t)})));case 9:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();r.SFMigrationManager=S;var x=function(){function e(t){m(this,e),e.MappingSourceRemoteRetrieved="MappingSourceRemoteRetrieved",e.MappingSourceRemoteSaved="MappingSourceRemoteSaved",e.MappingSourceLocalSaved="MappingSourceLocalSaved",e.MappingSourceLocalRetrieved="MappingSourceLocalRetrieved",e.MappingSourceLocalDirtied="MappingSourceLocalDirtied",e.MappingSourceComponentRetrieved="MappingSourceComponentRetrieved",e.MappingSourceDesktopInstalled="MappingSourceDesktopInstalled",e.MappingSourceRemoteActionRetrieved="MappingSourceRemoteActionRetrieved",e.MappingSourceFileImport="MappingSourceFileImport",e.isMappingSourceRetrieved=function(t){return[e.MappingSourceRemoteRetrieved,e.MappingSourceComponentRetrieved,e.MappingSourceRemoteActionRetrieved].includes(t)},this.$timeout=t||setTimeout.bind(window),this.itemSyncObservers=[],this.items=[],this.itemsHash={},this.missedReferences={},this.uuidChangeObservers=[]}return g(e,[{key:"handleSignout",value:function(){this.items.length=0,this.itemsHash={},this.missedReferences={}}},{key:"addModelUuidChangeObserver",value:function(e,t){this.uuidChangeObservers.push({id:e,callback:t})}},{key:"notifyObserversOfUuidChange",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.uuidChangeObservers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;try{a.callback(e,t)}catch(c){console.error("Notify observers of uuid change exception:",c)}}}catch(u){r=!0,i=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"alternateUUIDForItem",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i,o,s,a,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.createItem(n),t.next=3,SFJS.crypto.generateUUID();case 3:for(r.uuid=t.sent,r.informReferencesOfUUIDChange(n.uuid,r.uuid),this.informModelsOfUUIDChangeForItem(r,n.uuid,r.uuid),i=!0,o=!1,s=void 0,t.prev=9,a=n.referencingObjects[Symbol.iterator]();!(i=(c=a.next()).done);i=!0)u=c.value,u.setIsNoLongerBeingReferencedBy(n),n.setIsNoLongerBeingReferencedBy(u),u.addItemAsRelationship(r);t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](9),o=!0,s=t.t0;case 17:t.prev=17,t.prev=18,i||null==a["return"]||a["return"]();case 20:if(t.prev=20,!o){t.next=23;break}throw s;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return this.setItemsDirty(n.referencingObjects,!0),this.resolveReferencesForItem(r),this.loggingEnabled&&console.log(n.uuid,"--\x3e",r.uuid),n.deleted=!0,n.content.references=[],this.setItemDirty(n,!1,!1,e.MappingSourceLocalSaved),t.next=33,this.mapResponseItemsToLocalModels([n],e.MappingSourceLocalSaved);case 33:return this.addItem(r),this.setItemDirty(r,!0,!0,e.MappingSourceLocalSaved),this.notifyObserversOfUuidChange(n,r),t.abrupt("return",r);case 37:case"end":return t.stop()}}),t,this,[[9,13,17,25],[18,,20,24]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"informModelsOfUUIDChangeForItem",value:function(e,t,n){var r=!0,i=!1,o=void 0;try{for(var s,a=this.items[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;c.potentialItemOfInterestHasChangedItsUUID(e,t,n)}}catch(u){i=!0,o=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}}},{key:"didSyncModelsOffline",value:function(t){this.notifySyncObserversOfModels(t,e.MappingSourceLocalSaved)}},{key:"mapResponseItemsToLocalModels",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:t,source:n,sourceKey:r}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mapResponseItemsToLocalModelsOmittingFields",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:t,omitFields:n,source:r,sourceKey:i}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"mapResponseItemsToLocalModelsWithOptions",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,u,l,h,f,d,p,m,v,g,y,b,w,k,S,x,_,C,O,M,E,A,T,R,D,I,N,P,j,L,F,B,z,$,U,H;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.items,r=t.omitFields,i=t.source,o=t.sourceKey,t.options,s=[],a=[],u=[],l=!0,h=!1,f=void 0,e.prev=5,d=n[Symbol.iterator]();case 7:if(l=(p=d.next()).done){e.next=58;break}if(m=p.value,m){e.next=11;break}return e.abrupt("continue",55);case 11:if(v=!m.content&&!m.errorDecrypting,g=!m.content_type||!m.uuid,!g&&!v||m.deleted){e.next=16;break}return console.error("Server response item is corrupt:",m),e.abrupt("continue",55);case 16:if(!Array.isArray(r)){e.next=36;break}for(y=!0,b=!1,w=void 0,e.prev=20,k=r[Symbol.iterator]();!(y=(S=k.next()).done);y=!0)x=S.value,delete m[x];e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](20),b=!0,w=e.t0;case 28:e.prev=28,e.prev=29,y||null==k["return"]||k["return"]();case 31:if(e.prev=31,!b){e.next=34;break}throw w;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if(_=this.findItem(m.uuid),_&&(_.updateFromJSON(m),_.dummy=!1),C=m["content_type"]||_&&_.content_type,O=this.acceptableContentTypes&&!this.acceptableContentTypes.includes(C),!O){e.next=42;break}return e.abrupt("continue",55);case 42:if(M=!1,1!=m.deleted){e.next=50;break}if(!m.dirty){e.next=48;break}M=!0,e.next=50;break;case 48:return _&&(s.push(_),u.push(_),this.removeItemLocally(_)),e.abrupt("continue",55);case 50:_||(_=this.createItem(m)),this.addItem(_,M),_.errorDecrypting||u.push(_),s.push(_),a.push(m);case 55:l=!0,e.next=7;break;case 58:e.next=64;break;case 60:e.prev=60,e.t1=e["catch"](5),h=!0,f=e.t1;case 64:e.prev=64,e.prev=65,l||null==d["return"]||d["return"]();case 67:if(e.prev=67,!h){e.next=70;break}throw f;case 70:return e.finish(67);case 71:return e.finish(64);case 72:for(E=!0,A=!1,T=void 0,e.prev=75,R=a.entries()[Symbol.iterator]();!(E=(D=R.next()).done);E=!0)I=c(D.value,2),N=I[0],P=I[1],j=s[N],P.content&&this.resolveReferencesForItem(j),j.didFinishSyncing();e.next=83;break;case 79:e.prev=79,e.t2=e["catch"](75),A=!0,T=e.t2;case 83:e.prev=83,e.prev=84,E||null==R["return"]||R["return"]();case 86:if(e.prev=86,!A){e.next=89;break}throw T;case 89:return e.finish(86);case 90:return e.finish(83);case 91:for(L=this.popMissedReferenceStructsForObjects(a),F=!0,B=!1,z=void 0,e.prev=95,$=function(){var e=H.value,t=s.find((function(t){return t.uuid==e.reference_uuid}));if(t){var n=e.for_item;n.addItemAsRelationship(t)}},U=L[Symbol.iterator]();!(F=(H=U.next()).done);F=!0)$();e.next=104;break;case 100:e.prev=100,e.t3=e["catch"](95),B=!0,z=e.t3;case 104:e.prev=104,e.prev=105,F||null==U["return"]||U["return"]();case 107:if(e.prev=107,!B){e.next=110;break}throw z;case 110:return e.finish(107);case 111:return e.finish(104);case 112:return e.next=114,this.notifySyncObserversOfModels(u,i,o);case 114:return e.abrupt("return",s);case 115:case"end":return e.stop()}}),e,this,[[5,60,64,72],[20,24,28,36],[29,,31,35],[65,,67,71],[75,79,83,91],[84,,86,90],[95,100,104,112],[105,,107,111]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"missedReferenceBuildKey",value:function(e,t){return"".concat(e,":").concat(t)}},{key:"popMissedReferenceStructsForObjects",value:function(e){if(!e||0==e.length)return[];for(var t=[],n=[],r=e.map((function(e){return e.uuid})),i=r[0].length,o=Object.keys(this.missedReferences),s=0,a=o;s<a.length;s++){var c=a[s],u=r.includes(c.substring(0,i));u&&(t.push(this.missedReferences[c]),n.push(c))}for(var l=0,h=n;l<h.length;l++){var f=h[l];delete this.missedReferences[f]}return t}},{key:"resolveReferencesForItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.errorDecrypting){var n=e.contentObject;if(e.updateLocalRelationships(),n.references){var r=n.references.slice(),i=r.map((function(e){return e.uuid})),o=!0,s=this.findItems(i,o),a=!0,u=!1,l=void 0;try{for(var h,f=s.entries()[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var d=c(h.value,2),p=d[0],m=d[1];if(m)e.addItemAsRelationship(m),t&&this.setItemDirty(m,!0);else{var v=i[p],g=this.missedReferenceBuildKey(v,e.uuid);if(!this.missedReferences[g]){var y={reference_uuid:v,for_item:e};this.missedReferences[g]=y}}}}catch(b){u=!0,l=b}finally{try{a||null==f["return"]||f["return"]()}finally{if(u)throw l}}}}}},{key:"notifySyncObserversOfModels",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){var i,o,s,a,c,u,l,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this.itemSyncObservers.sort((function(e,t){return e.priority<t.priority?-1:1})),o=!0,s=!1,a=void 0,e.prev=4,c=regeneratorRuntime.mark((function e(){var i,o,s,a,c,u,f,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=l.value,o=i.types.includes("*")?t:t.filter((function(e){return i.types.includes(e.content_type)})),s=[],a=[],c=!0,u=!1,f=void 0,e.prev=6,d=o[Symbol.iterator]();!(c=(p=d.next()).done);c=!0)m=p.value,m.deleted?a.push(m):s.push(m);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),u=!0,f=e.t0;case 14:e.prev=14,e.prev=15,c||null==d["return"]||d["return"]();case 17:if(e.prev=17,!u){e.next=20;break}throw f;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!(o.length>0)){e.next=25;break}return e.next=25,h._callSyncObserverCallbackWithTimeout(i,o,s,a,n,r);case 25:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})),u=i[Symbol.iterator]();case 7:if(o=(l=u.next()).done){e.next=12;break}return e.delegateYield(c(),"t0",9);case 9:o=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e["catch"](4),s=!0,a=e.t1;case 18:e.prev=18,e.prev=19,o||null==u["return"]||u["return"]();case 21:if(e.prev=21,!s){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[4,14,18,26],[19,,21,25]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"_callSyncObserverCallbackWithTimeout",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i,o,s){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){a.$timeout((function(){try{t.callback(n,r,i,o,s)}catch(a){console.error("Sync observer exception",a)}finally{e()}}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,s){return e.apply(this,arguments)}return t}()},{key:"setItemDirty",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;this.setItemsDirty([e],t,n,r,i)}},{key:"setItemsDirty",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=!0,a=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var h=u.value;h.setDirty(n,r)}}catch(f){a=!0,c=f}finally{try{s||null==l["return"]||l["return"]()}finally{if(a)throw c}}this.notifySyncObserversOfModels(t,i||e.MappingSourceLocalDirtied,o)}},{key:"createItem",value:function(t){var n=e.ContentTypeClassMapping&&e.ContentTypeClassMapping[t.content_type];n||(n=N);var r=new n(t);return r}},{key:"createDuplicateItemFromResponseItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof t.setDirty){e.next=3;break}return console.error("Attempting to create conflicted copy of non-response item."),e.abrupt("return",null);case 3:return n=JSON.parse(JSON.stringify(t)),e.next=6,SFJS.crypto.generateUUID();case 6:return n.uuid=e.sent,r=this.createItem(n),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"duplicateItemAndAddAsConflict",value:function(e){return this.duplicateItemWithCustomContentAndAddAsConflict({content:e.content,duplicateOf:e})}},{key:"duplicateItemWithCustomContentAndAddAsConflict",value:function(e){var t=e.content,n=e.duplicateOf,r=this.duplicateItemWithCustomContent({content:t,duplicateOf:n});return this.addDuplicatedItemAsConflict({duplicate:r,duplicateOf:n}),r}},{key:"addDuplicatedItemAsConflict",value:function(e){var t=e.duplicate,n=e.duplicateOf;this.addDuplicatedItem(t,n),t.content.conflict_of=n.uuid}},{key:"duplicateItemWithCustomContent",value:function(e){var t=e.content,n=e.duplicateOf,r=new n.constructor({content:t});return r.created_at=n.created_at,r.content_type||(r.content_type=n.content_type),r}},{key:"duplicateItemAndAdd",value:function(e){var t=this.duplicateItemWithoutAdding(e);return this.addDuplicatedItem(t,e),t}},{key:"duplicateItemWithoutAdding",value:function(e){var t=new e.constructor({content:e.content});return t.created_at=e.created_at,t.content_type||(t.content_type=e.content_type),t}},{key:"addDuplicatedItem",value:function(e,t){this.addItem(e);var n=!0,r=!1,i=void 0;try{for(var o,s=t.referencingObjects[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.addItemAsRelationship(e),this.setItemDirty(a,!0)}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}this.resolveReferencesForItem(e),this.setItemDirty(e,!0)}},{key:"addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addItems([e],t)}},{key:"addItems",value:function(e){var t=this;e.forEach((function(e){t.itemsHash[e.uuid]||(t.itemsHash[e.uuid]=e,t.items.push(e))}))}},{key:"addItemSyncObserver",value:function(e,t,n){this.addItemSyncObserverWithPriority({id:e,types:t,callback:n,priority:1})}},{key:"addItemSyncObserverWithPriority",value:function(e){var t=e.id,n=e.priority,r=e.types,i=e.callback;Array.isArray(r)||(r=[r]),this.itemSyncObservers.push({id:t,types:r,priority:n,callback:i})}},{key:"removeItemSyncObserver",value:function(e){_.remove(this.itemSyncObservers,_.find(this.itemSyncObservers,{id:e}))}},{key:"getDirtyItems",value:function(){return this.items.filter((function(e){return 1==e.dirty&&!e.dummy&&(!e.errorDecrypting||e.deleted)}))}},{key:"clearDirtyItems",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;s.setDirty(!1)}}catch(a){n=!0,r=a}finally{try{t||null==o["return"]||o["return"]()}finally{if(n)throw r}}}},{key:"removeAndDirtyAllRelationshipsForItem",value:function(e){if(!e.errorDecrypting){var t=!0,n=!1,r=void 0;try{for(var i,o=e.content.references[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value,a=this.findItem(s.uuid);a&&(e.removeItemAsRelationship(a),a.hasRelationshipWithItem(e)&&(a.removeItemAsRelationship(e),this.setItemDirty(a,!0)))}}catch(p){n=!0,r=p}finally{try{t||null==o["return"]||o["return"]()}finally{if(n)throw r}}}var c=!0,u=!1,l=void 0;try{for(var h,f=e.referencingObjects[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;d.removeItemAsRelationship(e),this.setItemDirty(d,!0)}}catch(p){u=!0,l=p}finally{try{c||null==f["return"]||f["return"]()}finally{if(u)throw l}}e.referencingObjects=[]}},{key:"setAllItemsDirty",value:function(){var e=this.allItems;this.setItemsDirty(e,!0)}},{key:"setItemToBeDeleted",value:function(e){e.deleted=!0,e.dummy||this.setItemDirty(e,!0),this.removeAndDirtyAllRelationshipsForItem(e)}},{key:"removeItemLocally",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:_.remove(this.items,{uuid:t.uuid}),delete this.itemsHash[t.uuid],t.isBeingRemovedLocally();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"allItemsMatchingTypes",value:function(e){return this.allItems.filter((function(t){return(_.includes(e,t.content_type)||_.includes(e,"*"))&&!t.dummy}))}},{key:"invalidItems",value:function(){return this.allItems.filter((function(e){return e.errorDecrypting}))}},{key:"validItemsForContentType",value:function(e){return this.allItems.filter((function(t){return t.content_type==e&&!t.errorDecrypting}))}},{key:"findItem",value:function(e){return this.itemsHash[e]}},{key:"findItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value,u=this.itemsHash[c];(u||t)&&n.push(u)}}catch(l){i=!0,o=l}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return n}},{key:"itemsMatchingPredicate",value:function(e){return this.itemsMatchingPredicates([e])}},{key:"itemsMatchingPredicates",value:function(e){return this.filterItemsWithPredicates(this.allItems,e)}},{key:"filterItemsWithPredicates",value:function(e,t){var n=e.filter((function(e){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(!e.satisfiesPredicate(a))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return!0}));return n}},{key:"importItems",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i,o,s,a,c,u,l,h,f,d,p,m,v,g,y,b,w,k,S,x,_,C,O,M,E,A;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],i={},o=!0,s=!1,a=void 0,t.prev=5,c=n[Symbol.iterator]();case 7:if(o=(u=c.next()).done){t.next=18;break}if(l=u.value,h=this.findItem(l.uuid),h){t.next=13;break}return i[l.uuid]={},t.abrupt("continue",15);case 13:f=this.duplicateItemWithoutAdding(h),i[l.uuid]={frozenValue:f,itemRef:h};case 15:o=!0,t.next=7;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](5),s=!0,a=t.t0;case 24:t.prev=24,t.prev=25,o||null==c["return"]||c["return"]();case 27:if(t.prev=27,!s){t.next=30;break}throw a;case 30:return t.finish(27);case 31:return t.finish(24);case 32:d=!0,p=!1,m=void 0,t.prev=35,v=n[Symbol.iterator]();case 37:if(d=(g=v.next()).done){t.next=52;break}if(y=g.value,b=i[y.uuid],w=b.frozenValue,k=b.itemRef,!w||k.errorDecrypting){t.next=47;break}return t.next=43,this.createDuplicateItemFromResponseItem(y);case 43:S=t.sent,y.deleted||w.isItemContentEqualWith(S)||(this.addDuplicatedItemAsConflict({duplicate:S,duplicateOf:k}),r.push(S)),t.next=49;break;case 47:r.push(y),k&&k.errorDecrypting&&(k.errorDecrypting=!1);case 49:d=!0,t.next=37;break;case 52:t.next=58;break;case 54:t.prev=54,t.t1=t["catch"](35),p=!0,m=t.t1;case 58:t.prev=58,t.prev=59,d||null==v["return"]||v["return"]();case 61:if(t.prev=61,!p){t.next=64;break}throw m;case 64:return t.finish(61);case 65:return t.finish(58);case 66:return t.next=68,this.mapResponseItemsToLocalModels(r,e.MappingSourceFileImport);case 68:for(x=t.sent,_=!0,C=!1,O=void 0,t.prev=72,M=x[Symbol.iterator]();!(_=(E=M.next()).done);_=!0)A=E.value,this.setItemDirty(A,!0,!1),A.deleted=!1;t.next=80;break;case 76:t.prev=76,t.t2=t["catch"](72),C=!0,O=t.t2;case 80:t.prev=80,t.prev=81,_||null==M["return"]||M["return"]();case 83:if(t.prev=83,!C){t.next=86;break}throw O;case 86:return t.finish(83);case 87:return t.finish(80);case 88:return t.abrupt("return",x);case 89:case"end":return t.stop()}}),t,this,[[5,20,24,32],[25,,27,31],[35,54,58,66],[59,,61,65],[72,76,80,88],[81,,83,87]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getAllItemsJSONData",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getJSONDataForItems(this.allItems,t,n,r));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getJSONDataForItems",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){var t=new P(e,n,r);return t.paramsForExportFile()}))).then((function(e){if(i&&0==e.length)return null;var t={items:e};return n&&(t["auth_params"]=r),JSON.stringify(t,null,2)})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"computeDataIntegrityHash",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.allNondummyItems.sort((function(e,t){return t.updated_at-e.updated_at})),n=t.map((function(e){return e.updatedAtTimestamp()})),r=n.join(","),e.next=6,SFJS.crypto.sha256(r);case 6:return i=e.sent,e.abrupt("return",i);case 10:return e.prev=10,e.t0=e["catch"](0),console.error("Error computing data integrity hash",e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"allItems",get:function(){return this.items.slice()}},{key:"allNondummyItems",get:function(){return this.items.filter((function(e){return!e.dummy}))}}]),e}();r.SFModelManager=x;var C=function(){function e(t,n,r){m(this,e),this.modelManager=t,this.syncManager=n,this.singletonManager=r,this.loadPrivileges(),e.CredentialAccountPassword="CredentialAccountPassword",e.CredentialLocalPasscode="CredentialLocalPasscode",e.ActionManageExtensions="ActionManageExtensions",e.ActionManageBackups="ActionManageBackups",e.ActionViewProtectedNotes="ActionViewProtectedNotes",e.ActionManagePrivileges="ActionManagePrivileges",e.ActionManagePasscode="ActionManagePasscode",e.ActionDeleteNote="ActionDeleteNote",e.SessionExpiresAtKey="SessionExpiresAtKey",e.SessionLengthKey="SessionLengthKey",e.SessionLengthNone=0,e.SessionLengthFiveMinutes=300,e.SessionLengthOneHour=3600,e.SessionLengthOneWeek=604800,this.availableActions=[e.ActionViewProtectedNotes,e.ActionDeleteNote,e.ActionManagePasscode,e.ActionManageBackups,e.ActionManageExtensions,e.ActionManagePrivileges],this.availableCredentials=[e.CredentialAccountPassword,e.CredentialLocalPasscode],this.sessionLengths=[e.SessionLengthNone,e.SessionLengthFiveMinutes,e.SessionLengthOneHour,e.SessionLengthOneWeek,e.SessionLengthIndefinite]}return g(e,[{key:"setDelegate",value:function(e){this.delegate=e}},{key:"getAvailableActions",value:function(){return this.availableActions}},{key:"getAvailableCredentials",value:function(){return this.availableCredentials}},{key:"netCredentialsForAction",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPrivileges();case 2:t.t0=n,r=t.sent.getCredentialsForAction(t.t0),i=[],o=!0,s=!1,a=void 0,t.prev=8,c=r[Symbol.iterator]();case 10:if(o=(u=c.next()).done){t.next=27;break}if(l=u.value,l!=e.CredentialAccountPassword){t.next=19;break}return t.next=15,this.delegate.isOffline();case 15:h=t.sent,h||i.push(l),t.next=24;break;case 19:if(l!=e.CredentialLocalPasscode){t.next=24;break}return t.next=22,this.delegate.hasLocalPasscode();case 22:f=t.sent,f&&i.push(l);case 24:o=!0,t.next=10;break;case 27:t.next=33;break;case 29:t.prev=29,t.t1=t["catch"](8),s=!0,a=t.t1;case 33:t.prev=33,t.prev=34,o||null==c["return"]||c["return"]();case 36:if(t.prev=36,!s){t.next=39;break}throw a;case 39:return t.finish(36);case 40:return t.finish(33);case 41:return t.abrupt("return",i);case 42:case"end":return t.stop()}}),t,this,[[8,29,33,41],[34,,36,40]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"loadPrivileges",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loadPromise){e.next=2;break}return e.abrupt("return",this.loadPromise);case 2:return this.loadPromise=new Promise((function(e,n){var r=L.contentType(),i=new j("content_type","=",r);t.singletonManager.registerSingleton([i],(function(n){t.privileges=n,e(n)}),function(){var n=p(regeneratorRuntime.mark((function n(i){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=new L({content_type:r}),SFJS.crypto.generateUUIDSync){n.next=4;break}return n.next=4,o.initUUID();case 4:t.modelManager.addItem(o),t.modelManager.setItemDirty(o,!0),t.syncManager.sync(),i(o),e(o);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),e.abrupt("return",this.loadPromise);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPrivileges",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.privileges){e.next=4;break}return e.abrupt("return",this.privileges);case 4:return e.abrupt("return",this.loadPrivileges());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"displayInfoForCredential",value:function(t){var n={};return n[e.CredentialAccountPassword]={label:"Account Password",prompt:"Please enter your account password."},n[e.CredentialLocalPasscode]={label:"Local Passcode",prompt:"Please enter your local passcode."},n[t]}},{key:"displayInfoForAction",value:function(t){var n={};return n[e.ActionManageExtensions]={label:"Manage Extensions"},n[e.ActionManageBackups]={label:"Download/Import Backups"},n[e.ActionViewProtectedNotes]={label:"View Protected Notes"},n[e.ActionManagePrivileges]={label:"Manage Privileges"},n[e.ActionManagePasscode]={label:"Manage Passcode"},n[e.ActionDeleteNote]={label:"Delete Notes"},n[t]}},{key:"getSessionLengthOptions",value:function(){return[{value:e.SessionLengthNone,label:"Don't Remember"},{value:e.SessionLengthFiveMinutes,label:"5 Minutes"},{value:e.SessionLengthOneHour,label:"1 Hour"},{value:e.SessionLengthOneWeek,label:"1 Week"}]}},{key:"setSessionLength",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t},i=r(n),t.abrupt("return",Promise.all([this.delegate.saveToStorage(e.SessionExpiresAtKey,JSON.stringify(i)),this.delegate.saveToStorage(e.SessionLengthKey,JSON.stringify(n))]));case 3:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"clearSession",value:function(){var t=p(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setSessionLength(e.SessionLengthNone));case 1:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"getSelectedSessionLength",value:function(){var t=p(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.delegate.getFromStorage(e.SessionLengthKey);case 2:if(n=t.sent,!n){t.next=7;break}return t.abrupt("return",JSON.parse(n));case 7:return t.abrupt("return",e.SessionLengthNone);case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"getSessionExpirey",value:function(){var t=p(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.delegate.getFromStorage(e.SessionExpiresAtKey);case 2:if(n=t.sent,!n){t.next=7;break}return t.abrupt("return",new Date(JSON.parse(n)));case 7:return t.abrupt("return",new Date);case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"actionHasPrivilegesConfigured",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.netCredentialsForAction(t);case 2:return e.t0=e.sent.length,e.abrupt("return",e.t0>0);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"actionRequiresPrivilege",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionExpirey();case 2:if(n=e.sent,!(n>new Date)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.netCredentialsForAction(t);case 7:return r=e.sent,e.abrupt("return",r.length>0);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"savePrivileges",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPrivileges();case 2:t=e.sent,this.modelManager.setItemDirty(t,!0),this.syncManager.sync();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"authenticateAction",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.netCredentialsForAction(t);case 2:r=e.sent,i=[],o=[],s=!0,a=!1,c=void 0,e.prev=7,u=r[Symbol.iterator]();case 9:if(s=(l=u.next()).done){e.next=18;break}return h=l.value,e.next=13,this._verifyAuthenticationParameters(h,n[h]);case 13:f=e.sent,f?i.push(h):o.push(h);case 15:s=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](7),a=!0,c=e.t0;case 24:e.prev=24,e.prev=25,s||null==u["return"]||u["return"]();case 27:if(e.prev=27,!a){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",{success:0==o.length,successfulCredentials:i,failedCredentials:o});case 33:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_verifyAuthenticationParameters",value:function(){var t=p(regeneratorRuntime.mark((function t(n,r){var i,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s.delegate.verifyAccountPassword(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s.delegate.verifyLocalPasscode(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n!=e.CredentialAccountPassword){t.next=6;break}return t.abrupt("return",i(r));case 6:if(n!=e.CredentialLocalPasscode){t.next=8;break}return t.abrupt("return",o(r));case 8:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}();r.SFPrivilegesManager=C;var O="sessionHistory_persist",M="sessionHistory_revisions",E="sessionHistory_autoOptimize",A=function(){function e(t,n,r,i,o){var s=this;m(this,e),this.modelManager=t,this.storageManager=n,this.$timeout=o||setTimeout.bind(window),this.keyRequestHandler=r,this.loadFromDisk().then((function(){s.modelManager.addItemSyncObserver("session-history",i,(function(e,t,n,r,i){if(r!==x.MappingSourceLocalDirtied){var o=!0,a=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;try{s.addHistoryEntryForItem(h)}catch(f){console.log("Caught exception while trying to add item history entry",f)}}}catch(d){a=!0,c=d}finally{try{o||null==l["return"]||l["return"]()}finally{if(a)throw c}}}}))}))}return g(e,[{key:"encryptionParams",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addHistoryEntryForItem",value:function(e){var t=this,n={uuid:e.uuid,content_type:e.content_type,updated_at:e.updated_at,content:e.getContentCopy()},r=this.historySession.addEntryForItem(n);this.autoOptimize&&this.historySession.optimizeHistoryForItem(e),r&&this.diskEnabled&&(this.diskTimeout&&(this.$timeout.hasOwnProperty("cancel")?this.$timeout.cancel(this.diskTimeout):clearTimeout(this.diskTimeout)),this.diskTimeout=this.$timeout((function(){t.saveToDisk()}),2e3))}},{key:"historyForItem",value:function(e){return this.historySession.historyForItem(e)}},{key:"clearHistoryForItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.historySession.clearItemHistory(t),e.abrupt("return",this.saveToDisk());case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearAllHistory",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.historySession.clearAllHistory(),e.abrupt("return",this.storageManager.removeItem(M));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toggleDiskSaving",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.diskEnabled=!this.diskEnabled,!this.diskEnabled){e.next=6;break}this.storageManager.setItem(O,JSON.stringify(!0)),this.saveToDisk(),e.next=8;break;case 6:return this.storageManager.setItem(O,JSON.stringify(!1)),e.abrupt("return",this.storageManager.removeItem(M));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveToDisk",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.diskEnabled){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.encryptionParams();case 4:t=e.sent,n=new P(this.historySession,t.keys,t.auth_params),n.paramsForSync().then((function(e){r.storageManager.setItem(M,JSON.stringify(e))}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFromDisk",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.getItem(O);case 2:return t=e.sent,t&&(this.diskEnabled=JSON.parse(t)),e.next=6,this.storageManager.getItem(M);case 6:if(n=e.sent,!n){e.next=18;break}return n=JSON.parse(n),e.next=11,this.encryptionParams();case 11:return r=e.sent,e.next=14,SFJS.itemTransformer.decryptItem(n,r.keys);case 14:i=new F(n),this.historySession=i,e.next=19;break;case 18:this.historySession=new F;case 19:return e.next=21,this.storageManager.getItem(E);case 21:o=e.sent,this.autoOptimize=!o||JSON.parse(o);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toggleAutoOptimize",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.autoOptimize=!this.autoOptimize,this.autoOptimize?this.storageManager.setItem(E,JSON.stringify(!0)):this.storageManager.setItem(E,JSON.stringify(!1));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();r.SFSessionHistoryManager=A;var T=function(){function e(t,n){var r=this;m(this,e),this.syncManager=n,this.modelManager=t,this.singletonHandlers=[],t.addItemSyncObserverWithPriority({id:"sf-singleton-manager",types:"*",priority:-1,callback:function(e,n,i,o,s){o!==x.MappingSourceLocalDirtied&&r.resolveSingletons(t.allNondummyItems,null,!0)}}),n.addEventHandler((function(e,n){if("local-data-loaded"==e)r.resolveSingletons(t.allNondummyItems,null,!0),r.initialDataLoaded=!0;else if("sync:completed"==e){if(!r.initialDataLoaded)return;r.resolveSingletons(n.retrievedItems,n.savedItems)}})),t.addModelUuidChangeObserver("singleton-manager",(function(e,t){var n=!0,i=!1,o=void 0;try{for(var s,a=r.singletonHandlers[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;c.singleton&&j.ItemSatisfiesPredicates(t,c.predicates)&&(c.singleton=null,r.resolveSingletons([t]))}}catch(u){i=!0,o=u}finally{try{n||null==a["return"]||a["return"]()}finally{if(i)throw o}}}))}return g(e,[{key:"registerSingleton",value:function(e,t,n){this.singletonHandlers.push({predicates:e,resolutionCallback:t,createBlock:n})}},{key:"resolveSingletons",value:function(e,t,n){var r=this;e=e||[],t=t||[];var i=!0,o=!1,s=void 0;try{for(var a,c=function(){var i=a.value,o=i.predicates.slice(),s=r.modelManager.filterItemsWithPredicates(e,o),c=function(){i.createBlock&&(i.pendingCreateBlockCallback=!0,i.createBlock((function(e){i.singleton=e,i.pendingCreateBlockCallback=!1,i.resolutionCallback&&i.resolutionCallback(e)})))},u=r.modelManager.filterItemsWithPredicates(t,o).length;if(s.length>0||u>0){var l=r.modelManager.itemsMatchingPredicates(o);if(l.length>=2){var h=l.sort((function(e,t){return e.errorDecrypting?1:t.errorDecrypting||e.created_at<t.created_at?-1:1})),f=h[0],d=h.slice(1,h.length),p=!0,m=!1,v=void 0;try{for(var g,y=d[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;r.modelManager.setItemToBeDeleted(b)}}catch(k){m=!0,v=k}finally{try{p||null==y["return"]||y["return"]()}finally{if(m)throw v}}r.syncManager.sync(),i.singleton=f,i.resolutionCallback&&i.resolutionCallback(f)}else if(1==l.length){var w=l[0];w.errorDecrypting?(r.modelManager.setItemToBeDeleted(w),c()):i.singleton&&i.singleton===w||(i.singleton=w,i.resolutionCallback&&i.resolutionCallback(w))}}else i.singleton||n||i.pendingCreateBlockCallback||c()},u=this.singletonHandlers[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)c()}catch(l){o=!0,s=l}finally{try{i||null==u["return"]||u["return"]()}finally{if(o)throw s}}}}]),e}();r.SFSingletonManager=T;var R=function(){function e(){m(this,e)}return g(e,[{key:"setItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllModels",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveModel",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveModels([t]));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveModels",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteModel",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearAllModels",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearAllData",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.clear(),this.clearAllModels()]));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();r.SFStorageManager=R;var D,I=function(){function e(t,n,r,i,o){m(this,e),e.KeyRequestLoadLocal="KeyRequestLoadLocal",e.KeyRequestSaveLocal="KeyRequestSaveLocal",e.KeyRequestLoadSaveAccount="KeyRequestLoadSaveAccount",this.httpManager=r,this.modelManager=t,this.storageManager=n,this.$interval=o||setInterval.bind(window),this.$timeout=i||setTimeout.bind(window),this.syncStatus={},this.syncStatusObservers=[],this.eventHandlers=[],this.PerSyncItemUploadLimit=150,this.ServerItemDownloadLimit=150,this.MajorDataChangeThreshold=15,this.MaxDiscordanceBeforeOutOfSync=5,this.syncDiscordance=0,this.outOfSync=!1}return g(e,[{key:"handleServerIntegrityHash",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&0!=t.length){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.modelManager.computeDataIntegrityHash();case 4:if(n=e.sent,n){e.next=7;break}return e.abrupt("return",!0);case 7:if(n===t){e.next=13;break}return this.syncDiscordance++,this.syncDiscordance>=this.MaxDiscordanceBeforeOutOfSync&&(this.outOfSync||(this.outOfSync=!0,this.notifyEvent("enter-out-of-sync"))),e.abrupt("return",!1);case 13:return this.outOfSync&&(this.outOfSync=!1,this.notifyEvent("exit-out-of-sync")),this.syncDiscordance=0,e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isOutOfSync",value:function(){return this.outOfSync}},{key:"getServerURL",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.getItem("server");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=window._default_sf_server;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSyncURL",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getServerURL();case 2:return e.t0=e.sent,e.abrupt("return",e.t0+"/items/sync");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerSyncStatusObserver",value:function(e){var t={key:new Date,callback:e};return this.syncStatusObservers.push(t),t}},{key:"removeSyncStatusObserver",value:function(e){_.pull(this.syncStatusObservers,e)}},{key:"syncStatusDidChange",value:function(){var e=this;this.syncStatusObservers.forEach((function(t){t.callback(e.syncStatus)}))}},{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){_.pull(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.eventHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(e,t||{})}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"setKeyRequestHandler",value:function(e){this.keyRequestHandler=e}},{key:"getActiveKeyInfo",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initialDataLoaded",value:function(){return!0===this._initialDataLoaded}},{key:"_sortLocalItems",value:function(e){var t=this;return e.sort((function(e,n){var r=new Date(n.updated_at)-new Date(e.updated_at),i=t.contentTypeLoadPriority,o=0,s=0;return i&&(o=i.indexOf(e.content_type),s=i.indexOf(n.content_type),-1==o&&(o=i.length),-1==s&&(s=i.length)),o==s?r:o<s?-1:1}))}},{key:"loadLocalItems",value:function(){var t=p(regeneratorRuntime.mark((function t(){var n,r,i,o,s,a=this,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:{},r=n.incrementalCallback,i=n.batchSize,o=n.options,!o||!o.simulateHighLatency){t.next=5;break}return s=o.simulatedLatency||1e3,t.next=5,this._awaitSleep(s);case 5:if(!this.loadLocalDataPromise){t.next=7;break}return t.abrupt("return",this.loadLocalDataPromise);case 7:return i||(i=100),this.loadLocalDataPromise=this.storageManager.getAllModels().then((function(t){t=a._sortLocalItems(t),t=t.filter((function(e){var t=a.modelManager.findItem(e.uuid);return!t||new Date(e.dirtiedDate)>t.dirtiedDate}));var n=t.length,o=0,s=[],c=function(){var u=p(regeneratorRuntime.mark((function u(){var l,h;return regeneratorRuntime.wrap((function(u){while(1)switch(u.prev=u.next){case 0:return l=t.slice(o,o+i),u.next=3,a.handleItemsResponse(l,null,x.MappingSourceLocalRetrieved,e.KeyRequestLoadLocal);case 3:if(h=u.sent,s.push(h),o+=l.length,!(o<n)){u.next=10;break}return u.abrupt("return",new Promise((function(e,t){a.$timeout((function(){a.notifyEvent("local-data-incremental-load"),r&&r(o,n),c().then(e)}))})));case 10:a._initialDataLoaded=!0,a.notifyEvent("local-data-loaded");case 12:case"end":return u.stop()}}),u)})));return function(){return u.apply(this,arguments)}}();return c()})),t.abrupt("return",this.loadLocalDataPromise);case 10:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"writeItemsToLocalStorage",value:function(){var t=p(regeneratorRuntime.mark((function t(n,r){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=n.length){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",new Promise(function(){var t=p(regeneratorRuntime.mark((function t(o,s){var a,c,u,l,h,f,d,m,v,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=[],c=[],u=!0,l=!1,h=void 0,t.prev=4,f=n[Symbol.iterator]();!(u=(d=f.next()).done);u=!0)m=d.value,!0!==m.deleted||m.dirty?a.push(m):c.push(m);t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](4),l=!0,h=t.t0;case 12:t.prev=12,t.prev=13,u||null==f["return"]||f["return"]();case 15:if(t.prev=15,!l){t.next=18;break}throw h;case 18:return t.finish(15);case 19:return t.finish(12);case 20:if(!(c.length>0)){t.next=23;break}return t.next=23,Promise.all(c.map(function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i.storageManager.deleteModel(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 23:return t.next=25,i.getActiveKeyInfo(e.KeyRequestSaveLocal);case 25:if(v=t.sent,!(a.length>0)){t.next=33;break}return t.next=29,Promise.all(a.map(function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new P(t,v.keys,v.auth_params),e.next=3,n.paramsForLocalStorage();case 3:return n=e.sent,r&&delete n.dirty,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))["catch"]((function(e){return s(e)}));case 29:return g=t.sent,t.next=32,i.storageManager.saveModels(g)["catch"]((function(e){console.error("Error writing items",e),i.syncStatus.localError=e,i.syncStatusDidChange(),s()}));case 32:i.syncStatus.localError&&(i.syncStatus.localError=null,i.syncStatusDidChange());case 33:o();case 34:case"end":return t.stop()}}),t,null,[[4,8,12,20],[13,,15,19]])})));return function(e,n){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"syncOffline",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=!0,r=!1,i=void 0,e.prev=3,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)a=s.value,a.updated_at=new Date;e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](3),r=!0,i=e.t0;case 11:e.prev=11,e.prev=12,n||null==o["return"]||o["return"]();case 14:if(e.prev=14,!r){e.next=17;break}throw i;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.abrupt("return",this.writeItemsToLocalStorage(t,!0).then((function(e){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.deleted&&c.modelManager.removeItemLocally(a)}}catch(u){r=!0,i=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return c.modelManager.clearDirtyItems(t),c.modelManager.didSyncModelsOffline(t),c.notifyEvent("sync:completed",{savedItems:t}),{saved_items:t}})));case 20:case"end":return e.stop()}}),e,this,[[3,7,11,19],[12,,14,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"markAllItemsDirtyAndSaveOffline",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,u,l,h,f,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=28;break}n=this.modelManager.allNondummyItems.filter((function(e){return!e.errorDecrypting})).slice(),r=!0,i=!1,o=void 0,e.prev=5,s=n[Symbol.iterator]();case 7:if(r=(a=s.next()).done){e.next=14;break}return c=a.value,e.next=11,this.modelManager.alternateUUIDForItem(c);case 11:r=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](5),i=!0,o=e.t0;case 20:e.prev=20,e.prev=21,r||null==s["return"]||s["return"]();case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(u=this.modelManager.allNondummyItems,l=!0,h=!1,f=void 0,e.prev=32,d=u[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)m=p.value,m.setDirty(!0);e.next=40;break;case 36:e.prev=36,e.t1=e["catch"](32),h=!0,f=e.t1;case 40:e.prev=40,e.prev=41,l||null==d["return"]||d["return"]();case 43:if(e.prev=43,!h){e.next=46;break}throw f;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return e.abrupt("return",this.writeItemsToLocalStorage(u,!1));case 49:case"end":return e.stop()}}),e,this,[[5,16,20,28],[21,,23,27],[32,36,40,48],[41,,43,47]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setSyncToken",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._syncToken=t,e.next=3,this.storageManager.setItem("syncToken",t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSyncToken",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._syncToken){e.next=4;break}return e.next=3,this.storageManager.getItem("syncToken");case 3:this._syncToken=e.sent;case 4:return e.abrupt("return",this._syncToken);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setCursorToken",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._cursorToken=t,!t){e.next=6;break}return e.next=4,this.storageManager.setItem("cursorToken",t);case 4:e.next=8;break;case 6:return e.next=8,this.storageManager.removeItem("cursorToken");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCursorToken",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._cursorToken){e.next=4;break}return e.next=3,this.storageManager.getItem("cursorToken");case 3:this._cursorToken=e.sent;case 4:return e.abrupt("return",this._cursorToken);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearQueuedCallbacks",value:function(){this._queuedCallbacks=[]}},{key:"callQueuedCallbacks",value:function(e){var t=this.queuedCallbacks;if(t.length){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(e)}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}this.clearQueuedCallbacks()}}},{key:"beginCheckingIfSyncIsTakingTooLong",value:function(){this.syncStatus.checker&&this.stopCheckingIfSyncIsTakingTooLong(),this.syncStatus.checker=this.$interval(function(){var e=(new Date-this.syncStatus.syncStart)/1e3,t=5;e>t&&(this.notifyEvent("sync:taking-too-long"),this.stopCheckingIfSyncIsTakingTooLong())}.bind(this),500)}},{key:"stopCheckingIfSyncIsTakingTooLong",value:function(){this.$interval.hasOwnProperty("cancel")?this.$interval.cancel(this.syncStatus.checker):clearInterval(this.syncStatus.checker),this.syncStatus.checker=null}},{key:"lockSyncing",value:function(){this.syncLocked=!0}},{key:"unlockSyncing",value:function(){this.syncLocked=!1}},{key:"sync",value:function(){var t=p(regeneratorRuntime.mark((function t(){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{},!this.syncLocked){t.next=4;break}return console.log("Sync Locked, Returning;"),t.abrupt("return");case 4:return t.abrupt("return",new Promise(function(){var t=p(regeneratorRuntime.mark((function t(i,o){var s,a,c,u,l,h,f,d,p,m,v,g,y,b,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n||(n={}),s=r.modelManager.getDirtyItems(),a=s.filter((function(e){return!r.lastDirtyItemsSave||e.dirtiedDate>r.lastDirtyItemsSave})),t.next=5,r.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 5:if(c=t.sent,u=r.syncStatus.syncOpInProgress,l=r.initialDataLoaded(),!u&&l){t.next=16;break}return r.performSyncAgainOnCompletion=!0,r.lastDirtyItemsSave=new Date,t.next=13,r.writeItemsToLocalStorage(a,!1);case 13:return u&&(r.queuedCallbacks.push(i),r.loggingEnabled&&console.warn("Attempting to sync while existing sync is in progress.")),l||(r.loggingEnabled&&console.warn("(1) Attempting to perform online sync before local data has loaded"),i()),t.abrupt("return");case 16:if(r.syncStatus.syncOpInProgress=!0,!c.offline){t.next=19;break}return t.abrupt("return",r.syncOffline(s).then((function(e){r.syncStatus.syncOpInProgress=!1,i(e)}))["catch"]((function(e){r.notifyEvent("sync-exception",e)})));case 19:if(r.initialDataLoaded()){t.next=22;break}return console.error("Attempting to perform online sync before local data has loaded"),t.abrupt("return");case 22:return r.loggingEnabled&&console.log("Syncing online user."),h=r.syncStatus.needsMoreSync,r.syncStatus.syncStart=new Date,r.beginCheckingIfSyncIsTakingTooLong(),f=r.PerSyncItemUploadLimit,d=s.slice(0,f),d.length<s.length?r.syncStatus.needsMoreSync=!0:r.syncStatus.needsMoreSync=!1,h||(r.syncStatus.total=s.length,r.syncStatus.current=0),r.syncStatus.current>r.syncStatus.total&&(r.syncStatus.total=r.syncStatus.current),r.syncStatusDidChange(),t.next=34,r.writeItemsToLocalStorage(a,!1);case 34:return r.lastDirtyItemsSave=new Date,n.onPreSyncSave&&n.onPreSyncSave(),r.allRetreivedItems||(r.allRetreivedItems=[]),r.allSavedItems||(r.allSavedItems=[]),p={},p.limit=r.ServerItemDownloadLimit,n.performIntegrityCheck&&(p.compute_integrity=!0),t.prev=41,t.next=44,Promise.all(d.map((function(e){var t=new P(e,c.keys,c.auth_params);return t.additionalFields=n.additionalFields,t.paramsForSync()}))).then((function(e){p.items=e}));case 44:t.next=49;break;case 46:t.prev=46,t.t0=t["catch"](41),r.notifyEvent("sync-exception",t.t0);case 49:for(m=!0,v=!1,g=void 0,t.prev=52,y=d[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,w.dirtyCount=0;t.next=60;break;case 56:t.prev=56,t.t1=t["catch"](52),v=!0,g=t.t1;case 60:t.prev=60,t.prev=61,m||null==y["return"]||y["return"]();case 63:if(t.prev=63,!v){t.next=66;break}throw g;case 66:return t.finish(63);case 67:return t.finish(60);case 68:return t.next=70,r.getSyncToken();case 70:return p.sync_token=t.sent,t.next=73,r.getCursorToken();case 73:return p.cursor_token=t.sent,p["api"]=k.getApiVersion(),r.loggingEnabled&&console.log("Syncing with params",p),t.prev=76,t.t2=r.httpManager,t.next=80,r.getSyncURL();case 80:t.t3=t.sent,t.t4=p,t.t5=function(e){r.handleSyncSuccess(d,e,n).then((function(){i(e)}))["catch"]((function(e){console.log("Caught sync success exception:",e),r.handleSyncError(e,null,s).then((function(t){r.notifyEvent("sync-exception",e),i(t)}))}))},t.t6=function(e,t){r.handleSyncError(e,t,s).then((function(e){i(e)}))},t.t2.postAuthenticatedAbsolute.call(t.t2,t.t3,t.t4,t.t5,t.t6),t.next=90;break;case 87:t.prev=87,t.t7=t["catch"](76),console.log("Sync exception caught:",t.t7);case 90:case"end":return t.stop()}}),t,null,[[41,46],[52,56,60,68],[61,,63,67],[76,87]])})));return function(e,n){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"_awaitSleep",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.warn("Simulating high latency sync request",t),e.abrupt("return",new Promise((function(e,n){setTimeout((function(){e()}),t)})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSyncSuccess",value:function(){var t=p(regeneratorRuntime.mark((function t(n,r,i){var o,s,a,c,u,l,h,f,d,p,m,v,g,y,b,w,k,S,_=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i.simulateHighLatency){t.next=4;break}return o=i.simulatedLatency||1e3,t.next=4,this._awaitSleep(o);case 4:for(this.syncStatus.error=null,this.loggingEnabled&&console.log("Sync response",r),s=this.allSavedItems.map((function(e){return e.uuid})),a=r.saved_items.map((function(e){return e.uuid})),r.retrieved_items=r.retrieved_items.filter((function(e){var t=s.includes(e.uuid),n=a.includes(e.uuid);if(t||n)return!1;var r=_.modelManager.findItem(e.uuid);return!r||!r.dirty})),c=[],u=!0,l=!1,h=void 0,t.prev=13,f=n[Symbol.iterator]();!(u=(d=f.next()).done);u=!0)p=d.value,0==p.dirtyCount&&c.push(p);t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](13),l=!0,h=t.t0;case 21:t.prev=21,t.prev=22,u||null==f["return"]||f["return"]();case 24:if(t.prev=24,!l){t.next=27;break}throw h;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return this.modelManager.clearDirtyItems(c),t.next=32,this.handleItemsResponse(r.retrieved_items,null,x.MappingSourceRemoteRetrieved,e.KeyRequestLoadSaveAccount);case 32:return m=t.sent,this.allRetreivedItems=this.allRetreivedItems.concat(m),this.syncStatus.retrievedCount=this.allRetreivedItems.length,v=["content","auth_hash"],t.next=38,this.handleItemsResponse(r.saved_items,v,x.MappingSourceRemoteSaved,e.KeyRequestLoadSaveAccount);case 38:return g=t.sent,this.allSavedItems=this.allSavedItems.concat(g),y=r.unsaved,t.next=43,this.deprecated_handleUnsavedItemsResponse(y);case 43:return t.next=45,this.handleConflictsResponse(r.conflicts);case 45:if(b=t.sent,w=b&&b.length>0,!b){t.next=50;break}return t.next=50,this.writeItemsToLocalStorage(b,!1);case 50:return t.next=52,this.writeItemsToLocalStorage(g,!1);case 52:return t.next=54,this.writeItemsToLocalStorage(m,!1);case 54:if(!r.integrity_hash||r.cursor_token){t.next=59;break}return t.next=57,this.handleServerIntegrityHash(r.integrity_hash);case 57:k=t.sent,k||this.syncDiscordance<this.MaxDiscordanceBeforeOutOfSync&&(this.performSyncAgainOnCompletion=!0);case 59:return this.syncStatus.syncOpInProgress=!1,this.syncStatus.current+=n.length,this.syncStatusDidChange(),this.setSyncToken(r.sync_token),this.setCursorToken(r.cursor_token),this.stopCheckingIfSyncIsTakingTooLong(),t.next=67,this.getCursorToken();case 67:if(S=t.sent,!S&&!this.syncStatus.needsMoreSync){t.next=72;break}return t.abrupt("return",new Promise((function(e,t){setTimeout(function(){this.sync(i).then(e)}.bind(_),10)})));case 72:if(!w){t.next=77;break}return this.performSyncAgainOnCompletion=!1,t.abrupt("return",new Promise((function(e,t){setTimeout((function(){_.sync(i).then(e)}),10)})));case 77:return this.syncStatus.retrievedCount=0,this.syncStatus.current=0,this.syncStatus.total=0,this.syncStatusDidChange(),(this.allRetreivedItems.length>=this.majorDataChangeThreshold||g.length>=this.majorDataChangeThreshold||y&&y.length>=this.majorDataChangeThreshold||b&&b.length>=this.majorDataChangeThreshold)&&this.notifyEvent("major-data-change"),this.callQueuedCallbacks(r),this.notifyEvent("sync:completed",{retrievedItems:this.allRetreivedItems,savedItems:this.allSavedItems}),this.allRetreivedItems=[],this.allSavedItems=[],this.performSyncAgainOnCompletion&&(this.performSyncAgainOnCompletion=!1,setTimeout((function(){_.sync(i)}),10)),t.abrupt("return",r);case 88:case"end":return t.stop()}}),t,this,[[13,17,21,29],[22,,24,28]])})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"handleSyncError",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Sync error: ",t),401==n&&this.notifyEvent("sync-session-invalid"),t?"string"==typeof t&&(t={error:{message:t}}):t={error:{message:"Could not connect to server."}},this.syncStatus.syncOpInProgress=!1,this.syncStatus.error=t.error,this.syncStatusDidChange(),this.writeItemsToLocalStorage(r,!1),this.modelManager.didSyncModelsOffline(r),this.stopCheckingIfSyncIsTakingTooLong(),this.notifyEvent("sync:error",t.error),this.callQueuedCallbacks({error:"Sync error"}),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"handleItemsResponse",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getActiveKeyInfo(i);case 2:return o=e.sent.keys,e.next=5,SFJS.itemTransformer.decryptMultipleItems(t,o);case 5:return e.next=7,this.modelManager.mapResponseItemsToLocalModelsOmittingFields(t,n,r);case 7:return s=e.sent,a=s.filter((function(e){var t=e.errorDecryptingValueChanged;return e.errorDecryptingValueChanged=!1,t})),a.length>0&&this.writeItemsToLocalStorage(a,!1),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"refreshErroredItems",value:function(){var t=p(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.modelManager.allNondummyItems.filter((function(e){return 1==e.errorDecrypting})),!(n.length>0)){t.next=3;break}return t.abrupt("return",this.handleItemsResponse(n,null,x.MappingSourceLocalRetrieved,e.KeyRequestLoadSaveAccount));case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"handleConflictsResponse",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i,o,s,a,c,u,l,h,f,d,p,m,v,g,y,b,w,k,S,_,C,O,M,E,A,T,R,D,I,P,j,L,F,B;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n&&0!=n.length){t.next=2;break}return t.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Conflicted Items:",n),r={},i=!0,o=!1,s=void 0,t.prev=7,a=n[Symbol.iterator]();case 9:if(i=(c=a.next()).done){t.next=21;break}if(u=c.value,l=u.server_item||u.unsaved_item,h=this.modelManager.findItem(l.uuid),h){t.next=16;break}return r[l.uuid]={},t.abrupt("continue",18);case 16:f=h.getContentCopy(),r[l.uuid]={frozenContent:f,itemRef:h};case 18:i=!0,t.next=9;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](7),o=!0,s=t.t0;case 27:t.prev=27,t.prev=28,i||null==a["return"]||a["return"]();case 30:if(t.prev=30,!o){t.next=33;break}throw s;case 33:return t.finish(30);case 34:return t.finish(27);case 35:d=[],p=!0,m=!1,v=void 0,t.prev=39,g=n[Symbol.iterator]();case 41:if(p=(y=g.next()).done){t.next=91;break}return b=y.value,w=b.server_item||b.unsaved_item,t.t1=SFJS.itemTransformer,t.t2=[w],t.next=48,this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 48:return t.t3=t.sent.keys,t.next=51,t.t1.decryptMultipleItems.call(t.t1,t.t2,t.t3);case 51:if(k=r[w.uuid],S=k.frozenContent,_=k.itemRef,_){t.next=54;break}return t.abrupt("continue",88);case 54:if(d.push(_),"uuid_conflict"!==b.type){t.next=62;break}return t.next=58,this.modelManager.alternateUUIDForItem(_);case 58:C=t.sent,d.push(C),t.next=88;break;case 62:if("sync_conflict"!==b.type){t.next=86;break}return t.next=65,this.modelManager.createDuplicateItemFromResponseItem(w);case 65:if(O=t.sent,M=this.modelManager.duplicateItemWithCustomContent({content:S,duplicateOf:_}),E=!M.isItemContentEqualWith(O),A=!_.isItemContentEqualWith(O),T=!1,R=!1,D=!1,I=!1,w.deleted||_.deleted?I=!0:E?(P=20,j=(new Date-_.client_updated_at)/1e3<P,j?(D=!0,R=!0):(T=!0,I=!0)):A?(L=!N.AreItemContentsEqual({leftContent:_.content,rightContent:O.content,keysToIgnore:_.keysToIgnoreWhenCheckingContentEquality().concat(["references"]),appDataKeysToIgnore:_.appDataKeysToIgnoreWhenCheckingContentEquality()}),F=!L,F?D=!0:(T=!0,I=!0)):I=!0,!T){t.next=79;break}return t.next=77,this.modelManager.duplicateItemWithCustomContentAndAddAsConflict({content:S,duplicateOf:_});case 77:B=t.sent,d.push(B);case 79:if(R&&(this.modelManager.addDuplicatedItemAsConflict({duplicate:O,duplicateOf:_}),d.push(O)),!I){t.next=83;break}return t.next=83,this.modelManager.mapResponseItemsToLocalModelsOmittingFields([w],null,x.MappingSourceRemoteRetrieved);case 83:D&&(_.updated_at=O.updated_at,_.setDirty(!0)),t.next=88;break;case 86:return console.error("Unsupported conflict type",b.type),t.abrupt("continue",88);case 88:p=!0,t.next=41;break;case 91:t.next=97;break;case 93:t.prev=93,t.t4=t["catch"](39),m=!0,v=t.t4;case 97:t.prev=97,t.prev=98,p||null==g["return"]||g["return"]();case 100:if(t.prev=100,!m){t.next=103;break}throw v;case 103:return t.finish(100);case 104:return t.finish(97);case 105:return t.abrupt("return",d);case 106:case"end":return t.stop()}}),t,this,[[7,23,27,35],[28,,30,34],[39,93,97,105],[98,,100,104]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"deprecated_handleUnsavedItemsResponse",value:function(){var t=p(regeneratorRuntime.mark((function t(n){var r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n&&0!=n.length){t.next=2;break}return t.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Unsaved Items:",n),r=!0,i=!1,o=void 0,t.prev=6,s=n[Symbol.iterator]();case 8:if(r=(a=s.next()).done){t.next=35;break}return c=a.value,u=c.item,t.t0=SFJS.itemTransformer,t.t1=[u],t.next=15,this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 15:return t.t2=t.sent.keys,t.next=18,t.t0.decryptMultipleItems.call(t.t0,t.t1,t.t2);case 18:if(l=this.modelManager.findItem(u.uuid),l){t.next=21;break}return t.abrupt("continue",32);case 21:if(h=c.error,"uuid_conflict"!==h.tag){t.next=27;break}return t.next=25,this.modelManager.alternateUUIDForItem(l);case 25:t.next=32;break;case 27:if("sync_conflict"!==h.tag){t.next=32;break}return t.next=30,this.modelManager.createDuplicateItemFromResponseItem(u);case 30:f=t.sent,u.deleted||l.isItemContentEqualWith(f)||this.modelManager.addDuplicatedItemAsConflict({duplicate:f,duplicateOf:l});case 32:r=!0,t.next=8;break;case 35:t.next=41;break;case 37:t.prev=37,t.t3=t["catch"](6),i=!0,o=t.t3;case 41:t.prev=41,t.prev=42,r||null==s["return"]||s["return"]();case 44:if(t.prev=44,!i){t.next=47;break}throw o;case 47:return t.finish(44);case 48:return t.finish(41);case 49:case"end":return t.stop()}}),t,this,[[6,37,41,49],[42,,44,48]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"stateless_downloadAllItems",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(){var r=p(regeneratorRuntime.mark((function r(i,o){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s={limit:n.limit||500,sync_token:n.syncToken,cursor_token:n.cursorToken,content_type:n.contentType,event:n.event,api:k.getApiVersion()},r.prev=1,r.t0=t.httpManager,r.next=5,t.getSyncURL();case 5:r.t1=r.sent,r.t2=s,r.t3=function(){var r=p(regeneratorRuntime.mark((function r(o){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.retrievedItems||(n.retrievedItems=[]),s=o.retrieved_items,r.next=4,t.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 4:return a=r.sent.keys,r.next=7,SFJS.itemTransformer.decryptMultipleItems(s,a);case 7:n.retrievedItems=n.retrievedItems.concat(s.map((function(e){return t.modelManager.createItem(e)}))),n.syncToken=o.sync_token,n.cursorToken=o.cursor_token,n.cursorToken?t.stateless_downloadAllItems(n).then(i):i(n.retrievedItems);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r.t4=function(e,t){o(e)},r.t0.postAuthenticatedAbsolute.call(r.t0,r.t1,r.t2,r.t3,r.t4),r.next=16;break;case 12:r.prev=12,r.t5=r["catch"](1),console.log("Download all items exception caught:",r.t5),o(r.t5);case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"resolveOutOfSync",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stateless_downloadAllItems({event:"resolve-out-of-sync"}).then(function(){var e=p(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,c,u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=[],i=!0,o=!1,s=void 0,e.prev=4,a=n[Symbol.iterator]();case 6:if(i=(c=a.next()).done){e.next=18;break}if(u=c.value,l=t.modelManager.findItem(u.uuid),!l){e.next=14;break}if(h=!u.isItemContentEqualWith(l),!h){e.next=14;break}return e.next=14,t.modelManager.duplicateItemAndAddAsConflict(l);case 14:r.push(u);case 15:i=!0,e.next=6;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](4),o=!0,s=e.t0;case 24:e.prev=24,e.prev=25,i||null==a["return"]||a["return"]();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.next=34,t.modelManager.mapResponseItemsToLocalModelsWithOptions({items:r,source:x.MappingSourceRemoteRetrieved});case 34:return e.next=36,t.writeItemsToLocalStorage(t.modelManager.allNondummyItems);case 36:return e.abrupt("return",t.sync({performIntegrityCheck:!0}));case 37:case"end":return e.stop()}}),e,null,[[4,20,24,32],[25,,27,31]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSignout",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.outOfSync=!1,this.loadLocalDataPromise=null,this.performSyncAgainOnCompletion=!1,this.syncStatus.syncOpInProgress=!1,this._queuedCallbacks=[],this.syncStatus={},e.abrupt("return",this.clearSyncToken());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearSyncToken",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._syncToken=null,this._cursorToken=null,e.abrupt("return",this.storageManager.removeItem("syncToken"));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"__setLocalDataNotLoaded",value:function(){this.loadLocalDataPromise=null,this._initialDataLoaded=!1}},{key:"queuedCallbacks",get:function(){return this._queuedCallbacks||(this._queuedCallbacks=[]),this._queuedCallbacks}}]),e}();r.SFSyncManager=I;var N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e),this.content={},this.referencingObjects=[],this.updateFromJSON(t),this.uuid||"undefined"!==typeof SFJS&&SFJS.crypto.generateUUIDSync&&(this.uuid=SFJS.crypto.generateUUIDSync()),"object"!==f(this.content)||this.content.references||(this.content.references=[])}return g(e,[{key:"initUUID",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uuid){e.next=4;break}return e.next=3,SFJS.crypto.generateUUID();case 3:this.uuid=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateFromJSON",value:function(t){if(t){this.deleted=t.deleted,this.uuid=t.uuid,this.enc_item_key=t.enc_item_key,this.auth_hash=t.auth_hash,this.auth_params=t.auth_params;for(var n=["errorDecrypting","dirty","dirtyCount","dirtiedDate","dummy"],r=0,i=n;r<i.length;r++){var o=i[r];void 0!==t[o]&&(this[o]=t[o])}if(this.dirtiedDate&&"string"===typeof this.dirtiedDate&&(this.dirtiedDate=new Date(this.dirtiedDate)),this.content_type||(this.content_type=t.content_type),t.errorDecrypting)this.content=t.content;else try{var s="string"===typeof t.content?JSON.parse(t.content):t.content;e.deepMerge(this.contentObject,s)}catch(a){console.log("Error while updating item from json",a)}t.created_at&&(this.created_at=t.created_at),t.updated_at&&(this.updated_at=t.updated_at),this.created_at?this.created_at=new Date(this.created_at):this.created_at=new Date,this.updated_at?this.updated_at=new Date(this.updated_at):this.updated_at=new Date(0),this._client_updated_at=null,t.content?this.mapContentToLocalProperties(this.contentObject):1==t.deleted&&this.handleDeletedContent()}}},{key:"mapContentToLocalProperties",value:function(e){}},{key:"createContentJSONFromProperties",value:function(){var t=this.structureParams();return e.deepMerge(this.contentObject,t),t}},{key:"structureParams",value:function(){return this.getContentCopy()}},{key:"handleDeletedContent",value:function(){}},{key:"setDirty",value:function(e,t){this.dirty=e,this.dirtyCount||(this.dirtyCount=0),e?this.dirtyCount++:this.dirtyCount=0,this.dirtiedDate=new Date,e&&t?this.client_updated_at=new Date:this.hasRawClientUpdatedAtValue()||(this.client_updated_at=new Date(this.updated_at))}},{key:"updateLocalRelationships",value:function(){}},{key:"addItemAsRelationship",value:function(e){if(e.setIsBeingReferencedBy(this),!this.hasRelationshipWithItem(e)){var t=this.content.references||[];t.push({uuid:e.uuid,content_type:e.content_type}),this.content.references=t}}},{key:"removeItemAsRelationship",value:function(e){e.setIsNoLongerBeingReferencedBy(this),this.removeReferenceWithUuid(e.uuid)}},{key:"setIsBeingReferencedBy",value:function(e){_.find(this.referencingObjects,{uuid:e.uuid})||this.referencingObjects.push(e)}},{key:"setIsNoLongerBeingReferencedBy",value:function(e){_.remove(this.referencingObjects,{uuid:e.uuid}),this.hasRelationshipWithItem(e)&&(this.removeReferenceWithUuid(e.uuid),this.setDirty(!0))}},{key:"removeReferenceWithUuid",value:function(e){var t=this.content.references||[];t=t.filter((function(t){return t.uuid!=e})),this.content.references=t}},{key:"hasRelationshipWithItem",value:function(e){var t=this.content.references.find((function(t){return t.uuid==e.uuid}));return null!=t}},{key:"isBeingRemovedLocally",value:function(){}},{key:"didFinishSyncing",value:function(){}},{key:"informReferencesOfUUIDChange",value:function(e,t){}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function(e,t,n){if(!this.errorDecrypting){var r=!0,i=!1,o=void 0;try{for(var s,a=this.content.references[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;c.uuid==t&&(c.uuid=n,this.setDirty(!0))}}catch(u){i=!0,o=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}}}},{key:"doNotEncrypt",value:function(){return!1}},{key:"setDomainDataItem",value:function(e,t,n){if(n){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var r=this.content.appData[n];r||(r={}),r[e]=t,this.content.appData[n]=r}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"getDomainDataItem",value:function(e,t){if(t){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var n=this.content.appData[t];return n?n[e]:null}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"setAppDataItem",value:function(t,n){this.setDomainDataItem(t,n,e.AppDomain)}},{key:"getAppDataItem",value:function(t){return this.getDomainDataItem(t,e.AppDomain)}},{key:"hasRawClientUpdatedAtValue",value:function(){return null!=this.getAppDataItem("client_updated_at")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function(){return[]}},{key:"appDataKeysToIgnoreWhenCheckingContentEquality",value:function(){return["client_updated_at"]}},{key:"getContentCopy",value:function(){var e=JSON.parse(JSON.stringify(this.content));return e}},{key:"isItemContentEqualWith",value:function(t){return e.AreItemContentsEqual({leftContent:this.content,rightContent:t.content,keysToIgnore:this.keysToIgnoreWhenCheckingContentEquality(),appDataKeysToIgnore:this.appDataKeysToIgnoreWhenCheckingContentEquality()})}},{key:"satisfiesPredicate",value:function(e){return j.ItemSatisfiesPredicate(this,e)}},{key:"createdAtString",value:function(){return this.dateToLocalizedString(this.created_at)}},{key:"updatedAtString",value:function(){return this.dateToLocalizedString(this.client_updated_at)}},{key:"updatedAtTimestamp",value:function(){return this.updated_at.getTime()}},{key:"dateToLocalizedString",value:function(e){if("undefined"!==typeof Intl&&Intl.DateTimeFormat){if(!D){var t=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;D=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"})}return D.format(e)}return e.toDateString()+" "+e.toLocaleTimeString()}},{key:"contentObject",get:function(){if(this.errorDecrypting)return this.content;if(!this.content)return this.content={},this.content;if(null!==this.content&&"object"===f(this.content))return this.content;try{var e=JSON.parse(this.content);return this.content=e,this.content}catch(t){return console.log("Error parsing json",t,this),this.content={},this.content}}},{key:"pinned",get:function(){return this.getAppDataItem("pinned")}},{key:"archived",get:function(){return this.getAppDataItem("archived")}},{key:"locked",get:function(){return this.getAppDataItem("locked")}},{key:"displayName",get:function(){return"Item"}},{key:"client_updated_at",get:function(){if(!this._client_updated_at){var e=this.getAppDataItem("client_updated_at");this._client_updated_at=e?new Date(e):new Date(this.updated_at)}return this._client_updated_at},set:function(e){this._client_updated_at=e,this.setAppDataItem("client_updated_at",e)}}],[{key:"deepMerge",value:function(e,t){function n(e,t){if(_.isArray(e))return t}return _.mergeWith(e,t,n),e}},{key:"AreItemContentsEqual",value:function(t){var n=t.leftContent,r=t.rightContent,i=t.keysToIgnore,o=t.appDataKeysToIgnore,s=function(e,t){if(!e)return e;var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;delete e[a]}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return e};return n=JSON.parse(JSON.stringify(n)),n.appData&&s(n.appData[e.AppDomain],o),n=s(n,i),r=JSON.parse(JSON.stringify(r)),r.appData&&s(r.appData[e.AppDomain],o),r=s(r,i),JSON.stringify(n)===JSON.stringify(r)}}]),e}();r.SFItem=N;var P=function(){function e(t,n,r){if(m(this,e),this.item=t,this.keys=n,this.auth_params=r,this.keys&&!this.auth_params)throw"SFItemParams.auth_params must be supplied if supplying keys.";if(this.auth_params&&!this.auth_params.version)throw"SFItemParams.auth_params is missing version"}return g(e,[{key:"paramsForExportFile",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.forExportFile=!0,!t){e.next=5;break}return e.abrupt("return",this.__params());case 5:return e.next=7,this.__params();case 7:return n=e.sent,e.abrupt("return",_.omit(n,["deleted"]));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"paramsForExtension",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.paramsForExportFile());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"paramsForLocalStorage",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.additionalFields=["dirty","dirtiedDate","errorDecrypting"],this.forExportFile=!0,e.abrupt("return",this.__params());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"paramsForSync",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__params());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"__params",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={uuid:this.item.uuid,content_type:this.item.content_type,deleted:this.item.deleted,created_at:this.item.created_at,updated_at:this.item.updated_at},this.item.errorDecrypting){e.next=23;break}if(n=this.item.doNotEncrypt()&&!this.forExportFile,!this.keys||n){e.next=11;break}return e.next=6,SFJS.itemTransformer.encryptItem(this.item,this.keys,this.auth_params);case 6:r=e.sent,_.merge(t,r),"001"!==this.auth_params.version&&(t.auth_hash=null),e.next=21;break;case 11:if(!this.forExportFile){e.next=15;break}e.t0=this.item.createContentJSONFromProperties(),e.next=19;break;case 15:return e.next=17,SFJS.crypto.base64(JSON.stringify(this.item.createContentJSONFromProperties()));case 17:e.t1=e.sent,e.t0="000"+e.t1;case 19:t.content=e.t0,this.forExportFile||(t.enc_item_key=null,t.auth_hash=null);case 21:e.next=26;break;case 23:t.content=this.item.content,t.enc_item_key=this.item.enc_item_key,t.auth_hash=this.item.auth_hash;case 26:return this.additionalFields&&_.merge(t,_.pick(this.item,this.additionalFields)),e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();r.SFItemParams=P;var j=function(){function e(t,n,r){m(this,e),this.keypath=t,this.operator=n,this.value=r,e.IsRecursiveOperator(this.operator)&&(this.value=this.value.map(e.fromArray))}return g(e,null,[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}},{key:"ObjectSatisfiesPredicate",value:function(t,n){if(Array.isArray(n)&&(n=this.fromArray(n)),e.IsRecursiveOperator(n.operator)){if("and"===n.operator){var r=!0,i=!1,o=void 0;try{for(var s,a=n.value[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(!this.ObjectSatisfiesPredicate(t,c))return!1}}catch(y){i=!0,o=y}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return!0}if("or"===n.operator){var u=!0,l=!1,h=void 0;try{for(var f,d=n.value[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){c=f.value;if(this.ObjectSatisfiesPredicate(t,c))return!0}}catch(y){l=!0,h=y}finally{try{u||null==d["return"]||d["return"]()}finally{if(l)throw h}}return!1}}var p=n.value;"string"==typeof p&&p.includes(".ago")&&(p=this.DateFromString(p));var m=n.keypath.split(".").reduce((function(e,t){return e&&e[t]}),t),v=[!1,"",null,void 0,NaN];if(void 0==m)return"!="==n.operator?!v.includes(n.value):v.includes(n.value);if("="==n.operator)return Array.isArray(m)?JSON.stringify(m)==JSON.stringify(p):m==p;if("!="==n.operator)return Array.isArray(m)?JSON.stringify(m)!=JSON.stringify(p):m!==p;if("<"==n.operator)return m<p;if(">"==n.operator)return m>p;if("<="==n.operator)return m<=p;if(">="==n.operator)return m>=p;if("startsWith"==n.operator)return m.startsWith(p);if("in"==n.operator)return-1!=p.indexOf(m);if("includes"==n.operator)return this.resolveIncludesPredicate(m,p);if("matches"==n.operator){var g=new RegExp(p);return g.test(m)}return!1}},{key:"resolveIncludesPredicate",value:function(t,n){if("string"==typeof n)return t.includes(n);var r;r=Array.isArray(n)?e.fromArray(n):n;var i=!0,o=!1,s=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;if(this.ObjectSatisfiesPredicate(u,r))return!0}}catch(l){o=!0,s=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw s}}return!1}},{key:"ItemSatisfiesPredicate",value:function(t,n){return Array.isArray(n)&&(n=e.fromArray(n)),this.ObjectSatisfiesPredicate(t,n)}},{key:"ItemSatisfiesPredicates",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(!this.ItemSatisfiesPredicate(e,a))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return!0}},{key:"DateFromString",value:function(e){var t=e.split("."),n=t[1],r=new Date,i=parseInt(t[0]);return"days"==n?r.setDate(r.getDate()-i):"hours"==n&&r.setHours(r.getHours()-i),r}},{key:"IsRecursiveOperator",value:function(e){return["and","or"].includes(e)}}]),e}();r.SFPredicate=j;var L=function(e){function t(e){var r;return m(this,t),r=n(this,o(t).call(this,e)),r.content.desktopPrivileges||(r.content.desktopPrivileges={}),r}return s(t,e),g(t,null,[{key:"contentType",value:function(){return"SN|Privileges"}}]),g(t,[{key:"setCredentialsForAction",value:function(e,t){this.content.desktopPrivileges[e]=t}},{key:"getCredentialsForAction",value:function(e){return this.content.desktopPrivileges[e]||[]}},{key:"toggleCredentialForAction",value:function(e,t){this.isCredentialRequiredForAction(e,t)?this.removeCredentialForAction(e,t):this.addCredentialForAction(e,t)}},{key:"removeCredentialForAction",value:function(e,t){_.pull(this.content.desktopPrivileges[e],t)}},{key:"addCredentialForAction",value:function(e,t){var n=this.getCredentialsForAction(e);n.push(t),this.setCredentialsForAction(e,n)}},{key:"isCredentialRequiredForAction",value:function(e,t){var n=this.getCredentialsForAction(e);return n.includes(t)}}]),t}(N);r.SFPrivileges=L;var F=function(e){function t(e){var r;m(this,t),r=n(this,o(t).call(this,e)),r.content.itemUUIDToItemHistoryMapping||(r.content.itemUUIDToItemHistoryMapping={});var i=Object.keys(r.content.itemUUIDToItemHistoryMapping);return i.forEach((function(e){var t=r.content.itemUUIDToItemHistoryMapping[e];r.content.itemUUIDToItemHistoryMapping[e]=new B(t)})),r}return s(t,e),g(t,[{key:"addEntryForItem",value:function(e){var t=this.historyForItem(e),n=t.addHistoryEntryForItem(e);return n}},{key:"historyForItem",value:function(e){var t=this.content.itemUUIDToItemHistoryMapping[e.uuid];return t||(t=this.content.itemUUIDToItemHistoryMapping[e.uuid]=new B),t}},{key:"clearItemHistory",value:function(e){this.historyForItem(e).clear()}},{key:"clearAllHistory",value:function(){this.content.itemUUIDToItemHistoryMapping={}}},{key:"optimizeHistoryForItem",value:function(e){var n=this.historyForItem(e);n.entries.length>t.LargeItemEntryAmountThreshold&&n.optimize()}}]),t}(N);r.SFHistorySession=F,F.LargeItemEntryAmountThreshold=60;var B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m(this,e),this.entries||(this.entries=[]),t.entries){var n=!0,r=!1,i=void 0;try{for(var o,s=t.entries[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,c=this.createEntryForItem(a.item);c.setPreviousEntry(this.getLastEntry()),this.entries.push(c)}}catch(u){r=!0,i=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}}return g(e,[{key:"createEntryForItem",value:function(t){var n=e.HistoryEntryClassMapping&&e.HistoryEntryClassMapping[t.content_type];n||(n=z);var r=new n(t);return r}},{key:"getLastEntry",value:function(){return this.entries[this.entries.length-1]}},{key:"addHistoryEntryForItem",value:function(e){var t=this.createEntryForItem(e),n=this.getLastEntry();if(t.setPreviousEntry(n),!t.isSameAsEntry(n))return this.entries.push(t),t}},{key:"clear",value:function(){this.entries.length=0}},{key:"optimize",value:function(){var t=this,n=[],r=function(t){return t.deltaSize()>e.LargeEntryDeltaThreshold},i=function(e,i,o){if(o)n.push(e);else{i=n.indexOf(e);-1!==i&&n.splice(i,1)}if(o&&r(e)&&-1==e.operationVector()){var s=t.entries[i-1];s&&n.push(s)}};this.entries.forEach((function(e,n){if(0==n||n==t.entries.length-1)i(e,n,!0);else{var o=r(e);i(e,n,o)}})),this.entries=this.entries.filter((function(e,t){return-1!==n.indexOf(e)}))}}]),e}();r.SFItemHistory=B,B.LargeEntryDeltaThreshold=15;var z=function(){function e(t){m(this,e),this.item=N.deepMerge({},t),this.defaultContentKeyToDiffOn="text",this.textCharDiffLength=0,"string"==typeof this.item.updated_at&&(this.item.updated_at=new Date(this.item.updated_at))}return g(e,[{key:"setPreviousEntry",value:function(e){this.hasPreviousEntry=null!=e,this.item.content[this.defaultContentKeyToDiffOn]&&(this.textCharDiffLength=e?this.item.content[this.defaultContentKeyToDiffOn].length-e.item.content[this.defaultContentKeyToDiffOn].length:this.item.content[this.defaultContentKeyToDiffOn].length)}},{key:"operationVector",value:function(){return void 0!=this.textCharDiffLength?this.hasPreviousEntry&&0!=this.textCharDiffLength?this.textCharDiffLength<0?-1:1:0:1}},{key:"deltaSize",value:function(){return void 0!=this.textCharDiffLength?Math.abs(this.textCharDiffLength):1}},{key:"isSameAsEntry",value:function(e){if(!e)return!1;var t=new N(this.item),n=new N(e.item);return t.isItemContentEqualWith(n)}}]),e}();r.SFItemHistoryEntry=z;w="undefined"!==typeof window?window:"undefined"!==typeof e?e:null;var $=function(){function e(){m(this,e),this.DefaultPBKDF2Length=768}return g(e,[{key:"generateUUIDSync",value:function(){var e=w.crypto||w.msCrypto;if(e){var t=new Uint32Array(4);e.getRandomValues(t);var n=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){n++;var r=t[n>>3]>>n%8*4&15,i="x"==e?r:3&r|8;return i.toString(16)}))}var r=(new Date).getTime();w.performance&&"function"===typeof w.performance.now&&(r+=performance.now());var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)}));return i}},{key:"generateUUID",value:function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.generateUUIDSync());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"timingSafeEqual",value:function(e,t){var n=String(e),r=String(t),i=n.length,o=0;i!==r.length&&(r=n,o=1);for(var s=0;s<i;s++)o|=n.charCodeAt(s)^r.charCodeAt(s);return 0===o}},{key:"decryptText",value:function(){var e=p(regeneratorRuntime.mark((function e(){var n,r,i,o,s,a,c,u,l,h,f,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=p.length>0&&void 0!==p[0]?p[0]:{},r=n.ciphertextToAuth,i=n.contentCiphertext,o=n.encryptionKey,s=n.iv,a=n.authHash,c=n.authKey,u=p.length>1?p[1]:void 0,!u||a){e.next=5;break}return console.error("Auth hash is required."),e.abrupt("return");case 5:if(!a){e.next=12;break}return e.next=8,this.hmac256(r,c);case 8:if(l=e.sent,!1!==this.timingSafeEqual(a,l)){e.next=12;break}return console.error("Auth hash does not match, returning null."),e.abrupt("return",null);case 12:return h=t.enc.Hex.parse(o),f=t.enc.Hex.parse(s||""),d=t.AES.decrypt(i,h,{iv:f,mode:t.mode.CBC,padding:t.pad.Pkcs7}),e.abrupt("return",d.toString(t.enc.Utf8));case 16:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"encryptText",value:function(){var e=p(regeneratorRuntime.mark((function e(n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.enc.Hex.parse(r),s=t.enc.Hex.parse(i||""),a=t.AES.encrypt(n,o,{iv:s,mode:t.mode.CBC,padding:t.pad.Pkcs7}),e.abrupt("return",a.toString());case 4:case"end":return e.stop()}}),e)})));function n(t,n,r){return e.apply(this,arguments)}return n}()},{key:"generateRandomKey",value:function(){var e=p(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.lib.WordArray.random(n/8).toString());case 1:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"generateItemEncryptionKey",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=512,n=1,e.next=4,this.generateRandomKey(t);case 4:return r=e.sent,e.next=7,this.generateRandomKey(t);case 7:return i=e.sent,e.abrupt("return",this.pbkdf2(i,r,n,t));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"firstHalfOfKey",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.substring(0,t.length/2));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"secondHalfOfKey",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.substring(t.length/2,t.length));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"base64",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"base64Decode",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",w.atob(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sha256",value:function(){var e=p(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.SHA256(n).toString());case 1:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"hmac256",value:function(){var e=p(regeneratorRuntime.mark((function e(n,r){var i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.enc.Hex.parse(r),o=t.enc.Utf8.parse(n),s=t.HmacSHA256(o,i).toString(),e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"generateSalt",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sha256([t,"SF",n,r,i].join(":"));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"generateSymmetricKeyPair",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,u,l,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},n=t.password,r=t.pw_salt,i=t.pw_cost,e.next=3,this.pbkdf2(n,r,i,this.DefaultPBKDF2Length);case 3:return o=e.sent,s=o.length,a=s/3,c=o.slice(0,a),u=o.slice(a,2*a),l=o.slice(2*a,3*a),e.abrupt("return",[c,u,l]);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"computeEncryptionKeysForUser",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("003"!=n.version){e.next=9;break}if(n.identifier){e.next=4;break}return console.error("authParams is missing identifier."),e.abrupt("return");case 4:return e.next=6,this.generateSalt(n.identifier,n.version,n.pw_cost,n.pw_nonce);case 6:r=e.sent,e.next=10;break;case 9:r=n.pw_salt;case 10:return e.abrupt("return",this.generateSymmetricKeyPair({password:t,pw_salt:r,pw_cost:n.pw_cost}).then((function(e){var t={pw:e[0],mk:e[1],ak:e[2]};return t})));case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"generateInitialKeysAndAuthParamsForUser",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.SFJS.version,i=this.SFJS.defaultPasswordGenerationCost,e.next=4,this.generateRandomKey(256);case 4:return o=e.sent,e.next=7,this.generateSalt(t,r,i,o);case 7:return s=e.sent,e.abrupt("return",this.generateSymmetricKeyPair({password:n,pw_salt:s,pw_cost:i}).then((function(e){var n={pw_nonce:o,pw_cost:i,identifier:t,version:r},s={pw:e[0],mk:e[1],ak:e[2]};return{keys:s,authParams:n}})));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();r.SFAbstractCrypto=$;var U=function(e){function r(){return m(this,r),n(this,o(r).apply(this,arguments))}return s(r,e),g(r,[{key:"pbkdf2",value:function(){var e=p(regeneratorRuntime.mark((function e(n,r,i,o){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={keySize:o/32,hasher:t.algo.SHA512,iterations:i},e.abrupt("return",t.PBKDF2(n,r,s).toString());case 2:case"end":return e.stop()}}),e)})));function n(t,n,r,i){return e.apply(this,arguments)}return n}()}]),r}($);r.SFCryptoJS=U;w="undefined"!==typeof window?window:"undefined"!==typeof e?e:null;var H=w.crypto?w.crypto.subtle:null,V=function(e){function t(){return m(this,t),n(this,o(t).apply(this,arguments))}return s(t,e),g(t,[{key:"pbkdf2",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.webCryptoImportKey(t,"PBKDF2",["deriveBits"]);case 2:if(o=e.sent,o){e.next=6;break}return console.log("Key is null, unable to continue"),e.abrupt("return",null);case 6:return e.abrupt("return",this.webCryptoDeriveBits(o,n,r,i));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"generateRandomKey",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=!0,e.abrupt("return",H.generateKey({name:"AES-CBC",length:t},n,["encrypt","decrypt"]).then((function(e){return H.exportKey("raw",e).then(function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.arrayBufferToHexString(new Uint8Array(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){console.error("Error exporting key",e)}))}))["catch"]((function(e){console.error("Error generating key",e)})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generateItemEncryptionKey",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=256,e.abrupt("return",Promise.all([this.generateRandomKey(t),this.generateRandomKey(t)]).then((function(e){return e.join("")})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"encryptText",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){var i,o,s,a,c,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,this.hexStringToArrayBuffer(r);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=new ArrayBuffer(16);case 7:return i=e.t0,o={name:"AES-CBC",iv:i},e.next=11,this.hexStringToArrayBuffer(n);case 11:return s=e.sent,e.next=14,this.webCryptoImportKey(s,o.name,["encrypt"]);case 14:return a=e.sent,e.next=17,this.stringToArrayBuffer(t);case 17:return c=e.sent,e.abrupt("return",crypto.subtle.encrypt(o,a,c).then(function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.arrayBufferToBase64(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"decryptText",value:function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,u,l,h,f,d,m,v=this,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},n=t.ciphertextToAuth,r=t.contentCiphertext,i=t.encryptionKey,o=t.iv,s=t.authHash,a=t.authKey,c=g.length>1?g[1]:void 0,!c||s){e.next=5;break}return console.error("Auth hash is required."),e.abrupt("return");case 5:if(!s){e.next=12;break}return e.next=8,this.hmac256(n,a);case 8:if(u=e.sent,!1!==this.timingSafeEqual(s,u)){e.next=12;break}return console.error("Auth hash does not match, returning null. ".concat(s," != ").concat(u)),e.abrupt("return",null);case 12:if(!o){e.next=18;break}return e.next=15,this.hexStringToArrayBuffer(o);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=new ArrayBuffer(16);case 19:return l=e.t0,h={name:"AES-CBC",iv:l},e.next=23,this.hexStringToArrayBuffer(i);case 23:return f=e.sent,e.next=26,this.webCryptoImportKey(f,h.name,["decrypt"]);case 26:return d=e.sent,e.next=29,this.base64ToArrayBuffer(r);case 29:return m=e.sent,e.abrupt("return",crypto.subtle.decrypt(h,d,m).then(function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.arrayBufferToString(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){console.error("Error decrypting:",e)})));case 31:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hmac256",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r,i,o,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.hexStringToArrayBuffer(n);case 2:return r=e.sent,e.next=5,this.webCryptoImportKey(r,"HMAC",["sign"],{name:"SHA-256"});case 5:return i=e.sent,e.next=8,this.stringToArrayBuffer(t);case 8:return o=e.sent,e.abrupt("return",crypto.subtle.sign({name:"HMAC"},i,o).then(function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.arrayBufferToHexString(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){console.error("Error computing hmac",e)})));case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"webCryptoImportKey",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,this.stringToArrayBuffer(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t;case 7:return o=e.t0,e.abrupt("return",H.importKey("raw",o,{name:n,hash:i},!1,r).then((function(e){return e}))["catch"]((function(e){return console.error(e),null})));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"webCryptoDeriveBits",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i){var o,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.stringToArrayBuffer(n);case 2:return e.t0=e.sent,e.t1=r,e.t2={name:"SHA-512"},o={name:"PBKDF2",salt:e.t0,iterations:e.t1,hash:e.t2},e.abrupt("return",H.deriveBits(o,t,i).then(function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.arrayBufferToHexString(new Uint8Array(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){return console.error(e),null})));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"stringToArrayBuffer",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t]),i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsArrayBuffer(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"arrayBufferToString",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t]),i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsText(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"arrayBufferToHexString",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=new Uint8Array(t),r="",o=0;o<n.byteLength;o++)i=n[o].toString(16),i.length<2&&(i="0"+i),r+=i;return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"hexStringToArrayBuffer",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substr(r,2),16));return e.abrupt("return",new Uint8Array(n));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"base64ToArrayBuffer",value:function(){var e=p(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.base64Decode(t);case 2:for(n=e.sent,r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return e.abrupt("return",i.buffer);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"arrayBufferToBase64",value:function(){var e=p(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t],{type:"application/octet-binary"}),i=new FileReader;i.onload=function(t){var n=t.target.result;e(n.substr(n.indexOf(",")+1))},i.readAsDataURL(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}($);r.SFCryptoWeb=V;var W=function(){function e(t){m(this,e),this.crypto=t}return g(e,[{key:"_private_encryptString",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r,i,o){var s,a,c,u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("001"!==o.version){e.next=7;break}return e.next=3,this.crypto.encryptText(t,n,null);case 3:a=e.sent,s=o.version+a,e.next=21;break;case 7:return e.next=9,this.crypto.generateRandomKey(128);case 9:return c=e.sent,e.next=12,this.crypto.encryptText(t,n,c);case 12:return a=e.sent,u=[o.version,i,c,a].join(":"),e.next=16,this.crypto.hmac256(u,r);case 16:return l=e.sent,e.next=19,this.crypto.base64(JSON.stringify(o));case 19:h=e.sent,s=[o.version,l,i,c,a,h].join(":");case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"encryptItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){var i,o,s,a,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},e.next=3,this.crypto.generateItemEncryptionKey();case 3:if(o=e.sent,"001"!==r.version){e.next=10;break}return e.next=7,this.crypto.encryptText(o,n.mk,null);case 7:i.enc_item_key=e.sent,e.next=13;break;case 10:return e.next=12,this._private_encryptString(o,n.mk,n.ak,t.uuid,r);case 12:i.enc_item_key=e.sent;case 13:return e.next=15,this.crypto.firstHalfOfKey(o);case 15:return s=e.sent,e.next=18,this.crypto.secondHalfOfKey(o);case 18:return a=e.sent,e.next=21,this._private_encryptString(JSON.stringify(t.createContentJSONFromProperties()),s,a,t.uuid,r);case 21:if(c=e.sent,"001"!==r.version){e.next=27;break}return e.next=25,this.crypto.hmac256(c,a);case 25:u=e.sent,i.auth_hash=u;case 27:return i.content=c,e.abrupt("return",i);case 29:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"encryptionComponentsFromString",value:function(e,t,n){var r=e.substring(0,3);if("001"===r)return{contentCiphertext:e.substring(3,e.length),encryptionVersion:r,ciphertextToAuth:e,iv:null,authHash:null,encryptionKey:t,authKey:n};var i=e.split(":");return{encryptionVersion:i[0],authHash:i[1],uuid:i[2],iv:i[3],contentCiphertext:i[4],authParams:i[5],ciphertextToAuth:[i[0],i[2],i[3],i[4]].join(":"),encryptionKey:t,authKey:n}}},{key:"decryptItem",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,a,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t.content){e.next=2;break}return e.abrupt("return");case 2:if(!t.content.startsWith("000")){e.next=14;break}return e.prev=3,e.t0=JSON,e.next=7,this.crypto.base64Decode(t.content.substring(3,t.content.length));case 7:e.t1=e.sent,t.content=e.t0.parse.call(e.t0,e.t1),e.next=13;break;case 11:e.prev=11,e.t2=e["catch"](3);case 13:return e.abrupt("return");case 14:if(t.enc_item_key){e.next=17;break}return console.log("Missing item encryption key, skipping decryption."),e.abrupt("return");case 17:if(r=t.enc_item_key,i=!0,r.startsWith("002")||r.startsWith("003")||(r="001"+r,i=!1),o=this.encryptionComponentsFromString(r,n.mk,n.ak),!o.uuid||o.uuid===t.uuid){e.next=26;break}return console.error("Item key params UUID does not match item UUID"),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 26:return e.next=28,this.crypto.decryptText(o,i);case 28:if(s=e.sent,s){e.next=34;break}return console.log("Error decrypting item",t),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 34:return e.next=36,this.crypto.firstHalfOfKey(s);case 36:return a=e.sent,e.next=39,this.crypto.secondHalfOfKey(s);case 39:return c=e.sent,u=this.encryptionComponentsFromString(t.content,a,c),e.prev=41,e.t3=JSON,e.next=45,this.crypto.base64Decode(u.authParams);case 45:e.t4=e.sent,t.auth_params=e.t3.parse.call(e.t3,e.t4),e.next=51;break;case 49:e.prev=49,e.t5=e["catch"](41);case 51:if(!u.uuid||u.uuid===t.uuid){e.next=55;break}return t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 55:return u.authHash||(u.authHash=t.auth_hash),e.next=58,this.crypto.decryptText(u,!0);case 58:l=e.sent,l?(1==t.errorDecrypting&&(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!1,t.content=l):(t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0);case 60:case"end":return e.stop()}}),e,this,[[3,11],[41,49]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"decryptMultipleItems",value:function(){var e=p(regeneratorRuntime.mark((function e(t,n,r){var i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=function(){var e=p(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(1!=t.deleted||null!=t.content){e.next=4;break}return e.abrupt("return");case 4:if(i="string"===typeof t.content||t.content instanceof String,!i){e.next=19;break}return e.prev=6,e.next=9,o.decryptItem(t,n);case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e["catch"](6),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,!r){e.next=17;break}throw e.t0;case 17:return console.error("Error decrypting item",t,e.t0),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all(t.map((function(e){return i(e)}))));case 2:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}();r.SFItemTransformer=W;w="undefined"!==typeof window?window:"undefined"!==typeof e?e:null;var q=function(){function e(t){if(m(this,e),w){var n="undefined"!==typeof document&&document.documentMode||/Edge/.test(navigator.userAgent);!n&&w.crypto&&w.crypto.subtle?this.crypto=new V:this.crypto=new U}t&&(this.crypto=t),this.itemTransformer=new W(this.crypto),this.crypto.SFJS={version:this.version(),defaultPasswordGenerationCost:this.defaultPasswordGenerationCost()}}return g(e,[{key:"version",value:function(){return"003"}},{key:"supportsPasswordDerivationCost",value:function(e){return!(e>5e3)||this.crypto instanceof V}},{key:"supportedVersions",value:function(){return["001","002","003"]}},{key:"isVersionNewerThanLibraryVersion",value:function(e){var t=this.version();return parseInt(e)>parseInt(t)}},{key:"isProtocolVersionOutdated",value:function(e){var t={"001":Date.parse("2018-01-01"),"002":Date.parse("2020-01-01")},n=t[e];if(!n)return!1;var r=new Date>n;return r}},{key:"costMinimumForVersion",value:function(e){return{"001":3e3,"002":3e3,"003":11e4}[e]}},{key:"defaultPasswordGenerationCost",value:function(){return this.costMinimumForVersion(this.version())}}]),e}();if(r.StandardFile=q,w)try{w.StandardFile=q,w.SFJS=new q,w.SFCryptoWeb=V,w.SFCryptoJS=U,w.SFItemTransformer=W,w.SFModelManager=x,w.SFItem=N,w.SFItemParams=P,w.SFHttpManager=k,w.SFStorageManager=R,w.SFSyncManager=I,w.SFAuthManager=b,w.SFMigrationManager=S,w.SFAlertManager=y,w.SFPredicate=j,w.SFHistorySession=F,w.SFSessionHistoryManager=A,w.SFItemHistory=B,w.SFItemHistoryEntry=z,w.SFPrivilegesManager=C,w.SFPrivileges=L,w.SFSingletonManager=T}catch(K){console.log("Exception while exporting window variables",K)}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[1])(1)}))}).call(t,n(3))},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{l=t.regeneratorRuntime=u?e.exports:{},l.wrap=w;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",m={},v={};v[s]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(D([])));y&&y!==r&&i.call(y,s)&&(v=y);var b=_.prototype=S.prototype=Object.create(v);x.prototype=b.constructor=_,_.constructor=x,_[c]=x.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},C(O.prototype),O.prototype[a]=function(){return this},l.AsyncIterator=O,l.async=function(e,t,n,r){var i=new O(w(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:D(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function w(e,t,n,r){var i=t&&t.prototype instanceof S?t:S,o=Object.create(i.prototype),s=new R(r||[]);return o._invoke=M(e,n,s),o}function k(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function S(){}function x(){}function _(){}function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function O(e){function t(n,r,o,s){var a=k(e[n],e,r);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}var n;function r(e,r){function i(){return new Promise((function(n,i){t(e,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function M(e,t,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return I()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=k(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}function E(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,E(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=k(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function D(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){while(++r<e.length)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),i=(n.n(r),n(5)),o=(n.n(i),n(0));n.n(o);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){s(this,e),this.componentManager=t,this.updateObservers=[],this.items=[]}return c(e,[{key:"getPlatform",value:function(){return this.componentManager.platform}},{key:"getEnvironment",value:function(){return this.componentManager.environment}},{key:"isMobile",value:function(){return"mobile"==this.getEnvironment()}},{key:"addEventHandler",value:function(e){var t={id:Math.random,callback:e};return this.updateObservers.push(t),t}},{key:"removeUpdateObserver",value:function(e){this.updateObservers.splice(this.updateObservers.indexOf(e),1)}},{key:"notifyObserversOfEvent",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.updateObservers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;s.callback(e)}}catch(a){n=!0,r=a}finally{try{t||null==o["return"]||o["return"]()}finally{if(n)throw r}}}},{key:"filterItems",value:function(e){return this.items.filter((function(t){return t.content_type==e}))}},{key:"getFileDescriptors",value:function(){return this.filterItems(e.FileDescriptorContentTypeKey)}},{key:"beginStreamingFiles",value:function(){var t=this,n=[e.FileDescriptorContentTypeKey,e.FileSafeCredentialsContentType,e.FileSafeIntegrationContentTypeKey];this.componentManager.streamItems(n,(function(e){t.handleStreamItemsMessage(e)}))}},{key:"handleStreamItemsMessage",value:function(t){var n,r,i,s,a,c,u;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:n=!0,r=!1,i=void 0,l.prev=3,s=t[Symbol.iterator]();case 5:if(n=(a=s.next()).done){l.next=18;break}if(c=a.value,c=new o["SFItem"](c),!c.deleted){l.next=11;break}return this.removeItemFromItems(c),l.abrupt("continue",15);case 11:if(!c.isMetadataUpdate){l.next=13;break}return l.abrupt("continue",15);case 13:u=this.indexOfItem(c),u>=0?this.items[u]=c:this.items.push(c);case 15:n=!0,l.next=5;break;case 18:l.next=24;break;case 20:l.prev=20,l.t0=l["catch"](3),r=!0,i=l.t0;case 24:l.prev=24,l.prev=25,n||null==s["return"]||s["return"]();case 27:if(l.prev=27,!r){l.next=30;break}throw i;case 30:return l.finish(27);case 31:return l.finish(24);case 32:this.notifyObserversOfEvent(e.BridgeEventReceivedItems);case 33:case"end":return l.stop()}}),null,this,[[3,20,24,32],[25,,27,31]])}},{key:"indexOfItem",value:function(e){for(var t in this.items)if(this.items[t].uuid==e.uuid)return t;return-1}},{key:"removeItemFromItems",value:function(e){this.items=this.items.filter((function(t){return t.uuid!==e.uuid}))}},{key:"createItem",value:function(e,t){this.createItems([e],t)}},{key:"createItems",value:function(e,t){this.componentManager.createItems(e,(function(e){t&&t(e.map((function(e){return new o["SFItem"](e)})))}))}},{key:"saveItem",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.saveItems([e]));case 1:case"end":return t.stop()}}),null,this)}},{key:"saveItems",value:function(t){var n=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,i){n.componentManager.saveItems(t,(function(t){r(t),n.notifyObserversOfEvent(e.BridgeEventSavedItem)}))})));case 1:case"end":return r.stop()}}))}},{key:"indexOfItem",value:function(e){for(var t in this.items)if(this.items[t].uuid==e.uuid)return t;return-1}},{key:"deleteItem",value:function(e,t){this.deleteItems([e],t)}},{key:"deleteItems",value:function(e,t){this.componentManager.deleteItems(e,t)}},{key:"removeItemFromItems",value:function(e){this.items=this.items.filter((function(t){return t.uuid!==e.uuid}))}}]),e}();u(l,"FileItemContentTypeKey","SN|FileSafe|File"),u(l,"FileSafeCredentialsContentType","SN|FileSafe|Credentials"),u(l,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata"),u(l,"FileSafeIntegrationContentTypeKey","SN|FileSafe|Integration"),u(l,"BridgeEventLoadedCredentials","BridgeEventLoadedCredentials"),u(l,"BridgeEventReceivedItems","BridgeEventReceivedItems"),u(l,"BridgeEventSavedItem","BridgeEventSavedItem")},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",(function(){return d}));var r=n(2),i=n(7),o=n(8),s=n(9),a=n(10),c=n(12),u=n(0);n.n(u);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var d=function(){function e(t){var n=this,c=t.componentManager;l(this,e),this.dataChangeObservers=[],this.newFileDescriptorHandlers=[],this.extensionBridge=new r["a"](c),this.extensionBridge.addEventHandler((function(e){n.notifyObservers()})),this.relayManager=new i["a"],this.integrationManager=new o["a"](this.extensionBridge),this.credentialManager=new s["a"]({extensionBridge:this.extensionBridge,onCredentialLoad:function(){n.relayManager.setCredentials(n.credentialManager.getDefaultCredentials())}}),this.fileManager=new a["a"](this.extensionBridge,this.relayManager,this.integrationManager,this.credentialManager),this.extensionBridge.beginStreamingFiles()}return f(e,null,[{key:"getSFItemClass",value:function(){return u["SFItem"]}}]),f(e,[{key:"addNewFileDescriptorHandler",value:function(e){this.newFileDescriptorHandlers.push(e)}},{key:"notifyObservers",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.dataChangeObservers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o()}}catch(s){t=!0,n=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw n}}}},{key:"addDataChangeObserver",value:function(e){return this.dataChangeObservers.push(e),e}},{key:"removeDataChangeObserver",value:function(e){this.dataChangeObservers=this.dataChangeObservers.filter((function(t){return t!=e}))}},{key:"setCurrentNote",value:function(e){this.currentNote=e,this.notifyObservers()}},{key:"getAllFileDescriptors",value:function(){return this.fileManager.getAllFileDescriptors()}},{key:"findFileDescriptor",value:function(e){return this.fileManager.findFileDescriptor(e)}},{key:"fileDescriptorsForCurrentNote",value:function(){return this.fileManager.fileDescriptorsForNote(this.currentNote)}},{key:"fileDescriptorsForNote",value:function(e){return this.fileManager.fileDescriptorsForNote(e)}},{key:"fileDescriptorsEncryptedWithCredential",value:function(e){return this.fileManager.fileDescriptorsEncryptedWithCredential(e)}},{key:"deleteFileFromDescriptor",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fileManager.deleteFileFromDescriptor(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"uploadFile",value:function(e){var t,n,r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.async((function(d){while(1)switch(d.prev=d.next){case 0:return t=e.fileItem,n=e.inputFileName,r=e.fileType,i=e.credential,o=e.note,o||(o=this.currentNote),d.next=4,regeneratorRuntime.awrap(this.fileManager.uploadFile({fileItem:t,inputFileName:n,fileType:r,credential:i,note:o}));case 4:if(s=d.sent,!s){d.next=25;break}for(a=!0,c=!1,u=void 0,d.prev=9,l=this.newFileDescriptorHandlers[Symbol.iterator]();!(a=(h=l.next()).done);a=!0)f=h.value,f(s);d.next=17;break;case 13:d.prev=13,d.t0=d["catch"](9),c=!0,u=d.t0;case 17:d.prev=17,d.prev=18,a||null==l["return"]||l["return"]();case 20:if(d.prev=20,!c){d.next=23;break}throw u;case 23:return d.finish(20);case 24:return d.finish(17);case 25:return d.abrupt("return",s);case 26:case"end":return d.stop()}}),null,this,[[9,13,17,25],[18,,20,24]])}},{key:"encryptAndUploadJavaScriptFileObject",value:function(e){var t=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){var i=new FileReader;i.onload=function(r){var i,o,s,a;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:return i=r.target.result,o=i,c.next=4,regeneratorRuntime.awrap(SFJS.crypto.arrayBufferToBase64(o));case 4:return s=c.sent,c.next=7,regeneratorRuntime.awrap(t.encryptAndUploadData({base64Data:s,inputFileName:e.name,fileType:e.type}));case 7:a=c.sent,n(a);case 9:case"end":return c.stop()}}))},i.readAsArrayBuffer(e)})));case 1:case"end":return n.stop()}}))}},{key:"encryptAndUploadData",value:function(e){var t,n,r,i,o=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t=e.base64Data,n=e.inputFileName,r=e.fileType,i=this.getDefaultCredentials(),s.abrupt("return",this.encryptFile({data:t,inputFileName:n,fileType:r,credential:i}).then((function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o.uploadFile({fileItem:e,inputFileName:n,fileType:r,credential:i})["catch"]((function(e){console.error("filesafe-js | error uploading file:",e)})));case 1:case"end":return t.stop()}}))})));case 3:case"end":return s.stop()}}),null,this)}},{key:"downloadFileFromDescriptor",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fileManager.downloadFileFromDescriptor(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"encryptFile",value:function(e){var t,n,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=e.data,n=e.inputFileName,r=e.fileType,i=e.credential,o.abrupt("return",this.fileManager.encryptFile({data:t,inputFileName:n,fileType:r,credential:i}));case 2:case"end":return o.stop()}}),null,this)}},{key:"decryptFile",value:function(e){var t,n,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return t=e.fileDescriptor,n=e.fileItem,r=e.credential,i.abrupt("return",this.fileManager.decryptFile({fileDescriptor:t,fileItem:n,credential:r}));case 2:case"end":return i.stop()}}),null,this)}},{key:"downloadBase64Data",value:function(e){var t=e.base64Data,n=e.fileName,r=e.fileType;c["a"].downloadData(c["a"].base64toBinary(t),n,r)}},{key:"createTemporaryFileUrl",value:function(e){var t=e.base64Data,n=e.dataType;return c["a"].tempUrlForData(c["a"].base64toBinary(t),n)}},{key:"revokeTempUrl",value:function(e){c["a"].revokeTempUrl(e)}},{key:"createNewCredentials",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.credentialManager.createNewCredentials());case 1:case"end":return e.stop()}}),null,this)}},{key:"numberOfFilesEncryptedWithCredential",value:function(e){return this.fileManager.fileDescriptorsEncryptedWithCredential(e).length}},{key:"credentialForFileDescriptor",value:function(e){return this.credentialManager.credentialForFileDescriptor(e)}},{key:"getAllCredentials",value:function(){return this.credentialManager.getAllCredentials()}},{key:"getDefaultCredentials",value:function(){return this.credentialManager.getDefaultCredentials()}},{key:"setCredentialAsDefault",value:function(e){return this.credentialManager.setCredentialAsDefault(e)}},{key:"deleteCredential",value:function(e){return this.credentialManager.deleteCredential(e)}},{key:"saveCredential",value:function(e){return this.credentialManager.saveCredential(e)}},{key:"getAllIntegrations",value:function(){return this.integrationManager.integrations}},{key:"integrationForFileDescriptor",value:function(e){return this.integrationManager.integrationForFileDescriptor(e)}},{key:"saveIntegrationFromCode",value:function(e){return this.integrationManager.saveIntegrationFromCode(e)}},{key:"getDefaultIntegration",value:function(){return this.integrationManager.getDefaultIntegration()}},{key:"setIntegrationAsDefault",value:function(e){return this.integrationManager.setIntegrationAsDefault(e)}},{key:"deleteIntegration",value:function(e){return this.integrationManager.deleteIntegration(e)}},{key:"displayStringForIntegration",value:function(e){return this.integrationManager.displayStringForIntegration(e)}},{key:"base64toBinary",value:function(e){return c["a"].base64toBinary(e)}},{key:"isMobile",value:function(){return this.extensionBridge.isMobile()}},{key:"getEnvironment",value:function(){return this.extensionBridge.getEnvironment()}},{key:"getPlatform",value:function(){return this.extensionBridge.getPlatform()}},{key:"copyTextToClipboard",value:function(e){return c["a"].copyTextToClipboard(e)}}]),e}()},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash include="includes,merge,filter,map,remove,find,omit,pull,cloneDeep,pick,uniq,sortedIndexBy,mergeWith"`
 */(function(){function o(e,t){return e.set(t[0],t[1]),e}function s(e,t){return e.add(t),e}function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function c(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}function u(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function l(e,t){return!(null==e||!e.length)&&-1<v(e,t,0)}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function f(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function d(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)n=t(n,e[r],r,e);return n}function p(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function m(e,t,n){var r=e.length;for(n+=-1;++n<r;)if(t(e[n],n,e))return n;return-1}function v(e,t,n){if(t===t)e:{--n;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=m(e,g,n);return e}function g(e){return e!==e}function y(e){return function(t){return null==t?dt:t[e]}}function b(e){return function(t){return e(t)}}function w(e,t){return h(t,(function(t){return e[t]}))}function k(e,t){return e.has(t)}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function x(e){var t=Object;return function(n){return e(t(n))}}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function C(){}function O(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new E;++t<n;)this.add(e[t])}function T(e){this.size=(this.__data__=new M(e)).size}function R(e,t){var n=$n(e),r=!n&&zn(e),i=!n&&!r&&Un(e),o=!n&&!r&&!i&&Hn(e);if(n=n||r||i||o){r=e.length;for(var s=String,a=-1,c=Array(r);++a<r;)c[a]=s(a);r=c}else r=[];var u;s=r.length;for(u in e)!t&&!Vt.call(e,u)||n&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ee(u,s))||r.push(u);return r}function D(e,t,n){(n===dt||ze(e[t],n))&&(n!==dt||t in e)||L(e,t,n)}function I(e,t,n){var r=e[t];Vt.call(e,t)&&ze(r,n)&&(n!==dt||t in e)||L(e,t,n)}function N(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}function P(e,t){return e&&le(t,rt(t),e)}function j(e,t){return e&&le(t,it(t),e)}function L(e,t,n){"__proto__"==t&&sn?sn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function F(e,t,n,r,i,o){var s,a=1&t,u=2&t,l=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),s!==dt)return s;if(!We(e))return e;if(r=$n(e)){if(s=_e(e),!a)return ue(e,s)}else{var h=Pn(e),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(Un(e))return se(e,a);if("[object Object]"==h||"[object Arguments]"==h||f&&!i){if(s=u||f?{}:Ce(e),!a)return u?fe(e,j(s,e)):he(e,P(s,e))}else{if(!At[h])return i?e:{};s=Oe(e,h,F,a)}}if(o||(o=new T),i=o.get(e))return i;o.set(e,s);u=l?u?be:ye:u?it:rt;var d=r?dt:u(e);return c(d||e,(function(r,i){d&&(i=r,r=e[i]),I(s,i,F(r,t,n,i,e,o))})),s}function B(e,t){var n=[];return An(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function z(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=Me),i||(i=[]);++o<s;){var a=e[o];0<t&&n(a)?1<t?z(a,t-1,n,r,i):f(i,a):r||(i[i.length]=a)}return i}function $(e,t){t=oe(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Ie(t[n++])];return n&&n==r?e:dt}function U(e,t,n){return t=t(e),$n(e)?t:f(t,n(e))}function H(e){if(null==e)e=e===dt?"[object Undefined]":"[object Null]";else if(on&&on in Object(e)){var t=Vt.call(e,on),n=e[on];try{e[on]=dt;var r=!0}catch(e){}var i=qt.call(e);r&&(t?e[on]=n:delete e[on]),e=i}else e=qt.call(e);return e}function V(e){return qe(e)&&"[object Arguments]"==H(e)}function W(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!qe(e)&&!qe(t))t=e!==e&&t!==t;else e:{var o=$n(e),s=$n(t),a=o?"[object Array]":Pn(e),c=s?"[object Array]":Pn(t),u=(a="[object Arguments]"==a?"[object Object]":a,c="[object Arguments]"==c?"[object Object]":c,"[object Object]"==a);s="[object Object]"==c;if((c=a==c)&&Un(e)){if(!Un(t)){t=!1;break e}o=!0,u=!1}if(c&&!u)i||(i=new T),t=o||Hn(e)?me(e,t,n,r,W,i):ve(e,t,a,n,r,W,i);else{if(!(1&n)&&(o=u&&Vt.call(e,"__wrapped__"),a=s&&Vt.call(t,"__wrapped__"),o||a)){e=o?e.value():e,t=a?t.value():t,i||(i=new T),t=W(e,t,n,r,i);break e}if(c)t:if(i||(i=new T),o=1&n,a=ye(e),s=a.length,c=ye(t).length,s==c||o){for(u=s;u--;){var l=a[u];if(!(o?l in t:Vt.call(t,l))){t=!1;break t}}if((c=i.get(e))&&i.get(t))t=c==t;else{c=!0,i.set(e,t),i.set(t,e);for(var h=o;++u<s;){l=a[u];var f=e[l],d=t[l];if(r)var p=o?r(d,f,l,t,e,i):r(f,d,l,e,t,i);if(p===dt?f!==d&&!W(f,d,n,r,i):!p){c=!1;break}h||(h="constructor"==l)}c&&!h&&(n=e.constructor,r=t.constructor,n!=r&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(c=!1)),i.delete(e),i.delete(t),t=c}}else t=!1;else t=!1}}return t}function q(e,t){var n=t.length,r=n;if(null==e)return!r;for(e=Object(e);n--;){var i=t[n];if(i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++n<r;){i=t[n];var o=i[0],s=e[o],a=i[1];if(i[2]){if(s===dt&&!(o in e))return!1}else if(i=new T,void 0!==dt||!W(a,s,3,void 0,i))return!1}return!0}function K(e){return qe(e)&&Ve(e.length)&&!!Et[H(e)]}function J(e){return"function"==typeof e?e:null==e?at:"object"==typeof e?$n(e)?X(e[0],e[1]):G(e):lt(e)}function Y(e,t){var n=-1,r=$e(e)?Array(e.length):[];return An(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function G(e){var t=Se(e);return 1==t.length&&t[0][2]?Re(t[0][0],t[0][1]):function(n){return n===e||q(n,t)}}function X(e,t){return Ae(e)&&t===t&&!We(t)?Re(Ie(e),t):function(n){var r=tt(n,e);return r===dt&&r===t?nt(n,e):W(t,r,3)}}function Q(e,t,n,r,i){e!==t&&Tn(t,(function(o,s){if(We(o)){i||(i=new T);var a=i,c=e[s],u=t[s],l=a.get(u);if(l)D(e,s,l);else{l=r?r(c,u,s+"",e,t,a):dt;var h=l===dt;if(h){var f=$n(u),d=!f&&Un(u),p=!f&&!d&&Hn(u);l=u;f||d||p?$n(c)?l=c:Ue(c)?l=ue(c):d?(h=!1,l=se(u,!0)):p?(h=!1,l=ce(u,!0)):l=[]:Ke(u)||zn(u)?(l=c,zn(c)?l=Ze(c):(!We(c)||n&&He(c))&&(l=Ce(u))):h=!1}h&&(a.set(u,l),Q(l,u,n,r,a),a.delete(u)),D(e,s,l)}}else a=r?r(e[s],o,s+"",e,t,i):dt,a===dt&&(a=o),D(e,s,a)}),it)}function Z(e,t){return ee(e,t,(function(t,n){return nt(e,n)}))}function ee(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=$(e,s);if(n(a,s)){var c=o;s=oe(s,e);if(We(c)){s=oe(s,c);for(var u=-1,l=s.length,h=l-1;null!=c&&++u<l;){var f=Ie(s[u]),d=a;if(u!=h){var p=c[f];d=dt;d===dt&&(d=We(p)?p:Ee(s[u+1])?[]:{})}I(c,f,d),c=c[f]}}}}return o}function te(e){return function(t){return $(t,e)}}function ne(e){return jn(De(e,void 0,at),e+"")}function re(e){if("string"==typeof e)return e;if($n(e))return h(e,re)+"";if(Ye(e))return Mn?Mn.call(e):"";var t=e+"";return"0"==t&&1/e==-pt?"-0":t}function ie(e,t){var n;if(t=oe(t,e),2>t.length)n=e;else{n=t;var r=0,i=-1,o=-1,s=n.length;for(0>r&&(r=-r>s?0:s+r),i=i>s?s:i,0>i&&(i+=s),s=r>i?0:i-r>>>0,r>>>=0,i=Array(s);++o<s;)i[o]=n[o+r];n=$(e,i)}e=n,null==e||delete e[Ie(Le(t))]}function oe(e,t){return $n(e)?e:Ae(e,t)?[e]:Ln(et(e))}function se(e,t){if(t)return e.slice();var n=e.length;n=Qt?Qt(n):new e.constructor(n);return e.copy(n),n}function ae(e){var t=new e.constructor(e.byteLength);return new Xt(t).set(new Xt(e)),t}function ce(e,t){return new e.constructor(t?ae(e.buffer):e.buffer,e.byteOffset,e.length)}function ue(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function le(e,t,n){var r=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=dt;a===dt&&(a=e[s]),r?L(n,s,a):I(n,s,a)}return n}function he(e,t){return le(e,In(e),t)}function fe(e,t){return le(e,Nn(e),t)}function de(e){return ne((function(t,n){var r,i=-1,o=n.length,s=1<o?n[o-1]:dt,a=2<o?n[2]:dt;s=3<e.length&&"function"==typeof s?(o--,s):dt;if(r=a){r=n[0];var c=n[1];if(We(a)){var u=typeof c;r=!!("number"==u?$e(a)&&Ee(c,a.length):"string"==u&&c in a)&&ze(a[c],r)}else r=!1}for(r&&(s=3>o?dt:s,o=1),t=Object(t);++i<o;)(a=n[i])&&e(t,a,i,s);return t}))}function pe(e){return Ke(e)?dt:e}function me(e,t,n,r,i,o){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;if((c=o.get(e))&&o.get(t))return c==t;c=-1;var u=!0,l=2&n?new A:dt;for(o.set(e,t),o.set(t,e);++c<a;){var h=e[c],f=t[c];if(r)var d=s?r(f,h,c,t,e,o):r(h,f,c,e,t,o);if(d!==dt){if(d)continue;u=!1;break}if(l){if(!p(t,(function(e,t){if(!k(l,t)&&(h===e||i(h,e,n,r,o)))return l.push(t)}))){u=!1;break}}else if(h!==f&&!i(h,f,n,r,o)){u=!1;break}}return o.delete(e),o.delete(t),u}function ve(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new Xt(e),new Xt(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return ze(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=S;case"[object Set]":if(a||(a=_),e.size!=t.size&&!(1&r))break;return(n=s.get(e))?n==t:(r|=2,s.set(e,t),t=me(a(e),a(t),r,i,o,s),s.delete(e),t);case"[object Symbol]":if(On)return On.call(e)==On.call(t)}return!1}function ge(e){return jn(De(e,dt,je),e+"")}function ye(e){return U(e,rt,In)}function be(e){return U(e,it,Nn)}function we(){var e=C.iteratee||ct;e=e===ct?J:e;return arguments.length?e(arguments[0],arguments[1]):e}function ke(e,t){var n=e.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function Se(e){for(var t=rt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i===i&&!We(i)]}return t}function xe(e,t){var n=null==e?dt:e[t];return!We(n)||Wt&&Wt in n||!(He(n)?Jt:Ct).test(Ne(n))?dt:n}function _e(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Vt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Ce(e){return"function"!=typeof e.constructor||Te(e)?{}:En(Zt(e))}function Oe(e,t,n,r){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return ae(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return t=r?ae(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ce(e,r);case"[object Map]":return t=r?n(S(e),1):S(e),d(t,o,new e.constructor);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return t=new e.constructor(e.source,St.exec(e)),t.lastIndex=e.lastIndex,t;case"[object Set]":return t=r?n(_(e),1):_(e),d(t,s,new e.constructor);case"[object Symbol]":return On?Object(On.call(e)):{}}}function Me(e){return $n(e)||zn(e)||!!(rn&&e&&e[rn])}function Ee(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||Mt.test(e))&&-1<e&&0==e%1&&e<t}function Ae(e,t){if($n(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ye(e))||gt.test(e)||!vt.test(e)||null!=t&&e in Object(t)}function Te(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$t)}function Re(e,t){return function(n){return null!=n&&n[e]===t&&(t!==dt||e in Object(n))}}function De(e,t,n){return t=hn(t===dt?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=hn(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];for(i=-1,o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),a(e,this,o)}}function Ie(e){if("string"==typeof e||Ye(e))return e;var t=e+"";return"0"==t&&1/e==-pt?"-0":t}function Ne(e){if(null!=e){try{return Ht.call(e)}catch(e){}return e+""}return""}function Pe(e,t,n){var r=null==e?0:e.length;return r?(n=null==n?0:Xe(n),0>n&&(n=hn(r+n,0)),m(e,we(t,3),n)):-1}function je(e){return null!=e&&e.length?z(e,1):[]}function Le(e){var t=null==e?0:e.length;return t?e[t-1]:dt}function Fe(e,t){var n;if(e&&e.length&&t&&t.length){n=t;var r=v,i=-1,o=n.length;for(e===n&&(n=ue(n));++i<o;)for(var s=0,a=n[i];-1<(s=r(e,a,s,void 0));)e!==e&&nn.call(e,s,1),nn.call(e,s,1);n=e}else n=e;return n}function Be(e,t){function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");return n.cache=new(Be.Cache||E),n}function ze(e,t){return e===t||e!==e&&t!==t}function $e(e){return null!=e&&Ve(e.length)&&!He(e)}function Ue(e){return qe(e)&&$e(e)}function He(e){return!!We(e)&&(e=H(e),"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Ve(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function We(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}function Ke(e){return!(!qe(e)||"[object Object]"!=H(e))&&(e=Zt(e),null===e||(e=Vt.call(e,"constructor")&&e.constructor,"function"==typeof e&&e instanceof e&&Ht.call(e)==Kt))}function Je(e){return"string"==typeof e||!$n(e)&&qe(e)&&"[object String]"==H(e)}function Ye(e){return"symbol"==typeof e||qe(e)&&"[object Symbol]"==H(e)}function Ge(e){return e?(e=Qe(e),e===pt||e===-pt?17976931348623157e292*(0>e?-1:1):e===e?e:0):0===e?e:0}function Xe(e){e=Ge(e);var t=e%1;return e===e?t?e-t:e:0}function Qe(e){if("number"==typeof e)return e;if(Ye(e))return mt;if(We(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=We(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(wt,"");var t=_t.test(e);return t||Ot.test(e)?Rt(e.slice(2),t?2:8):xt.test(e)?mt:+e}function Ze(e){return le(e,it(e))}function et(e){return null==e?"":re(e)}function tt(e,t,n){return e=null==e?dt:$(e,t),e===dt?n:e}function nt(e,t){var n;if(n=null!=e){var r;n=e,r=oe(t,n);for(var i=-1,o=r.length,s=!1;++i<o;){var a=Ie(r[i]);if(!(s=null!=n&&null!=n&&a in Object(n)))break;n=n[a]}s||++i!=o?n=s:(o=null==n?0:n.length,n=!!o&&Ve(o)&&Ee(a,o)&&($n(n)||zn(n)))}return n}function rt(e){if($e(e))e=R(e);else if(Te(e)){var t,n=[];for(t in Object(e))Vt.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=ln(e);return e}function it(e){if($e(e))e=R(e,!0);else if(We(e)){var t,n=Te(e),r=[];for(t in e)("constructor"!=t||!n&&Vt.call(e,t))&&r.push(t);e=r}else{if(t=[],null!=e)for(n in Object(e))t.push(n);e=t}return e}function ot(e){return null==e?[]:w(e,rt(e))}function st(e){return function(){return e}}function at(e){return e}function ct(e){return J("function"==typeof e?e:F(e,1))}function ut(){}function lt(e){return Ae(e)?y(Ie(e)):te(e)}function ht(){return[]}function ft(){return!1}var dt,pt=1/0,mt=NaN,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gt=/^\w*$/,yt=/^\./,bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wt=/^\s+|\s+$/g,kt=/\\(\\)?/g,St=/\w*$/,xt=/^[-+]0x[0-9a-f]+$/i,_t=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,Ot=/^0o[0-7]+$/i,Mt=/^(?:0|[1-9]\d*)$/,Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1;var At={};At["[object Arguments]"]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object DataView]"]=At["[object Boolean]"]=At["[object Date]"]=At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object Symbol]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Error]"]=At["[object Function]"]=At["[object WeakMap]"]=!1;var Tt,Rt=parseInt,Dt="object"==typeof e&&e&&e.Object===Object&&e,It="object"==typeof self&&self&&self.Object===Object&&self,Nt=Dt||It||Function("return this")(),Pt="object"==typeof t&&t&&!t.nodeType&&t,jt=Pt&&"object"==typeof r&&r&&!r.nodeType&&r,Lt=jt&&jt.exports===Pt,Ft=Lt&&Dt.process;e:{try{Tt=Ft&&Ft.binding&&Ft.binding("util");break e}catch(o){}Tt=void 0}var Bt=Tt&&Tt.isTypedArray,zt=Array.prototype,$t=Object.prototype,Ut=Nt["__core-js_shared__"],Ht=Function.prototype.toString,Vt=$t.hasOwnProperty,Wt=function(){var e=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),qt=$t.toString,Kt=Ht.call(Object),Jt=RegExp("^"+Ht.call(Vt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yt=Lt?Nt.Buffer:dt,Gt=Nt.Symbol,Xt=Nt.Uint8Array,Qt=Yt?Yt.a:dt,Zt=x(Object.getPrototypeOf),en=Object.create,tn=$t.propertyIsEnumerable,nn=zt.splice,rn=Gt?Gt.isConcatSpreadable:dt,on=Gt?Gt.toStringTag:dt,sn=function(){try{var e=xe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),an=Math.floor,cn=Object.getOwnPropertySymbols,un=Yt?Yt.isBuffer:dt,ln=x(Object.keys),hn=Math.max,fn=Math.min,dn=Date.now,pn=xe(Nt,"DataView"),mn=xe(Nt,"Map"),vn=xe(Nt,"Promise"),gn=xe(Nt,"Set"),yn=xe(Nt,"WeakMap"),bn=xe(Object,"create"),wn=Ne(pn),kn=Ne(mn),Sn=Ne(vn),xn=Ne(gn),_n=Ne(yn),Cn=Gt?Gt.prototype:dt,On=Cn?Cn.valueOf:dt,Mn=Cn?Cn.toString:dt,En=function(){function e(){}return function(t){return We(t)?en?en(t):(e.prototype=t,t=new e,e.prototype=dt,t):{}}}();O.prototype.clear=function(){this.__data__=bn?bn(null):{},this.size=0},O.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},O.prototype.get=function(e){var t=this.__data__;return bn?(e=t[e],"__lodash_hash_undefined__"===e?dt:e):Vt.call(t,e)?t[e]:dt},O.prototype.has=function(e){var t=this.__data__;return bn?t[e]!==dt:Vt.call(t,e)},O.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bn&&t===dt?"__lodash_hash_undefined__":t,this},M.prototype.clear=function(){this.__data__=[],this.size=0},M.prototype.delete=function(e){var t=this.__data__;return e=N(t,e),!(0>e)&&(e==t.length-1?t.pop():nn.call(t,e,1),--this.size,!0)},M.prototype.get=function(e){var t=this.__data__;return e=N(t,e),0>e?dt:t[e][1]},M.prototype.has=function(e){return-1<N(this.__data__,e)},M.prototype.set=function(e,t){var n=this.__data__,r=N(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this},E.prototype.clear=function(){this.size=0,this.__data__={hash:new O,map:new(mn||M),string:new O}},E.prototype.delete=function(e){return e=ke(this,e).delete(e),this.size-=e?1:0,e},E.prototype.get=function(e){return ke(this,e).get(e)},E.prototype.has=function(e){return ke(this,e).has(e)},E.prototype.set=function(e,t){var n=ke(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},A.prototype.add=A.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},A.prototype.has=function(e){return this.__data__.has(e)},T.prototype.clear=function(){this.__data__=new M,this.size=0},T.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},T.prototype.get=function(e){return this.__data__.get(e)},T.prototype.has=function(e){return this.__data__.has(e)},T.prototype.set=function(e,t){var n=this.__data__;if(n instanceof M){var r=n.__data__;if(!mn||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new E(r)}return n.set(e,t),this.size=n.size,this};var An=function(e,t){return function(n,r){if(null==n)return n;if(!$e(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}((function(e,t){return e&&Tn(e,t,rt)})),Tn=function(e){return function(t,n,r){var i=-1,o=Object(t);r=r(t);for(var s=r.length;s--;){var a=r[e?s:++i];if(!1===n(o[a],a,o))break}return t}}(),Rn=sn?function(e,t){return sn(e,"toString",{configurable:!0,enumerable:!1,value:st(t),writable:!0})}:at,Dn=gn&&1/_(new gn([,-0]))[1]==pt?function(e){return new gn(e)}:ut,In=cn?function(e){return null==e?[]:(e=Object(e),u(cn(e),(function(t){return tn.call(e,t)})))}:ht,Nn=cn?function(e){for(var t=[];e;)f(t,In(e)),e=Zt(e);return t}:ht,Pn=H;(pn&&"[object DataView]"!=Pn(new pn(new ArrayBuffer(1)))||mn&&"[object Map]"!=Pn(new mn)||vn&&"[object Promise]"!=Pn(vn.resolve())||gn&&"[object Set]"!=Pn(new gn)||yn&&"[object WeakMap]"!=Pn(new yn))&&(Pn=function(e){var t=H(e);if(e=(e="[object Object]"==t?e.constructor:dt)?Ne(e):"")switch(e){case wn:return"[object DataView]";case kn:return"[object Map]";case Sn:return"[object Promise]";case xn:return"[object Set]";case _n:return"[object WeakMap]"}return t});var jn=function(e){var t=0,n=0;return function(){var r=dn(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(dt,arguments)}}(Rn),Ln=function(e){e=Be(e,(function(e){return 500===t.size&&t.clear(),e}));var t=e.cache;return e}((function(e){var t=[];return yt.test(e)&&t.push(""),e.replace(bt,(function(e,n,r,i){t.push(r?i.replace(kt,"$1"):n||e)})),t})),Fn=ne(Fe),Bn=function(e){return function(t,n,r){var i=Object(t);if(!$e(t)){var o=we(n,3);t=rt(t),n=function(e){return o(i[e],e,i)}}return n=e(t,n,r),-1<n?i[o?t[n]:n]:dt}}(Pe);Be.Cache=E;var zn=V(function(){return arguments}())?V:function(e){return qe(e)&&Vt.call(e,"callee")&&!tn.call(e,"callee")},$n=Array.isArray,Un=un||ft,Hn=Bt?b(Bt):K,Vn=de((function(e,t,n){Q(e,t,n)})),Wn=de((function(e,t,n,r){Q(e,t,n,r)})),qn=ge((function(e,t){var n={};if(null==e)return n;var r=!1;t=h(t,(function(t){return t=oe(t,e),r||(r=1<t.length),t})),le(e,be(e),n),r&&(n=F(n,7,pe));for(var i=t.length;i--;)ie(n,t[i]);return n})),Kn=ge((function(e,t){return null==e?{}:Z(e,t)}));C.constant=st,C.filter=function(e,t){return($n(e)?u:B)(e,we(t,3))},C.flatten=je,C.iteratee=ct,C.keys=rt,C.keysIn=it,C.map=function(e,t){return($n(e)?h:Y)(e,we(t,3))},C.memoize=Be,C.merge=Vn,C.mergeWith=Wn,C.omit=qn,C.pick=Kn,C.property=lt,C.pull=Fn,C.pullAll=Fe,C.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=we(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}for(r=e?i.length:0,o=r-1;r--;)if(s=i[r],r==o||s!==a){var a=s;Ee(s)?nn.call(e,s,1):ie(e,s)}return n},C.toPlainObject=Ze,C.uniq=function(e){if(e&&e.length)e:{var t=-1,n=l,r=e.length,i=!0,o=[],s=o;if(200<=r){if(n=Dn(e)){e=_(n);break e}i=!1,n=k,s=new A}else s=o;t:for(;++t<r;){var a=e[t],c=a;a=0!==a?a:0;if(i&&c===c){for(var u=s.length;u--;)if(s[u]===c)continue t;o.push(a)}else n(s,c,void 0)||(s!==o&&s.push(c),o.push(a))}e=o}else e=[];return e},C.values=ot,C.cloneDeep=function(e){return F(e,5)},C.eq=ze,C.find=Bn,C.findIndex=Pe,C.get=tt,C.hasIn=nt,C.identity=at,C.includes=function(e,t,n,r){return e=$e(e)?e:ot(e),n=n&&!r?Xe(n):0,r=e.length,0>n&&(n=hn(r+n,0)),Je(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<v(e,t,n)},C.isArguments=zn,C.isArray=$n,C.isArrayLike=$e,C.isArrayLikeObject=Ue,C.isBuffer=Un,C.isFunction=He,C.isLength=Ve,C.isObject=We,C.isObjectLike=qe,C.isPlainObject=Ke,C.isString=Je,C.isSymbol=Ye,C.isTypedArray=Hn,C.last=Le,C.stubArray=ht,C.stubFalse=ft,C.noop=ut,C.sortedIndexBy=function(e,t,n){n=we(n,2),t=n(t);for(var r=0,i=null==e?0:e.length,o=t!==t,s=null===t,a=Ye(t),c=t===dt;r<i;){var u=an((r+i)/2),l=n(e[u]),h=l!==dt,f=null===l,d=l===l,p=Ye(l);(o?d:c?d&&h:s?d&&h&&!f:a?d&&h&&!f&&!p:!f&&!p&&l<t)?r=u+1:i=u}return fn(i,4294967294)},C.toFinite=Ge,C.toInteger=Xe,C.toNumber=Qe,C.toString=et,C.VERSION="4.17.4",Nt._=C,i=function(){return C}.call(t,n,t,r),void 0===i||(r.exports=i)}).call(this)}).call(t,n(3),n(6)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),i=(n.n(r),n(0));n.n(i);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c=function(){function e(){o(this,e),this.httpManger=new i["SFHttpManager"],this.httpManger.setJWTRequestHandler((function(){}))}return a(e,[{key:"setCredentials",value:function(e){this.credentials=e}},{key:"uploadFile",value:function(e,t,n){var r,i,o=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return r="".concat(n.content.relayUrl,"/integrations/save-item"),i={file:{name:e,item:t},source:n.content.source,authorization:n.content.authorization},s.abrupt("return",new Promise((function(e,t){o.httpManger.postAbsolute(r,i,(function(t){e(t.metadata)}),(function(e){var n=e.error;n||(n={message:"File upload failed."}),console.log("Upload error response",n),t(n)}))})));case 3:case"end":return s.stop()}}))}},{key:"downloadFile",value:function(e,t){var n,r,i=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return n="".concat(t.content.relayUrl,"/integrations/download-item"),r={metadata:e.content.serverMetadata,authorization:t.content.authorization},o.abrupt("return",new Promise((function(e,t){i.httpManger.postAbsolute(n,r,(function(t){e(t)}),(function(e){var n=e.error;console.log("Download error response",e),t(n)}))})));case 3:case"end":return o.stop()}}))}},{key:"deleteFile",value:function(e,t){var n,r,i=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return n="".concat(t.content.relayUrl,"/integrations/delete-item"),r={metadata:e.content.serverMetadata,authorization:t.content.authorization},o.abrupt("return",new Promise((function(e,t){i.httpManger.postAbsolute(n,r,(function(t){e(t)}),(function(e){var n=e.error;console.log("Download error response",e),t(n)}))})));case 3:case"end":return o.stop()}}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),i=(n.n(r),n(0)),o=(n.n(i),n(2));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=function(){function e(t){s(this,e),this.extensionBridge=t}return c(e,[{key:"integrationForFileDescriptor",value:function(e){return this.integrations.find((function(t){return e.content.serverMetadata&&t.content.source==e.content.serverMetadata.source}))}},{key:"parseIntegrationCode",value:function(e){var t=atob(e),n=JSON.parse(t);return n.rawCode=e,n}},{key:"saveIntegrationFromCode",value:function(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=this.parseIntegrationCode(e),0==this.integrations.length&&(t.isDefaultUploadSource=!0),n=this.createAndSaveIntegrationObject(t),r.abrupt("return",n);case 4:case"end":return r.stop()}}),null,this)}},{key:"createAndSaveIntegrationObject",value:function(e){var t=new i["SFItem"]({content_type:o["a"].FileSafeIntegrationContentTypeKey,content:e});return this.extensionBridge.createItems([t]),t}},{key:"getDefaultIntegration",value:function(){return this.integrations.find((function(e){return e.content.isDefaultUploadSource}))}},{key:"setIntegrationAsDefault",value:function(e){var t=[e],n=this.getDefaultIntegration();n&&(n.content.isDefaultUploadSource=!1,t.push(n)),e.content.isDefaultUploadSource=!0,this.extensionBridge.saveItems(t)}},{key:"displayStringForIntegration",value:function(e){var t=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n=e.content.source.split("_"),r="",i=0,o=!0,s=!1,a=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;r+=t(l),i<n.length-1&&(r+=" "),i++}}catch(h){s=!0,a=h}finally{try{o||null==u["return"]||u["return"]()}finally{if(s)throw a}}return r}},{key:"deleteIntegration",value:function(e){var t=this,n=e.content.isDefaultUploadSource;this.extensionBridge.deleteItem(e,(function(r){if(r.deleted&&n&&t.integrations.length>0){var i=!0,o=!1,s=void 0;try{for(var a,c=t.integrations[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;if(u!=e){t.setIntegrationAsDefault(u);break}}}catch(l){o=!0,s=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw s}}}}))}},{key:"integrations",get:function(){return this.extensionBridge.filterItems(o["a"].FileSafeIntegrationContentTypeKey)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),i=(n.n(r),n(0)),o=(n.n(i),n(2));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this,r=t.extensionBridge,i=t.onCredentialLoad;s(this,e),u(this,"getDefaultCredentials",(function(){var e=n.credentials.find((function(e){return e.content.isDefault}));return!e&&n.credentials.length>0&&(e=n.credentials[0]),e})),u(this,"setCredentialAsDefault",(function(e){var t=n.getDefaultCredentials();t&&(t.content.isDefault=!1),e.content.isDefault=!0,n.extensionBridge.saveItems([t,e])})),u(this,"deleteCredential",(function(e){n.extensionBridge.deleteItem(e)})),this.extensionBridge=r,this.onCredentialLoad=i,this.credentials=[],this.extensionBridge.addEventHandler((function(e){e==o["a"].BridgeEventReceivedItems&&n.reloadCredentials()}))}return c(e,[{key:"reloadCredentials",value:function(){this.credentials=[];var e=this.extensionBridge.filterItems(o["a"].FileSafeCredentialsContentType);if(0!=e.length){var t=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var a=i.value;this.credentials.find((function(e){return e.uuid==a.uuid}))||this.credentials.push(a)}}catch(c){n=!0,r=c}finally{try{t||null==s["return"]||s["return"]()}finally{if(n)throw r}}this.onCredentialLoad(),this.credentials.length>0&&this.didLoadCredentials()}}},{key:"createNewCredentials",value:function(){var e,t,n,r,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=256,a.next=3,regeneratorRuntime.awrap(SFJS.crypto.generateRandomKey(e));case 3:return t=a.sent,a.next=6,regeneratorRuntime.awrap(SFJS.crypto.generateRandomKey(e));case 6:return n=a.sent,a.next=9,regeneratorRuntime.awrap(SFJS.crypto.generateInitialKeysAndAuthParamsForUser(t,n));case 9:return r=a.sent,r.isDefault=0==this.credentials.length,s=new i["SFItem"]({content_type:o["a"].FileSafeCredentialsContentType,content:r}),this.extensionBridge.saveItem(s),this.didLoadCredentials(),a.abrupt("return",s);case 15:case"end":return a.stop()}}),null,this)}},{key:"didLoadCredentials",value:function(){this.extensionBridge.notifyObserversOfEvent(o["a"].BridgeEventLoadedCredentials)}},{key:"credentialForFileDescriptor",value:function(e){return this.credentials.find((function(t){return e.content.references.find((function(e){return e.uuid==t.uuid}))}))}},{key:"getAllCredentials",value:function(){return this.credentials}},{key:"saveCredential",value:function(e){this.extensionBridge.saveItem(e)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(1),i=(n.n(r),n(0)),o=(n.n(i),n(11)),s=n.n(o),a=n(2);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t,n,r,i){c(this,e),this.extensionBridge=t,this.relayManager=n,this.integrationManager=r,this.credentialManager=i}return l(e,[{key:"getAllFileDescriptors",value:function(){return this.extensionBridge.getFileDescriptors()}},{key:"fileDescriptorsForNote",value:function(e){return e?this.extensionBridge.getFileDescriptors().filter((function(t){return t.hasRelationshipWithItem(e)})):[]}},{key:"findFileDescriptor",value:function(e){return this.extensionBridge.getFileDescriptors().find((function(t){return t.uuid==e}))}},{key:"fileDescriptorsEncryptedWithCredential",value:function(e){var t=this.extensionBridge.getFileDescriptors();return t.filter((function(t){return t.content.references.find((function(t){return t.uuid==e.uuid}))}))}},{key:"deleteFileFromDescriptor",value:function(e){var t=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){t.extensionBridge.deleteItems([e],(function(r){if(r.deleted){var i=t.integrationManager.integrationForFileDescriptor(e);i&&t.relayManager.deleteFile(e,i).then((function(e){n()}))}else n(r)}))})));case 1:case"end":return n.stop()}}))}},{key:"uploadFile",value:function(e){var t,n,r,o,c,u,l,h=this;return regeneratorRuntime.async((function(f){while(1)switch(f.prev=f.next){case 0:return t=e.fileItem,n=e.inputFileName,r=e.fileType,o=e.credential,c=e.note,u=this.integrationManager.getDefaultIntegration(),n.split(".")[1],l="".concat(t.uuid,".sf.json"),f.abrupt("return",new Promise((function(e,f){var d=new s.a;d.addEventListener("message",(function(t){var s=t.data;if(s.error)return console.log("Error uploading file",s.error),void f(s.error);var u=new i["SFItem"]({content_type:a["a"].FileDescriptorContentTypeKey,content:{serverMetadata:t.data.metadata,fileName:n,fileType:r}});c&&u.addItemAsRelationship(c),u.addItemAsRelationship(o),h.extensionBridge.createItem(u,(function(t){e(t[0])}))}));var p="upload",m={outputFileName:l,fileItem:t,integration:u,operation:p,credentials:h.credentialManager.getDefaultCredentials()};d.postMessage(m)})));case 5:case"end":return f.stop()}}),null,this)}},{key:"downloadFileFromDescriptor",value:function(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(t=this.integrationManager.integrationForFileDescriptor(e),t){r.next=6;break}throw n=e.content.serverMetadata,n?alert("Unable to find integration named '".concat(n.source,"'.")):alert("Unable to find integration for this file."),"Unable to find integration";case 6:return r.abrupt("return",this.relayManager.downloadFile(e,t).then((function(e){var t=e.items[0];return t})));case 7:case"end":return r.stop()}}),null,this)}},{key:"encryptFile",value:function(e){var t,n,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=e.data,n=e.inputFileName,r=e.fileType,i=e.credential,o.abrupt("return",new Promise((function(e,o){var c=new s.a;c.addEventListener("message",(function(t){e(t.data.fileItem)})),c.postMessage({operation:"encrypt",keys:i.content.keys,authParams:i.content.authParams,contentType:a["a"].FileItemContentTypeKey,fileData:t,fileName:n,fileType:r})})));case 2:case"end":return o.stop()}}))}},{key:"decryptFile",value:function(e){var t,n,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return t=e.fileDescriptor,n=e.fileItem,r=e.credential,r||(r=this.credentialManager.credentialForFileDescriptor(t)),i.abrupt("return",new Promise((function(e,t){var i=new s.a;i.addEventListener("message",(function(n){var r=n.data;r.error?t(r.error):e(r)})),i.postMessage({operation:"decrypt",keys:r.content.keys,item:n})})));case 3:case"end":return i.stop()}}),null,this)}}]),e}();h(f,"FileItemContentTypeKey","SN|FileSafe|File"),h(f,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata")},function(e,t,n){e.exports=function(){return new Worker(n.p+"filesafe-js/EncryptionWorker.js")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",(function(){return s}));var s=function(){function e(){r(this,e)}return o(e,null,[{key:"base64toBinary",value:function(e){for(var t=atob(e),n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Uint8Array(n)}},{key:"downloadData",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=document.createElement("a");o.setAttribute("download",t);var s=this.tempUrlForData(e,n);o.href=s,o.setAttribute("target","_blank"),i?window.location.href=o.href:(document.body.appendChild(o),o.click(),o.remove()),setTimeout((function(){r.revokeTempUrl(s)}),500)}},{key:"tempUrlForData",value:function(e,t){return window.URL.createObjectURL(new Blob([e],{type:t||"text/json"}))}},{key:"revokeTempUrl",value:function(e){window.URL.revokeObjectURL(e)}},{key:"copyTextToClipboard",value:function(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);var t;if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{t=document.createElement("textarea"),t.setAttribute("readonly",!0),t.setAttribute("contenteditable",!0),t.style.position="fixed",t.value=e,document.body.appendChild(t),t.focus(),t.select();var n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.setSelectionRange(0,t.value.length),document.execCommand("copy")}catch(i){console.error(i),null}finally{document.body.removeChild(t)}}}]),e}()}])},7749:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));class r{constructor(e,t){this.left=e,this.right=t}}const i=(e,t)=>new r(e,t),o=(e,t)=>e.forEach(e=>t(e.left,e.right))},"77d4":function(e,t,n){"use strict";var r=n("9980"),i=n("5313");const o=r["d"].create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Object(r["n"])(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{var n;if(t){const{parent:t,pos:r}=e.selection.$from,o=r+1,s=e.doc.nodeAt(o);if(!s){const r=null===(n=t.type.contentMatch.defaultType)||void 0===n?void 0:n.create();r&&(e.insert(o,r),e.setSelection(i["h"].create(e.doc,o)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[Object(r["o"])(/^(?:---|—-|___\s|\*\*\*\s)$/,this.type)]}});t["a"]=o},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"79bb":function(e,t,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^\s*(\[([ |x])\])\s$/,s=r["d"].create({name:"taskItem",defaultOptions:{nested:!1,HTMLAttributes:{}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,parseHTML:e=>({checked:"true"===e.getAttribute("data-checked")}),renderHTML:e=>({"data-checked":e.checked}),keepOnSplit:!1}}},parseHTML(){return[{tag:'li[data-type="taskItem"]',priority:51}]},renderHTML({HTMLAttributes:e}){return["li",Object(r["n"])(this.options.HTMLAttributes,e,{"data-type":"taskItem"}),0]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem("taskItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("taskItem")};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem("taskItem")}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",e=>{if(!r.isEditable)return void(a.checked=!a.checked);const{checked:t}=e.target;r.isEditable&&"function"===typeof n&&r.chain().focus().command(({tr:e})=>(e.setNodeMarkup(n(),void 0,{checked:t}),!0)).run()}),i.dataset.checked=e.attrs.checked,e.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,c),Object.entries(t).forEach(([e,t])=>{i.setAttribute(e,t)}),{dom:i,contentDOM:c,update:e=>e.type===this.type&&(i.dataset.checked=e.attrs.checked,e.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[Object(i["e"])(o,this.type,e=>({checked:"x"===e[e.length-1]}))]}});t["a"]=s},"7a82":function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("9bf2");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:o.f})},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7c73":function(e,t,n){var r,i=n("825a"),o=n("37e8"),s=n("7839"),a=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),h=">",f="<",d="prototype",p="script",m=l("IE_PROTO"),v=function(){},g=function(e){return f+p+h+e+f+"/"+p+h},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),n="java"+p+":";if(t.style)return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}w=document.domain&&r?y(r):b()||y(r);var e=s.length;while(e--)delete w[d][s[e]];return w()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[d]=i(e),n=new v,v[d]=null,n[m]=e):n=w(),void 0===t?n:o(n,t)}},"7ca5":function(e,t,n){"use strict";n("ed65")},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),s=n("d2bb"),a=n("d44e"),c=n("9112"),u=n("6eeb"),l=n("b622"),h=n("c430"),f=n("3f8c"),d=n("ae93"),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,v=l("iterator"),g="keys",y="values",b="entries",w=function(){return this};e.exports=function(e,t,n,l,d,k,S){i(n,t,l);var x,_,C,O=function(e){if(e===d&&R)return R;if(!m&&e in A)return A[e];switch(e){case g:return function(){return new n(this,e)};case y:return function(){return new n(this,e)};case b:return function(){return new n(this,e)}}return function(){return new n(this)}},M=t+" Iterator",E=!1,A=e.prototype,T=A[v]||A["@@iterator"]||d&&A[d],R=!m&&T||O(d),D="Array"==t&&A.entries||T;if(D&&(x=o(D.call(new e)),p!==Object.prototype&&x.next&&(h||o(x)===p||(s?s(x,p):"function"!=typeof x[v]&&c(x,v,w)),a(x,M,!0,!0),h&&(f[M]=w))),d==y&&T&&T.name!==y&&(E=!0,R=function(){return T.call(this)}),h&&!S||A[v]===R||c(A,v,R),f[t]=R,d)if(_={values:O(y),keys:k?R:O(g),entries:O(b)},S)for(C in _)(m||E||!(C in A))&&u(A,C,_[C]);else r({target:t,proto:!0,forced:m||E},_);return _}},"7eb1":function(e,t,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,o=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,s=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,a=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,c=r["c"].create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark("bold"),toggleBold:()=>({commands:e})=>e.toggleMark("bold"),unsetBold:()=>({commands:e})=>e.unsetMark("bold")}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Object(r["l"])(i,this.type),Object(r["l"])(s,this.type)]},addPasteRules(){return[Object(r["m"])(o,this.type),Object(r["m"])(a,this.type)]}});t["a"]=c},"7eea":function(e,t,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^(\d+)\.\s$/,s=r["d"].create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes(){return{start:{default:1,parseHTML:e=>({start:e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1})}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",Object(r["n"])(this.options.HTMLAttributes,n),0]:["ol",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList("orderedList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Object(i["e"])(o,this.type,e=>({start:+e[1]}),(e,t)=>t.childCount+t.attrs.start===+e[1])]}});t["a"]=s},"7f06":function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return b}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),u="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=o&&(c||+o[1]<57)||a&&c,h=0;h<10;h++)r[48+h]=r[96+h]=String(h);for(h=1;h<=24;h++)r[h+111]="F"+h;for(h=65;h<=90;h++)r[h]=String.fromCharCode(h+32),i[h]=String.fromCharCode(h);for(var f in r)i.hasOwnProperty(f)||(i[f]=r[f]);function d(e){var t=l&&(e.ctrlKey||e.altKey||e.metaKey)||(s||u)&&e.shiftKey&&e.key&&1==e.key.length,n=!t&&e.key||(e.shiftKey?i:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var p=n("5313"),m="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function v(e){var t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var c=o[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);m?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function g(e){var t=Object.create(null);for(var n in e)t[v(n)]=e[n];return t}function y(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function b(e){return new p["d"]({props:{handleKeyDown:w(e)}})}function w(e){var t=g(e);return function(e,n){var i,o=d(n),s=1==o.length&&" "!=o,a=t[y(o,n,!s)];if(a&&a(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){var c=t[y(i,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}else if(s&&n.shiftKey){var u=t[y(o,n,!0)];if(u&&u(e.state,e.dispatch,e))return!0}return!1}}},"7f9a":function(e,t,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;e.exports="function"===typeof o&&/native code/.test(i(o))},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"82d4":function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"tableRow",defaultOptions:{HTMLAttributes:{}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",Object(r["n"])(this.options.HTMLAttributes,e),0]}});t["a"]=i},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("a04b"),i=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},"841c":function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),o=n("1d80"),s=n("129f"),a=n("577e"),c=n("14c3");r("search",(function(e,t,n){return[function(t){var n=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](a(n))},function(e){var r=i(this),o=a(e),u=n(t,r,o);if(u.done)return u.value;var l=r.lastIndex;s(l,0)||(r.lastIndex=0);var h=c(r,o);return s(r.lastIndex,l)||(r.lastIndex=l),null===h?-1:h.index}]}))},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8925:function(e,t,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},"8ac7":function(e,t,n){(function(t){var n;(function(t){e.exports=t()})((function(){var e=Math.floor,r=Math.abs,i=Math.pow;return function(){function e(t,r,i){function o(a,c){if(!r[a]){if(!t[a]){var u="function"==typeof n&&n;if(!c&&u)return n(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};t[a][0].call(h.exports,(function(e){var n=t[a][1][e];return o(n||e)}),h,h.exports,e,t,r,i)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<i.length;a++)o(i[a]);return o}return e}()({1:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function i(e,t,n){return 3*(t+n)/4-n}function o(e){var t,n,o=r(e),s=o[0],a=o[1],c=new h(i(e,s,a)),u=0,f=0<a?s-4:s;for(n=0;n<f;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],c[u++]=255&t>>16,c[u++]=255&t>>8,c[u++]=255&t;return 2===a&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===a&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,c[u++]=255&t>>8,c[u++]=255&t),c}function s(e){return u[63&e>>18]+u[63&e>>12]+u[63&e>>6]+u[63&e]}function a(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=16383,s=0,c=n-r;s<c;s+=o)i.push(a(e,s,s+o>c?c:s+o));return 1===r?(t=e[n-1],i.push(u[t>>2]+u[63&t<<4]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(u[t>>10]+u[63&t>>4]+u[63&t<<2]+"=")),i.join("")}n.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=o,n.fromByteArray=c;for(var u=[],l=[],h="undefined"==typeof Uint8Array?Array:Uint8Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)u[d]=f[d],l[f.charCodeAt(d)]=d;l[45]=62,l[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){(function(){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=String.fromCharCode,r=Math.min;function o(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return h(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var i=p(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e,t,n){return c(e),0>=e||void 0===t?o(e):"string"==typeof n?o(e).fill(t,n):o(e).fill(t)}function l(e){return c(e),o(0>e?0:0|m(e))}function h(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function f(e){for(var t=0>e.length?0:0|m(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=s.prototype,r}function p(e){if(s.isBuffer(e)){var t=0|m(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0:"number"!=typeof e.length||K(e.length)?o(0):f(e)}function m(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function v(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return r?-1:$(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,K(n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,c=e.length,u=t.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;a=2,c/=2,u/=2,n/=2}if(i){var l=-1;for(s=n;s<c;s++)if(o(e,s)!==o(t,-1===l?0:s-l))-1!==l&&(s-=s-l),l=-1;else if(-1===l&&(l=s),s-l+1===u)return l*a}else for(n+u>c&&(n=c-u),s=n;0<=s;s--){for(var h=!0,f=0;f<u;f++)if(o(e,s+f)!==o(t,f)){h=!1;break}if(h)return s}return-1}function k(e,t,n,r){n=+n||0;var i=e.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s,a=0;a<r;++a){if(s=parseInt(t.substr(2*a,2),16),K(s))return a;e[n+a]=s}return a}function S(e,t,n,r){return W($(t,e.length-n),e,n,r)}function x(e,t,n,r){return W(U(t),e,n,r)}function _(e,t,n,r){return x(e,t,n,r)}function C(e,t,n,r){return W(V(t),e,n,r)}function O(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function E(e,t,n){n=r(e.length,n);for(var i=[],o=t;o<n;){var s,a,c,u,l=e[o],h=null,f=239<l?4:223<l?3:191<l?2:1;if(o+f<=n)1===f?128>l&&(h=l):2===f?(s=e[o+1],128==(192&s)&&(u=(31&l)<<6|63&s,127<u&&(h=u))):3===f?(s=e[o+1],a=e[o+2],128==(192&s)&&128==(192&a)&&(u=(15&l)<<12|(63&s)<<6|63&a,2047<u&&(55296>u||57343<u)&&(h=u))):4===f&&(s=e[o+1],a=e[o+2],c=e[o+3],128==(192&s)&&128==(192&a)&&128==(192&c)&&(u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&c,65535<u&&1114112>u&&(h=u)));null===h?(h=65533,f=1):65535<h&&(h-=65536,i.push(55296|1023&h>>>10),h=56320|1023&h),i.push(h),o+=f}return A(i)}function A(e){var n=e.length;if(n<=4096)return t.apply(String,e);for(var r="",i=0;i<n;)r+=t.apply(String,e.slice(i,i+=4096));return r}function T(e,n,i){var o="";i=r(e.length,i);for(var s=n;s<i;++s)o+=t(127&e[s]);return o}function R(e,n,i){var o="";i=r(e.length,i);for(var s=n;s<i;++s)o+=t(e[s]);return o}function D(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=z(e[o]);return i}function I(e,n,r){for(var i=e.slice(n,r),o="",s=0;s<i.length;s+=2)o+=t(i[s]+256*i[s+1]);return o}function N(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return t=+t,n>>>=0,i||j(e,t,n,4,34028234663852886e22,-34028234663852886e22),Y.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return t=+t,n>>>=0,i||j(e,t,n,8,17976931348623157e292,-17976931348623157e292),Y.write(e,t,n,r,52,8),n+8}function B(e){if(e=e.split("=")[0],e=e.trim().replace(G,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function z(e){return 16>e?"0"+e.toString(16):e.toString(16)}function $(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if(n=e.charCodeAt(s),55295<n&&57344>n){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,128>n){if(0>(t-=1))break;o.push(n)}else if(2048>n){if(0>(t-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function U(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!(0>(t-=2));++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function V(e){return J.toByteArray(B(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!==e}var J=e("base64-js"),Y=e("ieee754");n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return a(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return u(e,t,n)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(q(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=r(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},s.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(q(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=v,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,i,o){if(q(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),0>t||n>e.length||0>i||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,c=n-t,u=r(a,c),l=this.slice(i,o),h=e.slice(t,n),f=0;f<u;++f)if(l[f]!==h[f]){a=l[f],c=h[f];break}return a<c?-1:c<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],o=1,s=0;++s<t&&(o*=256);)r+=this[e+s]*o;return o*=128,r>=o&&(r-=i(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=t,o=1,s=this[e+--r];0<r&&(o*=256);)s+=this[e+--r]*o;return o*=128,s>=o&&(s-=i(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),Y.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),Y.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),Y.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),Y.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=i(2,8*n)-1;P(this,e,t,n,o,0)}var s=1,a=0;for(this[t]=255&e;++a<n&&(s*=256);)this[t+a]=255&e/s;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=i(2,8*n)-1;P(this,e,t,n,o,0)}var s=n-1,a=1;for(this[t+s]=255&e;0<=--s&&(a*=256);)this[t+s]=255&e/a;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=i(2,8*n-1);P(this,e,t,n,o-1,-o)}var s=0,a=1,c=0;for(this[t]=255&e;++s<n&&(a*=256);)0>e&&0===c&&0!==this[t+s-1]&&(c=1),this[t+s]=255&(e/a>>0)-c;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=i(2,8*n-1);P(this,e,t,n,o-1,-o)}var s=n-1,a=1,c=0;for(this[t+s]=255&e;0<=--s&&(a*=256);)0>e&&0===c&&0!==this[t+s+1]&&(c=1),this[t+s]=255&(e/a>>0)-c;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&128>i||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=s.isBuffer(e)?e:s.from(e,r),c=a.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var G=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(r){(function(){function i(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof r&&"env"in r&&(e=r.env.DEBUG),e}n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(n);const{formatters:o}=t.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,t){t.exports=function(t){function n(e){function t(...e){if(!t.enabled)return;const i=t,o=+new Date,s=o-(r||o);i.diff=s,i.prev=r,i.curr=o,r=o,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,r)=>{if("%%"===t)return"%";a++;const o=n.formatters[r];if("function"==typeof o){const n=e[a];t=o.call(i,n),e.splice(a,1),a--}return t}),n.formatArgs.call(i,e);const c=i.log||n.log;c.apply(i,e)}let r,o=null;return t.namespace=e,t.useColors=n.useColors(),t.color=n.selectColor(e),t.extend=i,t.destroy=n.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?n.enabled(e):o,set:e=>{o=e}}),"function"==typeof n.init&&n.init(t),t}function i(e,t){const r=n(this.namespace+("undefined"==typeof t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){const e=[...n.names.map(o),...n.skips.map(o).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&(e=r[t].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{n[e]=t[e]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return n.colors[r(t)%n.colors.length]},n.enable(n.load()),n}},{ms:11}],6:[function(e,t){"use strict";function n(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=""),t&&(r.code=t);try{return n(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(e));const o=n(new i,r);return o}}},{}],7:[function(e,t){"use strict";function n(e){console&&console.warn&&console.warn(e)}function r(){r.init.call(this)}function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function s(e,t,r,s){var a,c,u;if(i(r),c=e._events,void 0===c?(c=e._events=Object.create(null),e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),c=e._events),u=c[t]),void 0===u)u=c[t]=r,++e._eventsCount;else if("function"==typeof u?u=c[t]=s?[r,u]:[u,r]:s?u.unshift(r):u.push(r),a=o(e),0<a&&u.length>a&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,n(l)}return e}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function u(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):h(i,i.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function p(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}var v,g="object"==typeof Reflect?Reflect:null,y=g&&"function"==typeof g.apply?g.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};v=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var b=Number.isNaN||function(e){return e!==e};t.exports=r,t.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&p(e,i,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var w=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(e){if("number"!=typeof e||0>e||b(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");w=e}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||b(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)y(a,this,t);else{var c=a.length,u=h(a,c);for(n=0;n<c;++n)y(u[n],this,t)}return!0},r.prototype.addListener=function(e,t){return s(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return s(this,e,t,!0)},r.prototype.once=function(e,t){return i(t),this.on(e,c(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,c(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,s,a;if(i(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(0>o)return this;0===o?n.shift():f(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return u(this,e,!0)},r.prototype.rawListeners=function(e){return u(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},r.prototype.listenerCount=l,r.prototype.eventNames=function(){return 0<this._eventsCount?v(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(t,n,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(e,t,n,r,o){var s,a,c=8*o-r-1,u=(1<<c)-1,l=u>>1,h=-7,f=n?o-1:0,d=n?-1:1,p=e[t+f];for(f+=d,s=p&(1<<-h)-1,p>>=-h,h+=c;0<h;s=256*s+e[t+f],f+=d,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;0<h;a=256*a+e[t+f],f+=d,h-=8);if(0===s)s=1-l;else{if(s===u)return a?NaN:1/0*(p?-1:1);a+=i(2,r),s-=l}return(p?-1:1)*a*i(2,s-r)},o.write=function(t,n,o,s,a,c){var u,l,h,f=Math.LN2,d=Math.log,p=8*c-a-1,m=(1<<p)-1,v=m>>1,g=23===a?i(2,-24)-i(2,-77):0,y=s?0:c-1,b=s?1:-1,w=0>n||0===n&&0>1/n?1:0;for(n=r(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=m):(u=e(d(n)/f),1>n*(h=i(2,-u))&&(u--,h*=2),n+=1<=u+v?g/h:g*i(2,1-v),2<=n*h&&(u++,h/=2),u+v>=m?(l=0,u=m):1<=u+v?(l=(n*h-1)*i(2,a),u+=v):(l=n*i(2,v-1)*i(2,a),u=0));8<=a;t[o+y]=255&l,y+=b,l/=256,a-=8);for(u=u<<a|l,p+=a;0<p;t[o+y]=255&u,y+=b,u/=256,p-=8);t[o+y-b]|=128*w}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,t){var n=Math.round;function i(e){if(e+="",!(100<e.length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?315576e5*n:"weeks"===r||"week"===r||"w"===r?6048e5*n:"days"===r||"day"===r||"d"===r?864e5*n:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?36e5*n:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?6e4*n:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1e3*n:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}function o(e){var t=r(e);return 864e5<=t?n(e/864e5)+"d":36e5<=t?n(e/36e5)+"h":6e4<=t?n(e/6e4)+"m":1e3<=t?n(e/1e3)+"s":e+"ms"}function s(e){var t=r(e);return 864e5<=t?a(e,t,864e5,"day"):36e5<=t?a(e,t,36e5,"hour"):6e4<=t?a(e,t,6e4,"minute"):1e3<=t?a(e,t,1e3,"second"):e+" ms"}function a(e,t,r,i){return n(e/r)+" "+i+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return i(e);if("number"===n&&isFinite(e))return t.long?s(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(n){try{return l.call(null,e,0)}catch(n){return l.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(n){try{return h.call(null,e)}catch(n){return h.call(this,e)}}}function s(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=p.length;t;){for(d=p,p=[];++v<t;)d&&d[v].run();v=-1,t=p.length}d=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,h,f=t.exports={};(function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}})();var d,p=[],m=!1,v=-1;f.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],13:[function(e,n){(function(e){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let t;n.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?e:window):e=>(t||(t=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))}).call(this)}).call(this,"undefined"==typeof t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],14:[function(e,n){(function(t,r){(function(){"use strict";var i=e("safe-buffer").Buffer,o=r.crypto||r.msCrypto;n.exports=o&&o.getRandomValues?function(e,n){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(0<e)if(65536<e)for(var s=0;s<e;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r);return"function"==typeof n?t.nextTick((function(){n(null,r)})):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),"undefined"==typeof t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{_process:12,"safe-buffer":30}],15:[function(e,t){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function r(e,t,r){function i(e,n,r){return"string"==typeof t?t:t(e,n,r)}r||(r=Error);var o=function(e){function t(t,n,r){return e.call(this,i(t,n,r))||this}return n(t,e),t}(r);o.prototype.name=r.name,o.prototype.code=e,c[e]=o}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return e+""})),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}function o(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t}function s(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function a(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}var c={};r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,c;if("string"==typeof t&&o(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be",s(e," argument"))c="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var u=a(e,".")?"property":"argument";c='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(i(t,"type"))}return c+=". Received type ".concat(typeof n),c}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=c},{}],16:[function(e,t){(function(n){(function(){"use strict";function r(e){return this instanceof r?(a.call(this,e),c.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new r(e)}function i(){this._writableState.ended||n.nextTick(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var a=e("./_stream_readable"),c=e("./_stream_writable");e("inherits")(r,a);for(var u,l=s(c.prototype),h=0;h<l.length;h++)u=l[h],r.prototype[u]||(r.prototype[u]=c.prototype[u]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform");e("inherits")(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,n){(function(t,r){(function(){"use strict";function i(e){return I.from(e)}function o(e){return I.isBuffer(e)||e instanceof N}function s(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function a(t,n,r){A=A||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof A),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=U(this,t,"readableHighWaterMark",r),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!j&&(j=e("string_decoder/").StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function c(t){if(A=A||e("./_stream_duplex"),!(this instanceof c))return new c(t);var n=this instanceof A;this._readableState=new a(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),D.call(this)}function u(e,t,n,r,o){T("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,p(e,a);else if(o||(s=h(a,t)),s)J(e,s);else if(a.objectMode||t&&0<t.length)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===I.prototype||(t=i(t)),r)a.endEmitted?J(e,new K):l(e,a,t,!0);else if(a.ended)J(e,new W);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?l(e,a,t,!1):g(e,a)):l(e,a,t,!1)}else r||(a.reading=!1,g(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),g(e,t)}function h(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new V("chunk",["string","Buffer","Uint8Array"],t)),n}function f(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=f(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function p(e,t){if(T("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?m(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,v(e)))}}function m(e){var n=e._readableState;T("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(T("emitReadable",n.flowing),n.emittedReadable=!0,t.nextTick(v,e))}function v(e){var t=e._readableState;T("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,_(e)}function g(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(y,e,n))}function y(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(T("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function b(e){return function(){var t=e._readableState;T("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R(e,"data")&&(t.flowing=!0,_(e))}}function w(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function k(e){T("readable nexttick read 0"),e.read(0)}function S(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(x,e,n))}function x(e,t){T("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),_(e),t.flowing&&!t.reading&&e.read(0)}function _(e){var t=e._readableState;for(T("flow",t.flowing);t.flowing&&null!==e.read(););}function C(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function O(e){var n=e._readableState;T("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,t.nextTick(M,n,e))}function M(e,t){if(T("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function E(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var A;n.exports=c,c.ReadableState=a;e("events").EventEmitter;var T,R=function(e,t){return e.listeners(t).length},D=e("./internal/streams/stream"),I=e("buffer").Buffer,N=r.Uint8Array||function(){},P=e("util");T=P&&P.debuglog?P.debuglog("stream"):function(){};var j,L,F,B=e("./internal/streams/buffer_list"),z=e("./internal/streams/destroy"),$=e("./internal/streams/state"),U=$.getHighWaterMark,H=e("../errors").codes,V=H.ERR_INVALID_ARG_TYPE,W=H.ERR_STREAM_PUSH_AFTER_EOF,q=H.ERR_METHOD_NOT_IMPLEMENTED,K=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(c,D);var J=z.errorOrDestroy,Y=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=z.destroy,c.prototype._undestroy=z.undestroy,c.prototype._destroy=function(e,t){t(e)},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=I.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){j||(j=e("string_decoder/").StringDecoder);var n=new j(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},c.prototype.read=function(e){T("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return T("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):m(this),null;if(e=d(e,t),0===e&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return T("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,T("length less than watermark",i)),t.ended||t.reading?(i=!1,T("reading or ended",i)):i&&(T("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=d(n,t))),r=0<e?C(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},c.prototype._read=function(){J(this,new q("_read()"))},c.prototype.pipe=function(e,n){function r(e,t){T("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){T("onend"),e.end()}function o(){T("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",v),e.removeListener("error",c),e.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",h),f.removeListener("data",a),g=!0,d.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&v()}function a(t){T("ondata");var n=e.write(t);T("dest.write",n),!1===n&&((1===d.pipesCount&&d.pipes===e||1<d.pipesCount&&-1!==E(d.pipes,e))&&!g&&(T("false write response, pause",d.awaitDrain),d.awaitDrain++),f.pause())}function c(t){T("onerror",t),h(),e.removeListener("error",c),0===R(e,"error")&&J(e,t)}function u(){e.removeListener("finish",l),h()}function l(){T("onfinish"),e.removeListener("close",u),h()}function h(){T("unpipe"),f.unpipe(e)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,T("pipe count=%d opts=%j",d.pipesCount,n);var p=(!n||!1!==n.end)&&e!==t.stdout&&e!==t.stderr,m=p?i:h;d.endEmitted?t.nextTick(m):f.once("end",m),e.on("unpipe",r);var v=b(f);e.on("drain",v);var g=!1;return f.on("data",a),s(e,"error",c),e.once("close",u),e.once("finish",l),e.emit("pipe",f),d.flowing||(T("pipe resume"),f.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=E(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},c.prototype.on=function(e,n){var r=D.prototype.on.call(this,e,n),i=this._readableState;return"data"===e?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==e&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,T("on readable",i.length,i.reading),i.length?m(this):!i.reading&&t.nextTick(k,this)),r},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(e,n){var r=D.prototype.removeListener.call(this,e,n);return"readable"===e&&t.nextTick(w,this),r},c.prototype.removeAllListeners=function(e){var n=D.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&t.nextTick(w,this),n},c.prototype.resume=function(){var e=this._readableState;return e.flowing||(T("resume"),e.flowing=!e.readableListening,S(this,e)),e.paused=!1,this},c.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(T("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(T("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<Y.length;o++)e.on(Y[o],this.emit.bind(this,Y[o]));return this._read=function(t){T("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===L&&(L=e("./internal/streams/async_iterator")),L(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),c._fromList=C,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(t,n){return void 0===F&&(F=e("./internal/streams/from")),F(c,t,n)})}).call(this)}).call(this,e("_process"),"undefined"==typeof t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){"use strict";function n(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new c);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(e){return this instanceof r?(h.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",i)):new r(e)}function i(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush((function(t,n){o(e,t,n)}))}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new l;if(e._transformState.transforming)throw new u;return e.push(null)}t.exports=r;var s=e("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,c=s.ERR_MULTIPLE_CALLBACK,u=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=s.ERR_TRANSFORM_WITH_LENGTH_0,h=e("./_stream_duplex");e("inherits")(r,h),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,h.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){n(new a("_transform()"))},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},r.prototype._destroy=function(e,t){h.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,n){(function(t,r){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function o(e){return R.from(e)}function s(e){return R.isBuffer(e)||e instanceof D}function a(){}function c(t,n,r){M=M||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof M),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=P(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){g(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function u(t){M=M||e("./_stream_duplex");var n=this instanceof M;return n||E.call(u,this)?(this._writableState=new c(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void T.call(this)):new u(t)}function l(e,n){var r=new H;W(e,r),t.nextTick(n,r)}function h(e,n,r,i){var o;return null===r?o=new U:"string"!=typeof r&&!n.objectMode&&(o=new L("chunk",["string","Buffer"],r)),!o||(W(e,o),t.nextTick(i,o),!1)}function f(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=R.from(t,n)),t}function d(e,t,n,r,i,o){if(!n){var s=f(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,a,r,i,o);return c}function p(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new $("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,n,r,i,o){--n.pendingcb,r?(t.nextTick(o,i),t.nextTick(_,e,n),e._writableState.errorEmitted=!0,W(e,i)):(o(i),e._writableState.errorEmitted=!0,W(e,i),_(e,n))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function g(e,n){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new B;if(v(r),n)m(e,r,i,n,o);else{var s=k(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),i?t.nextTick(y,e,r,s,o):y(e,r,s,o)}}function y(e,t,n,r){n||b(e,t),t.pendingcb--,r(),_(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,p(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback,f=t.objectMode?1:u.length;if(p(e,t,!1,f,u,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&W(e,n),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function x(e,n){n.prefinished||n.finalCalled||("function"!=typeof e._final||n.destroyed?(n.prefinished=!0,e.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,t.nextTick(S,e,n)))}function _(e,t){var n=k(t);if(n&&(x(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}function C(e,n,r){n.ending=!0,_(e,n),r&&(n.finished?t.nextTick(r):e.once("finish",r)),n.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}var M;n.exports=u,u.WritableState=c;var E,A={deprecate:e("util-deprecate")},T=e("./internal/streams/stream"),R=e("buffer").Buffer,D=r.Uint8Array||function(){},I=e("./internal/streams/destroy"),N=e("./internal/streams/state"),P=N.getHighWaterMark,j=e("../errors").codes,L=j.ERR_INVALID_ARG_TYPE,F=j.ERR_METHOD_NOT_IMPLEMENTED,B=j.ERR_MULTIPLE_CALLBACK,z=j.ERR_STREAM_CANNOT_PIPE,$=j.ERR_STREAM_DESTROYED,U=j.ERR_STREAM_NULL_VALUES,H=j.ERR_STREAM_WRITE_AFTER_END,V=j.ERR_UNKNOWN_ENCODING,W=I.errorOrDestroy;e("inherits")(u,T),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:A.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!E.call(this,e)||!(this!==u)&&e&&e._writableState instanceof c}})):E=function(e){return e instanceof this},u.prototype.pipe=function(){W(this,new z)},u.prototype.write=function(e,t,n){var r=this._writableState,i=!1,c=!r.objectMode&&s(e);return c&&!R.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":!t&&(t=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ending?l(this,n):(c||h(this,r,e,n))&&(r.pendingcb++,i=d(this,r,c,e,t,n)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&w(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new V(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,n){n(new F("_write()"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||C(this,r,n),this},Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=I.destroy,u.prototype._undestroy=I.undestroy,u.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"==typeof t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(n){(function(){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return{value:e,done:t}}function o(e){var t=e[l];if(null!==t){var n=e[v].read();null!==n&&(e[p]=null,e[l]=null,e[h]=null,t(i(n,!1)))}}function s(e){n.nextTick(o,e)}function a(e,t){return function(n,r){e.then((function(){return t[d]?void n(i(void 0,!0)):void t[m](n,r)}),r)}}var c,u=e("./end-of-stream"),l=Symbol("lastResolve"),h=Symbol("lastReject"),f=Symbol("error"),d=Symbol("ended"),p=Symbol("lastPromise"),m=Symbol("handlePromise"),v=Symbol("stream"),g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((c={get stream(){return this[v]},next:function(){var e=this,t=this[f];if(null!==t)return Promise.reject(t);if(this[d])return Promise.resolve(i(void 0,!0));if(this[v].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[f]?r(e[f]):t(i(void 0,!0))}))}));var r,o=this[p];if(o)r=new Promise(a(o,this));else{var s=this[v].read();if(null!==s)return Promise.resolve(i(s,!1));r=new Promise(this[m])}return this[p]=r,r}},r(c,Symbol.asyncIterator,(function(){return this})),r(c,"return",(function(){var e=this;return new Promise((function(t,n){e[v].destroy(null,(function(e){return e?void n(e):void t(i(void 0,!0))}))}))})),c),g);t.exports=function(e){var t,n=Object.create(y,(t={},r(t,v,{value:e,writable:!0}),r(t,l,{value:null,writable:!0}),r(t,h,{value:null,writable:!0}),r(t,f,{value:null,writable:!0}),r(t,d,{value:e._readableState.endEmitted,writable:!0}),r(t,m,{value:function(e,t){var r=n[v].read();r?(n[p]=null,n[l]=null,n[h]=null,e(i(r,!1))):(n[l]=e,n[h]=t)},writable:!0}),t));return n[p]=null,u(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[h];return null!==t&&(n[p]=null,n[l]=null,n[h]=null,t(e)),void(n[f]=e)}var r=n[l];null!==r&&(n[p]=null,n[l]=null,n[h]=null,r(i(void 0,!0))),n[d]=!0})),e.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?n(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n){l.prototype.copy.call(e,t,n)}var u=e("buffer"),l=u.Buffer,h=e("util"),f=h.inspect,d=f&&f.custom||"inspect";t.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return a(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t=l.allocUnsafe(e>>>0),n=this.head,r=0;n;)c(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(r+=o===i.length?i:i.slice(0,e),e-=o,0===e){o===i.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),e-=o,0===e){o===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:d,value:function(e,t){return f(this,r({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){"use strict";function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(r,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(r,s),o(t)):e.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){"use strict";function n(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}function r(){}function i(e){return e.setHeader&&"function"==typeof e.abort}function o(e,t,a){if("function"==typeof t)return o(e,null,t);t||(t={}),a=n(a||r);var c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||f()},h=e._writableState&&e._writableState.finished,f=function(){u=!1,h=!0,c||a.call(e)},d=e._readableState&&e._readableState.endEmitted,p=function(){c=!1,d=!0,u||a.call(e)},m=function(t){a.call(e,t)},v=function(){var t;return c&&!d?(e._readableState&&e._readableState.ended||(t=new s),a.call(e,t)):u&&!h?(e._writableState&&e._writableState.ended||(t=new s),a.call(e,t)):void 0},g=function(){e.req.on("finish",f)};return i(e)?(e.on("complete",f),e.on("abort",v),e.req?g():e.on("request",g)):u&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",m),e.on("close",v),function(){e.removeListener("complete",f),e.removeListener("abort",v),e.removeListener("request",g),e.req&&e.req.removeListener("finish",f),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",v)}}var s=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=o},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){"use strict";function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function r(e){if(e)throw e}function i(e){return e.setHeader&&"function"==typeof e.abort}function o(t,r,o,s){s=n(s);var a=!1;t.on("close",(function(){a=!0})),void 0===u&&(u=e("./end-of-stream")),u(t,{readable:r,writable:o},(function(e){return e?s(e):(a=!0,void s())}));var c=!1;return function(e){if(!a)return c?void 0:(c=!0,i(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new f("pipe")))}}function s(e){e()}function a(e,t){return e.pipe(t)}function c(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():r}var u,l=e("../../../errors").codes,h=l.ERR_MISSING_ARGS,f=l.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=c(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new h("streams");var i,u=t.map((function(e,n){var a=n<t.length-1;return o(e,a,0<n,(function(e){i||(i=e),e&&u.forEach(s),a||(u.forEach(s),r(i))}))}));return t.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(t,n){"use strict";function r(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(t,n,o,s){var a=r(n,s,o);if(null!=a){if(!isFinite(a)||e(a)!==a||0>a){var c=s?o:"highWaterMark";throw new i(c,a)}return e(a)}return t.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return s(e,t,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),i.prototype=Object.create(s.prototype),r(s,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0===t?r.fill(0):"string"==typeof n?r.fill(t,n):r.fill(t),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(v.isEncoding===g||!g(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=l,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=d,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(t)}function s(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]),0<=i?(0<i&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]),0<=i?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0))}function c(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function u(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n}function l(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var v=e("safe-buffer").Buffer,g=v.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,n){(function(e){(function(){function t(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}n.exports=function(e,n){function r(){if(!i){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return e.apply(this,arguments)}if(t("noDeprecation"))return e;var i=!1;return r}}).call(this)}).call(this,"undefined"==typeof t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],"/":[function(e,t){function n(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function r(e){console.warn(e)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const i=e("debug")("simple-peer"),o=e("get-browser-rtc"),s=e("randombytes"),a=e("readable-stream"),c=e("queue-microtask"),u=e("err-code"),{Buffer:l}=e("buffer"),h=65536;class f extends a.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||f.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},f.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?u(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):u(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(u(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(u(e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(u(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(u(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?r("Ignoring unsupported ICE candidate."):this.destroy(u(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(u(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?u(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):u(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw u(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null==i.replaceTrack?this.destroy(u(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw u(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(r):this.destroy(u(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,c(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),c(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(u(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=h),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(u(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(u(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(u(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(u(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(u(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(u(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(u(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(u(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(u(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(u(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const r=[];n.forEach(e=>{r.push(t(e))}),e(null,r)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(this.destroyed)return;const r=[];n.result().forEach(e=>{const n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))}),e(null,r)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},i={},o={};let s=!1;n.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(o[e.id]=e)});const a=e=>{s=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),s||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(u(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>h)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=l.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),c(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}f.WEBRTC_SUPPORT=!!o(),f.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},f.channelConfig={},t.exports=f},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")}))}).call(this,n("c8ba"))},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+h>=1?f/c:f*Math.pow(2,1-h),t*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*m}},9263:function(e,t,n){"use strict";var r=n("577e"),i=n("ad6d"),o=n("9f7f"),s=n("5692"),a=n("7c73"),c=n("69f3").get,u=n("fce3"),l=n("107c"),h=RegExp.prototype.exec,f=s("native-string-replace",String.prototype.replace),d=h,p=function(){var e=/a/,t=/b*/g;return h.call(e,"a"),h.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),m=o.UNSUPPORTED_Y||o.BROKEN_CARET,v=void 0!==/()??/.exec("")[1],g=p||v||m||u||l;g&&(d=function(e){var t,n,o,s,u,l,g,y=this,b=c(y),w=r(e),k=b.raw;if(k)return k.lastIndex=y.lastIndex,t=d.call(k,w),y.lastIndex=k.lastIndex,t;var S=b.groups,x=m&&y.sticky,_=i.call(y),C=y.source,O=0,M=w;if(x&&(_=_.replace("y",""),-1===_.indexOf("g")&&(_+="g"),M=w.slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==w.charAt(y.lastIndex-1))&&(C="(?: "+C+")",M=" "+M,O++),n=new RegExp("^(?:"+C+")",_)),v&&(n=new RegExp("^"+C+"$(?!\\s)",_)),p&&(o=y.lastIndex),s=h.call(x?n:y,M),x?s?(s.input=s.input.slice(O),s[0]=s[0].slice(O),s.index=y.lastIndex,y.lastIndex+=s[0].length):y.lastIndex=0:p&&s&&(y.lastIndex=y.global?s.index+s[0].length:o),v&&s&&s.length>1&&f.call(s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&S)for(s.groups=l=a(null),u=0;u<S.length;u++)g=S[u],l[g[0]]=s[g[1]];return s}),e.exports=d},"94ca":function(e,t,n){var r=n("d039"),i=/#|\.prototype\./,o=function(e,t){var n=a[s(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},9751:function(e,t,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:==)((?:[^~]+))(?:==))$/gm,o=r["c"].create({name:"highlight",defaultOptions:{multicolor:!1,HTMLAttributes:{}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>({color:e.getAttribute("data-color")||e.style.backgroundColor}),renderHTML:e=>e.color?{"data-color":e.color,style:"background-color: "+e.color}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark("highlight",e),toggleHighlight:e=>({commands:t})=>t.toggleMark("highlight",e),unsetHighlight:()=>({commands:e})=>e.unsetMark("highlight")}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Object(r["l"])(i,this.type)]},addPasteRules(){return[Object(r["m"])(i,this.type)]}});t["a"]=o},9759:function(e,t,n){(function(t,n){e.exports=n()})(self,(function(){return(()=>{"use strict";var e={754:(e,t,n)=>{n.r(t),n.d(t,{SKAlert:()=>r});class r{constructor({title:e,text:t,buttons:n}){this.title=e,this.text=t,this.buttons=n}buttonsString(){const e=function(e,t){return`\n        <button id='button-${t}' class='sn-button small ${e.style}'>\n          <div class='sk-label'>${e.text}</div>\n        </button>\n      `};let t=this.buttons.map((function(t,n){return e(t,n)})).join(""),n=`\n      <div class='sk-button-group'>\n        ${t}\n      </div>\n    `;return n}templateString(){let e,t;this.buttons?(e=`\n        <div class="sk-panel-row" style='margin-top: 8px;'>\n          ${this.buttonsString()}\n        </div>\n      `,t=""):(e="",t='style="padding-bottom: 8px"');let n=this.title?`<div class='sk-h3 sk-panel-section-title'>${this.title}</div>`:"",r=this.text?`<p class='sk-p'>${this.text}</p>`:"",i=`\n      <div class="sk-modal">\n        <div class="sk-modal-background"></div>\n        <div class="sk-modal-content">\n          <div class="sn-component">\n            <div class="sk-panel" style='max-width: 500px;'>\n              <div class="sk-panel-content" ${t}>\n                <div class="sk-panel-section">\n                  ${n}\n\n                  <div class="sk-panel-row">\n                    ${r}\n                  </div>\n\n                  ${e}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;return i}dismiss(){this.onElement.removeChild(this.element)}primaryButton(){let e=this.buttons.find(e=>!0===e.primary);return e||(e=this.buttons[this.buttons.length-1]),e}present({onElement:e}={}){e||(e=document.body),this.onElement=e,this.element=document.createElement("div"),this.element.className="sn-component",this.element.innerHTML=this.templateString().trim(),e.appendChild(this.element),this.buttons&&this.buttons.length&&this.buttons.forEach((e,t)=>{let n=this.element.querySelector("#button-"+t);n.onclick=()=>{e.action&&e.action(),this.dismiss()},0===t&&n.focus()})}}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.m=e,n.x=e=>{},(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={388:0},t=[[754]],r=e=>{},i=(i,o)=>{for(var s,a,[c,u,l,h]=o,f=0,d=[];f<c.length;f++)a=c[f],n.o(e,a)&&e[a]&&d.push(e[a][0]),e[a]=0;for(s in u)n.o(u,s)&&(n.m[s]=u[s]);l&&l(n),i&&i(o);while(d.length)d.shift()();return h&&t.push.apply(t,h),r()},o=self["webpackChunkSK_name_"]=self["webpackChunkSK_name_"]||[];function s(){for(var r,i=0;i<t.length;i++){for(var o=t[i],s=!0,a=1;a<o.length;a++){var c=o[a];0!==e[c]&&(s=!1)}s&&(t.splice(i--,1),r=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),r}o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o));var a=n.x;n.x=()=>(n.x=a||(e=>{}),(r=s)())})(),n.x()})()}))},9861:function(e,t,n){"use strict";n("e260");var r=n("23e7"),i=n("d066"),o=n("0d3b"),s=n("6eeb"),a=n("e2cc"),c=n("d44e"),u=n("9ed3"),l=n("69f3"),h=n("19aa"),f=n("5135"),d=n("0366"),p=n("f5df"),m=n("825a"),v=n("861d"),g=n("577e"),y=n("7c73"),b=n("5c6c"),w=n("9a1f"),k=n("35a1"),S=n("b622"),x=i("fetch"),_=i("Request"),C=_&&_.prototype,O=i("Headers"),M=S("iterator"),E="URLSearchParams",A=E+"Iterator",T=l.set,R=l.getterFor(E),D=l.getterFor(A),I=/\+/g,N=Array(4),P=function(e){return N[e-1]||(N[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},j=function(e){try{return decodeURIComponent(e)}catch(t){return e}},L=function(e){var t=e.replace(I," "),n=4;try{return decodeURIComponent(t)}catch(r){while(n)t=t.replace(P(n--),j);return t}},F=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},z=function(e){return B[e]},$=function(e){return encodeURIComponent(e).replace(F,z)},U=function(e,t){if(t){var n,r,i=t.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),e.push({key:L(r.shift()),value:L(r.join("="))}))}},H=function(e){this.entries.length=0,U(this.entries,e)},V=function(e,t){if(e<t)throw TypeError("Not enough arguments")},W=u((function(e,t){T(this,{type:A,iterator:w(R(e).entries),kind:t})}),"Iterator",(function(){var e=D(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),q=function(){h(this,q,E);var e,t,n,r,i,o,s,a,c,u=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(T(l,{type:E,entries:d,updateURL:function(){},updateSearchParams:H}),void 0!==u)if(v(u))if(e=k(u),"function"===typeof e){t=e.call(u),n=t.next;while(!(r=n.call(t)).done){if(i=w(m(r.value)),o=i.next,(s=o.call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:g(s.value),value:g(a.value)})}}else for(c in u)f(u,c)&&d.push({key:c,value:g(u[c])});else U(d,"string"===typeof u?"?"===u.charAt(0)?u.slice(1):u:g(u))},K=q.prototype;if(a(K,{append:function(e,t){V(arguments.length,2);var n=R(this);n.entries.push({key:g(e),value:g(t)}),n.updateURL()},delete:function(e){V(arguments.length,1);var t=R(this),n=t.entries,r=g(e),i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){V(arguments.length,1);for(var t=R(this).entries,n=g(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){V(arguments.length,1);for(var t=R(this).entries,n=g(e),r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){V(arguments.length,1);var t=R(this).entries,n=g(e),r=0;while(r<t.length)if(t[r++].key===n)return!0;return!1},set:function(e,t){V(arguments.length,1);for(var n,r=R(this),i=r.entries,o=!1,s=g(e),a=g(t),c=0;c<i.length;c++)n=i[c],n.key===s&&(o?i.splice(c--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var e,t,n,r=R(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){var t,n=R(this).entries,r=d(e,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)t=n[i++],r(t.value,t.key,this)},keys:function(){return new W(this,"keys")},values:function(){return new W(this,"values")},entries:function(){return new W(this,"entries")}},{enumerable:!0}),s(K,M,K.entries),s(K,"toString",(function(){var e,t=R(this).entries,n=[],r=0;while(r<t.length)e=t[r++],n.push($(e.key)+"="+$(e.value));return n.join("&")}),{enumerable:!0}),c(q,E),r({global:!0,forced:!o},{URLSearchParams:q}),!o&&"function"==typeof O){var J=function(e){if(v(e)){var t,n=e.body;if(p(n)===E)return t=e.headers?new O(e.headers):new O,t.has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),y(e,{body:b(0,String(n)),headers:b(0,t)})}return e};if("function"==typeof x&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return x(e,arguments.length>1?J(arguments[1]):{})}}),"function"==typeof _){var Y=function(e){return h(this,Y,"Request"),new _(e,arguments.length>1?J(arguments[1]):{})};C.constructor=Y,Y.prototype=C,r({global:!0,forced:!0},{Request:Y})}}e.exports={URLSearchParams:q,getState:R}},"986d":function(e,t,n){"use strict";var r=n("9980"),i=n("70a9"),o=n("5313"),s=n("9b6a"),a=n("7428");const c=e=>{const t=i["c"].getState(e).undoManager;if(null!=t)return t.undo(),!0},u=e=>{const t=i["c"].getState(e).undoManager;if(null!=t)return t.redo(),!0},l=({protectedNodes:e=new Set(["paragraph"]),trackedOrigins:t=[]}={})=>new o["d"]({key:i["c"],state:{init:(n,r)=>{const o=i["b"].getState(r),s=new a["i"](o.type,{trackedOrigins:new Set([i["b"]].concat(t)),deleteFilter:t=>!(t instanceof a["e"])||!(t.content instanceof a["c"])||!(t.content.type instanceof a["h"]||t.content.type instanceof a["j"]&&e.has(t.content.type.nodeName))||0===t.content.type._length});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(e,t,n,r)=>{const o=i["b"].getState(r).binding,a=t.undoManager,c=a.undoStack.length>0,u=a.redoStack.length>0;return o?{undoManager:a,prevSel:Object(s["a"])(o,n),hasUndoOps:c,hasRedoOps:u}:c!==t.hasUndoOps||u!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}):t}},view:e=>{const t=i["b"].getState(e.state),n=i["c"].getState(e.state).undoManager;return n.on("stack-item-added",({stackItem:n})=>{const r=t.binding;r&&n.meta.set(r,i["c"].getState(e.state).prevSel)}),n.on("stack-item-popped",({stackItem:e})=>{const n=t.binding;n&&(n.beforeTransactionSelection=e.meta.get(n)||n.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}}),h=r["b"].create({name:"collaboration",defaultOptions:{document:null,field:"default",fragment:null},onCreate(){this.editor.extensionManager.extensions.find(e=>"history"===e.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:e,state:t,dispatch:n})=>{e.setMeta("preventDispatch",!0);const r=i["c"].getState(t).undoManager;return 0!==r.undoStack.length&&(!n||c(t))},redo:()=>({tr:e,state:t,dispatch:n})=>{e.setMeta("preventDispatch",!0);const r=i["c"].getState(t).undoManager;return 0!==r.redoStack.length&&(!n||u(t))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const e=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field);return[Object(s["c"])(e),l()]}});t["a"]=h},9980:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ns})),n.d(t,"b",(function(){return di})),n.d(t,"c",(function(){return js})),n.d(t,"d",(function(){return Ps})),n.d(t,"e",(function(){return Fs})),n.d(t,"f",(function(){return ii})),n.d(t,"g",(function(){return is})),n.d(t,"h",(function(){return Gr})),n.d(t,"i",(function(){return Hs})),n.d(t,"j",(function(){return Vs})),n.d(t,"k",(function(){return qi})),n.d(t,"l",(function(){return $s})),n.d(t,"m",(function(){return Us})),n.d(t,"n",(function(){return Zr})),n.d(t,"o",(function(){return Bs})),n.d(t,"p",(function(){return Ws}));var r=n("5313"),i=n("304a"),o=n("0ac0"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var l=s.ie=!!(c||u||a);s.ie_version=c?document.documentMode||6:u?+u[1]:a?+a[1]:null,s.gecko=!l&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var h=!l&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!h,s.chrome_version=h&&+h[1],s.safari=!l&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var f=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},d=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},p=null,m=function(e,t,n){var r=p||(p=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},v=function(e,t,n,r){return n&&(y(e,t,n,r,-1)||y(e,t,n,r,1))},g=/^(img|br|input|textarea|hr)$/i;function y(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:b(e))){var o=e.parentNode;if(1!=o.nodeType||k(e)||g.test(e.nodeName)||"false"==e.contentEditable)return!1;t=f(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(i<0?-1:0)],"false"==e.contentEditable)return!1;t=i<0?b(e):0}}}function b(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function w(e,t,n){for(var r=0==t,i=t==b(e);r||i;){if(e==n)return!0;var o=f(e);if(e=e.parentNode,!e)return!1;r=r&&0==o,i=i&&o==b(e)}}function k(e){for(var t,n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var S=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function x(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function C(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function O(e,t){return"number"==typeof e?e:e[t]}function M(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function E(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=n||e.dom;;s=d(s)){if(!s)break;if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,c=a?C(o):M(s),u=0,l=0;if(t.top<c.top+O(r,"top")?l=-(c.top-t.top+O(i,"top")):t.bottom>c.bottom-O(r,"bottom")&&(l=t.bottom-c.bottom+O(i,"bottom")),t.left<c.left+O(r,"left")?u=-(c.left-t.left+O(i,"left")):t.right>c.right-O(r,"right")&&(u=t.right-c.right+O(i,"right")),u||l)if(a)o.defaultView.scrollBy(u,l);else{var h=s.scrollLeft,f=s.scrollTop;l&&(s.scrollTop+=l),u&&(s.scrollLeft+=u);var p=s.scrollLeft-h,m=s.scrollTop-f;t={left:t.left-p,top:t.top-m,right:t.right-p,bottom:t.bottom-m}}if(a)break}}}function A(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:T(e.dom)}}function T(e){for(var t=[],n=e.ownerDocument;e;e=d(e))if(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e==n)break;return t}function R(e){var t=e.refDOM,n=e.refTop,r=e.stack,i=t?t.getBoundingClientRect().top:0;D(r,0==i?0:i-n)}function D(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var I=null;function N(e){if(e.setActive)return e.setActive();if(I)return e.focus(I);var t=T(e);e.focus(null==I?{get preventScroll(){return I={preventScroll:!0},!0}}:void 0),I||(I=!1,D(t,0))}function P(e,t){for(var n,r,i=2e8,o=0,s=t.top,a=t.top,c=e.firstChild,u=0;c;c=c.nextSibling,u++){var l=void 0;if(1==c.nodeType)l=c.getClientRects();else{if(3!=c.nodeType)continue;l=m(c).getClientRects()}for(var h=0;h<l.length;h++){var f=l[h];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var d=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(d<i){n=c,i=d,r=d&&3==n.nodeType?{left:f.right<t.left?f.right:f.left,top:t.top}:t,1==c.nodeType&&d&&(o=u+(t.left>=(f.left+f.right)/2?1:0));continue}}!n&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(o=u+1)}}return n&&3==n.nodeType?j(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:P(n,r)}function j(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=H(r,1);if(o.top!=o.bottom&&L(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function L(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function F(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function B(e,t,n){var r=P(t,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}function z(e,t,n,r){for(var i=-1,o=t;;){if(o==e.dom)break;var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}function $(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){var s=e.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var u=a[c];if(L(t,u))return $(s,t,u)}if((o=(o+1)%r)==i)break}return e}function U(e,t){var n,r,i,o,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(n=c,i=n.offsetNode,o=n.offset)}catch(_){}if(!i&&a.caretRangeFromPoint){var u=a.caretRangeFromPoint(t.left,t.top);u&&(r=u,i=r.startContainer,o=r.startOffset)}var l,h=a.elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var f=e.dom.getBoundingClientRect();if(!L(t,f))return null;if(h=$(e.dom,t,f),!h)return null}if(s.safari)for(var p=h;i&&p;p=d(p))p.draggable&&(i=o=null);if(h=F(h,t),i){if(s.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){var m,v=i.childNodes[o];"IMG"==v.nodeName&&(m=v.getBoundingClientRect()).right<=t.left&&m.bottom>t.top&&o++}i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(l=z(e,i,o,t))}null==l&&(l=B(e,h,t));var g=e.docView.nearestDesc(h,!0);return{pos:l,inside:g?g.posAtStart-g.border:-1}}function H(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var V=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function W(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),i=r.node,o=r.offset,a=s.webkit||s.gecko;if(3==i.nodeType){if(!a||!V.test(i.nodeValue)&&(n<0?o:o!=i.nodeValue.length)){var c=o,u=o,l=n<0?1:-1;return n<0&&!o?(u++,l=-1):n>=0&&o==i.nodeValue.length?(c--,l=1):n<0?c--:u++,q(H(m(i,c,u),l),l<0)}var h=H(m(i,o,o),n);if(s.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var f=H(m(i,o-1,o-1),-1);if(f.top==h.top){var d=H(m(i,o,o+1),-1);if(d.top!=h.top)return q(d,d.left<f.left)}}return h}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(n<0||o==b(i))){var p=i.childNodes[o-1];if(1==p.nodeType)return K(p.getBoundingClientRect(),!1)}if(o<b(i)){var v=i.childNodes[o];if(1==v.nodeType)return K(v.getBoundingClientRect(),!0)}return K(i.getBoundingClientRect(),n>=0)}if(o&&(n<0||o==b(i))){var g=i.childNodes[o-1],y=3==g.nodeType?m(g,b(g)-(a?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(y)return q(H(y,1),!1)}if(o<b(i)){var w=i.childNodes[o];while(w.pmViewDesc&&w.pmViewDesc.ignoreForCoords)w=w.nextSibling;var k=w?3==w.nodeType?m(w,0,a?0:1):1==w.nodeType?w:null:null;if(k)return q(H(k,-1),!0)}return q(H(3==i.nodeType?m(i):i,-n),n>=0)}function q(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function K(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function J(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function Y(e,t,n){var r=t.selection,i="up"==n?r.$from:r.$to;return J(e,t,(function(){for(var t=e.docView.domFromPos(i.pos,"up"==n?-1:1),r=t.node;;){var o=e.docView.nearestDesc(r,!0);if(!o)break;if(o.node.isBlock){r=o.dom;break}r=o.dom.parentNode}for(var s=W(e,i.pos,1),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=m(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<c.length;u++){var l=c[u];if(l.bottom>l.top+1&&("up"==n?s.top-l.top>2*(l.bottom-s.top):l.bottom-s.bottom>2*(s.bottom-l.top)))return!1}}return!0}))}var G=/[\u0590-\u08ac]/;function X(e,t,n){var r=t.selection,i=r.$head;if(!i.parent.isTextblock)return!1;var o=i.parentOffset,s=!o,a=o==i.parent.content.size,c=e.root.getSelection();return G.test(i.parent.textContent)&&c.modify?J(e,t,(function(){var t=c.getRangeAt(0),r=c.focusNode,o=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=i.depth?e.docView.domAfterPos(i.before()):e.dom,u=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&o==c.focusOffset;return c.removeAllRanges(),c.addRange(t),null!=s&&(c.caretBidiLevel=s),u})):"left"==n||"backward"==n?s:a}var Q=null,Z=null,ee=!1;function te(e,t,n){return Q==t&&Z==n?ee:(Q=t,Z=n,ee="up"==n||"down"==n?Y(e,t,n):X(e,t,n))}var ne=0,re=1,ie=2,oe=3,se=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=ne},ae={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};se.prototype.matchesWidget=function(){return!1},se.prototype.matchesMark=function(){return!1},se.prototype.matchesNode=function(){return!1},se.prototype.matchesHack=function(e){return!1},se.prototype.parseRule=function(){return null},se.prototype.stopEvent=function(){return!1},ae.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},ae.border.get=function(){return 0},se.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},se.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},ae.posBefore.get=function(){return this.parent.posBeforeChild(this)},ae.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},ae.posAfter.get=function(){return this.posBefore+this.size},ae.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},se.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;r=e.previousSibling}while(r&&(!(i=r.pmViewDesc)||i.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;o=e.nextSibling}while(o&&(!(s=o.pmViewDesc)||s.parent!=this))o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>f(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var u=e;;u=u.parentNode){if(u==this.dom){a=!0;break}if(u.parentNode.lastChild!=u)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},se.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==e.nodeType?e:e.parentNode):i.nodeDOM==e))return i;n=!1}}},se.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},se.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1},se.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}},se.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,i=0;n<this.children.length;n++){var o=this.children[n],s=i+o.size;if(s>e||o instanceof me){r=e-i;break}i=s}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(var a=void 0;n&&!(a=this.children[n-1]).size&&a instanceof ue&&a.widget.type.side>=0;n--);if(t<=0){for(var c,u=!0;;n--,u=!1)if(c=n?this.children[n-1]:null,!c||c.dom.parentNode==this.contentDOM)break;return c&&t&&u&&!c.border&&!c.domAtom?c.domFromPos(c.size,t):{node:this.contentDOM,offset:c?f(c.dom)+1:0}}for(var l,h=!0;;n++,h=!1)if(l=n<this.children.length?this.children[n]:null,!l||l.dom.parentNode==this.contentDOM)break;return l&&h&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?f(l.dom):this.contentDOM.childNodes.length}},se.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&e<=c){var u=o+a.border;if(e>=u&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,u);e=o;for(var l=s;l>0;l--){var h=this.children[l-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=f(h.dom)+1;break}e-=h.size}-1==r&&(r=0)}if(r>-1&&(c>t||s==this.children.length-1)){t=c;for(var d=s+1;d<this.children.length;d++){var p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){i=f(p.dom);break}t+=p.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}},se.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},se.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},se.prototype.setSelection=function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),a=0,c=0;a<this.children.length;a++){var u=this.children[a],l=c+u.size;if(i>c&&o<l)return u.setSelection(e-c-u.border,t-c-u.border,n,r);c=l}var h=this.domFromPos(e,e?-1:1),d=t==e?h:this.domFromPos(t,t?-1:1),p=n.getSelection(),m=!1;if((s.gecko||s.safari)&&e==t){var g=h.node,y=h.offset;if(3==g.nodeType){if(m=y&&"\n"==g.nodeValue[y-1],m&&y==g.nodeValue.length)for(var b=g,w=void 0;b;b=b.parentNode){if(w=b.nextSibling){"BR"==w.nodeName&&(h=d={node:w.parentNode,offset:f(w)+1});break}var k=b.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{var S=g.childNodes[y-1];m=S&&("BR"==S.nodeName||"false"==S.contentEditable)}}if(s.gecko&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var x=p.focusNode.childNodes[p.focusOffset];x&&"false"==x.contentEditable&&(r=!0)}if(r||m&&s.safari||!v(h.node,h.offset,p.anchorNode,p.anchorOffset)||!v(d.node,d.offset,p.focusNode,p.focusOffset)){var _=!1;if((p.extend||e==t)&&!m){p.collapse(h.node,h.offset);try{e!=t&&p.extend(d.node,d.offset),_=!0}catch(M){if(!(M instanceof DOMException))throw M}}if(!_){if(e>t){var C=h;h=d,d=C}var O=document.createRange();O.setEnd(d.node,d.offset),O.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(O)}}},se.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},ae.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},se.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var s=n+i.border,a=o-i.border;if(e>=s&&t<=a)return this.dirty=e==n||t==o?ie:re,void(e!=s||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-s,t-s):i.dirty=oe);i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM?ie:oe}n=o}this.dirty=ie},se.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?ie:re;t.dirty<n&&(t.dirty=n)}},ae.domAtom.get=function(){return!1},ae.ignoreForCoords.get=function(){return!1},Object.defineProperties(se.prototype,ae);var ce=[],ue=function(e){function t(t,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,ce,s,null),this.widget=n,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(e){return this.dirty==ne&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(se),le=function(e){function t(t,n,r,i){e.call(this,t,ce,n,null),this.textDOM=r,this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(se),he=function(e){function t(t,n,r,i){e.call(this,t,[],r,i),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i["b"].renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return this.dirty!=oe&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),this.dirty!=ne){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ne}},t.prototype.slice=function(e,n,r){var i=t.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Ie(o,n,s,r)),e>0&&(o=Ie(o,0,e,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},t}(se),fe=function(e){function t(t,n,r,i,o,s,a,c,u){e.call(this,t,n.isLeaf?ce:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,u)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,o,s,a){var c,u,l=s.nodeViews[n.type.name],h=l&&l(n,s,(function(){return u?u.parent?u.parent.posBeforeChild(u):void 0:a}),r,o),f=h&&h.dom,d=h&&h.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(c=i["b"].renderSpec(document,n.type.spec.toDOM(n)),f=c.dom,d=c.contentDOM);d||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var p=f;return f=xe(f,r,n),h?u=new ve(e,n,r,o,f,d,p,h,s,a+1):n.isText?new pe(e,n,r,o,f,p,s):new t(e,n,r,o,f,d,p,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?i["c"].empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return this.dirty==ne&&e.eq(this.node)&&_e(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,a=e.composing&&this.localCompositionInfo(e,t),c=a&&a.pos>-1?a:null,u=a&&a.pos<0,l=new Oe(this,c&&c.node);Ae(this.node,this.innerDeco,(function(t,s,a){t.spec.marks?l.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&l.syncToMarks(s==n.node.childCount?i["d"].none:n.node.child(s).marks,r,e),l.placeWidget(t,e,o)}),(function(t,n,i,s){var c;l.syncToMarks(t.marks,r,e),l.findNodeMatch(t,n,i,s)||u&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(c=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(t,n,i,c,e)||l.updateNextNode(t,n,i,e,s)||l.addNode(t,n,i,e,o),o+=t.nodeSize})),l.syncToMarks(ce,r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ie)&&(c&&this.protectLocalComposition(e,c),ge(this.contentDOM,this.children,e),s.ios&&Te(this.dom))},t.prototype.localCompositionInfo=function(e,t){var n=e.state.selection,i=n.from,o=n.to;if(!(!(e.state.selection instanceof r["h"])||i<t||o>t+this.node.content.size)){var s=e.root.getSelection(),a=Re(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){if(this.node.inlineContent){var c=a.nodeValue,u=De(this.node.content,c,i-t,o-t);return u<0?null:{node:a,pos:u,text:c}}return{node:a,pos:-1}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;;o=o.parentNode){if(o.parentNode==this.contentDOM)break;while(o.previousSibling)o.parentNode.removeChild(o.previousSibling);while(o.nextSibling)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new le(this,o,n,i);e.compositionNodes.push(s),this.children=Ie(this.children,r,r+i.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(this.dirty==oe||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ne},t.prototype.updateOuterDeco=function(e){if(!_e(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ke(this.dom,this.nodeDOM,we(this.outerDeco,this.node,t),we(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(se);function de(e,t,n,r,i){return xe(r,t,e),new fe(null,e,t,n,r,r,r,i,0)}var pe=function(e){function t(t,n,r,i,o,s,a){e.call(this,t,n,r,i,o,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){var e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(this.dirty==oe||this.dirty!=ne&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==ne&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ne,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var i=this.node.cut(e,n),o=document.createTextNode(i.text);return new t(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},t.prototype.markDirty=function(t,n){e.prototype.markDirty.call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=oe)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(fe),me=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return this.dirty==ne&&this.dom.nodeName==e},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,n),t}(se),ve=function(e){function t(t,n,r,i,o,s,a,c,u,l){e.call(this,t,n,r,i,o,s,a,u,l),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,i){if(this.dirty==oe)return!1;if(this.spec.update){var o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,i),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(fe);function ge(e,t,n){for(var r=e.firstChild,i=!1,o=0;o<t.length;o++){var s=t[o],a=s.dom;if(a.parentNode==e){while(a!=r)r=Ce(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof he){var c=r?r.previousSibling:e.lastChild;ge(s.contentDOM,s.children,n),r=c?c.nextSibling:e.firstChild}}while(r)r=Ce(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}function ye(e){e&&(this.nodeName=e)}ye.prototype=Object.create(null);var be=[new ye];function we(e,t,n){if(0==e.length)return be;for(var r=n?be[0]:new ye,i=[r],o=0;o<e.length;o++){var s=e[o].type.attrs;if(s)for(var a in s.nodeName&&i.push(r=new ye(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==i.length&&i.push(r=new ye(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return i}function ke(e,t,n,r){if(n==be&&r==be)return t;for(var i=t,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=be[0]),i=c}Se(i,a||be[0],s)}return i}function Se(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" ").filter(Boolean):ce,s=n.class?n.class.split(" ").filter(Boolean):ce,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style){var u,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(u=l.exec(t.style))e.style.removeProperty(u[1])}n.style&&(e.style.cssText+=n.style)}}function xe(e,t,n){return ke(e,e,be,we(t,n,1!=e.nodeType))}function _e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Ce(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Oe=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=Me(e.node.content,e.children)};function Me(e,t){for(var n=e.childCount,r=t.length,i=new Map;n>0&&r>0;r--){var o=t[r-1],s=o.node;if(s){if(s!=e.child(n-1))break;--n,i.set(o,n)}}return{index:n,matched:i}}function Ee(e,t){return e.type.side-t.type.side}function Ae(e,t,n,r){var i=t.locals(e),o=0;if(0!=i.length)for(var s=0,a=[],c=null,u=0;;){if(s<i.length&&i[s].to==o){var l=i[s++],h=void 0;while(s<i.length&&i[s].to==o)(h||(h=[l])).push(i[s++]);if(h){h.sort(Ee);for(var f=0;f<h.length;f++)n(h[f],u,!!c)}else n(l,u,!!c)}var d=void 0,p=void 0;if(c)p=-1,d=c,c=null;else{if(!(u<e.childCount))break;p=u,d=e.child(u++)}for(var m=0;m<a.length;m++)a[m].to<=o&&a.splice(m--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);var v=o+d.nodeSize;if(d.isText){var g=v;s<i.length&&i[s].from<g&&(g=i[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=d.cut(g-o),d=d.cut(0,g-o),v=g,p=-1)}var b=a.length?d.isInline&&!d.isLeaf?a.filter((function(e){return!e.inline})):a.slice():ce;r(d,b,t.forChild(o,d),p),o=v}else for(var w=0;w<e.childCount;w++){var k=e.child(w);r(k,i,t.forChild(o,k),w),o+=k.nodeSize}}function Te(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Re(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=b(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function De(e,t,n,r){for(var i=0,o=0;i<e.childCount&&o<=r;){var s=e.child(i++),a=o;if(o+=s.nodeSize,s.isText){var c=s.text;while(i<e.childCount){var u=e.child(i++);if(o+=u.nodeSize,!u.isText)break;c+=u.text}if(o>=n){var l=c.lastIndexOf(t,r-a);if(l>=0&&l+t.length+a>=n)return a+l}}}return-1}function Ie(e,t,n,r,i){for(var o=[],s=0,a=0;s<e.length;s++){var c=e[s],u=a,l=a+=c.size;u>=n||l<=t?o.push(c):(u<t&&o.push(c.slice(0,t-u,r)),i&&(o.push(i),i=null),l>n&&o.push(c.slice(n-u,c.size,r)))}return o}function Ne(e,t){var n=e.root.getSelection(),i=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,u,l=i.resolve(a);if(S(n)){c=l;while(o&&!o.node)o=o.parent;if(o&&o.node.isAtom&&r["c"].isSelectable(o.node)&&o.parent&&(!o.node.isInline||!w(n.focusNode,n.focusOffset,o.dom))){var h=o.posBefore;u=new r["c"](a==h?l:i.resolve(h))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;c=i.resolve(f)}if(!u){var d="pointer"==t||e.state.selection.head<l.pos&&!s?1:-1;u=We(e,c,l,d)}return u}function Pe(e){return e.editable?e.hasFocus():Ke(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function je(e,t){var n=e.state.selection;if(He(e,n),Pe(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault)return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection();if(e.domObserver.disconnectSelection(),e.cursorWrapper)Ue(e);else{var i,o,s=n.anchor,a=n.head;!Le||n instanceof r["h"]||(n.$from.parent.inlineContent||(i=Fe(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Fe(e,n.to))),e.docView.setSelection(s,a,e.root,t),Le&&(i&&ze(i),o&&ze(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$e(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Oe.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Oe.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Oe.prototype.syncToMarks=function(e,t,n){var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=ne,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<e.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=he.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},Oe.prototype.findNodeMatch=function(e,t,n,r){var i=this.top.children,o=-1;if(r>=this.preMatch.index){for(var s=this.index;s<i.length;s++)if(i[s].matchesNode(e,t,n)){o=s;break}}else for(var a=this.index,c=Math.min(i.length,a+1);a<c;a++){var u=i[a];if(u.matchesNode(e,t,n)&&!this.preMatch.matched.has(u)){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},Oe.prototype.updateNodeAt=function(e,t,n,r,i){var o=this.top.children[r];return!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index=r+1,!0)},Oe.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}},Oe.prototype.updateNextNode=function(e,t,n,r,i){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof fe){var a=this.preMatch.matched.get(s);if(null!=a&&a!=i)return!1;var c=s.dom,u=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=oe&&_e(t,s.outerDeco));if(!u&&s.update(e,t,n,r))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Oe.prototype.addNode=function(e,t,n,r,i){this.top.children.splice(this.index++,0,fe.create(this.top,e,t,n,r,i)),this.changed=!0},Oe.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var i=new ue(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++},Oe.prototype.addTextblockHacks=function(){var e=this.top.children[this.index-1];while(e instanceof he)e=e.children[e.children.length-1];e&&e instanceof pe&&!/\n$/.test(e.node.text)||((s.safari||s.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Oe.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),this.top.children.splice(this.index++,0,new me(this.top,ce,t,null)),this.changed=!0}};var Le=s.safari||s.chrome&&s.chrome_version<63;function Fe(e,t){var n=e.docView.domFromPos(t,0),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(s.safari&&o&&"false"==o.contentEditable)return Be(o);if((!o||"false"==o.contentEditable)&&(!a||"false"==a.contentEditable)){if(o)return Be(o);if(a)return Be(a)}}function Be(e){return e.contentEditable="true",s.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function ze(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function $e(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){Pe(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Ue(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,f(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function He(e,t){if(t instanceof r["c"]){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ve(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ve(e)}function Ve(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function We(e,t,n,i){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r["h"].between(t,n,i)}function qe(e){return(!e.editable||e.root.activeElement==e.dom)&&Ke(e)}function Ke(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(_){return!1}}function Je(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return v(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Ye(e,t){var n=e.selection,i=n.$anchor,o=n.$head,s=t>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r["f"].findFrom(a,t)}function Ge(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Xe(e,t,n){var i=e.state.selection;if(!(i instanceof r["h"])){if(i instanceof r["c"]&&i.node.isInline)return Ge(e,new r["h"](t>0?i.$to:i.$from));var o=Ye(e.state,t);return!!o&&Ge(e,o)}if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var a=Ye(e.state,t);return!!(a&&a instanceof r["c"])&&Ge(e,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,u=i.$head,l=u.textOffset?null:t<0?u.nodeBefore:u.nodeAfter;if(!l||l.isText)return!1;var h=t<0?u.pos-l.nodeSize:u.pos;return!!(l.isAtom||(c=e.docView.descAt(h))&&!c.contentDOM)&&(r["c"].isSelectable(l)?Ge(e,new r["c"](t<0?e.state.doc.resolve(u.pos-l.nodeSize):u)):!!s.webkit&&Ge(e,new r["h"](e.state.doc.resolve(t<0?h:h+l.nodeSize))))}}function Qe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ze(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function et(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,a=!1;for(s.gecko&&1==n.nodeType&&r<Qe(n)&&Ze(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Ze(c))i=n,o=--r;else{if(3!=c.nodeType)break;n=c,r=n.nodeValue.length}}else{if(nt(n))break;var u=n.previousSibling;while(u&&Ze(u))i=n.parentNode,o=f(u),u=u.previousSibling;if(u)n=u,r=Qe(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}a?rt(e,t,n,r):i&&rt(e,t,i,o)}}function tt(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,s=Qe(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Ze(a))break;i=n,o=++r}else{if(nt(n))break;var c=n.nextSibling;while(c&&Ze(c))i=c.parentNode,o=f(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=Qe(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}i&&rt(e,t,i,o)}}function nt(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function rt(e,t,n,r){if(S(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var o=e.state;setTimeout((function(){e.state==o&&je(e)}),50)}function it(e,t,n){var i=e.state.selection;if(i instanceof r["h"]&&!i.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var o=i.$from,a=i.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=Ye(e.state,t);if(c&&c instanceof r["c"])return Ge(e,c)}if(!o.parent.inlineContent){var u=t<0?o:a,l=i instanceof r["a"]?r["f"].near(u,t):r["f"].findFrom(u,t);return!!l&&Ge(e,l)}return!1}function ot(e,t){if(!(e.state.selection instanceof r["h"]))return!0;var n=e.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!i.textOffset&&(t<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),e.dispatch(c),!0}return!1}function st(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function at(e){if(s.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;st(e,i,!0),setTimeout((function(){return st(e,i,!1)}),20)}}}function ct(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function ut(e,t){var n=t.keyCode,r=ct(t);return 8==n||s.mac&&72==n&&"c"==r?ot(e,-1)||et(e):46==n||s.mac&&68==n&&"c"==r?ot(e,1)||tt(e):13==n||27==n||(37==n?Xe(e,-1,r)||et(e):39==n?Xe(e,1,r)||tt(e):38==n?it(e,-1,r)||et(e):40==n?at(e)||it(e,1,r)||tt(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function lt(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,a=r.fromOffset,c=r.toOffset,u=r.from,l=r.to,h=e.root.getSelection(),f=null,d=h.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(f=[{node:d,offset:h.anchorOffset}],S(h)||f.push({node:h.focusNode,offset:h.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var p=c;p>a;p--){var m=o.childNodes[p-1],v=m.pmViewDesc;if("BR"==m.nodeName&&!v){c=p;break}if(!v||v.size)break}var g=e.state.doc,y=e.someProp("domParser")||i["a"].fromSchema(e.state.schema),b=g.resolve(u),w=null,k=y.parse(o,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:f,ruleFromNode:ht,context:b});if(f&&null!=f[0].pos){var x=f[0].pos,_=f[1]&&f[1].pos;null==_&&(_=x),w={anchor:x+u,head:_+u}}return{doc:k,sel:w,from:u,to:l}}function ht(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function ft(e,t,n,i,o){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,c=Ne(e,a);if(c&&!e.state.selection.eq(c)){var u=e.state.tr.setSelection(c);"pointer"==a?u.setMeta("pointer",!0):"key"==a&&u.scrollIntoView(),e.dispatch(u)}}else{var l=e.state.doc.resolve(t),h=l.sharedDepth(n);t=l.before(h+1),n=e.state.doc.resolve(n).after(h+1);var f=e.state.selection,d=lt(e,t,n);if(s.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var p=e.cursorWrapper.deco.type.toDOM.nextSibling,m=p&&p.nodeValue?p.nodeValue.length:1;d.sel={anchor:d.sel.anchor+m,head:d.sel.anchor+m}}var v,g,y=e.state.doc,b=y.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(v=e.state.selection.to,g="end"):(v=e.state.selection.from,g="start"),e.lastKeyCode=null;var w=gt(b.content,d.doc.content,d.from,v,g);if(!w){if(!(i&&f instanceof r["h"]&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if((s.ios&&e.lastIOSEnter>Date.now()-225||s.android)&&o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var k=dt(e,e.state.doc,d.sel);k&&!k.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(k))}return}w={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&w.start==w.endB&&e.state.selection instanceof r["h"]&&(w.start>e.state.selection.from&&w.start<=e.state.selection.from+2?w.start=e.state.selection.from:w.endA<e.state.selection.to&&w.endA>=e.state.selection.to-2&&(w.endB+=e.state.selection.to-w.endA,w.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>d.from&&"  "==d.doc.textBetween(w.start-d.from-1,w.start-d.from+1)&&(w.start--,w.endA--,w.endB--);var S,_=d.doc.resolveNoCache(w.start-d.from),C=d.doc.resolveNoCache(w.endB-d.from),O=_.sameParent(C)&&_.parent.inlineContent;if((s.ios&&e.lastIOSEnter>Date.now()-225&&(!O||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!O&&_.pos<d.doc.content.size&&(S=r["f"].findFrom(d.doc.resolve(_.pos+1),1,!0))&&S.head==C.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>w.start&&mt(y,w.start,w.endA,_,C)&&e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{s.chrome&&s.android&&w.toB==w.from&&(e.lastAndroidDelete=Date.now()),s.android&&!O&&_.start()!=C.start()&&0==C.parentOffset&&_.depth==C.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==w.endA&&(w.endB-=2,C=d.doc.resolveNoCache(w.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))}))}),20));var M,E,A,T,R=w.start,D=w.endA;if(O)if(_.pos==C.pos)s.ie&&s.ie_version<=11&&0==_.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return je(e)}),20)),M=e.state.tr.delete(R,D),E=y.resolve(w.start).marksAcross(y.resolve(w.endA));else if(w.endA==w.endB&&(T=y.resolve(w.start))&&(A=pt(_.parent.content.cut(_.parentOffset,C.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start()))))M=e.state.tr,"add"==A.type?M.addMark(R,D,A.mark):M.removeMark(R,D,A.mark);else if(_.parent.child(_.index()).isText&&_.index()==C.index()-(C.textOffset?0:1)){var I=_.parent.textBetween(_.parentOffset,C.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,R,D,I)})))return;M=e.state.tr.insertText(I,R,D)}if(M||(M=e.state.tr.replace(R,D,d.doc.slice(w.start-d.from,w.endB-d.from))),d.sel){var N=dt(e,M.doc,d.sel);N&&!(s.chrome&&s.android&&e.composing&&N.empty&&(w.start!=w.endB||e.lastAndroidDelete<Date.now()-100)&&(N.head==R||N.head==M.mapping.map(D)-1)||s.ie&&N.empty&&N.head==R)&&M.setSelection(N)}E&&M.ensureMarks(E),e.dispatch(M.scrollIntoView())}}}function dt(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:We(e,t.resolve(n.anchor),t.resolve(n.head))}function pt(e,t){for(var n,r,o,s=e.firstChild.marks,a=t.firstChild.marks,c=s,u=a,l=0;l<a.length;l++)c=a[l].removeFromSet(c);for(var h=0;h<s.length;h++)u=s[h].removeFromSet(u);if(1==c.length&&0==u.length)r=c[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=u.length)return null;r=u[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var f=[],d=0;d<t.childCount;d++)f.push(o(t.child(d)));if(i["c"].from(f).eq(e))return{mark:r,type:n}}function mt(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||vt(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(vt(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||vt(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function vt(e,t,n){var r=e.depth,i=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,i++,t=!1;if(n){var o=e.node(r).maybeChild(e.indexAfter(r));while(o&&!o.isLeaf)o=o.firstChild,i++}return i}function gt(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==i){var u=Math.max(0,o-Math.min(a,c));r-=a+u-o}if(a<o&&e.size<t.size){var l=r<=o&&r>=a?o-r:0;o-=l,c=o+(c-a),a=o}else if(c<o){var h=r<=o&&r>=c?o-r:0;o-=h,a=o+(a-c),c=o}return{start:o,endA:a,endB:c}}function yt(e,t){var n=[],r=t.content,o=t.openStart,s=t.openEnd;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||i["b"].fromSchema(e.state.schema),u=Et(),l=u.createElement("div");l.appendChild(c.serializeFragment(r,{document:u}));var h,f=l.firstChild;while(f&&1==f.nodeType&&(h=Ot[f.nodeName.toLowerCase()])){for(var d=h.length-1;d>=0;d--){var p=u.createElement(h[d]);while(l.firstChild)p.appendChild(l.firstChild);l.appendChild(p),"tbody"!=h[d]&&(o++,s++)}f=l.firstChild}f&&1==f.nodeType&&f.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n));var m=e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:l,text:m}}function bt(e,t,n,r,o){var a,c,u=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||u||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,u||r)})),u)return new i["j"](i["c"].from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var h=e.someProp("clipboardTextParser",(function(e){return e(t,o,r)}));if(h)c=h;else{var f=o.marks(),d=e.state,p=d.schema,m=i["b"].fromSchema(p);a=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){a.appendChild(document.createElement("p")).appendChild(m.serializeNode(p.text(e,f)))}))}}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),a=At(n),s.webkit&&Tt(a);var v=a&&a.querySelector("[data-pm-slice]"),g=v&&/^(\d+) (\d+) (.*)/.exec(v.getAttribute("data-pm-slice"));if(!c){var y=e.someProp("clipboardParser")||e.someProp("domParser")||i["a"].fromSchema(e.state.schema);c=y.parseSlice(a,{preserveWhitespace:!(!l&&!g),context:o})}return c=g?Rt(Ct(c,+g[1],+g[2]),g[3]):i["j"].maxOpen(wt(c.content,o),!1),e.someProp("transformPasted",(function(e){c=e(c)})),c}function wt(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n),o=r.contentMatchAt(t.index(n)),s=void 0,a=[];if(e.forEach((function(e){if(a){var t,n=o.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&s.length&&St(n,s,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=xt(a[a.length-1],s.length));var r=kt(e,n);a.push(r),o=o.matchType(r.type,r.attrs),s=n}}})),a)return{v:i["c"].from(a)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}function kt(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,i["c"].from(e));return e}function St(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var s=St(e,t,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));var a=r.contentMatchAt(r.childCount);if(a.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(i["c"].from(kt(n,e,o+1))))}}function xt(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,xt(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(i["c"].empty,!0);return e.copy(n.append(r))}function _t(e,t,n,r,o,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return o<r-1&&(c=_t(c,t,n,r,o+1,s)),o>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i["c"].empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}function Ct(e,t,n){return t<e.openStart&&(e=new i["j"](_t(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new i["j"](_t(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Ot={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Mt=null;function Et(){return Mt||(Mt=document.implementation.createHTMLDocument("title"))}function At(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Et().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);if((n=i&&Ot[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=e,n)for(var o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function Tt(e){for(var t=e.querySelectorAll(s.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Rt(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}for(var o=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var u=r.nodes[n[c]];if(!u||u.hasRequiredAttrs())break;o=i["c"].from(u.create(n[c+1],o)),s++,a++}return new i["j"](o,s,a)}var Dt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},It=s.ie&&s.ie_version<=11,Nt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Nt.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Nt.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Pt=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Nt,It&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Pt.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Pt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Pt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Dt),It&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Pt.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}It&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Pt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Pt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Pt.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Pt.prototype.onSelectionChange=function(){if(qe(this.view)){if(this.suppressingSelectionUpdates)return je(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Pt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Pt.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Pt.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Ke(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var u=this.registerMutation(e[c],a);u&&(r=r<0?u.from:Math.min(u.from,r),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(o=!0))}if(s.gecko&&a.length>1){var l=a.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var h=l[0],f=l[1];h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),Lt(this.view)),this.handleDOMChange(r,i,o,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||je(this.view),this.currentSelection.set(t))}},Pt.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var i=e.previousSibling,o=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var c=e.addedNodes[a],u=c.previousSibling,l=c.nextSibling;(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l)}var h=i&&i.parentNode==e.target?f(i)+1:0,d=n.localPosFromDOM(e.target,h,-1),p=o&&o.parentNode==e.target?f(o):e.target.childNodes.length,m=n.localPosFromDOM(e.target,p,1);return{from:d,to:m}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var jt=!1;function Lt(e){jt||(jt=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Ft={},Bt={};function zt(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Pt(e,(function(t,n,r,i){return ft(e,t,n,r,i)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ft[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!Wt(e,t)||Vt(e,t)||!e.editable&&t.type in Bt||n(e,t)})};for(var n in Ft)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),Ht(e)}function $t(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Ut(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function Ht(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Vt(e,t)})}))}function Vt(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Wt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function qt(e,t){Vt(e,t)||!Ft[t.type]||!e.editable&&t.type in Bt||Ft[t.type](e,t)}function Kt(e){return{left:e.clientX,top:e.clientY}}function Jt(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Yt(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Gt(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Xt(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&r["c"].isSelectable(i))&&(Gt(e,new r["c"](n),"pointer"),!0)}function Qt(e,t){if(-1==t)return!1;var n,i,o=e.state.selection;o instanceof r["c"]&&(n=o.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r["c"].isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(Gt(e,r["c"].create(e.state.doc,i),"pointer"),!0)}function Zt(e,t,n,r,i){return Yt(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?Qt(e,n):Xt(e,n))}function en(e,t,n,r){return Yt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function tn(e,t,n,r){return Yt(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||nn(e,n,r)}function nn(e,t,n){if(0!=n.button)return!1;var i=e.state.doc;if(-1==t)return!!i.inlineContent&&(Gt(e,r["h"].create(i,0,i.content.size),"pointer"),!0);for(var o=i.resolve(t),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s),c=o.before(s);if(a.inlineContent)Gt(e,r["h"].create(i,c+1,c+1+a.content.size),"pointer");else{if(!r["c"].isSelectable(a))continue;Gt(e,r["c"].create(i,c),"pointer")}return!0}}function rn(e){return fn(e)}Bt.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!an(e,t))if(229!=t.keyCode&&e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!s.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||ut(e,t)?t.preventDefault():$t(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Bt.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Bt.keypress=function(e,t){if(!(an(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r["h"])||!n.$from.sameParent(n.$to)){var i=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,i)}))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}}};var on=s.mac?"metaKey":"ctrlKey";Ft.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=rn(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&Jt(t,e.lastClick)&&!t[on]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(Kt(t));o&&("singleClick"==i?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new sn(e,o,t,n)):("doubleClick"==i?en:tn)(e,o.pos,o.inside,t)?t.preventDefault():$t(e,"pointer"))};var sn=function(e,t,n,i){var o,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=i,this.selectNode=n[on],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{var u=e.state.doc.resolve(t.pos);o=u.parent,a=u.depth?u.before():0}this.mightDrag=null;var l=i?null:n.target,h=l?e.docView.nearestDesc(l,!0):null;this.target=h?h.dom:null;var f=e.state,d=f.selection;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||d instanceof r["c"]&&d.from<=a&&d.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),$t(e,"pointer")};function an(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}sn.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return je(e.view)})),this.view.mouseDown=null},sn.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Kt(e))),this.allowDefault||!t?$t(this.view,"pointer"):Zt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r["h"])&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Gt(this.view,r["f"].near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):$t(this.view,"pointer")}},sn.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),$t(this.view,"pointer"),0==e.buttons&&this.done()},Ft.touchdown=function(e){rn(e),$t(e,"pointer")},Ft.contextmenu=function(e){return rn(e)};var cn=s.android?5e3:-1;function un(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return fn(e)}),t))}function ln(e){e.composing&&(e.composing=!1,e.compositionEndedAt=hn());while(e.compositionNodes.length>0)e.compositionNodes.pop().markParentsDirty()}function hn(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function fn(e,t){if(e.domObserver.forceFlush(),ln(e),t||e.docView.dirty){var n=Ne(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}function dn(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}Bt.compositionstart=Bt.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),fn(e,!0),e.markCursor=null;else if(fn(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}e.composing=!0}un(e,cn)},Bt.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,un(e,20))};var pn=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function mn(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function vn(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gn(e,r.value,null,t):gn(e,r.textContent,r.innerHTML,t)}),50)}}function gn(e,t,n,r){var o=bt(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,o||i["j"].empty)})))return!0;if(!o)return!1;var s=mn(o),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ft.copy=Bt.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=pn?null:t.clipboardData,o=n.content(),s=yt(e,o),a=s.dom,c=s.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):dn(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Bt.paste=function(e,t){var n=pn?null:t.clipboardData;n&&gn(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():vn(e,t)};var yn=function(e,t){this.slice=e,this.move=t},bn=s.mac?"altKey":"ctrlKey";for(var wn in Ft.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var i=e.state.selection,o=i.empty?null:e.posAtCoords(Kt(t));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r["c"]?i.to-1:i.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r["c"].create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&e.dispatch(e.state.tr.setSelection(r["c"].create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=yt(e,a),u=c.dom,l=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(pn?"Text":"text/html",u.innerHTML),t.dataTransfer.effectAllowed="copyMove",pn||t.dataTransfer.setData("text/plain",l),e.dragging=new yn(a,!t[bn])}},Ft.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Bt.dragover=Bt.dragenter=function(e,t){return t.preventDefault()},Bt.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var s=e.posAtCoords(Kt(t));if(s){var a=e.state.doc.resolve(s.pos);if(a){var c=n&&n.slice;c?e.someProp("transformPasted",(function(e){c=e(c)})):c=bt(e,t.dataTransfer.getData(pn?"Text":"text/plain"),pn?null:t.dataTransfer.getData("text/html"),!1,a);var u=n&&!t[bn];if(e.someProp("handleDrop",(function(n){return n(e,t,c||i["j"].empty,u)})))t.preventDefault();else if(c){t.preventDefault();var l=c?Object(o["g"])(e.state.doc,a.pos,c):a.pos;null==l&&(l=a.pos);var h=e.state.tr;u&&h.deleteSelection();var f=h.mapping.map(l),d=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,p=h.doc;if(d?h.replaceRangeWith(f,f,c.content.firstChild):h.replaceRange(f,f,c),!h.doc.eq(p)){var m=h.doc.resolve(f);if(d&&r["c"].isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new r["c"](m));else{var v=h.mapping.map(l);h.mapping.maps[h.mapping.maps.length-1].forEach((function(e,t,n,r){return v=r})),h.setSelection(We(e,m,h.doc.resolve(v)))}e.focus(),e.dispatch(h.setMeta("uiEvent","drop"))}}}}}},Ft.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&je(e)}),20))},Ft.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},Ft.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))){var t=e.state.selection,r=t.$cursor;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},Bt)Ft[wn]=Bt[wn];function kn(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Sn=function(e,t){this.spec=t||En,this.side=this.spec.side||0,this.toDOM=e};Sn.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos,s=i.deleted;return s?null:new Cn(o-n,o-n,this)},Sn.prototype.valid=function(){return!0},Sn.prototype.eq=function(e){return this==e||e instanceof Sn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&kn(this.spec,e.spec))};var xn=function(e,t){this.spec=t||En,this.attrs=e};xn.prototype.map=function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Cn(i,o,this)},xn.prototype.valid=function(e,t){return t.from<t.to},xn.prototype.eq=function(e){return this==e||e instanceof xn&&kn(this.attrs,e.attrs)&&kn(this.spec,e.spec)},xn.is=function(e){return e.type instanceof xn};var _n=function(e,t){this.spec=t||En,this.attrs=e};_n.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new Cn(i.pos-n,o.pos-n,this)},_n.prototype.valid=function(e,t){var n,r=e.content.findIndex(t.from),i=r.index,o=r.offset;return o==t.from&&!(n=e.child(i)).isText&&o+n.nodeSize==t.to},_n.prototype.eq=function(e){return this==e||e instanceof _n&&kn(this.attrs,e.attrs)&&kn(this.spec,e.spec)};var Cn=function(e,t,n){this.from=e,this.to=t,this.type=n},On={spec:{configurable:!0},inline:{configurable:!0}};Cn.prototype.copy=function(e,t){return new Cn(e,t,this.type)},Cn.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Cn.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Cn.widget=function(e,t,n){return new Cn(e,e,new Sn(t,n))},Cn.inline=function(e,t,n,r){return new Cn(e,t,new xn(n,r))},Cn.node=function(e,t,n,r){return new Cn(e,t,new _n(n,r))},On.spec.get=function(){return this.type.spec},On.inline.get=function(){return this.type instanceof xn},Object.defineProperties(Cn.prototype,On);var Mn=[],En={},An=function(e,t){this.local=e&&e.length?e:Mn,this.children=t&&t.length?t:Mn};An.create=function(e,t){return t.length?Ln(t,e,0,En):Tn},An.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},An.prototype.findInner=function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,i)}},An.prototype.map=function(e,t,n){return this==Tn||0==e.maps.length?this:this.mapInner(e,t,0,0,n||En)},An.prototype.mapInner=function(e,t,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Dn(this.children,o,e,t,n,r,i):o?new An(o.sort(Fn)):Tn},An.prototype.add=function(e,t){return t.length?this==Tn?An.create(e,t):this.addInner(e,t,0):this},An.prototype.addInner=function(e,t,n){var r,i=this,o=0;e.forEach((function(e,s){var a,c=s+n;if(a=Pn(t,e,c)){r||(r=i.children.slice());while(o<r.length&&r[o]<s)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(e,a,c+1):r.splice(o,0,s,s+e.nodeSize,Ln(a,e,c+1,En)),o+=3}}));for(var s=In(o?jn(t):t,-n),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new An(s.length?this.local.concat(s).sort(Fn):this.local,r||this.children)},An.prototype.remove=function(e){return 0==e.length||this==Tn?this:this.removeInner(e,0)},An.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+t,a=n[i+1]+t,c=0,u=void 0;c<e.length;c++)(u=e[c])&&u.from>s&&u.to<a&&(e[c]=null,(o||(o=[])).push(u));if(o){n==this.children&&(n=this.children.slice());var l=n[i+2].removeInner(o,s+1);l!=Tn?n[i+2]=l:(n.splice(i,3),i-=3)}}if(r.length)for(var h=0,f=void 0;h<e.length;h++)if(f=e[h])for(var d=0;d<r.length;d++)r[d].eq(f,t)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return n==this.children&&r==this.local?this:r.length||n.length?new An(r,n):Tn},An.prototype.forChild=function(e,t){if(this==Tn)return this;if(t.isLeaf)return An.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(n=this.children[i+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof xn){var u=Math.max(o,c.from)-o,l=Math.min(s,c.to)-o;u<l&&(r||(r=[])).push(c.copy(u,l))}}if(r){var h=new An(r.sort(Fn));return n?new Rn([h,n]):h}return n||Tn},An.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof An)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},An.prototype.locals=function(e){return Bn(this.localsInner(e))},An.prototype.localsInner=function(e){if(this==Tn)return Mn;if(e.inlineContent||!this.local.some(xn.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof xn||t.push(this.local[n]);return t};var Tn=new An;An.empty=Tn,An.removeOverlap=Bn;var Rn=function(e){this.members=e};function Dn(e,t,n,r,i,o,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],u=void 0;-1==c||e>c+o||(t>=a[s]+o?a[s+1]=-1:n>=i&&(u=r-n-(t-e))&&(a[s]+=u,a[s+1]+=u))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(c);for(var l=!1,h=0;h<a.length;h+=3)if(-1==a[h+1]){var f=n.map(e[h]+o),d=f-i;if(d<0||d>=r.content.size){l=!0;continue}var p=n.map(e[h+1]+o,-1),m=p-i,v=r.content.findIndex(d),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==d&&y+b.nodeSize==m){var w=a[h+2].mapInner(n,b,f+1,e[h]+o+1,s);w!=Tn?(a[h]=d,a[h+1]=m,a[h+2]=w):(a[h+1]=-2,l=!0)}else l=!0}if(l){var k=Nn(a,e,t||[],n,i,o,s),S=Ln(k,r,0,s);t=S.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var _=0,C=0;_<S.children.length;_+=3){var O=S.children[_];while(C<a.length&&a[C]<O)C+=3;a.splice(C,0,S.children[_],S.children[_+1],S.children[_+2])}}return new An(t&&t.sort(Fn),a)}function In(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new Cn(i.from+t,i.to+t,i.type))}return n}function Nn(e,t,n,r,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[o].spec)}for(var u=0;u<e.children.length;u+=3)a(e.children[u+2],e.children[u]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+o+1);return n}function Pn(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,i=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function jn(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Ln(e,t,n,r){var i=[],o=!1;t.forEach((function(t,s){var a=Pn(e,t,s+n);if(a){o=!0;var c=Ln(a,t,n+s+1,r);c!=Tn&&i.push(s,s+t.nodeSize,c)}}));for(var s=In(o?jn(e):e,-n).sort(Fn),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new An(s,i):Tn}function Fn(e,t){return e.from-t.from||e.to-t.to}function Bn(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),zn(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),zn(t,i+1,o.copy(r.to,o.to)))}}return t}function zn(e,t,n){while(t<e.length&&Fn(n,e[t])>0)t++;e.splice(t,0,n)}function $n(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Tn&&t.push(r)})),e.cursorWrapper&&t.push(An.create(e.state.doc,[e.cursorWrapper.deco])),Rn.from(t)}Rn.prototype.map=function(e,t){var n=this.members.map((function(n){return n.map(e,t,En)}));return Rn.from(n)},Rn.prototype.forChild=function(e,t){if(t.isLeaf)return An.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(e,t);i!=Tn&&(i instanceof Rn?n=n.concat(i.members):n.push(i))}return Rn.from(n)},Rn.prototype.eq=function(e){if(!(e instanceof Rn)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Rn.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?Bn(n?t:t.sort(Fn)):Mn},Rn.from=function(e){switch(e.length){case 0:return Tn;case 1:return e[0];default:return new Rn(e)}};var Un=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Gn),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qn(this),this.markCursor=null,this.cursorWrapper=null,Wn(this),this.nodeViews=Jn(this),this.docView=de(this.state.doc,Vn(this),$n(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,zt(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},Hn={props:{configurable:!0},root:{configurable:!0}};function Vn(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Cn.node(0,e.state.doc.content.size,t)]}function Wn(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Cn.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function qn(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Kn(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Jn(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function Yn(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r}function Gn(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}Hn.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Un.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ht(this),this._props=e,e.plugins&&(e.plugins.forEach(Gn),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},Un.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Un.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Un.prototype.updateStateInner=function(e,t){var n=this,i=this.state,o=!1,a=!1;if(e.storedMarks&&this.composing&&(ln(this),a=!0),this.state=e,t){var c=Jn(this);Yn(c,this.nodeViews)&&(this.nodeViews=c,o=!0),Ht(this)}this.editable=qn(this),Wn(this);var u=$n(this),l=Vn(this),h=t?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,l,u);!f&&e.selection.eq(i.selection)||(a=!0);var d="preserve"==h&&a&&null==this.dom.style.overflowAnchor&&A(this);if(a){this.domObserver.stop();var p=f&&(s.ie||s.chrome)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Kn(i.selection,e.selection);if(f){var m=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,l,u,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=de(e.doc,l,u,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Je(this))?je(this,p):(He(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==h)this.dom.scrollTop=0;else if("to selection"==h){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r["c"]?E(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):E(this,this.coordsAtPos(e.selection.head,1),v))}else d&&R(d)},Un.prototype.destroyPluginViews=function(){var e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()},Un.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var i=this.directPlugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var s=this.state.plugins[o];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}},Un.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var i=0;i<this.directPlugins.length;i++){var o=this.directPlugins[i].props[e];if(null!=o&&(n=t?t(o):o))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var c=s[a].props[e];if(null!=c&&(n=t?t(c):c))return n}},Un.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Un.prototype.focus=function(){this.domObserver.stop(),this.editable&&N(this.dom),je(this),this.domObserver.start()},Hn.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Un.prototype.posAtCoords=function(e){return U(this,e)},Un.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),W(this,e,t)},Un.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Un.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Un.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Un.prototype.endOfTextblock=function(e,t){return te(this,t||this.state,e)},Un.prototype.destroy=function(){this.docView&&(Ut(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],$n(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Un.prototype.dispatchEvent=function(e){return qt(this,e)},Un.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Un.prototype,Hn);var Xn=n("7f06"),Qn=n("f95e");function Zn(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function er(e,t,n){var i=e.selection,s=i.$cursor;if(!s||(n?!n.endOfTextblock("backward",e):s.parentOffset>0))return!1;var a=rr(s);if(!a){var c=s.blockRange(),u=c&&Object(o["j"])(c);return null!=u&&(t&&t(e.tr.lift(c,u).scrollIntoView()),!0)}var l=a.nodeBefore;if(!l.type.spec.isolating&&gr(e,a,t))return!0;if(0==s.parent.content.size&&(tr(l,"end")||r["c"].isSelectable(l))){if(t){var h=e.tr.deleteRange(s.before(),s.after());h.setSelection(tr(l,"end")?r["f"].findFrom(h.doc.resolve(h.mapping.map(a.pos,-1)),-1):r["c"].create(h.doc,a.pos-l.nodeSize)),t(h.scrollIntoView())}return!0}return!(!l.isAtom||a.depth!=s.depth-1)&&(t&&t(e.tr.delete(a.pos-l.nodeSize,a.pos).scrollIntoView()),!0)}function tr(e,t,n){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&1!=e.childCount)return!1}return!1}function nr(e,t,n){var i=e.selection,o=i.$head,s=i.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;a=rr(o)}var c=a&&a.nodeBefore;return!(!c||!r["c"].isSelectable(c))&&(t&&t(e.tr.setSelection(r["c"].create(e.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)}function rr(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function ir(e,t,n){var i=e.selection,o=i.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var s=sr(o);if(!s)return!1;var a=s.nodeAfter;if(gr(e,s,t))return!0;if(0==o.parent.content.size&&(tr(a,"start")||r["c"].isSelectable(a))){if(t){var c=e.tr.deleteRange(o.before(),o.after());c.setSelection(tr(a,"start")?r["f"].findFrom(c.doc.resolve(c.mapping.map(s.pos)),1):r["c"].create(c.doc,c.mapping.map(s.pos))),t(c.scrollIntoView())}return!0}return!(!a.isAtom||s.depth!=o.depth-1)&&(t&&t(e.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0)}function or(e,t,n){var i=e.selection,o=i.$head,s=i.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;a=sr(o)}var c=a&&a.nodeAfter;return!(!c||!r["c"].isSelectable(c))&&(t&&t(e.tr.setSelection(r["c"].create(e.doc,a.pos)).scrollIntoView()),!0)}function sr(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function ar(e,t){var n=e.selection,r=n.$from,i=n.$to,s=r.blockRange(i),a=s&&Object(o["j"])(s);return null!=a&&(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}function cr(e,t){var n=e.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function ur(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function lr(e,t){var n=e.selection,i=n.$head,o=n.$anchor;if(!i.parent.type.spec.code||!i.sameParent(o))return!1;var s=i.node(-1),a=i.indexAfter(-1),c=ur(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(t){var u=i.after(),l=e.tr.replaceWith(u,u,c.createAndFill());l.setSelection(r["f"].near(l.doc.resolve(u),1)),t(l.scrollIntoView())}return!0}function hr(e,t){var n=e.selection,i=n.$from,o=n.$to;if(n instanceof r["a"]||i.parent.inlineContent||o.parent.inlineContent)return!1;var s=ur(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var a=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,c=e.tr.insert(a,s.createAndFill());c.setSelection(r["h"].create(c.doc,a+1)),t(c.scrollIntoView())}return!0}function fr(e,t){var n=e.selection,r=n.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var i=r.before();if(Object(o["f"])(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var s=r.blockRange(),a=s&&Object(o["j"])(s);return null!=a&&(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}function dr(e,t){var n=e.selection,i=n.$from,s=n.$to;if(e.selection instanceof r["c"]&&e.selection.node.isBlock)return!(!i.parentOffset||!Object(o["f"])(e.doc,i.pos))&&(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(t){var a=s.parentOffset==s.parent.content.size,c=e.tr;(e.selection instanceof r["h"]||e.selection instanceof r["a"])&&c.deleteSelection();var u=0==i.depth?null:ur(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=a&&u?[{type:u}]:null,h=Object(o["f"])(c.doc,c.mapping.map(i.pos),1,l);if(l||h||!Object(o["f"])(c.doc,c.mapping.map(i.pos),1,u&&[{type:u}])||(l=[{type:u}],h=!0),h&&(c.split(c.mapping.map(i.pos),1,l),!a&&!i.parentOffset&&i.parent.type!=u)){var f=c.mapping.map(i.before()),d=c.doc.resolve(f);i.node(-1).canReplaceWith(d.index(),d.index()+1,u)&&c.setNodeMarkup(c.mapping.map(i.before()),u)}t(c.scrollIntoView())}return!0}function pr(e,t){var n,i=e.selection,o=i.$from,s=i.to,a=o.sharedDepth(s);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(r["c"].create(e.doc,n))),!0)}function mr(e,t){return t&&t(e.tr.setSelection(new r["a"](e.doc))),!0}function vr(e,t,n){var r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(s,s+1)||!i.isTextblock&&!Object(o["e"])(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}function gr(e,t,n){var s,a,c=t.nodeBefore,u=t.nodeAfter;if(c.type.spec.isolating||u.type.spec.isolating)return!1;if(vr(e,t,n))return!0;var l=t.parent.canReplace(t.index(),t.index()+1);if(l&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(u.type))&&a.matchType(s[0]||u.type).validEnd){if(n){for(var h=t.pos+u.nodeSize,f=i["c"].empty,d=s.length-1;d>=0;d--)f=i["c"].from(s[d].create(null,f));f=i["c"].from(c.copy(f));var p=e.tr.step(new o["b"](t.pos-1,h,t.pos,h,new i["j"](f,1,0),s.length,!0)),m=h+2*s.length;Object(o["e"])(p.doc,m)&&p.join(m),n(p.scrollIntoView())}return!0}var v=r["f"].findFrom(t,1),g=v&&v.$from.blockRange(v.$to),y=g&&Object(o["j"])(g);if(null!=y&&y>=t.depth)return n&&n(e.tr.lift(g,y).scrollIntoView()),!0;if(l&&tr(u,"start",!0)&&tr(c,"end")){for(var b=c,w=[];;){if(w.push(b),b.isTextblock)break;b=b.lastChild}for(var k=u,S=1;!k.isTextblock;k=k.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,k.content)){if(n){for(var x=i["c"].empty,_=w.length-1;_>=0;_--)x=i["c"].from(w[_].copy(x));var C=e.tr.step(new o["b"](t.pos-w.length,t.pos+u.nodeSize,t.pos+S,t.pos+u.nodeSize-S,new i["j"](x,w.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function yr(e,t){return function(n,r){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),u=c&&Object(o["h"])(c,e,t);return!!u&&(r&&r(n.tr.wrap(c,u).scrollIntoView()),!0)}}function br(e,t){return function(n,r){var i=n.selection,o=i.from,s=i.to,a=!1;return n.doc.nodesBetween(o,s,(function(r,i){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var o=n.doc.resolve(i),s=o.index();a=o.parent.canReplaceWith(s,s+1,e)}})),!!a&&(r&&r(n.tr.setBlockType(o,s,e,t).scrollIntoView()),!0)}}function wr(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return function(t,n,r){for(var i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}var kr=wr(Zn,er,nr),Sr=wr(Zn,ir,or),xr={Enter:wr(cr,hr,fr,dr),"Mod-Enter":lr,Backspace:kr,"Mod-Backspace":kr,Delete:Sr,"Mod-Delete":Sr,"Mod-a":mr},_r={"Ctrl-h":xr["Backspace"],"Alt-Backspace":xr["Mod-Backspace"],"Ctrl-d":xr["Delete"],"Ctrl-Alt-Backspace":xr["Mod-Delete"],"Alt-Delete":xr["Mod-Delete"],"Alt-d":xr["Mod-Delete"]};for(var Cr in xr)_r[Cr]=xr[Cr];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function Or(e,t){return function(n,r){var s=n.selection,a=s.$from,c=s.$to,u=a.blockRange(c),l=!1,h=u;if(!u)return!1;if(u.depth>=2&&a.node(u.depth-1).type.compatibleContent(e)&&0==u.startIndex){if(0==a.index(u.depth-1))return!1;var f=n.doc.resolve(u.start-2);h=new i["g"](f,f,u.depth),u.endIndex<u.parent.childCount&&(u=new i["g"](a,n.doc.resolve(c.end(u.depth)),u.depth)),l=!0}var d=Object(o["h"])(h,e,t,u);return!!d&&(r&&r(Mr(n.tr,u,d,l,e).scrollIntoView()),!0)}}function Mr(e,t,n,r,s){for(var a=i["c"].empty,c=n.length-1;c>=0;c--)a=i["c"].from(n[c].type.create(n[c].attrs,a));e.step(new o["b"](t.start-(r?2:0),t.end,t.start,t.end,new i["j"](a,0,0),n.length,!0));for(var u=0,l=0;l<n.length;l++)n[l].type==s&&(u=l+1);for(var h=n.length-u,f=t.start+n.length-(r?2:0),d=t.parent,p=t.startIndex,m=t.endIndex,v=!0;p<m;p++,v=!1)!v&&Object(o["f"])(e.doc,f,h)&&(e.split(f,h),f+=2*h),f+=d.child(p).nodeSize;return e}function Er(e){return function(t,n){var r=t.selection,i=r.$from,o=r.$to,s=i.blockRange(o,(function(t){return t.childCount&&t.firstChild.type==e}));return!!s&&(!n||(i.node(s.depth-1).type==e?Ar(t,n,e,s):Tr(t,n,s)))}}function Ar(e,t,n,r){var s=e.tr,a=r.end,c=r.$to.end(r.depth);return a<c&&(s.step(new o["b"](a-1,c,a,c,new i["j"](i["c"].from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new i["g"](s.doc.resolve(r.$from.pos),s.doc.resolve(c),r.depth)),t(s.lift(r,Object(o["j"])(r)).scrollIntoView()),!0}function Tr(e,t,n){for(var r=e.tr,s=n.parent,a=n.end,c=n.endIndex-1,u=n.startIndex;c>u;c--)a-=s.child(c).nodeSize,r.delete(a-1,a+1);var l=r.doc.resolve(n.start),h=l.nodeAfter,f=0==n.startIndex,d=n.endIndex==s.childCount,p=l.node(-1),m=l.index(-1);if(!p.canReplace(m+(f?0:1),m+1,h.content.append(d?i["c"].empty:i["c"].from(s))))return!1;var v=l.pos,g=v+h.nodeSize;return r.step(new o["b"](v-(f?1:0),g+(d?1:0),v+1,g-1,new i["j"]((f?i["c"].empty:i["c"].from(s.copy(i["c"].empty))).append(d?i["c"].empty:i["c"].from(s.copy(i["c"].empty))),f?0:1,d?0:1),f?0:1)),t(r.scrollIntoView()),!0}function Rr(e){return function(t,n){var r=t.selection,s=r.$from,a=r.$to,c=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));if(!c)return!1;var u=c.startIndex;if(0==u)return!1;var l=c.parent,h=l.child(u-1);if(h.type!=e)return!1;if(n){var f=h.lastChild&&h.lastChild.type==l.type,d=i["c"].from(f?e.create():null),p=new i["j"](i["c"].from(e.create(null,i["c"].from(l.type.create(null,d)))),f?3:1,0),m=c.start,v=c.end;n(t.tr.step(new o["b"](m-(f?3:1),v,m,v,p,1,!0)).scrollIntoView())}return!0}}function Dr(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Ir(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Nr(e,t){const n=Ir(t,e.schema),{from:r,to:i}=e.selection;let o=[];e.doc.nodesBetween(r,i,e=>{o=[...o,e]});const s=o.reverse().find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function Pr(e,t){if("string"===typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function jr(e,t){const n=Pr(t,e.schema),{from:r,to:i,empty:o}=e.selection;let s=[];o?s=e.selection.$head.marks():e.doc.nodesBetween(r,i,e=>{s=[...s,...e.marks]});const a=s.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function Lr(e,t){const n=Dr("string"===typeof t?t:t.name,e.schema);return"node"===n?Nr(e,t):"mark"===n?jr(e,t):{}}function Fr(e,t){const n=Object.keys(t);return!n.length||!!n.filter(n=>t[n]===e[n]).length}function Br(e,t,n={}){const{from:r,to:i,empty:o}=e.selection,s=t?Ir(t,e.schema):null;let a=[];if(e.doc.nodesBetween(r,i,(e,t)=>{if(!e.isText){const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);a=[...a,{node:e,from:n,to:o}]}}),o)return!!a.filter(e=>!s||s.name===e.node.type.name).find(e=>Fr(e.node.attrs,n));const c=i-r,u=a.filter(e=>!s||s.name===e.node.type.name).filter(e=>Fr(e.node.attrs,n)).reduce((e,t)=>{const n=t.to-t.from;return e+n},0);return u>=c}function zr(e,t,n={}){const{from:r,to:i,empty:o}=e.selection,s=t?Pr(t,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!s||s.name===e.type.name).find(e=>Fr(e.attrs,n));let a=0,c=[];if(e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText){const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize),s=o-n;a+=s,c=[...c,...e.marks.map(e=>({mark:e,from:n,to:o}))]}}),0===a)return!1;const u=c.filter(e=>!s||s.name===e.mark.type.name).filter(e=>Fr(e.mark.attrs,n)).reduce((e,t)=>{const n=t.to-t.from;return e+n},0),l=c.filter(e=>!s||e.mark.type!==s&&e.mark.type.excludes(s)).reduce((e,t)=>{const n=t.to-t.from;return e+n},0),h=u>0?u+l:u;return h>=a}function $r(e,t,n={}){if(!t)return Br(e,null,n)||zr(e,null,n);const r=Dr(t,e.schema);return"node"===r?Br(e,t,n):"mark"===r&&zr(e,t,n)}function Ur(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Hr(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Vr(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof e&&null!==e)try{return Array.isArray(e)?i["c"].fromArray(e.map(e=>t.nodeFromJSON(e))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Vr("",t,n)}if("string"===typeof e){const r=i["a"].fromSchema(t);return n.slice?r.parseSlice(Hr(e),n.parseOptions).content:r.parse(Hr(e),n.parseOptions)}return Vr("",t,n)}function Wr(e,t,n={}){return Vr(e,t,{slice:!1,parseOptions:n})}function qr(e,t){const n=i["b"].fromSchema(t).serializeFragment(e.content),r=document.implementation.createHTMLDocument(),o=r.createElement("div");return o.appendChild(n),o.innerHTML}function Kr(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function Jr(e){const t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}class Yr{constructor(e,t){this.editor=e,this.commands=t}createCommands(){const{commands:e,editor:t}=this,{state:n,view:r}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([e,t])=>{const n=(...e)=>{const n=t(...e)(o);return i.getMeta("preventDispatch")||r.dispatch(i),n};return[e,n]}))}createChain(e,t=!0){const{commands:n,editor:r}=this,{state:i,view:o}=r,s=[],a=!!e,c=e||i.tr,u=()=>(a||!t||c.getMeta("preventDispatch")||o.dispatch(c),s.every(e=>!0===e)),l={...Object.fromEntries(Object.entries(n).map(([e,n])=>{const r=(...e)=>{const r=this.buildProps(c,t),i=n(...e)(r);return s.push(i),l};return[e,r]})),run:u};return l}createCan(e){const{commands:t,editor:n}=this,{state:r}=n,i=void 0,o=e||r.tr,s=this.buildProps(o,i),a=Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...s,dispatch:i})]));return{...a,chain:()=>this.createChain(o,i)}}buildProps(e,t=!0){const{editor:n,commands:r}=this,{state:i,view:o}=n;i.storedMarks&&e.setStoredMarks(i.storedMarks);const s={tr:e,editor:n,view:o,state:this.chainableState(e,i),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([e,t])=>[e,(...e)=>t(...e)(s)]))}};return s}chainableState(e,t){let{selection:n}=e,{doc:r}=e,{storedMarks:i}=e;return{...t,schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return n},get doc(){return r},get tr(){return n=e.selection,r=e.doc,i=e.storedMarks,e}}}}function Gr(e,t,n={}){if(void 0===e.config[t]&&e.parent)return Gr(e.parent,t,n);if("function"===typeof e.config[t]){const r=e.config[t].bind({...n,parent:e.parent?Gr(e.parent,t,n):null});return r}return e.config[t]}function Xr(e){const t=e.filter(e=>"extension"===e.type),n=e.filter(e=>"node"===e.type),r=e.filter(e=>"mark"===e.type);return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Qr(e){const t=[],{nodeExtensions:n,markExtensions:r}=Xr(e),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach(e=>{const n={name:e.name,options:e.options},r=Gr(e,"addGlobalAttributes",n);if(!r)return;const i=r();i.forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...o,...r}})})})})}),i.forEach(e=>{const n={name:e.name,options:e.options},r=Gr(e,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach(([n,r])=>{t.push({type:e.name,name:n,attribute:{...o,...r}})})}),t}function Zr(...e){return e.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([e,t])=>{const r=n[e];n[e]=r?"class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:t}),n},{})}function ei(e,t){return t.filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>Zr(e,t),{})}function ti(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function ni(e){return"string"!==typeof e?e:e.match(/^\d*(\.\d+)?$/)?Number(e):"true"===e||"false"!==e&&e}function ri(e,t){return e.style?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const i=t.filter(e=>e.attribute.rendered).reduce((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n)||{}:{[t.name]:ni(n.getAttribute(t.name))},i=Object.fromEntries(Object.entries(r).filter(([,e])=>void 0!==e&&null!==e));return{...e,...i}},{});return{...r,...i}}}}function ii(e,t,...n){return"function"===typeof e?t?e.bind(t)(...n):e(...n):e}function oi(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!ti(t))&&(null!==t&&void 0!==t)))}function si(e){var t;const n=Qr(e),{nodeExtensions:r,markExtensions:o}=Xr(e),s=null===(t=r.find(e=>Gr(e,"topNode")))||void 0===t?void 0:t.name,a=Object.fromEntries(r.map(t=>{const r=n.filter(e=>e.type===t.name),i={name:t.name,options:t.options},o=e.reduce((e,n)=>{const r=Gr(n,"extendNodeSchema",i);return{...e,...r?r(t):{}}},{}),s=oi({...o,content:ii(Gr(t,"content",i)),marks:ii(Gr(t,"marks",i)),group:ii(Gr(t,"group",i)),inline:ii(Gr(t,"inline",i)),atom:ii(Gr(t,"atom",i)),selectable:ii(Gr(t,"selectable",i)),draggable:ii(Gr(t,"draggable",i)),code:ii(Gr(t,"code",i)),defining:ii(Gr(t,"defining",i)),isolating:ii(Gr(t,"isolating",i)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=ii(Gr(t,"parseHTML",i));a&&(s.parseDOM=a.map(e=>ri(e,r)));const c=Gr(t,"renderHTML",i);return c&&(s.toDOM=e=>c({node:e,HTMLAttributes:ei(e,r)})),[t.name,s]})),c=Object.fromEntries(o.map(t=>{const r=n.filter(e=>e.type===t.name),i={name:t.name,options:t.options},o=e.reduce((e,n)=>{const r=Gr(n,"extendMarkSchema",i);return{...e,...r?r(t):{}}},{}),s=oi({...o,inclusive:ii(Gr(t,"inclusive",i)),excludes:ii(Gr(t,"excludes",i)),group:ii(Gr(t,"group",i)),spanning:ii(Gr(t,"spanning",i)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=ii(Gr(t,"parseHTML",i));a&&(s.parseDOM=a.map(e=>ri(e,r)));const c=Gr(t,"renderHTML",i);return c&&(s.toDOM=e=>c({mark:e,HTMLAttributes:ei(e,r)})),[t.name,s]}));return new i["i"]({topNode:s,nodes:a,marks:c})}function ai(e,t){return t.nodes[e]?t.nodes[e]:t.marks[e]?t.marks[e]:null}class ci{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ci.resolve(e),this.schema=si(this.extensions),this.extensions.forEach(e=>{var t;const n={name:e.name,options:e.options,editor:this.editor,type:ai(e.name,this.schema)};if("mark"===e.type){const r=null===(t=ii(Gr(e,"keepOnSplit",n)))||void 0===t||t;r&&this.splittableMarks.push(e.name)}const r=Gr(e,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=Gr(e,"onCreate",n);i&&this.editor.on("create",i);const o=Gr(e,"onUpdate",n);o&&this.editor.on("update",o);const s=Gr(e,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=Gr(e,"onTransaction",n);a&&this.editor.on("transaction",a);const c=Gr(e,"onFocus",n);c&&this.editor.on("focus",c);const u=Gr(e,"onBlur",n);u&&this.editor.on("blur",u);const l=Gr(e,"onDestroy",n);l&&this.editor.on("destroy",l)})}static resolve(e){return ci.sort(ci.flatten(e))}static flatten(e){return e.map(e=>{const t={name:e.name,options:e.options},n=Gr(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){const t=100;return e.sort((e,n)=>{const r=Gr(e,"priority")||t,i=Gr(n,"priority")||t;return r>i?-1:r<i?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,editor:this.editor,type:ai(t.name,this.schema)},r=Gr(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){return[...this.extensions].reverse().map(e=>{const t={name:e.name,options:e.options,editor:this.editor,type:ai(e.name,this.schema)},n=[],r=Gr(e,"addKeyboardShortcuts",t);if(r){const e=Object.fromEntries(Object.entries(r()).map(([e,t])=>[e,()=>t({editor:this.editor})])),t=Object(Xn["b"])(e);n.push(t)}const i=Gr(e,"addInputRules",t);if(this.editor.options.enableInputRules&&i){const e=i(),t=e.length?[Object(Qn["b"])({rules:e})]:[];n.push(...t)}const o=Gr(e,"addPasteRules",t);if(this.editor.options.enablePasteRules&&o){const e=o();n.push(...e)}const s=Gr(e,"addProseMirrorPlugins",t);if(s){const e=s();n.push(...e)}return n}).flat()}get attributes(){return Qr(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Xr(this.extensions);return Object.fromEntries(t.filter(e=>!!Gr(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,editor:e,type:Ir(t.name,this.schema)},i=Gr(t,"addNodeView",r);if(!i)return[];const o=(r,o,s,a)=>{const c=ei(r,n);return i()({editor:e,node:r,getPos:s,decorations:a,HTMLAttributes:c,extension:t})};return[t.name,o]}))}get textSerializers(){const{editor:e}=this,{nodeExtensions:t}=Xr(this.extensions);return Object.fromEntries(t.filter(e=>!!Gr(e,"renderText")).map(t=>{const n={name:t.name,options:t.options,editor:e,type:Ir(t.name,this.schema)},r=Gr(t,"renderText",n);if(!r)return[];const i=e=>r(e);return[t.name,i]}))}}class ui{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function li(e){return Object.prototype.toString.call(e).slice(8,-1)}function hi(e){return"Object"===li(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function fi(e,t){const n={...e};return hi(e)&&hi(t)&&Object.keys(t).forEach(r=>{hi(t[r])?r in e?n[r]=fi(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}class di{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new di(e)}configure(e={}){const t=this.extend();return t.options=fi(this.options,e),t}extend(e={}){const t=new di(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}const pi=(e,t,n,r,i)=>{let o="",s=!0;return e.state.doc.nodesBetween(t,n,(a,c)=>{var u;const l=e.extensionManager.textSerializers[a.type.name];l?(o+=l({node:a}),s=!r):a.isText?(o+=null===(u=null===a||void 0===a?void 0:a.text)||void 0===u?void 0:u.slice(Math.max(t,c)-c,n-c),s=!r):a.isLeaf&&i?(o+=i,s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o},mi=di.create({name:"editable",addProseMirrorPlugins(){return[new r["d"]({key:new r["e"]("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{from:t,to:n}=e.state.selection;return pi(e,t,n,"\n")}}})]}}),vi=()=>({view:e})=>{const t=e.dom;return t.blur(),!0};var gi=Object.freeze({__proto__:null,blur:vi});const yi=(e=!1)=>({commands:t})=>t.setContent("",e);var bi=Object.freeze({__proto__:null,clearContent:yi});const wi=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return i.forEach(r=>{e.doc.nodesBetween(r.$from.pos,r.$to.pos,(e,r)=>{if(e.type.isText)return;const i=t.doc.resolve(t.mapping.map(r)),s=t.doc.resolve(t.mapping.map(r+e.nodeSize)),a=i.blockRange(s);if(!a)return;const c=Object(o["j"])(a);if(e.type.isTextblock&&n){const{defaultType:e}=i.parent.contentMatchAt(i.index());t.setNodeMarkup(a.start,e)}(c||0===c)&&n&&t.lift(a,c)})}),!0};var ki=Object.freeze({__proto__:null,clearNodes:wi});const Si=e=>t=>e(t);var xi=Object.freeze({__proto__:null,command:Si});const _i=()=>({state:e,dispatch:t})=>hr(e,t);var Ci=Object.freeze({__proto__:null,createParagraphNear:_i});const Oi=e=>({tr:t,state:n,dispatch:r})=>{const i=Ir(e,n.schema),o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1){const n=o.node(e);if(n.type===i){if(r){const n=o.before(e),r=o.after(e);t.delete(n,r).scrollIntoView()}return!0}}return!1};var Mi=Object.freeze({__proto__:null,deleteNode:Oi});const Ei=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0};var Ai=Object.freeze({__proto__:null,deleteRange:Ei});const Ti=()=>({state:e,dispatch:t})=>Zn(e,t);var Ri=Object.freeze({__proto__:null,deleteSelection:Ti});const Di=()=>({commands:e})=>e.keyboardShortcut("Enter");var Ii=Object.freeze({__proto__:null,enter:Di});const Ni=()=>({state:e,dispatch:t})=>lr(e,t);var Pi=Object.freeze({__proto__:null,exitCode:Ni});function ji(e,t,n={}){return e.find(e=>e.type===t&&Fr(e.attrs,n))}function Li(e,t,n={}){return!!ji(e,t,n)}function Fi(e,t,n={}){if(!e||!t)return;const r=e.parent.childAfter(e.parentOffset);if(!r.node)return;const i=ji(r.node.marks,t,n);if(!i)return;let o=e.index(),s=e.start()+r.offset,a=o+1,c=s+r.node.nodeSize;ji(r.node.marks,t,n);while(o>0&&i.isInSet(e.parent.child(o-1).marks))o-=1,s-=e.parent.child(o).nodeSize;while(a<e.parent.childCount&&Li(e.parent.child(a).marks,t,n))c+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:c}}const Bi=(e,t={})=>({tr:n,state:i,dispatch:o})=>{const s=Pr(e,i.schema),{doc:a,selection:c}=n,{$from:u,from:l,to:h}=c;if(o){const e=Fi(u,s,t);if(e&&e.from<=l&&e.to>=h){const t=r["h"].create(a,e.from,e.to);n.setSelection(t)}}return!0};var zi=Object.freeze({__proto__:null,extendMarkRange:Bi});const $i=e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};var Ui=Object.freeze({__proto__:null,first:$i});function Hi(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Vi(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}function Wi(e){return e&&"object"===typeof e&&!Array.isArray(e)&&!Vi(e)}function qi(e){return Wi(e)&&e instanceof r["h"]}function Ki(e,t=null){if(!t)return null;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{size:t}=e.doc.content;return{from:t,to:t}}return{from:t,to:t}}const Ji=(e=null)=>({editor:t,view:n,tr:i,dispatch:o})=>{if(n.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!qi(t.state.selection))return n.focus(),!0;const{from:s,to:a}=Ki(t.state,e)||t.state.selection,{doc:c,storedMarks:u}=i,l=Hi(s,0,c.content.size),h=Hi(a,0,c.content.size),f=r["h"].create(c,l,h),d=t.state.selection.eq(f);return o&&(i.setSelection(f),d&&u&&i.setStoredMarks(u),n.focus()),!0};var Yi=Object.freeze({__proto__:null,focus:Ji});const Gi=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r}));var Xi=Object.freeze({__proto__:null,forEach:Gi});const Qi=e=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},e);var Zi=Object.freeze({__proto__:null,insertContent:Qi});function eo(e,t,n){const i=e.steps.length-1;if(i<t)return;const s=e.steps[i];if(!(s instanceof o["c"]||s instanceof o["b"]))return;const a=e.mapping.maps[i];let c=0;a.forEach((e,t,n,r)=>{0===c&&(c=r)}),e.setSelection(r["f"].near(e.doc.resolve(c),n))}const to=(e,t)=>({tr:n,dispatch:r,editor:i})=>{if(r){const r=Vr(t,i.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===r.toString())return!0;const{from:o,to:s}="number"===typeof e?{from:e,to:e}:e;n.replaceWith(o,s,r),eo(n,n.steps.length-1,1)}return!0};var no=Object.freeze({__proto__:null,insertContentAt:to});const ro=()=>({state:e,dispatch:t})=>er(e,t);var io=Object.freeze({__proto__:null,joinBackward:ro});const oo=()=>({state:e,dispatch:t})=>ir(e,t);var so=Object.freeze({__proto__:null,joinForward:oo});const ao="undefined"!==typeof navigator&&/Mac/.test(navigator.platform);function co(e){const t=e.split(/-(?!$)/);let n,r,i,o,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))i=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);ao?o=!0:r=!0}}return n&&(s="Alt-"+s),r&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}const uo=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const o=co(e).split(/-(?!$)/),s=o.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,a))});return null===c||void 0===c||c.steps.forEach(e=>{const t=e.map(r.mapping);t&&i&&r.maybeStep(t)}),!0};var lo=Object.freeze({__proto__:null,keyboardShortcut:uo});const ho=(e,t={})=>({state:n,dispatch:r})=>{const i=Ir(e,n.schema),o=Br(n,i,t);return!!o&&ar(n,r)};var fo=Object.freeze({__proto__:null,lift:ho});const po=()=>({state:e,dispatch:t})=>fr(e,t);var mo=Object.freeze({__proto__:null,liftEmptyBlock:po});const vo=e=>({state:t,dispatch:n})=>{const r=Ir(e,t.schema);return Er(r)(t,n)};var go=Object.freeze({__proto__:null,liftListItem:vo});const yo=()=>({state:e,dispatch:t})=>cr(e,t);var bo=Object.freeze({__proto__:null,newlineInCode:yo});const wo=(e,t={})=>({state:n,commands:r})=>{console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");const{from:i,to:o}=n.selection,s={from:i,to:o};return r.replaceRange(s,e,t)};var ko=Object.freeze({__proto__:null,replace:wo});const So=(e,t,n={})=>({tr:r,state:i,dispatch:o})=>{console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");const s=Ir(t,i.schema),{from:a,to:c}=e;return o&&r.replaceRangeWith(a,c,s.create(n)),!0};var xo=Object.freeze({__proto__:null,replaceRange:So});function _o(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}const Co=(e,t)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Dr("string"===typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=Ir(e,r.schema)),"mark"===a&&(s=Pr(e,r.schema)),i&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,_o(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(i=>{s===i.type&&n.addMark(r,r+e.nodeSize,s.create(_o(i.attrs,t)))})})}),!0)};var Oo=Object.freeze({__proto__:null,resetAttributes:Co});const Mo=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0);var Eo=Object.freeze({__proto__:null,scrollIntoView:Mo});const Ao=()=>({state:e,dispatch:t})=>mr(e,t);var To=Object.freeze({__proto__:null,selectAll:Ao});const Ro=()=>({state:e,dispatch:t})=>nr(e,t);var Do=Object.freeze({__proto__:null,selectNodeBackward:Ro});const Io=()=>({state:e,dispatch:t})=>or(e,t);var No=Object.freeze({__proto__:null,selectNodeForward:Io});const Po=()=>({state:e,dispatch:t})=>pr(e,t);var jo=Object.freeze({__proto__:null,selectParentNode:Po});const Lo=(e,t=!1,n={})=>({tr:i,editor:o,dispatch:s})=>{const{doc:a}=i,c=Wr(e,o.schema,n),u=r["h"].create(a,0,a.content.size);return s&&i.setSelection(u).replaceSelectionWith(c,!1).setMeta("preventUpdate",!t),!0};var Fo=Object.freeze({__proto__:null,setContent:Lo});const Bo=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,c=Pr(e,r.schema);if(i)if(s){const e=jr(r,c);n.addStoredMark(c.create({...e,...t}))}else a.forEach(e=>{const i=e.$from.pos,o=e.$to.pos;r.doc.nodesBetween(i,o,(e,r)=>{const s=Math.max(r,i),a=Math.min(r+e.nodeSize,o),u=e.marks.find(e=>e.type===c);u?e.marks.forEach(e=>{c===e.type&&n.addMark(s,a,c.create({...e.attrs,...t}))}):n.addMark(s,a,c.create(t))})});return!0};var zo=Object.freeze({__proto__:null,setMark:Bo});const $o=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0);var Uo=Object.freeze({__proto__:null,setMeta:$o});const Ho=(e,t={})=>({state:n,dispatch:r})=>{const i=Ir(e,n.schema);return br(i,t)(n,r)};var Vo=Object.freeze({__proto__:null,setNode:Ho});const Wo=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,i=Hi(e,0,n.content.size),o=r["c"].create(n,i);t.setSelection(o)}return!0};var qo=Object.freeze({__proto__:null,setNodeSelection:Wo});const Ko=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:i,to:o}="number"===typeof e?{from:e,to:e}:e,s=Hi(i,0,n.content.size),a=Hi(o,0,n.content.size),c=r["h"].create(n,s,a);t.setSelection(c)}return!0};var Jo=Object.freeze({__proto__:null,setTextSelection:Ko});const Yo=e=>({state:t,dispatch:n})=>{const r=Ir(e,t.schema);return Rr(r)(t,n)};var Go=Object.freeze({__proto__:null,sinkListItem:Yo});function Xo(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function Qo(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Zo(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(e=>null===t||void 0===t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}const es=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:s})=>{const{selection:a,doc:c}=t,{$from:u,$to:l}=a,h=s.extensionManager.attributes,f=Xo(h,u.node().type.name,u.node().attrs);if(a instanceof r["c"]&&a.node.isBlock)return!(!u.parentOffset||!Object(o["f"])(c,u.pos))&&(i&&(e&&Zo(n,s.extensionManager.splittableMarks),t.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(i){const i=l.parentOffset===l.parent.content.size;a instanceof r["h"]&&t.deleteSelection();const c=0===u.depth?void 0:Qo(u.node(-1).contentMatchAt(u.indexAfter(-1)));let h=i&&c?[{type:c,attrs:f}]:void 0,d=Object(o["f"])(t.doc,t.mapping.map(u.pos),1,h);if(h||d||!Object(o["f"])(t.doc,t.mapping.map(u.pos),1,c?[{type:c}]:void 0)||(d=!0,h=c?[{type:c,attrs:f}]:void 0),d&&(t.split(t.mapping.map(u.pos),1,h),c&&!i&&!u.parentOffset&&u.parent.type!==c)){const e=t.mapping.map(u.before()),n=t.doc.resolve(e);u.node(-1).canReplaceWith(n.index(),n.index()+1,c)&&t.setNodeMarkup(t.mapping.map(u.before()),c)}e&&Zo(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return!0};var ts=Object.freeze({__proto__:null,splitBlock:es});const ns=e=>({tr:t,state:n,dispatch:s,editor:a})=>{var c;const u=Ir(e,n.schema),{$from:l,$to:h}=n.selection,f=n.selection.node;if(f&&f.isBlock||l.depth<2||!l.sameParent(h))return!1;const d=l.node(-1);if(d.type!==u)return!1;const p=a.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==u||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let e=i["c"].empty;const n=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-n;t>=l.depth-3;t-=1)e=i["c"].from(l.node(t).copy(e));const o=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,s=Xo(p,l.node().type.name,l.node().attrs),a=(null===(c=u.contentMatch.defaultType)||void 0===c?void 0:c.createAndFill(s))||void 0;e=e.append(i["c"].from(u.createAndFill(null,a)||void 0));const h=l.before(l.depth-(n-1));t.replace(h,l.after(-o),new i["j"](e,4-n,0));let f=-1;t.doc.nodesBetween(h,t.doc.content.size,(e,t)=>{if(f>-1)return!1;e.isTextblock&&0===e.content.size&&(f=t+1)}),f>-1&&t.setSelection(r["h"].near(t.doc.resolve(f))),t.scrollIntoView()}return!0}const m=h.pos===l.end()?d.contentMatchAt(0).defaultType:null,v=Xo(p,d.type.name,d.attrs),g=Xo(p,l.node().type.name,l.node().attrs);t.delete(l.pos,h.pos);const y=m?[{type:u,attrs:v},{type:m,attrs:g}]:[{type:u,attrs:v}];return!!Object(o["f"])(t.doc,l.pos,2)&&(s&&t.split(l.pos,2,y).scrollIntoView(),!0)};var rs=Object.freeze({__proto__:null,splitListItem:ns});function is(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function ss(e){return t=>is(t.$from,e)}function as(e,t){const{nodeExtensions:n}=Xr(t),r=n.find(t=>t.name===e);if(!r)return!1;const i={name:r.name,options:r.options},o=ii(Gr(r,"group",i));return"string"===typeof o&&o.split(" ").includes("list")}const cs=(e,t)=>({editor:n,tr:r,state:i,dispatch:o,chain:s,commands:a,can:c})=>{const{extensions:u}=n.extensionManager,l=Ir(e,i.schema),h=Ir(t,i.schema),{selection:f}=i,{$from:d,$to:p}=f,m=d.blockRange(p);if(!m)return!1;const v=ss(e=>as(e.type.name,u))(f);if(m.depth>=1&&v&&m.depth-v.depth<=1){if(v.node.type===l)return a.liftListItem(h);if(as(v.node.type.name,u)&&l.validContent(v.node.content)&&o)return r.setNodeMarkup(v.pos,l),!0}const g=c().wrapInList(l);return g?a.wrapInList(l):s().clearNodes().wrapInList(l).run()};var us=Object.freeze({__proto__:null,toggleList:cs});const ls=(e,t={})=>({state:n,commands:r})=>{const i=Pr(e,n.schema),o=zr(n,i,t);return o?r.unsetMark(i):r.setMark(i,t)};var hs=Object.freeze({__proto__:null,toggleMark:ls});const fs=(e,t,n={})=>({state:r,commands:i})=>{const o=Ir(e,r.schema),s=Ir(t,r.schema),a=Br(r,o,n);return a?i.setNode(s):i.setNode(o,n)};var ds=Object.freeze({__proto__:null,toggleNode:fs});const ps=(e,t={})=>({state:n,dispatch:r})=>{const i=Ir(e,n.schema),o=Br(n,i,t);return o?ar(n,r):yr(i,t)(n,r)};var ms=Object.freeze({__proto__:null,toggleWrap:ps});const vs=()=>({state:e,dispatch:t})=>Object(Qn["d"])(e,t);var gs=Object.freeze({__proto__:null,undoInputRule:vs});const ys=()=>({tr:e,state:t,dispatch:n})=>{const{selection:r}=e,{empty:i,ranges:o}=r;return i||n&&Object.entries(t.schema.marks).forEach(([,t])=>{o.forEach(n=>{e.removeMark(n.$from.pos,n.$to.pos,t)})}),!0};var bs=Object.freeze({__proto__:null,unsetAllMarks:ys});const ws=e=>({tr:t,state:n,dispatch:r})=>{const{selection:i}=t,o=Pr(e,n.schema),{$from:s,empty:a,ranges:c}=i;if(r){if(a){let{from:e,to:n}=i;const r=Fi(s,o);r&&(e=r.from,n=r.to),t.removeMark(e,n,o)}else c.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos,o)});t.removeStoredMark(o)}return!0};var ks=Object.freeze({__proto__:null,unsetMark:ws});const Ss=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Dr("string"===typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=Ir(e,r.schema)),"mark"===a&&(s=Pr(e,r.schema)),i&&n.selection.ranges.forEach(e=>{const i=e.$from.pos,a=e.$to.pos;r.doc.nodesBetween(i,a,(e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(o=>{if(s===o.type){const c=Math.max(r,i),u=Math.min(r+e.nodeSize,a);n.addMark(c,u,s.create({...o.attrs,...t}))}})})}),!0)};var xs=Object.freeze({__proto__:null,updateAttributes:Ss});const _s=(e,t={})=>({state:n,dispatch:r})=>{const i=Ir(e,n.schema),o=Br(n,i,t);return!o&&yr(i,t)(n,r)};var Cs=Object.freeze({__proto__:null,wrapIn:_s});const Os=(e,t={})=>({state:n,dispatch:r})=>{const i=Ir(e,n.schema);return Or(i,t)(n,r)};var Ms=Object.freeze({__proto__:null,wrapInList:Os});const Es=di.create({name:"commands",addCommands(){return{...gi,...bi,...ki,...xi,...Ci,...Mi,...Ai,...Ri,...Ii,...Pi,...zi,...Ui,...Yi,...Xi,...Zi,...no,...io,...so,...lo,...fo,...mo,...go,...bo,...ko,...xo,...Oo,...Eo,...To,...Do,...No,...jo,...Fo,...zo,...Uo,...Vo,...qo,...Jo,...Go,...ts,...rs,...us,...hs,...ds,...ms,...gs,...bs,...ks,...xs,...Cs,...Ms}}}),As=di.create({name:"editable",addProseMirrorPlugins(){return[new r["d"]({key:new r["e"]("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Ts=di.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new r["d"]({key:new r["e"]("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Rs=di.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:()=>e(),"Mod-Backspace":()=>e(),Delete:()=>t(),"Mod-Delete":()=>t()}}});var Ds=Object.freeze({__proto__:null,ClipboardTextSerializer:mi,Commands:Es,Editable:As,FocusEvents:Ts,Keymap:Rs});const Is='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';class Ns extends ui{constructor(e={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get commands(){return this.commandManager.createCommands()}chain(){return this.commandManager.createChain()}can(){return this.commandManager.createCan()}injectCSS(){this.options.injectCSS&&document&&(this.css=Jr(Is))}setOptions(e={}){this.options={...this.options,...e}}setEditable(e){this.setOptions({editable:e}),this.view&&this.state&&!this.isDestroyed&&this.view.updateState(this.state)}get isEditable(){return this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n="function"===typeof t?t(e,this.state.plugins):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"===typeof e?e+"$":e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(e=>!e.key.startsWith(t))});this.view.updateState(n)}createExtensionManager(){const e=Object.entries(Ds).map(([,e])=>e),t=[...e,...this.options.extensions].filter(e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type));this.extensionManager=new ci(t,this)}createCommandManager(){this.commandManager=new Yr(this,this.extensionManager.commands)}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new Un(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r["b"].create({doc:Wr(this.options.content,this.schema,this.options.parseOptions)})});const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews();const t=this.view.dom;t.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this});const r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event}),i&&this.emit("blur",{editor:this,event:i.event}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Lr(this.state,e)}getNodeAttributes(e){return console.warn("[tiptap warn]: editor.getNodeAttributes() is deprecated. please use editor.getAttributes() instead."),Nr(this.state,e)}getMarkAttributes(e){return console.warn("[tiptap warn]: editor.getMarkAttributes() is deprecated. please use editor.getAttributes() instead."),jr(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,r="string"===typeof e?t:e;return $r(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return qr(this.state.doc,this.schema)}get isEmpty(){return Kr(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),Ur(this.css)}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}class Ps{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new Ps(e)}configure(e={}){const t=this.extend();return t.options=fi(this.options,e),t}extend(e={}){const t=new Ps(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}class js{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new js(e)}configure(e={}){const t=this.extend();return t.options=fi(this.options,e),t}extend(e={}){const t=new js(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}function Ls(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}class Fs{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return null}get contentDOM(){return null}onDragStart(e){var t,n,i;const{view:o}=this.editor,s=e.target,a=3===s.nodeType?null===(t=s.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):s.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(s))||!a)return;let c=0,u=0;if(this.dom!==a){const t=this.dom.getBoundingClientRect(),n=a.getBoundingClientRect();c=n.x-t.x+e.offsetX,u=n.y-t.y+e.offsetY}null===(i=e.dataTransfer)||void 0===i||i.setDragImage(this.dom,c,u);const l=r["c"].create(o.state.doc,this.getPos()),h=o.state.tr.setSelection(l);o.dispatch(h)}stopEvent(e){var t;if(!this.dom)return!1;if("function"===typeof this.options.stopEvent)return this.options.stopEvent({event:e});const n=e.target,i=this.dom.contains(n)&&!(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(n));if(!i)return!1;const o=["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable;if(o)return!0;const{isEditable:s}=this.editor,{isDragging:a}=this,c=!!this.node.type.spec.draggable,u=r["c"].isSelectable(this.node),l="copy"===e.type,h="paste"===e.type,f="cut"===e.type,d="mousedown"===e.type,p=e.type.startsWith("drag")||"drop"===e.type;if(!c&&u&&p&&e.preventDefault(),c&&p&&!a)return e.preventDefault(),!1;if(c&&s&&!a&&d){const e=n.closest("[data-drag-handle]"),t=e&&(this.dom===e||this.dom.contains(e));t&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(a||l||h||f||d&&u)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if("function"===typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:e});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&Ls()){const t=[...Array.from(e.addedNodes),...Array.from(e.removedNodes)];if(t.every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const n=this.getPos();return t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0})}deleteNode(){const e=this.getPos(),t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function Bs(e,t,n){return new Qn["a"](e,(e,r,i,o)=>{const s=n instanceof Function?n(r):n,{tr:a}=e;return r[0]&&a.replaceWith(i-1,o,t.create(s)),a})}function zs(e,t,n){let r=[];return n.doc.nodesBetween(e,t,(e,t)=>{r=[...r,...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n}))]}),r}function $s(e,t,n){return new Qn["a"](e,(e,r,i,o)=>{const s=n instanceof Function?n(r):n,{tr:a}=e,c=r[r.length-1],u=r[0];let l=o;if(c){const n=u.search(/\S/),r=i+u.indexOf(c),h=r+c.length,f=zs(i,o,e).filter(e=>{const{excluded:n}=e.mark.type;return n.find(e=>e.name===t.name)}).filter(e=>e.to>r);if(f.length)return null;h<o&&a.delete(h,o),r>i&&a.delete(i+n,r),l=i+n+c.length,a.addMark(i+n,l,t.create(s)),a.removeStoredMark(t)}return a})}function Us(e,t,n){const o=(r,s)=>{const a=[];return r.forEach(r=>{if(r.isText&&r.text){const{text:i}=r;let o,c=0;while(null!==(o=e.exec(i))){const e=Math.max(o.length-2,0),i=Math.max(o.length-1,0);if(null===s||void 0===s?void 0:s.type.allowsMarkType(t)){const s=o.index,u=s+o[0].indexOf(o[e]),l=u+o[e].length,h=u+o[e].lastIndexOf(o[i]),f=h+o[i].length,d=n instanceof Function?n(o):n;if(!d&&void 0!==d)continue;u>0&&a.push(r.cut(c,u)),a.push(r.cut(h,f).mark(t.create(d).addToSet(r.marks))),c=l}}c<i.length&&a.push(r.cut(c))}else a.push(r.copy(o(r.content,r)))}),i["c"].fromArray(a)};return new r["d"]({key:new r["e"]("markPasteRule"),props:{transformPasted:e=>new i["j"](o(e.content),e.openStart,e.openEnd)}})}function Hs(e){const t=ci.resolve(e);return si(t)}function Vs(e){return Wi(e)&&e instanceof r["c"]}function Ws(e,t,n){const r=e.coordsAtPos(t),i=e.coordsAtPos(n,-1),o=Math.min(r.top,i.top),s=Math.max(r.bottom,i.bottom),a=Math.min(r.left,i.left),c=Math.max(r.right,i.right),u=c-a,l=s-o,h=a,f=o,d={top:o,bottom:s,left:a,right:c,width:u,height:l,x:h,y:f};return{...d,toJSON:()=>d}}},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),s=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),h=n("1dde"),f=n("b622"),d=n("2d00"),p=f("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",g=d>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),y=h("concat"),b=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},w=!g||!y;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,i,o,s=a(this),h=l(s,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?s:arguments[t],b(o)){if(i=c(o.length),f+i>m)throw TypeError(v);for(n=0;n<i;n++,f++)n in o&&u(h,f,o[n])}else{if(f>=m)throw TypeError(v);u(h,f++,o)}return h.length=f,h}})},"9a1f":function(e,t,n){var r=n("825a"),i=n("35a1");e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},"9a61":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n("9b6a"),i=n("7428"),o=(n("576a"),n("304a"),n("1e58")),s=n("2309"),a=n("058a");let c=null;const u=()=>{const e=c;c=null,e.forEach((e,t)=>{const n=t.state.tr;e.forEach((e,t)=>{n.setMeta(t,e)}),t.dispatch(n)})},l=(e,t,n)=>{c||(c=new Map,a["b"](0,u)),s["e"](c,e,s["c"]).set(t,n)},h=(e,t,n)=>{if(0===e)return i["s"](t,0);let r=null===t._first?null:t._first.content.type;while(null!==r&&t!==r){if(r.constructor===i["l"]){if(r._length>=e)return i["s"](r,e);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new i["f"](null===r._item?null:r._item.id,null===r._item?i["w"](r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new i["f"](null===r._item?null:r._item.id,null===r._item?i["w"](r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw o["c"]();if(0===e&&r.constructor!==i["l"]&&r!==t)return f(r._item.parent,r._item)}return i["s"](t,t._length)},f=(e,t)=>{let n=null,r=null;return null===e._item?r=i["w"](e):n=i["q"](e._item.id.client,e._item.id.clock),new i["f"](n,r,t.id)},d=(e,t,n,r)=>{const o=i["o"](n,e);if(null===o||o.type!==t&&!i["y"](t,o.type._item))return null;let s=o.type,a=0;if(s.constructor===i["l"])a=o.index;else if(null===s._item||!s._item.deleted){let e=s._first,t=0;while(t<s._length&&t<o.index&&null!==e){if(!e.deleted){const n=e.content.type;t++,n.constructor===i["l"]?a+=n._length:a+=r.get(n).nodeSize}e=e.right}a+=1}while(s!==t&&null!==s._item){const e=s._item.parent;if(null===e._item||!e._item.deleted){a+=1;let t=e._first;while(null!==t){const e=t.content.type;if(e===s)break;t.deleted||(e.constructor===i["l"]?a+=e._length:a+=r.get(e).nodeSize),t=t.right}}s=e}return a-1};function p(e,t="prosemirror"){const n=new i["d"],o=n.get(t,i["k"]);return o.doc?(Object(r["b"])(o.doc,o,e,new Map),o.doc):n}},"9b6a":function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return z}));var r=n("3edb"),i=n("304a"),o=n("5313"),s=n("ca0e"),a=n("1d2f"),c=n("4aa6");n("2163");const u=(e,t)=>{let n=0,r=0;while(n<e.length&&n<t.length&&e[n]===t[n])n++;if(n!==e.length||n!==t.length)while(r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1])r++;return{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},l=u;var h=n("1e58"),f=n("70a9"),d=n("7428"),p=n("9a61"),m=n("c893"),v=n("1d8c"),g=n("b6f5");const y=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!d["x"](t.ds,e.id),b=[{light:"#ecd44433",dark:"#ecd444"}],w=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const n=c["a"]();e.forEach(e=>n.add(e)),t=t.filter(e=>!n.has(e))}e.set(n,m["a"](t))}return e.get(n)},k=(e,{colors:t=b,colorMapping:n=new Map,permanentUserData:r=null}={})=>{let i=!1;const s=new o["d"]({props:{editable:e=>{const t=f["b"].getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:f["b"],state:{init:(i,o)=>({type:e,doc:e.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:t,colorMapping:n,permanentUserData:r}),apply:(e,t)=>{const n=e.getMeta(f["b"]);if(void 0!==n){t=Object.assign({},t);for(const e in n)t[e]=n[e]}return t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==t.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||setTimeout(()=>{null==n.restore?t.binding._renderSnapshot(n.snapshot,n.prevSnapshot,t):(t.binding._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,t.binding._prosemirrorChanged(t.binding.prosemirrorView.state.doc))},0)),t}},view:t=>{const n=new _(e,t);return setTimeout(()=>{n._forceRerender(),t.dispatch(t.state.tr.setMeta(f["b"],{binding:n}))},0),{update:()=>{const e=s.getState(t.state);null==e.snapshot&&null==e.prevSnapshot&&(i||null!==t.state.doc.content.findDiffStart(t.state.doc.type.createAndFill().content))&&(i=!0,n._prosemirrorChanged(t.state.doc))},destroy:()=>{n.destroy()}}}});return s},S=(e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head){const r=Object(p["c"])(n.doc,n.type,t.anchor,n.mapping),i=Object(p["c"])(n.doc,n.type,t.head,n.mapping);null!==r&&null!==i&&(e=e.setSelection(o["h"].create(e.doc,r,i)))}},x=(e,t)=>({anchor:Object(p["a"])(t.selection.anchor,e.type,e.mapping),head:Object(p["a"])(t.selection.head,e.type,e.mapping)});class _{constructor(e,t){this.type=e,this.prosemirrorView=t,this.mux=Object(r["a"])(),this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=x(this,t.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),e.observeDeep(this._observeFunction),this._domSelectionInView=null}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(v["b"]&&null===this._domSelectionInView&&(setTimeout(()=>{this._domSelectionInView=null},0),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const n=t.getClientRects();0===n.length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const r=t.getBoundingClientRect(),i=g["c"].documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(e,t){t||(t=d["t"](d["p"](),new Map)),this.prosemirrorView.dispatch(this.prosemirrorView.state.tr.setMeta(f["b"],{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping=new Map,this.mux(()=>{const e=this.type.toArray().map(e=>O(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),t=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](e),0,0));t.setMeta(f["b"],{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping=new Map,this.mux(()=>{const e=this.type.toArray().map(e=>O(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),t=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](e),0,0));this.prosemirrorView.dispatch(t)})}_renderSnapshot(e,t,n){e||(e=d["A"](this.doc)),this.mapping=new Map,this.mux(()=>{this.doc.transact(r=>{const o=n.permanentUserData;o&&o.dss.forEach(e=>{d["z"](r,e,e=>{})});const s=(e,t)=>{const r="added"===e?o.getUserByClientId(t.client):o.getUserByDeletedId(t);return{user:r,type:e,color:w(n.colorMapping,n.colors,r)}},a=d["B"](this.type,new d["g"](t.ds,e.sv)).map(n=>!n._item.deleted||y(n._item,e)||y(n._item,t)?O(n,this.prosemirrorView.state.schema,new Map,e,t,s):null).filter(e=>null!==e),c=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](a),0,0));this.prosemirrorView.dispatch(c)},f["b"])})}_typeChanged(e,t){const n=f["b"].getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const e=(e,t)=>this.mapping.delete(t);d["z"](t,t.deleteSet,e=>e.constructor===d["e"]&&this.mapping.delete(e.content.type)),t.changed.forEach(e),t.changedParentTypes.forEach(e);const n=this.type.toArray().map(e=>C(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e);let r=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](n),0,0));S(r,this.beforeTransactionSelection,this),r=r.setMeta(f["b"],{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.mux(()=>{this.doc.transact(()=>{z(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=x(this,this.prosemirrorView.state)},f["b"])})}destroy(){this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const C=(e,t,n,r,i,o)=>{const s=n.get(e);if(void 0===s){if(e instanceof d["j"])return O(e,t,n,r,i,o);throw h["b"]()}return s},O=(e,t,n,r,i,o)=>{const s=[],a=e=>{if(e.constructor===d["j"]){const a=C(e,t,n,r,i,o);null!==a&&s.push(a)}else{const a=M(e,t,n,r,i,o);null!==a&&a.forEach(e=>{null!==e&&s.push(e)})}};void 0===r||void 0===i?e.toArray().forEach(a):d["B"](e,new d["g"](i.ds,r.sv)).forEach(a);try{const a=e.getAttributes(r);void 0!==r&&(y(e._item,r)?y(e._item,i)||(a.ychange=o?o("added",e._item.id):{type:"added"}):a.ychange=o?o("removed",e._item.id):{type:"removed"});const c=t.node(e.nodeName,a,s);return n.set(e,c),c}catch(c){return e.doc.transact(t=>{e._item.delete(t)},f["b"]),n.delete(e),null}},M=(e,t,n,r,i,o)=>{const s=[],a=e.toDelta(r,i,o);try{for(let e=0;e<a.length;e++){const n=a[e],r=[];for(const e in n.attributes)r.push(t.mark(e,n.attributes[e]));s.push(t.text(n.insert,r))}}catch(c){return e.doc.transact(t=>{e._item.delete(t)},f["b"]),null}return s},E=(e,t)=>{const n=new d["l"],r=e.map(e=>({insert:e.text,attributes:B(e.marks)}));return n.applyDelta(r),t.set(n,e),n},A=(e,t)=>{const n=new d["j"](e.type.name);for(const r in e.attrs){const t=e.attrs[r];null!==t&&"ychange"!==r&&n.setAttribute(r,t)}return n.insert(0,D(e).map(e=>T(e,t))),t.set(n,e),n},T=(e,t)=>e instanceof Array?E(e,t):A(e,t),R=(e,t)=>{const n=Object.keys(e).filter(t=>null!==e[t]);let r=n.length===Object.keys(t).filter(e=>null!==t[e]).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=e[o],a=t[o];r="ychange"===o||s===a||"object"===typeof s&&"object"===typeof a&&R(s,a)}return r},D=e=>{const t=e.content.content,n=[];for(let r=0;r<t.length;r++){const e=t[r];if(e.isText){const e=[];for(let n=t[r];r<t.length&&n.isText;n=t[++r])e.push(n);r--,n.push(e)}else n.push(e)}return n},I=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&a["c"](e.attributes||{}).length===t[n].marks.length&&t[n].marks.every(t=>R(e.attributes[t.type.name]||{},t.attrs)))},N=(e,t)=>{if(e instanceof d["j"]&&!(t instanceof Array)&&$(e,t)){const n=D(t);return e._length===n.length&&R(e.getAttributes(),t.attrs)&&e.toArray().every((e,t)=>N(e,n[t]))}return e instanceof d["l"]&&t instanceof Array&&I(e,t)},P=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),j=(e,t,n)=>{const r=e.toArray(),i=D(t),o=i.length,a=r.length,c=s["g"](a,o);let u=0,l=0,h=!1;for(;u<c;u++){const e=r[u],t=i[u];if(P(n.get(e),t))h=!0;else if(!N(e,t))break}for(;u+l<c;l++){const e=r[a-l-1],t=i[o-l-1];if(P(n.get(e),t))h=!0;else if(!N(e,t))break}return{equalityFactor:u+l,foundMappedChild:h}},L=e=>{let t="",n=e._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof d["b"]?t+=n.content.str:n.content instanceof d["a"]&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}},F=(e,t,n)=>{n.set(e,t);const{nAttrs:r,str:i}=L(e),o=t.map(e=>({insert:e.text,attributes:Object.assign({},r,B(e.marks))})),{insert:s,remove:a,index:c}=l(i,o.map(e=>e.insert).join(""));e.delete(c,a),e.insert(c,s),e.applyDelta(o.map(e=>({retain:e.insert.length,attributes:e.attributes})))},B=e=>{const t={};return e.forEach(e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)}),t},z=(e,t,n,r)=>{if(t instanceof d["j"]&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(t,n),t instanceof d["j"]){const e=t.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?e[n]!==r[n]&&"ychange"!==n&&t.setAttribute(n,r[n]):t.removeAttribute(n);for(const n in e)void 0===r[n]&&t.removeAttribute(n)}const i=D(n),o=i.length,a=t.toArray(),c=a.length,u=s["g"](o,c);let l=0,h=0;for(;l<u;l++){const e=a[l],t=i[l];if(!P(r.get(e),t)){if(!N(e,t))break;r.set(e,t)}}for(;h+l+1<u;h++){const e=a[c-h-1],t=i[o-h-1];if(!P(r.get(e),t)){if(!N(e,t))break;r.set(e,t)}}e.transact(()=>{while(c-l-h>0&&o-l-h>0){const n=a[l],s=i[l],u=a[c-h-1],f=i[o-h-1];if(n instanceof d["l"]&&s instanceof Array)I(n,s)||F(n,s,r),l+=1;else{let i=n instanceof d["j"]&&$(n,s),o=u instanceof d["j"]&&$(u,f);if(i&&o){const e=j(n,s,r),t=j(u,f,r);e.foundMappedChild&&!t.foundMappedChild?o=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?i=!1:o=!1}i?(z(e,n,s,r),l+=1):o?(z(e,u,f,r),h+=1):(t.delete(l,1),t.insert(l,[T(s,r)]),l+=1)}}const n=c-l-h;if(n>0&&t.delete(l,n),l+h<o){const e=[];for(let t=l;t<o-h;t++)e.push(T(i[t],r));t.insert(l,e)}},f["b"])},$=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(s){throw i(e),s}}},"9bf2":function(e,t,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),s=n("a04b"),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(o(e),t=s(t),o(n),i)try{return a(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),s=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),s(e,u,!1,!0),a[u]=c,e}},"9f7f":function(e,t,n){var r=n("d039"),i=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a04b:function(e,t,n){var r=n("c04e"),i=n("d9b5");e.exports=function(e){var t=r(e,"string");return i(t)?t:String(t)}},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("c430"),a=n("83ab"),c=n("4930"),u=n("d039"),l=n("5135"),h=n("e8b5"),f=n("861d"),d=n("d9b5"),p=n("825a"),m=n("7b0b"),v=n("fc6a"),g=n("a04b"),y=n("577e"),b=n("5c6c"),w=n("7c73"),k=n("df75"),S=n("241c"),x=n("057f"),_=n("7418"),C=n("06cf"),O=n("9bf2"),M=n("d1e7"),E=n("9112"),A=n("6eeb"),T=n("5692"),R=n("f772"),D=n("d012"),I=n("90e3"),N=n("b622"),P=n("e538"),j=n("746f"),L=n("d44e"),F=n("69f3"),B=n("b727").forEach,z=R("hidden"),$="Symbol",U="prototype",H=N("toPrimitive"),V=F.set,W=F.getterFor($),q=Object[U],K=i.Symbol,J=o("JSON","stringify"),Y=C.f,G=O.f,X=x.f,Q=M.f,Z=T("symbols"),ee=T("op-symbols"),te=T("string-to-symbol-registry"),ne=T("symbol-to-string-registry"),re=T("wks"),ie=i.QObject,oe=!ie||!ie[U]||!ie[U].findChild,se=a&&u((function(){return 7!=w(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Y(q,t);r&&delete q[t],G(e,t,n),r&&e!==q&&G(q,t,r)}:G,ae=function(e,t){var n=Z[e]=w(K[U]);return V(n,{type:$,tag:e,description:t}),a||(n.description=t),n},ce=function(e,t,n){e===q&&ce(ee,t,n),p(e);var r=g(t);return p(n),l(Z,r)?(n.enumerable?(l(e,z)&&e[z][r]&&(e[z][r]=!1),n=w(n,{enumerable:b(0,!1)})):(l(e,z)||G(e,z,b(1,{})),e[z][r]=!0),se(e,r,n)):G(e,r,n)},ue=function(e,t){p(e);var n=v(t),r=k(n).concat(pe(n));return B(r,(function(t){a&&!he.call(n,t)||ce(e,t,n[t])})),e},le=function(e,t){return void 0===t?w(e):ue(w(e),t)},he=function(e){var t=g(e),n=Q.call(this,t);return!(this===q&&l(Z,t)&&!l(ee,t))&&(!(n||!l(this,t)||!l(Z,t)||l(this,z)&&this[z][t])||n)},fe=function(e,t){var n=v(e),r=g(t);if(n!==q||!l(Z,r)||l(ee,r)){var i=Y(n,r);return!i||!l(Z,r)||l(n,z)&&n[z][r]||(i.enumerable=!0),i}},de=function(e){var t=X(v(e)),n=[];return B(t,(function(e){l(Z,e)||l(D,e)||n.push(e)})),n},pe=function(e){var t=e===q,n=X(t?ee:v(e)),r=[];return B(n,(function(e){!l(Z,e)||t&&!l(q,e)||r.push(Z[e])})),r};if(c||(K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,t=I(e),n=function(e){this===q&&n.call(ee,e),l(this,z)&&l(this[z],t)&&(this[z][t]=!1),se(this,t,b(1,e))};return a&&oe&&se(q,t,{configurable:!0,set:n}),ae(t,e)},A(K[U],"toString",(function(){return W(this).tag})),A(K,"withoutSetter",(function(e){return ae(I(e),e)})),M.f=he,O.f=ce,C.f=fe,S.f=x.f=de,_.f=pe,P.f=function(e){return ae(N(e),e)},a&&(G(K[U],"description",{configurable:!0,get:function(){return W(this).description}}),s||A(q,"propertyIsEnumerable",he,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),B(k(re),(function(e){j(e)})),r({target:$,stat:!0,forced:!c},{for:function(e){var t=y(e);if(l(te,t))return te[t];var n=K(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!d(e))throw TypeError(e+" is not a symbol");if(l(ne,e))return ne[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!a},{create:le,defineProperty:ce,defineProperties:ue,getOwnPropertyDescriptor:fe}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:de,getOwnPropertySymbols:pe}),r({target:"Object",stat:!0,forced:u((function(){_.f(1)}))},{getOwnPropertySymbols:function(e){return _.f(m(e))}}),J){var me=!c||u((function(){var e=K();return"[null]"!=J([e])||"{}"!=J({a:e})||"{}"!=J(Object(e))}));r({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var r,i=[e],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=t,(f(t)||void 0!==e)&&!d(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!d(t))return t}),i[1]=t,J.apply(null,i)}})}K[U][H]||E(K[U],H,K[U].valueOf),L(K,$),D[z]=!0},a5c6:function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"tableHeader",defaultOptions:{HTMLAttributes:{}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth"),n=t?[parseInt(t,10)]:null;return{colwidth:n}}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",Object(r["n"])(this.options.HTMLAttributes,e),0]}});t["a"]=i},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},a79d:function(e,t,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),s=n("d039"),a=n("d066"),c=n("4840"),u=n("cdf9"),l=n("6eeb"),h=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(e){var t=c(this,a("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!i&&"function"==typeof o){var f=a("Promise").prototype["finally"];o.prototype["finally"]!==f&&l(o.prototype,"finally",f,{unsafe:!0})}},ab13:function(e,t,n){var r=n("b622"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ade3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("7a82");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},ae93:function(e,t,n){"use strict";var r,i,o,s=n("d039"),a=n("e163"),c=n("9112"),u=n("5135"),l=n("b622"),h=n("c430"),f=l("iterator"),d=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):d=!0);var m=void 0==r||s((function(){var e={};return r[f].call(e)!==e}));m&&(r={}),h&&!m||u(r,f)||c(r,f,p),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&i(o,c,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(e){return""}}})},b575:function(e,t,n){var r,i,o,s,a,c,u,l,h=n("da84"),f=n("06cf").f,d=n("2cf4").set,p=n("1cdc"),m=n("a4b4"),v=n("605d"),g=h.MutationObserver||h.WebKitMutationObserver,y=h.document,b=h.process,w=h.Promise,k=f(h,"queueMicrotask"),S=k&&k.value;S||(r=function(){var e,t;v&&(e=b.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?s():o=void 0,n}}o=void 0,e&&e.enter()},p||v||m||!g||!y?w&&w.resolve?(u=w.resolve(void 0),u.constructor=w,l=u.then,s=function(){l.call(u,r)}):s=v?function(){b.nextTick(r)}:function(){d.call(h,r)}:(a=!0,c=y.createTextNode(""),new g(r).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),o=n("5135"),s=n("90e3"),a=n("4930"),c=n("fdbf"),u=i("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||s;e.exports=function(e){return o(u,e)&&(a||"string"==typeof u[e])||(a&&o(l,e)?u[e]=l[e]:u[e]=h("Symbol."+e)),u[e]}},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),s=n("d039"),a=s((function(){o(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(e){return o(i(e))}})},b6f5:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return m}));var r=n("7749"),i=n("2309");const o="undefined"!==typeof document?document:{},s=e=>o.createElement(e),a=()=>o.createDocumentFragment(),c=e=>o.createTextNode(e),u=("undefined"!==typeof DOMParser&&new DOMParser,(e,t)=>(r["b"](t,(t,n)=>{!1===n?e.removeAttribute(t):!0===n?e.setAttribute(t,""):e.setAttribute(t,n)}),e)),l=e=>{const t=a();for(let n=0;n<e.length;n++)v(t,e[n]);return t},h=(e,t)=>(v(e,l(t)),e),f=(e,t,n)=>e.addEventListener(t,n),d=(e,t=[],n=[])=>h(u(s(e),t),n),p=c,m=e=>i["d"](e,(e,t)=>`${t}:${e};`).join(""),v=(e,t)=>e.appendChild(t);o.ELEMENT_NODE,o.TEXT_NODE,o.CDATA_SECTION_NODE,o.COMMENT_NODE,o.DOCUMENT_NODE,o.DOCUMENT_TYPE_NODE,o.DOCUMENT_FRAGMENT_NODE},b727:function(e,t,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),s=n("50c4"),a=n("65f0"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,h=6==e,f=7==e,d=5==e||h;return function(p,m,v,g){for(var y,b,w=o(p),k=i(w),S=r(m,v,3),x=s(k.length),_=0,C=g||a,O=t?C(p,x):n||f?C(p,0):void 0;x>_;_++)if((d||_ in k)&&(y=k[_],b=S(y,_,w),e))if(t)O[_]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return _;case 2:c.call(O,y)}else switch(e){case 4:return!1;case 7:c.call(O,y)}return h?-1:u||l?l:O}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},bee2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("7a82");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},bf38:function(e,t,n){"use strict";var r=n("9980"),i=200,o=function(){};o.prototype.append=function(e){return e.length?(e=o.from(e),!this.length&&e||e.length<i&&this.leafAppend(e)||this.length<i&&e.leafPrepend(this)||this.appendInner(e)):this},o.prototype.prepend=function(e){return e.length?o.from(e).append(this):this},o.prototype.appendInner=function(e){return new a(this,e)},o.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?o.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},o.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},o.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},o.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},o.from=function(e){return e instanceof o?e:e&&e.length?new s(e):o.empty};var s=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=i)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=i)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(o);o.empty=new s([]);var a=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(o),c=o,u=c,l=n("0ac0"),h=n("5313"),f=500,d=function(e,t){this.items=e,this.eventCount=t};function p(e,t){var n;return e.forEach((function(e,r){if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}d.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,i,o=this.items.length;;o--){var s=this.items.get(o-1);if(s.selection){--o;break}}t&&(r=this.remapping(o,this.items.length),i=r.maps.length);var a,c,u=e.tr,l=[],h=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(o,t+1),i=r.maps.length),i--,void h.push(e);if(r){h.push(new m(e.map));var s,f=e.step.map(r.slice(i));f&&u.maybeStep(f).doc&&(s=u.mapping.maps[u.mapping.maps.length-1],l.push(new m(s,null,null,l.length+h.length))),i--,s&&r.appendMap(s,i)}else u.maybeStep(e.step);return e.selection?(a=r?e.selection.map(r.slice(i)):e.selection,c=new d(n.items.slice(0,o).append(h.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:u,selection:a}},d.prototype.addTransform=function(e,t,n,r){for(var i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<e.steps.length;c++){var u=e.steps[c].invert(e.docs[c]),l=new m(e.mapping.maps[c],u,t),h=void 0;(h=a&&a.merge(l))&&(l=h,c?i.pop():s=s.slice(0,s.length-1)),i.push(l),t&&(o++,t=null),r||(a=l)}var f=o-n.depth;return f>g&&(s=p(s,f),o-=f),new d(s.append(i),o)},d.prototype.remapping=function(e,t){var n=new l["a"];return this.items.forEach((function(t,r){var i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,i)}),e,t),n},d.prototype.addMaps=function(e){return 0==this.eventCount?this:new d(this.items.append(e.map((function(e){return new m(e)}))),this.eventCount)},d.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),r);var a=t;this.items.forEach((function(t){var r=i.getMirror(--a);if(null!=r){o=Math.min(o,r);var c=i.maps[r];if(t.step){var u=e.steps[r].invert(e.docs[r]),l=t.selection&&t.selection.map(i.slice(a+1,r));l&&s++,n.push(new m(c,u,l))}else n.push(new m(c))}}),r);for(var c=[],u=t;u<o;u++)c.push(new m(i.maps[u]));var l=this.items.slice(0,r).append(c).append(n),h=new d(l,s);return h.emptyItemCount()>f&&(h=h.compress(this.items.length-n.length)),h},d.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},d.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((function(o,s){if(s>=e)r.push(o),o.selection&&i++;else if(o.step){var a=o.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){var u=o.selection&&o.selection.map(t.slice(n));u&&i++;var l,h=new m(c.invert(),a,u),f=r.length-1;(l=r.length&&r[f].merge(h))?r[f]=l:r.push(h)}}else o.map&&n--}),this.items.length,0),new d(u.from(r.reverse()),i)},d.empty=new d(u.empty,0);var m=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};m.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new m(t.getMap().invert(),t,this.selection)}};var v=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},g=20;function y(e,t,n,r){var i,o=n.getMeta(O);if(o)return o.historyState;n.getMeta(M)&&(e=new v(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(O))return s.getMeta(O).redo?new v(e.done.addTransform(n,null,r,C(t)),e.undone,w(n.mapping.maps[n.steps.length-1]),e.prevTime):new v(e.done,e.undone.addTransform(n,null,r,C(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new v(e.done.rebased(n,i),e.undone.rebased(n,i),k(e.prevRanges,n.mapping),e.prevTime):new v(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),k(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!b(n,e.prevRanges)),c=s?k(e.prevRanges,n.mapping):w(n.mapping.maps[n.steps.length-1]);return new v(e.done.addTransform(n,a?t.selection.getBookmark():null,r,C(t)),d.empty,c,n.time)}function b(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}function w(e){var t=[];return e.forEach((function(e,n,r,i){return t.push(r,i)})),t}function k(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function S(e,t,n,r){var i=C(t),o=O.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,i);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),u=new v(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(O,{redo:r,historyState:u}).scrollIntoView())}}var x=!1,_=null;function C(e){var t=e.plugins;if(_!=t){x=!1,_=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){x=!0;break}}return x}var O=new h["e"]("history"),M=new h["e"]("closeHistory");function E(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new h["d"]({key:O,state:{init:function(){return new v(d.empty,d.empty,null,0)},apply:function(t,n,r){return y(n,r,t,e)}},config:e})}function A(e,t){var n=O.getState(e);return!(!n||0==n.done.eventCount)&&(t&&S(n,e,t,!1),!0)}function T(e,t){var n=O.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&S(n,e,t,!0),!0)}const R=r["b"].create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands(){return{undo:()=>({state:e,dispatch:t})=>A(e,t),redo:()=>({state:e,dispatch:t})=>T(e,t)}},addProseMirrorPlugins(){return[E(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}});t["a"]=R},c04e:function(e,t,n){var r=n("861d"),i=n("d9b5"),o=n("485a"),s=n("b622"),a=s("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,s=e[a];if(void 0!==s){if(void 0===t&&(t="default"),n=s.call(e,t),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},c088:function(e,t,n){"use strict";var r=n("9980");const i=r["d"].create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Object(r["n"])(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}});t["a"]=i},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},c77f:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return f})),n.d(t,"l",(function(){return d})),n.d(t,"h",(function(){return p}));const r=1,i=2,o=4,s=8,a=32,c=64,u=128,l=31,h=63,f=127,d=255,p=2147483647},c823:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));class r{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let i=new r,o=!0;try{"undefined"!==typeof localStorage&&(i=localStorage,o=!1)}catch(c){}const s=i,a=e=>o||addEventListener("storage",e)},c893:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n("ca0e");"undefined"===typeof window||"undefined"!==typeof window.performance&&window.performance;const i="undefined"===typeof crypto?null:crypto,o=null!==i?e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);return i.getRandomValues(n),t}:e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);for(let r=0;r<e;r++)n[r]=Math.ceil(4294967295*Math.random()>>>0);return t},s=Math.random,a=()=>new Uint32Array(o(4))[0],c=e=>e[r["c"](s()*e.length)],u=[1e7]+-1e3+-4e3+-8e3+-1e11,l=()=>u.replace(/[018]/g,e=>(e^a()&15>>e/4).toString(16))},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c8d2:function(e,t,n){var r=n("d039"),i=n("5899"),o="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||o[e]()!=o||i[e].name!==e}))}},ca0e:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l}));const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round),s=Math.log10,a=(Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),c=(e,t)=>e>t?e:t,u=(Number.isNaN,Math.pow,e=>Math.pow(10,e)),l=(Math.sign,e=>0!==e?e<0:1/e<0)},ca84:function(e,t,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,s=n("d012");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)!r(s,n)&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(u,n)||u.push(n));return u}},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),o=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},ce4e:function(e,t,n){var r=n("da84");e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("da84"),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d2bb:function(e,t,n){var r=n("825a"),i=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),s=o("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},d4ec:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},d72c:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n("5da9"),i=n("1d8c");n("dbda"),n("1b25");const o=e=>new Uint8Array(e),s=(e,t,n)=>new Uint8Array(e,t,n),a=e=>new Uint8Array(e),c=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=r["c"](e[n]);return btoa(t)},u=t=>e.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),l=e=>{const t=atob(e),n=o(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},h=t=>{const n=e.from(t,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)},f=i["b"]?c:u,d=i["b"]?l:h,p=e=>{const t=o(e.byteLength);return t.set(e),t}}).call(this,n("1c35").Buffer)},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("9263"),o=n("d039"),s=n("b622"),a=n("9112"),c=s("species"),u=RegExp.prototype;e.exports=function(e,t,n,l){var h=s(e),f=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),d=f&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!f||!d||n){var p=/./[h],m=t(h,""[e],(function(e,t,n,r,o){var s=t.exec;return s===i||s===u.exec?f&&!o?{done:!0,value:p.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));r(String.prototype,e,m[0]),r(u,h,m[1])}l&&a(u[h],"sham",!0)}},d9b5:function(e,t,n){var r=n("d066"),i=n("fdbf");e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),s=n("fc6a"),a=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=s(e),i=a.f,u=o(r),l={},h=0;while(u.length>h)n=i(r,t=u[h++]),void 0!==n&&c(l,t,n);return l}})},dbda:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"m",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"j",(function(){return y})),n.d(t,"n",(function(){return b})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"a",(function(){return R})),n.d(t,"c",(function(){return D}));var r=n("d72c"),i=n("ca0e"),o=n("c77f");Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,o["h"];const s=Number.isInteger||(e=>"number"===typeof e&&isFinite(e)&&i["c"](e)===e);Number.isNaN;class a{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const c=()=>new a,u=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},l=e=>{const t=new Uint8Array(u(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(r["c"](e.cbuf.buffer,0,e.cpos),n),t},h=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(r["c"](e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*i["f"](n,t)),e.cpos=0)},f=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},d=f,p=(e,t)=>{while(t>o["k"])f(e,o["g"]|o["k"]&t),t>>>=7;f(e,o["k"]&t)},m=(e,t)=>{const n=i["d"](t);n&&(t=-t),f(e,(t>o["j"]?o["g"]:0)|(n?o["f"]:0)|o["j"]&t),t>>>=6;while(t>0)f(e,(t>o["k"]?o["g"]:0)|o["k"]&t),t>>>=7},v=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;p(e,r);for(let i=0;i<r;i++)f(e,n.codePointAt(i))},g=(e,t)=>y(e,l(t)),y=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=i["g"](n-r,t.length),s=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(i["f"](2*n,s)),e.cbuf.set(t.subarray(o)),e.cpos=s)},b=(e,t)=>{p(e,t.byteLength),y(e,t)},w=(e,t)=>{h(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},k=(e,t)=>w(e,4).setFloat32(0,t,!1),S=(e,t)=>w(e,8).setFloat64(0,t,!1),x=(e,t)=>w(e,8).setBigInt64(0,t,!1),_=new DataView(new ArrayBuffer(4)),C=e=>(_.setFloat32(0,e),_.getFloat32(0)===e),O=(e,t)=>{switch(typeof t){case"string":f(e,119),v(e,t);break;case"number":s(t)&&t<=o["h"]?(f(e,125),m(e,t)):C(t)?(f(e,124),k(e,t)):(f(e,123),S(e,t));break;case"bigint":f(e,122),x(e,t);break;case"object":if(null===t)f(e,126);else if(t instanceof Array){f(e,117),p(e,t.length);for(let n=0;n<t.length;n++)O(e,t[n])}else if(t instanceof Uint8Array)f(e,116),b(e,t);else{f(e,118);const n=Object.keys(t);p(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];v(e,i),O(e,t[i])}}break;case"boolean":f(e,t?120:121);break;default:f(e,127)}};class M extends a{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&p(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const E=e=>{e.count>0&&(m(e.encoder,1===e.count?e.s:-e.s),e.count>1&&p(e.encoder,e.count-2))};class A{constructor(){this.encoder=new a,this.s=0,this.count=0}write(e){this.s===e?this.count++:(E(this),this.count=1,this.s=e)}toUint8Array(){return E(this),l(this.encoder)}}const T=e=>{if(e.count>0){const t=e.diff<<1|(1===e.count?0:1);m(e.encoder,t),e.count>1&&p(e.encoder,e.count-2)}};class R{constructor(){this.encoder=new a,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(T(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return T(this),l(this.encoder)}}class D{constructor(){this.sarr=[],this.s="",this.lensE=new A}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new a;return this.sarr.push(this.s),this.s="",v(e,this.sarr.join("")),y(e,this.lensE.toUint8Array()),l(e)}}},dce4:function(e,t,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm,o=r["c"].create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark("code"),toggleCode:()=>({commands:e})=>e.toggleMark("code"),unsetCode:()=>({commands:e})=>e.unsetMark("code")}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Object(r["l"])(i,this.type)]},addPasteRules(){return[Object(r["m"])(i,this.type)]}});t["a"]=o},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),s=n("9112"),a=n("b622"),c=a("iterator"),u=a("toStringTag"),l=o.values;for(var h in i){var f=r[h],d=f&&f.prototype;if(d){if(d[c]!==l)try{s(d,c,l)}catch(m){d[c]=l}if(d[u]||s(d,u,h),i[h])for(var p in o)if(d[p]!==o[p])try{s(d,p,o[p])}catch(m){d[p]=o[p]}}}},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e163:function(e,t,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),s=n("e177"),a=o("IE_PROTO"),c=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),s=n("69f3"),a=n("7dd0"),c="Array Iterator",u=s.set,l=s.getterFor(c);e.exports=a(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e394:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>void 0===e?null:e},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e3ff:function(e,t,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/gm,o=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/gm,s=r["c"].create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:e}){return["s",Object(r["n"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark("strike"),toggleStrike:()=>({commands:e})=>e.toggleMark("strike"),unsetStrike:()=>({commands:e})=>e.unsetMark("strike")}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Object(r["l"])(i,this.type)]},addPasteRules(){return[Object(r["m"])(o,this.type)]}});t["a"]=s},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),s=n("06cf").f,a=n("83ab"),c=i((function(){s(1)})),u=!a||c;r({target:"Object",stat:!0,forced:u,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},e538:function(e,t,n){var r=n("b622");t.f=r},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6c4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("2309"),i=n("4aa6"),o=n("fca1");class s{constructor(){this._observers=r["c"]()}on(e,t){r["e"](this._observers,e,i["a"]).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return o["c"]((this._observers.get(e)||r["c"]()).values()).forEach(e=>e(...t))}destroy(){this._observers=r["c"]()}}},e6cf:function(e,t,n){"use strict";var r,i,o,s,a=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),h=n("fea9"),f=n("6eeb"),d=n("e2cc"),p=n("d2bb"),m=n("d44e"),v=n("2626"),g=n("861d"),y=n("1c0b"),b=n("19aa"),w=n("8925"),k=n("2266"),S=n("1c7e"),x=n("4840"),_=n("2cf4").set,C=n("b575"),O=n("cdf9"),M=n("44de"),E=n("f069"),A=n("e667"),T=n("69f3"),R=n("94ca"),D=n("b622"),I=n("6069"),N=n("605d"),P=n("2d00"),j=D("species"),L="Promise",F=T.get,B=T.set,z=T.getterFor(L),$=h&&h.prototype,U=h,H=$,V=u.TypeError,W=u.document,q=u.process,K=E.f,J=K,Y=!!(W&&W.createEvent&&u.dispatchEvent),G="function"==typeof PromiseRejectionEvent,X="unhandledrejection",Q="rejectionhandled",Z=0,ee=1,te=2,ne=1,re=2,ie=!1,oe=R(L,(function(){var e=w(U),t=e!==String(U);if(!t&&66===P)return!0;if(c&&!H["finally"])return!0;if(P>=51&&/native code/.test(e))return!1;var n=new U((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};return i[j]=r,ie=n.then((function(){}))instanceof r,!ie||!t&&I&&!G})),se=oe||!S((function(e){U.all(e)["catch"]((function(){}))})),ae=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},ce=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;C((function(){var r=e.value,i=e.state==ee,o=0;while(n.length>o){var s,a,c,u=n[o++],l=i?u.ok:u.fail,h=u.resolve,f=u.reject,d=u.domain;try{l?(i||(e.rejection===re&&fe(e),e.rejection=ne),!0===l?s=r:(d&&d.enter(),s=l(r),d&&(d.exit(),c=!0)),s===u.promise?f(V("Promise-chain cycle")):(a=ae(s))?a.call(s,h,f):h(s)):f(r)}catch(p){d&&!c&&d.exit(),f(p)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&le(e)}))}},ue=function(e,t,n){var r,i;Y?(r=W.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!G&&(i=u["on"+e])?i(r):e===X&&M("Unhandled promise rejection",n)},le=function(e){_.call(u,(function(){var t,n=e.facade,r=e.value,i=he(e);if(i&&(t=A((function(){N?q.emit("unhandledRejection",r,n):ue(X,n,r)})),e.rejection=N||he(e)?re:ne,t.error))throw t.value}))},he=function(e){return e.rejection!==ne&&!e.parent},fe=function(e){_.call(u,(function(){var t=e.facade;N?q.emit("rejectionHandled",t):ue(Q,t,e.value)}))},de=function(e,t,n){return function(r){e(t,r,n)}},pe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=te,ce(e,!0))},me=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw V("Promise can't be resolved itself");var r=ae(t);r?C((function(){var n={done:!1};try{r.call(t,de(me,n,e),de(pe,n,e))}catch(i){pe(n,i,e)}})):(e.value=t,e.state=ee,ce(e,!1))}catch(i){pe({done:!1},i,e)}}};if(oe&&(U=function(e){b(this,U,L),y(e),r.call(this);var t=F(this);try{e(de(me,t),de(pe,t))}catch(n){pe(t,n)}},H=U.prototype,r=function(e){B(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Z,value:void 0})},r.prototype=d(H,{then:function(e,t){var n=z(this),r=K(x(this,U));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=N?q.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=Z&&ce(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=F(e);this.promise=e,this.resolve=de(me,t),this.reject=de(pe,t)},E.f=K=function(e){return e===U||e===o?new i(e):J(e)},!c&&"function"==typeof h&&$!==Object.prototype)){s=$.then,ie||(f($,"then",(function(e,t){var n=this;return new U((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),f($,"catch",H["catch"],{unsafe:!0}));try{delete $.constructor}catch(ve){}p&&p($,H)}a({global:!0,wrap:!0,forced:oe},{Promise:U}),m(U,L,!1,!0),v(L),o=l(L),a({target:L,stat:!0,forced:oe},{reject:function(e){var t=K(this);return t.reject.call(void 0,e),t.promise}}),a({target:L,stat:!0,forced:c||oe},{resolve:function(e){return O(c&&this===o?U:this,e)}}),a({target:L,stat:!0,forced:se},{all:function(e){var t=this,n=K(t),r=n.resolve,i=n.reject,o=A((function(){var n=y(t.resolve),o=[],s=0,a=1;k(e,(function(e){var c=s++,u=!1;o.push(void 0),a++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,i=A((function(){var i=y(t.resolve);k(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(e,t,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),s=n("9bf2");e.exports=function(e,t){for(var n=i(t),a=s.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||a(e,l,c(t,l))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},ed4b:function(e,t,n){"use strict";var r=n("9980"),i=n("f95e");const o=r["d"].create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:"h"+e,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){const n=this.options.levels.includes(e.attrs.level),i=n?e.attrs.level:this.options.levels[0];return["h"+i,Object(r["n"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode("heading",e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode("heading","paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,["Mod-Alt-"+t]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Object(i["c"])(new RegExp(`^(#{1,${e}})\\s$`),this.type,{level:e}))}});t["a"]=o},ed65:function(e,t,n){},f069:function(e,t,n){"use strict";var r=n("1c0b"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f248:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n("dbda"),i=n("1b25"),o=n("69a7"),s=n("ca0e"),a=n("e6c4"),c=n("2163");const u=3e4;class l extends a["a"]{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=o["a"]();null!==this.getLocalState()&&u/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&u<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&h(this,t,"timeout")},s["c"](u/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:o["a"]()});const s=[],a=[],u=[],l=[];null===e?l.push(t):null==i?null!=e&&s.push(t):(a.push(t),c["b"](i,e)||u.push(t)),(s.length>0||u.length>0||l.length>0)&&this.emit("change",[{added:s,updated:u,removed:l},"local"]),this.emit("update",[{added:s,updated:a,removed:l},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const h=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const n=t[i];if(e.states.has(n)){if(e.states.delete(n),n===e.clientID){const t=e.meta.get(n);e.meta.set(n,{clock:t.clock+1,lastUpdated:o["a"]()})}r.push(n)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},f=(e,t,n=e.states)=>{const i=t.length,o=r["e"]();r["m"](o,i);for(let s=0;s<i;s++){const i=t[s],a=n.get(i)||null,c=e.meta.get(i).clock;r["m"](o,i),r["m"](o,c),r["l"](o,JSON.stringify(a))}return r["f"](o)},d=(e,t,n)=>{const r=i["e"](t),s=o["a"](),a=[],u=[],l=[],h=[],f=i["k"](r);for(let o=0;o<f;o++){const t=i["k"](r);let n=i["k"](r);const o=JSON.parse(i["j"](r)),f=e.meta.get(t),d=e.states.get(t),p=void 0===f?0:f.clock;(p<n||p===n&&null===o&&e.states.has(t))&&(null===o?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,o),e.meta.set(t,{clock:n,lastUpdated:s}),void 0===f&&null!==o?a.push(t):void 0!==f&&null===o?h.push(t):null!==o&&(c["b"](o,d)||l.push(t),u.push(t)))}(a.length>0||l.length>0||h.length>0)&&e.emit("change",[{added:a,updated:l,removed:h},n]),(a.length>0||u.length>0||h.length>0)&&e.emit("update",[{added:a,updated:u,removed:h},n])}},f5df:function(e,t,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),s=o("toStringTag"),a="Arguments"==i(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),s))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},f95e:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return h}));var r=n("5313"),i=n("0ac0"),o=function(e,t){this.match=e,this.handler="string"==typeof t?s(t):t};function s(e){return function(t,n,r,i){var o=e;if(n[1]){var s=n[0].lastIndexOf(n[1]);o+=n[0].slice(s+n[1].length),r+=s;var a=r-i;a>0&&(o=n[0].slice(s-a,s)+o,r=i)}return t.tr.insertText(o,r,i)}}var a=500;function c(e){var t=e.rules,n=new r["d"]({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,r,i,o){return u(e,r,i,o,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection,i=r.$cursor;i&&u(e,i.pos,i.pos,"",t,n)}))}}},isInputRules:!0});return n}function u(e,t,n,r,i,o){if(e.composing)return!1;var s=e.state,c=s.doc.resolve(t);if(c.parent.type.spec.code)return!1;for(var u=c.parent.textBetween(Math.max(0,c.parentOffset-a),c.parentOffset,null,"￼")+r,l=0;l<i.length;l++){var h=i[l].match.exec(u),f=h&&i[l].handler(s,h,t-(h[0].length-r.length),n);if(f)return e.dispatch(f.setMeta(o,{transform:f,from:t,to:n,text:r})),!0}return!1}function l(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var i=n[r],o=void 0;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){for(var s=e.tr,a=o.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));if(o.text){var u=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,e.schema.text(o.text,u))}else s.delete(o.from,o.to);t(s)}return!0}}return!1}new o(/--$/,"—"),new o(/\.\.\.$/,"…"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new o(/"$/,"”"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new o(/'$/,"’");function h(e,t,n,r){return new o(e,(function(e,o,s,a){var c=n instanceof Function?n(o):n,u=e.tr.delete(s,a),l=u.doc.resolve(s),h=l.blockRange(),f=h&&Object(i["h"])(h,t,c);if(!f)return null;u.wrap(h,f);var d=u.doc.resolve(s-1).nodeBefore;return d&&d.type==t&&Object(i["e"])(u.doc,s-1)&&(!r||r(o,d))&&u.join(s-1),u}))}function f(e,t,n){return new o(e,(function(e,r,i,o){var s=e.doc.resolve(i),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(i,o).setBlockType(i,i,t,a):null}))}},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fca1:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}));const r=e=>e[e.length-1],i=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},o=Array.from,s=(e,t)=>e.every(t),a=(e,t)=>e.length===t.length&&s(e,(e,n)=>e===t[n])},fce3:function(e,t,n){var r=n("d039");e.exports=r((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise}}]);
//# sourceMappingURL=chunk-vendors.af324b69.js.map