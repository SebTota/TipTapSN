(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"0392":function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"taskList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"taskItem+",parseHTML(){return[{tag:'ul[data-type="taskList"]',priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Object(r["m"])(t,{"data-type":"taskList"}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList("taskList","taskItem")}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});e["a"]=i},"056c":function(t,e,n){"use strict";var r=n("9980");const i=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,o=r["d"].create({name:"image",defaultOptions:{inline:!1,HTMLAttributes:{}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:"img[src]"}]},renderHTML({HTMLAttributes:t}){return["img",Object(r["m"])(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Object(r["n"])(i,this.type,t=>{const[,e,n,r]=t;return{src:n,alt:e,title:r}})]}});e["a"]=o},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):i(r(t))}},"058a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c}));let r=[];const i=()=>{for(let t=0;t<r.length;t++)r[t]();r=[]},o=t=>{r.push(t),1===r.length&&setTimeout(i,0)},s=t=>class{constructor(t){this._=t}destroy(){t(this._)}},a=s(clearTimeout),c=(t,e)=>new a(setTimeout(e,t));s(clearInterval),s(t=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(t)),s(t=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(t))},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),s=n("fc6a"),a=n("a04b"),c=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=a(e),u)try{return l(t,e)}catch(n){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},"0ac0":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return T})),n.d(e,"f",(function(){return M})),n.d(e,"g",(function(){return N})),n.d(e,"h",(function(){return _})),n.d(e,"i",(function(){return I})),n.d(e,"j",(function(){return x}));var r=n("304a"),i=65535,o=Math.pow(2,16);function s(t,e){return t+e*o}function a(t){return t&i}function c(t){return(t-(t&i))/o}var u=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},l=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};l.prototype.recover=function(t){var e=0,n=a(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+c(t)},l.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},l.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},l.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?r:0);if(c>t)break;var l=this.ranges[a+i],h=this.ranges[a+o],f=c+l;if(t<=f){var p=l?t==c?-1:t==f?1:e:e,d=c+r+(p<0?0:h);if(n)return d;var m=t==(e<0?c:f)?null:s(a/3,t-c);return new u(d,e<0?t!=c:t!=f,m)}r+=h-l}return n?t+r:new u(t+r)},l.prototype.touches=function(t,e){for(var n=0,r=a(e),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?n:0);if(c>t)break;var u=this.ranges[s+i],l=c+u;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+o]-u}return!1},l.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),i+=u-c}},l.prototype.invert=function(){return new l(this.ranges,!this.inverted)},l.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},l.offset=function(t){return 0==t?l.empty:new l(t<0?[0,-t,0]:[0,0,t])},l.empty=new l([]);var h=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function f(t){var e=Error.call(this,t);return e.__proto__=f.prototype,e}h.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new h(this.maps,this.mirror,t,e)},h.prototype.copy=function(){return new h(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},h.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},h.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},h.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},h.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},h.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},h.prototype.invert=function(){var t=new h;return t.appendMappingInverted(this),t},h.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},h.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},h.prototype._map=function(t,e,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,t=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),t=s.pos}return n?t:new u(t,r)},f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="TransformError";var p=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new h},d={before:{configurable:!0},docChanged:{configurable:!0}};function m(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},p.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new f(e.failed);return this},p.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},d.docChanged.get=function(){return this.steps.length>0},p.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(p.prototype,d);var g=Object.create(null),v=function(){};v.prototype.apply=function(t){return m()},v.prototype.getMap=function(){return l.empty},v.prototype.invert=function(t){return m()},v.prototype.map=function(t){return m()},v.prototype.merge=function(t){return null},v.prototype.toJSON=function(){return m()},v.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=g[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},v.jsonID=function(t,e){if(t in g)throw new RangeError("Duplicate use of step JSON ID "+t);return g[t]=e,e.prototype.jsonID=t,e};var y=function(t,e){this.doc=t,this.failed=e};y.ok=function(t){return new y(t,null)},y.fail=function(t){return new y(null,t)},y.fromReplace=function(t,e,n,i){try{return y.ok(t.replace(e,n,i))}catch(o){if(o instanceof r["h"])return y.fail(o.message);throw o}};var b=function(t){function e(e,n,r,i){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&k(t,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new l([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r["j"].empty:new r["j"](t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var i=this.slice.size+t.slice.size==0?r["j"].empty:new r["j"](this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),i,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r["j"].fromJSON(t,n.slice),!!n.structure)},e}(v);v.jsonID("replace",b);var w=function(t){function e(e,n,r,i,o,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(k(t,this.from,this.gapFrom)||k(t,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return y.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?y.fromReplace(t,this.from,this.to,n):y.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r["j"].fromJSON(t,n.slice),n.insert,!!n.structure)},e}(v);function k(t,e,n){var r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function S(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function x(t){for(var e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(0==r||i.type.spec.isolating||!S(i,o,s))break}}function _(t,e,n,r){void 0===r&&(r=t);var i=O(t,e),o=i&&E(r,e);return o?i.map(C).concat({type:e,attrs:n}).concat(o.map(C)):null}function C(t){return{type:t,attrs:null}}function O(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;var s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function E(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=s.length?s[s.length-1]:e,c=a.contentMatch,u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return c&&c.validEnd?s:null}function A(t,e,n){var r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function M(t,e,n,r){void 0===n&&(n=1);var i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,c=n-2;a>o;a--,c--){var u=i.node(a),l=i.index(a);if(u.type.spec.isolating)return!1;var h=u.content.cutByIndex(l,u.childCount),f=r&&r[c]||u;if(f!=u&&(h=h.replaceChild(0,f.type.create(f.attrs))),!u.canReplace(l+1,u.childCount)||!f.type.validContent(h))return!1}var p=i.indexAfter(o),d=r&&r[0];return i.node(o).canReplaceWith(p,p,d?d.type:i.node(o+1).type)}function T(t,e){var n=t.resolve(e),r=n.index();return R(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function R(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function I(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),i=r.depth;;i--){var o=void 0,s=void 0,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&R(o,s)&&r.node(i).canReplace(a,a+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function D(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function N(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0),l=r.node(a),h=!1;if(1==s)h=l.canReplace(u,u,i);else{var f=l.contentMatchAt(u).findWrapping(i.firstChild.type);h=f&&l.canReplaceWith(u,u,f[0])}if(h)return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function j(t,e,n){for(var i=[],o=0;o<t.childCount;o++){var s=t.child(o);s.content.size&&(s=s.copy(j(s.content,e,s))),s.isInline&&(s=e(s,n,o)),i.push(s)}return r["c"].fromArray(i)}v.jsonID("replaceAround",w),p.prototype.lift=function(t,e){for(var n=t.$from,i=t.$to,o=t.depth,s=n.before(o+1),a=i.after(o+1),c=s,u=a,l=r["c"].empty,h=0,f=o,p=!1;f>e;f--)p||n.index(f)>0?(p=!0,l=r["c"].from(n.node(f).copy(l)),h++):c--;for(var d=r["c"].empty,m=0,g=o,v=!1;g>e;g--)v||i.after(g+1)<i.end(g)?(v=!0,d=r["c"].from(i.node(g).copy(d)),m++):u++;return this.step(new w(c,u,s,a,new r["j"](l.append(d),h,m),l.size-h,!0))},p.prototype.wrap=function(t,e){for(var n=r["c"].empty,i=e.length-1;i>=0;i--)n=r["c"].from(e[i].type.create(e[i].attrs,n));var o=t.start,s=t.end;return this.step(new w(o,s,o,s,new r["j"](n,0,0),e.length,!0))},p.prototype.setBlockType=function(t,e,n,i){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,i)&&A(o.doc,o.mapping.slice(s).map(e),n)){o.clearIncompatible(o.mapping.slice(s).map(e,1),n);var a=o.mapping.slice(s),c=a.map(e,1),u=a.map(e+t.nodeSize,1);return o.step(new w(c,u,c+1,u-1,new r["j"](r["c"].from(n.create(i,null,t.marks)),0,0),1,!0)),!1}})),this},p.prototype.setNodeMarkup=function(t,e,n,i){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var s=e.create(n,null,i||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,s);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new w(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new r["j"](r["c"].from(s),0,0),1,!0))},p.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var i=this.doc.resolve(t),o=r["c"].empty,s=r["c"].empty,a=i.depth,c=i.depth-e,u=e-1;a>c;a--,u--){o=r["c"].from(i.node(a).copy(o));var l=n&&n[u];s=r["c"].from(l?l.type.create(l.attrs,s):i.node(a).copy(s))}return this.step(new b(t,t,new r["j"](o.append(s),e,e),!0))},p.prototype.join=function(t,e){void 0===e&&(e=1);var n=new b(t-e,t+e,r["j"].empty,!0);return this.step(n)};var P=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),i=t.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new r["j"](j(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return y.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new L(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(v);v.jsonID("addMark",P);var L=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),i=new r["j"](j(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return y.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new P(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(v);function F(t,e,n,i){if(void 0===n&&(n=e),void 0===i&&(i=r["j"].empty),e==n&&!i.size)return null;var o=t.resolve(e),s=t.resolve(n);return B(o,s,i)?new b(e,n,i):new z(o,s,i).fit()}function B(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}v.jsonID("removeMark",L),p.prototype.addMark=function(t,e,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,u){if(r.isInline){var l=r.marks;if(!n.isInSet(l)&&u.type.allowsMarkType(n.type)){for(var h=Math.max(c,t),f=Math.min(c+r.nodeSize,e),p=n.addToSet(l),d=0;d<l.length;d++)l[d].isInSet(p)||(s&&s.to==h&&s.mark.eq(l[d])?s.to=f:i.push(s=new L(h,f,l[d])));a&&a.to==h?a.to=f:o.push(a=new P(h,f,n))}}})),i.forEach((function(t){return r.step(t)})),o.forEach((function(t){return r.step(t)})),this},p.prototype.removeMark=function(t,e,n){var i=this;void 0===n&&(n=null);var o=[],s=0;return this.doc.nodesBetween(t,e,(function(i,a){if(i.isInline){s++;var c=null;if(n instanceof r["e"]){var u,l=i.marks;while(u=n.isInSet(l))(c||(c=[])).push(u),l=u.removeFromSet(l)}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length)for(var h=Math.min(a+i.nodeSize,e),f=0;f<c.length;f++){for(var p=c[f],d=void 0,m=0;m<o.length;m++){var g=o[m];g.step==s-1&&p.eq(o[m].style)&&(d=g)}d?(d.to=h,d.step=s):o.push({style:p,from:Math.max(a,t),to:h,step:s})}}})),o.forEach((function(t){return i.step(new L(t.from,t.to,t.style))})),this},p.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var i=this.doc.nodeAt(t),o=[],s=t+1,a=0;a<i.childCount;a++){var c=i.child(a),u=s+c.nodeSize,l=n.matchType(c.type,c.attrs);if(l){n=l;for(var h=0;h<c.marks.length;h++)e.allowsMarkType(c.marks[h].type)||this.step(new L(s,u,c.marks[h]))}else o.push(new b(s,u,r["j"].empty));s=u}if(!n.validEnd){var f=n.fillBefore(r["c"].empty,!0);this.replace(s,s,new r["j"](f,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this},p.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r["j"].empty);var i=F(this.doc,t,e,n);return i&&this.step(i),this},p.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r["j"](r["c"].from(n),0,0))},p.prototype.delete=function(t,e){return this.replace(t,e,r["j"].empty)},p.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var z=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var i=0;i<=t.depth;i++){var o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}this.placed=r["c"].empty;for(var s=t.depth;s>0;s--)this.placed=r["c"].from(t.node(s).copy(this.placed))},$={depth:{configurable:!0}};function U(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(U(t.firstChild.content,e-1,n)))}function H(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(H(t.lastChild.content,e-1,n)))}function V(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function W(t,e,n){if(e<=0)return t;var i=t.content;return e>1&&(i=i.replaceChild(0,W(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r["c"].empty,!0)))),t.copy(i)}function q(t,e,n,r,i){var o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!J(n,o.content,s)?a:null}function J(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function K(t,e,n,i,o){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(K(s.content,e+1,n,i,s)))}if(e>i){var a=o.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(r["c"].empty,!0))}return t}function Y(t,e){for(var n=[],r=Math.min(t.depth,e.depth),i=r;i>=0;i--){var o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;o==e.start(i)&&n.push(i)}return n}$.depth.get=function(){return this.frontier.length-1},z.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;var s=this.placed,a=i.depth,c=o.depth;while(a&&c&&1==s.childCount)s=s.firstChild.content,a--,c--;var u=new r["j"](s,a,c);return e>-1?new w(i.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||i.pos!=this.$to.pos?new b(i.pos,o.pos,u):void 0},z.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,i=void 0;e?(i=V(this.unplaced.content,e-1).firstChild,n=i.content):n=this.unplaced.content;for(var o=n.firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],c=a.type,u=a.match,l=void 0,h=void 0;if(1==t&&(o?u.matchType(o.type)||(h=u.fillBefore(r["c"].from(o),!1)):c.compatibleContent(i.type)))return{sliceDepth:e,frontierDepth:s,parent:i,inject:h};if(2==t&&o&&(l=u.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:s,parent:i,wrap:l};if(i&&u.matchType(i.type))break}}},z.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,i=t.openEnd,o=V(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new r["j"](e,n+1,Math.max(i,o.size+n>=e.size-i?n+1:0)),!0)},z.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,i=t.openEnd,o=V(e,n);if(o.childCount<=1&&n>0){var s=e.size-n<=n+o.size;this.unplaced=new r["j"](U(e,n-1,1),n-1,s?n-1:i)}else this.unplaced=new r["j"](U(e,n,1),n,i)},z.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,i=t.parent,o=t.inject,s=t.wrap;while(this.depth>n)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,u=i?i.content:c.content,l=c.openStart-e,h=0,f=[],p=this.frontier[n],d=p.match,m=p.type;if(o){for(var g=0;g<o.childCount;g++)f.push(o.child(g));d=d.matchFragment(o)}var v=u.size+e-(c.content.size-c.openEnd);while(h<u.childCount){var y=u.child(h),b=d.matchType(y.type);if(!b)break;h++,(h>1||0==l||y.content.size)&&(d=b,f.push(W(y.mark(m.allowedMarks(y.marks)),1==h?l:0,h==u.childCount?v:-1)))}var w=h==u.childCount;w||(v=-1),this.placed=H(this.placed,n,r["c"].from(f)),this.frontier[n].match=d,w&&v<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,S=u;k<v;k++){var x=S.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),S=x.content}this.unplaced=w?0==e?r["j"].empty:new r["j"](U(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new r["j"](U(c.content,e,h),c.openStart,c.openEnd)},z.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!q(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,i=this.$to.after(r);while(r>1&&i==this.$to.end(--r))++i;return i},z.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,i=n.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=q(t,e,i,r,o);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,l=c.type,h=q(t,a,l,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},z.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=H(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t},z.prototype.openFrontierNode=function(t,e,n){var i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=H(this.placed,this.depth,r["c"].from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},z.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(r["c"].empty,!0);e.childCount&&(this.placed=H(this.placed,this.frontier.length,e))},Object.defineProperties(z.prototype,$),p.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var i=this.doc.resolve(t),o=this.doc.resolve(e);if(B(i,o,n))return this.step(new b(t,e,n));var s=Y(i,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var c=i.depth,u=i.pos-1;c>0;c--,u--){var l=i.node(c).type.spec;if(l.defining||l.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==u&&s.splice(1,0,-c)}for(var h=s.indexOf(a),f=[],p=n.openStart,d=n.content,m=0;;m++){var g=d.firstChild;if(f.push(g),m==n.openStart)break;d=g.content}p>0&&f[p-1].type.spec.defining&&i.node(h).type!=f[p-1].type?p-=1:p>=2&&f[p-1].isTextblock&&f[p-2].type.spec.defining&&i.node(h).type!=f[p-2].type&&(p-=2);for(var v=n.openStart;v>=0;v--){var y=(v+p+1)%(n.openStart+1),w=f[y];if(w)for(var k=0;k<s.length;k++){var S=s[(k+h)%s.length],x=!0;S<0&&(x=!1,S=-S);var _=i.node(S-1),C=i.index(S-1);if(_.canReplaceWith(C,C,w.type,w.marks))return this.replace(i.before(S),x?o.after(S):e,new r["j"](K(n.content,0,n.openStart,y),y,n.openEnd))}}for(var O=this.steps.length,E=s.length-1;E>=0;E--){if(this.replace(t,e,n),this.steps.length>O)break;var A=s[E];A<0||(t=i.before(A),e=o.after(A))}return this},p.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var i=D(this.doc,t,n.type);null!=i&&(t=e=i)}return this.replaceRange(t,e,new r["j"](r["c"].from(n),0,0))},p.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),i=Y(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},"0b42":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),s=o("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)?r(e)&&(e=e[s],null===e&&(e=void 0)):e=void 0),void 0===e?Array:e}},"0b6c":function(t,e,n){"use strict";var r,i,o=n("9980"),s=n("5313"),a=n("304a"),c=n("7f06"),u=n("576a"),l=n("0ac0");if("undefined"!=typeof WeakMap){var h=new WeakMap;r=function(t){return h.get(t)},i=function(t,e){return h.set(t,e),e}}else{var f=[],p=10,d=0;r=function(t){for(var e=0;e<f.length;e+=2)if(f[e]==t)return f[e+1]},i=function(t,e){return d==p&&(d=0),f[d++]=t,f[d++]=e}}var m=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},g=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function v(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=y(t),n=t.childCount,r=[],i=0,o=null,s=[],a=0,c=e*n;a<c;a++)r[a]=0;for(var u=0,l=0;u<n;u++){var h=t.child(u);l++;for(var f=0;;f++){while(i<r.length&&0!=r[i])i++;if(f==h.childCount)break;for(var p=h.child(f),d=p.attrs,m=d.colspan,v=d.rowspan,w=d.colwidth,k=0;k<v;k++){if(k+u>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:l,n:v-k});break}for(var S=i+k*e,x=0;x<m;x++){0==r[S+x]?r[S+x]=l:(o||(o=[])).push({type:"collision",row:u,pos:l,n:m-x});var _=w&&w[x];if(_){var C=(S+x)%e*2,O=s[C];null==O||O!=_&&1==s[C+1]?(s[C]=_,s[C+1]=1):O==_&&s[C+1]++}}}i+=m,l+=p.nodeSize}var E=(u+1)*e,A=0;while(i<E)0==r[i++]&&A++;A&&(o||(o=[])).push({type:"missing",row:u,n:A}),l++}for(var M=new g(e,n,r,o),T=!1,R=0;!T&&R<s.length;R+=2)null!=s[R]&&s[R+1]<n&&(T=!0);return T&&b(M,s,t),M}function y(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var i=t.child(r),o=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),c=0;c<a.childCount;c++){var u=a.child(c);s+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}for(var l=0;l<i.childCount;l++){var h=i.child(l);o+=h.attrs.colspan,h.attrs.rowspan>1&&(n=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}function b(t,e,n){t.problems||(t.problems=[]);for(var r=0,i={};r<t.map.length;r++){var o=t.map[r];if(!i[o]){i[o]=!0;for(var s=n.nodeAt(o),a=null,c=0;c<s.attrs.colspan;c++){var u=(r+c)%t.width,l=e[2*u];null==l||s.attrs.colwidth&&s.attrs.colwidth[c]==l||((a||(a=w(s.attrs)))[c]=l)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}function w(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function k(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}return e}g.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,i=e/this.width|0,o=r+1,s=i+1,a=1;o<this.width&&this.map[e+a]==n;a++)o++;for(var c=1;s<this.height&&this.map[e+this.width*c]==n;c++)s++;return new m(r,i,o,s)}}throw new RangeError("No cell with offset "+t+" found")},g.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},g.prototype.nextCell=function(t,e,n){var r=this.findCell(t),i=r.left,o=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==i:o==this.width)?null:this.map[s*this.width+(n<0?i-1:o)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},g.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,i=n.right,o=n.top,s=n.bottom,a=this.findCell(e),c=a.left,u=a.right,l=a.top,h=a.bottom;return new m(Math.min(r,c),Math.min(o,l),Math.max(i,u),Math.max(s,h))},g.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var i=t.left;i<t.right;i++){var o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==t.left&&i&&this.map[o-1]==s||r==t.top&&r&&this.map[o-this.width]==s||e.push(s))}return e},g.prototype.positionAt=function(t,e,n){for(var r=0,i=0;;r++){var o=i+n.child(r).nodeSize;if(r==t){var s=e+t*this.width,a=(t+1)*this.width;while(s<a&&this.map[s]<i)s++;return s==a?o-1:this.map[s]}i=o}},g.get=function(t){return r(t)||i(t,v(t))};var S=new s["e"]("selectingCells");function x(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function _(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}function C(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function O(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:x(e.$head)||E(e.$head)}function E(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var i=t.nodeBefore,o=t.pos;i;i=i.lastChild,o--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(o-i.nodeSize)}}function A(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function M(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function T(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function R(t,e,n){var r=t.start(-1),i=g.get(t.node(-1)),o=i.nextCell(t.pos-r,e,n);return null==o?null:t.node(0).resolve(r+o)}function I(t,e,n){var r={};for(var i in t)r[i]=t[i];return r[e]=n,r}function D(t,e,n){void 0===n&&(n=1);var r=I(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function N(t,e,n){void 0===n&&(n=1);var r=I(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function j(t,e,n){for(var r=k(e.type.schema).header_cell,i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var P=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),i=g.get(r),o=e.start(-1),a=i.rectBetween(e.pos-o,n.pos-o),c=e.node(0),u=i.cellsInRect(a).filter((function(t){return t!=n.pos-o}));u.unshift(n.pos-o);var l=u.map((function(t){var e=r.nodeAt(t),n=t+o+1;return new s["g"](c.resolve(n),c.resolve(n+e.content.size))}));t.call(this,l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(A(r)&&A(i)&&T(r,i)){var o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?e.rowSelection(r,i):o&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return s["h"].between(r,i)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=g.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[],s=r.top;s<r.bottom;s++){for(var c=[],u=s*e.width+r.left,l=r.left;l<r.right;l++,u++){var h=e.map[u];if(!i[h]){i[h]=!0;var f=e.findCell(h),p=t.nodeAt(h),d=r.left-f.left,m=f.right-r.right;if(d>0||m>0){var v=p.attrs;d>0&&(v=D(v,0,d)),m>0&&(v=D(v,v.colspan-m,m)),p=f.left<r.left?p.type.createAndFill(v):p.type.create(v,p.content)}if(f.top<r.top||f.bottom>r.bottom){var y=I(p.attrs,"rowspan",Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top));p=f.top<r.top?p.type.createAndFill(y):p.type.create(y,p.content)}c.push(p)}}o.push(t.child(s).copy(a["c"].from(c)))}var b=this.isColSelection()&&this.isRowSelection()?t:o;return new a["j"](a["c"].from(b),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=a["j"].empty);for(var r=e.steps.length,i=this.ranges,o=0;o<i.length;o++){var s=i[o],c=s.$from,u=s.$to,l=e.mapping.slice(r);e.replace(l.map(c.pos),l.map(u.pos),o?a["j"].empty:n)}var h=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);h&&e.setSelection(h)},e.prototype.replaceWith=function(t,e){this.replace(t,new a["j"](a["c"].from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=g.get(e),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<i.length;o++)t(e.nodeAt(i[o]),r+i[o])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=g.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);return o.top<=s.top?(o.top>0&&(t=a.resolve(i+r.map[o.left])),s.bottom<r.height&&(n=a.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+r.map[s.left])),o.bottom<r.height&&(t=a.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=g.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,o)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=g.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);return o.left<=s.left?(o.left>0&&(t=a.resolve(i+r.map[o.top*r.width])),s.right<r.width&&(n=a.resolve(i+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+r.map[s.top*r.width])),o.right<r.width&&(t=a.resolve(i+r.map[r.width*(o.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new L(this.$anchorCell.pos,this.$headCell.pos)},e}(s["f"]);P.prototype.visible=!1,s["f"].jsonID("cell",P);var L=function(t,e){this.anchor=t,this.head=e};function F(t){if(!(t.selection instanceof P))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(u["a"].node(n,n+t.nodeSize,{class:"selectedCell"}))})),u["b"].create(t.doc,e)}function B(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,i=n.pos,o=e.depth;o>=0;o--,r++)if(e.after(o+1)<e.end(o))break;for(var s=n.depth;s>=0;s--,i--)if(n.before(s+1)>n.start(s))break;return r==i&&/row|table/.test(e.node(o).type.spec.tableRole)}function z(t){for(var e,n,r=t.$from,i=t.$to,o=r.depth;o>0;o--){var s=r.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=i.depth;a>0;a--){var c=i.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return e!==n&&0===i.parentOffset}function $(t,e,n){var r,i,o=(e||t).selection,a=(e||t).doc;if(o instanceof s["c"]&&(i=o.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)r=P.create(a,o.from);else if("row"==i){var c=a.resolve(o.from+1);r=P.rowSelection(c,c)}else if(!n){var u=g.get(o.node),l=o.from+1,h=l+u.map[u.width*u.height-1];r=P.create(a,l+1,h)}}else o instanceof s["h"]&&B(o)?r=s["h"].create(a,o.from):o instanceof s["h"]&&z(o)&&(r=s["h"].create(a,o.$from.start(),o.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}function U(t){if(!t.size)return null;var e=t.content,n=t.openStart,r=t.openEnd;while(1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole))n--,r--,e=e.firstChild.content;var i=e.firstChild,o=i.type.spec.tableRole,s=i.type.schema,c=[];if("row"==o)for(var u=0;u<e.childCount;u++){var l=e.child(u).content,h=u?0:Math.max(0,n-1),f=u<e.childCount-1?0:Math.max(0,r-1);(h||f)&&(l=V(k(s).row,new a["j"](l,h,f)).content),c.push(l)}else{if("cell"!=o&&"header_cell"!=o)return null;c.push(n||r?V(k(s).row,new a["j"](e,n,r)).content:e)}return H(s,c)}function H(t,e){for(var n=[],r=0;r<e.length;r++)for(var i=e[r],o=i.childCount-1;o>=0;o--)for(var s=i.child(o).attrs,c=s.rowspan,u=s.colspan,l=r;l<r+c;l++)n[l]=(n[l]||0)+u;for(var h=0,f=0;f<n.length;f++)h=Math.max(h,n[f]);for(var p=0;p<n.length;p++)if(p>=e.length&&e.push(a["c"].empty),n[p]<h){for(var d=k(t).cell.createAndFill(),m=[],g=n[p];g<h;g++)m.push(d);e[p]=e[p].append(a["c"].from(m))}return{height:e.length,width:h,rows:e}}function V(t,e){var n=t.createAndFill(),r=new l["d"](n).replace(0,n.content.size,e);return r.doc}function W(t,e,n){var r=t.width,i=t.height,o=t.rows;if(r!=e){for(var s=[],c=[],u=0;u<o.length;u++){for(var l=o[u],h=[],f=s[u]||0,p=0;f<e;p++){var d=l.child(p%l.childCount);f+d.attrs.colspan>e&&(d=d.type.create(D(d.attrs,d.attrs.colspan,f+d.attrs.colspan-e),d.content)),h.push(d),f+=d.attrs.colspan;for(var m=1;m<d.attrs.rowspan;m++)s[u+m]=(s[u+m]||0)+d.attrs.colspan}c.push(a["c"].from(h))}o=c,r=e}if(i!=n){for(var g=[],v=0,y=0;v<n;v++,y++){for(var b=[],w=o[y%i],k=0;k<w.childCount;k++){var S=w.child(k);v+S.attrs.rowspan>n&&(S=S.type.create(I(S.attrs,"rowspan",Math.max(1,n-S.attrs.rowspan)),S.content)),b.push(S)}g.push(a["c"].from(b))}o=g,i=n}return{width:r,height:i,rows:o}}function q(t,e,n,r,i,o,s){var c,u,l=t.doc.type.schema,h=k(l);if(i>e.width)for(var f=0,p=0;f<e.height;f++){var d=n.child(f);p+=d.nodeSize;var m=[],g=void 0;g=null==d.lastChild||d.lastChild.type==h.cell?c||(c=h.cell.createAndFill()):u||(u=h.header_cell.createAndFill());for(var v=e.width;v<i;v++)m.push(g);t.insert(t.mapping.slice(s).map(p-1+r),m)}if(o>e.height){for(var y=[],b=0,w=(e.height-1)*e.width;b<Math.max(e.width,i);b++){var S=!(b>=e.width)&&n.nodeAt(e.map[w+b]).type==h.header_cell;y.push(S?u||(u=h.header_cell.createAndFill()):c||(c=h.cell.createAndFill()))}for(var x=h.row.create(null,a["c"].from(y)),_=[],C=e.height;C<o;C++)_.push(x);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),_)}return!(!c&&!u)}function J(t,e,n,r,i,o,s,a){if(0==s||s==e.height)return!1;for(var c=!1,u=i;u<o;u++){var l=s*e.width+u,h=e.map[l];if(e.map[l-e.width]==h){c=!0;var f=n.nodeAt(h),p=e.findCell(h),d=p.top,m=p.left;t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,I(f.attrs,"rowspan",s-d)),t.insert(t.mapping.slice(a).map(e.positionAt(s,m,n)),f.type.createAndFill(I(f.attrs,"rowspan",d+f.attrs.rowspan-s))),u+=f.attrs.colspan-1}}return c}function K(t,e,n,r,i,o,s,a){if(0==s||s==e.width)return!1;for(var c=!1,u=i;u<o;u++){var l=u*e.width+s,h=e.map[l];if(e.map[l-1]==h){c=!0;var f=n.nodeAt(h),p=e.colCount(h),d=t.mapping.slice(a).map(h+r);t.setNodeMarkup(d,null,D(f.attrs,s-p,f.attrs.colspan-(s-p))),t.insert(d+f.nodeSize,f.type.createAndFill(D(f.attrs,0,s-p))),u+=f.attrs.rowspan-1}}return c}function Y(t,e,n,r,i){var o=n?t.doc.nodeAt(n-1):t.doc,s=g.get(o),c=r.top,u=r.left,l=u+i.width,h=c+i.height,f=t.tr,p=0;function d(){o=n?f.doc.nodeAt(n-1):f.doc,s=g.get(o),p=f.mapping.maps.length}q(f,s,o,n,l,h,p)&&d(),J(f,s,o,n,u,l,c,p)&&d(),J(f,s,o,n,u,l,h,p)&&d(),K(f,s,o,n,c,h,u,p)&&d(),K(f,s,o,n,c,h,l,p)&&d();for(var m=c;m<h;m++){var v=s.positionAt(m,u,o),y=s.positionAt(m,l,o);f.replace(f.mapping.slice(p).map(v+n),f.mapping.slice(p).map(y+n),new a["j"](i.rows[m-c],0,0))}d(),f.setSelection(new P(f.doc.resolve(n+s.positionAt(c,u,o)),f.doc.resolve(n+s.positionAt(h-1,l-1,o)))),e(f)}L.prototype.map=function(t){return new L(t.map(this.anchor),t.map(this.head))},L.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&T(e,n)?new P(e,n):s["f"].near(n,1)};var G=Object(c["a"])({ArrowLeft:Q("horiz",-1),ArrowRight:Q("horiz",1),ArrowUp:Q("vert",-1),ArrowDown:Q("vert",1),"Shift-ArrowLeft":Z("horiz",-1),"Shift-ArrowRight":Z("horiz",1),"Shift-ArrowUp":Z("vert",-1),"Shift-ArrowDown":Z("vert",1),Backspace:tt,"Mod-Backspace":tt,Delete:tt,"Mod-Delete":tt});function X(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Q(t,e){return function(n,r,i){var o=n.selection;if(o instanceof P)return X(n,r,s["f"].near(o.$headCell,e));if("horiz"!=t&&!o.empty)return!1;var a=it(i,t,e);if(null==a)return!1;if("horiz"==t)return X(n,r,s["f"].near(n.doc.resolve(o.head+e),e));var c,u=n.doc.resolve(a),l=R(u,t,e);return c=l?s["f"].near(l,1):e<0?s["f"].near(n.doc.resolve(u.before(-1)),-1):s["f"].near(n.doc.resolve(u.after(-1)),1),X(n,r,c)}}function Z(t,e){return function(n,r,i){var o=n.selection;if(!(o instanceof P)){var s=it(i,t,e);if(null==s)return!1;o=new P(n.doc.resolve(s))}var a=R(o.$headCell,t,e);return!!a&&X(n,r,new P(o.$anchorCell,a))}}function tt(t,e){var n=t.selection;if(!(n instanceof P))return!1;if(e){var r=t.tr,i=k(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(i)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new a["j"](i,0,0))})),r.docChanged&&e(r)}return!0}function et(t,e){var n=t.state.doc,r=x(n.resolve(e));return!!r&&(t.dispatch(t.state.tr.setSelection(new P(r))),!0)}function nt(t,e,n){if(!C(t.state))return!1;var r=U(n),i=t.state.selection;if(i instanceof P){r||(r={width:1,height:1,rows:[a["c"].from(V(k(t.state.schema).cell,n))]});var o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),c=g.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=W(r,c.right-c.left,c.bottom-c.top),Y(t.state,t.dispatch,s,c,r),!0}if(r){var u=O(t.state),l=u.start(-1);return Y(t.state,t.dispatch,l,g.get(u.node(-1)).findCell(u.pos-l),r),!0}return!1}function rt(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=ot(t,e.target);if(e.shiftKey&&t.state.selection instanceof P)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=x(t.state.selection.$anchor))&&st(t,e).pos!=n.pos)i(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",s)}function i(e,n){var r=st(t,n),i=null==S.getState(t.state);if(!r||!T(e,r)){if(!i)return;r=e}var o=new P(e,r);if(i||!t.state.selection.eq(o)){var s=t.state.tr.setSelection(o);i&&s.setMeta(S,e.pos),t.dispatch(s)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",s),null!=S.getState(t.state)&&t.dispatch(t.state.tr.setMeta(S,-1))}function s(n){var s,a=S.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(ot(t,n.target)!=r&&(s=st(t,e),!s))return o();s&&i(s,n)}}function it(t,e,n){if(!(t.state.selection instanceof s["h"]))return null;for(var r=t.state.selection,i=r.$head,o=i.depth-1;o>=0;o--){var a=i.node(o),c=n<0?i.index(o):i.indexAfter(o);if(c!=(n<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var u=i.before(o),l="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?u:null}}return null}function ot(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function st(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?x(t.state.doc.resolve(n.pos)):null}var at=new s["e"]("fix-tables");function ct(t,e,n,r){var i=t.childCount,o=e.childCount;t:for(var s=0,a=0;s<o;s++){for(var c=e.child(s),u=a,l=Math.min(i,s+3);u<l;u++)if(t.child(u)==c){a=u+1,n+=c.nodeSize;continue t}r(c,n),a<i&&t.child(a).sameMarkup(c)?ct(t.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function ut(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=lt(t,e,r,n))};return e?e.doc!=t.doc&&ct(e.doc,t.doc,0,r):t.doc.descendants(r),n}function lt(t,e,n,r){var i=g.get(e);if(!i.problems)return r;r||(r=t.tr);for(var o,s,a=[],c=0;c<i.height;c++)a.push(0);for(var u=0;u<i.problems.length;u++){var l=i.problems[u];if("collision"==l.type){for(var h=e.nodeAt(l.pos),f=0;f<h.attrs.rowspan;f++)a[l.row+f]+=l.n;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,D(h.attrs,h.attrs.colspan-l.n,l.n))}else if("missing"==l.type)a[l.row]+=l.n;else if("overlong_rowspan"==l.type){var p=e.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,I(p.attrs,"rowspan",p.attrs.rowspan-l.n))}else if("colwidth mismatch"==l.type){var d=e.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,I(d.attrs,"colwidth",l.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==o&&(o=m),s=m);for(var v=0,y=n+1;v<i.height;v++){var b=e.child(v),w=y+b.nodeSize,S=a[v];if(S>0){var x="cell";b.firstChild&&(x=b.firstChild.type.spec.tableRole);for(var _=[],C=0;C<S;C++)_.push(k(t.schema)[x].createAndFill());var O=0!=v&&o!=v-1||s!=v?w-1:y+1;r.insert(r.mapping.map(O),_)}y=w}return r.setMeta(at,{fixTables:!0})}function ht(t){var e,n=t.selection,r=O(t),i=r.node(-1),o=r.start(-1),s=g.get(i);return e=n instanceof P?s.rectBetween(n.$anchorCell.pos-o,n.$headCell.pos-o):s.findCell(r.pos-o),e.tableStart=o,e.map=s,e.table=i,e}function ft(t,e,n){var r=e.map,i=e.tableStart,o=e.table,s=n>0?-1:0;j(r,o,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var u=r.map[c],l=o.nodeAt(u);t.setNodeMarkup(t.mapping.map(i+u),null,N(l.attrs,n-r.colCount(u))),a+=l.attrs.rowspan-1}else{var h=null==s?k(o.type.schema).cell:o.nodeAt(r.map[c+s]).type,f=r.positionAt(a,n,o);t.insert(t.mapping.map(i+f),h.createAndFill())}}return t}function pt(t,e){if(!C(t))return!1;if(e){var n=ht(t);e(ft(t.tr,n,n.left))}return!0}function dt(t,e){if(!C(t))return!1;if(e){var n=ht(t);e(ft(t.tr,n,n.right))}return!0}function mt(t,e,n){for(var r=e.map,i=e.table,o=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,u=r.map[c],l=i.nodeAt(u);if(n>0&&r.map[c-1]==u||n<r.width-1&&r.map[c+1]==u)t.setNodeMarkup(t.mapping.slice(s).map(o+u),null,D(l.attrs,n-r.colCount(u)));else{var h=t.mapping.slice(s).map(o+u);t.delete(h,h+l.nodeSize)}a+=l.attrs.rowspan}}function gt(t,e){if(!C(t))return!1;if(e){var n=ht(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;;i--){if(mt(r,n,i),i==n.left)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=g.get(n.table)}e(r)}return!0}function vt(t,e,n){for(var r=k(e.type.schema).header_cell,i=0;i<t.width;i++)if(e.nodeAt(t.map[i+n*t.width]).type!=r)return!1;return!0}function yt(t,e,n){for(var r=e.map,i=e.tableStart,o=e.table,s=i,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=[],u=n>0?-1:0;vt(r,o,n+u)&&(u=0==n||n==r.height?null:0);for(var l=0,h=r.width*n;l<r.width;l++,h++)if(n>0&&n<r.height&&r.map[h]==r.map[h-r.width]){var f=r.map[h],p=o.nodeAt(f).attrs;t.setNodeMarkup(i+f,null,I(p,"rowspan",p.rowspan+1)),l+=p.colspan-1}else{var d=null==u?k(o.type.schema).cell:o.nodeAt(r.map[h+u*r.width]).type;c.push(d.createAndFill())}return t.insert(s,k(o.type.schema).row.create(null,c)),t}function bt(t,e){if(!C(t))return!1;if(e){var n=ht(t);e(yt(t.tr,n,n.top))}return!0}function wt(t,e){if(!C(t))return!1;if(e){var n=ht(t);e(yt(t.tr,n,n.bottom))}return!0}function kt(t,e,n){for(var r=e.map,i=e.table,o=e.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=s+i.child(n).nodeSize,u=t.mapping.maps.length;t.delete(s+o,c+o);for(var l=0,h=n*r.width;l<r.width;l++,h++){var f=r.map[h];if(n>0&&f==r.map[h-r.width]){var p=i.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(u).map(f+o),null,I(p,"rowspan",p.rowspan-1)),l+=p.colspan-1}else if(n<r.width&&f==r.map[h+r.width]){var d=i.nodeAt(f),m=d.type.create(I(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),g=r.positionAt(n+1,l,i);t.insert(t.mapping.slice(u).map(o+g),m),l+=d.attrs.colspan-1}}}function St(t,e){if(!C(t))return!1;if(e){var n=ht(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;;i--){if(kt(r,n,i),i==n.top)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=g.get(n.table)}e(r)}return!0}function xt(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function _t(t,e){for(var n=t.width,r=t.height,i=t.map,o=e.top*n+e.left,s=o,a=(e.bottom-1)*n+e.left,c=o+(e.right-e.left-1),u=e.top;u<e.bottom;u++){if(e.left>0&&i[s]==i[s-1]||e.right<n&&i[c]==i[c+1])return!0;s+=n,c+=n}for(var l=e.left;l<e.right;l++){if(e.top>0&&i[o]==i[o-n]||e.bottom<r&&i[a]==i[a+n])return!0;o++,a++}return!1}function Ct(t,e){var n=t.selection;if(!(n instanceof P)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=ht(t),i=r.map;if(_t(i,r))return!1;if(e){for(var o,s,c=t.tr,u={},l=a["c"].empty,h=r.top;h<r.bottom;h++)for(var f=r.left;f<r.right;f++){var p=i.map[h*i.width+f],d=r.table.nodeAt(p);if(!u[p])if(u[p]=!0,null==o)o=p,s=d;else{xt(d)||(l=l.append(d.content));var m=c.mapping.map(p+r.tableStart);c.delete(m,m+d.nodeSize)}}if(c.setNodeMarkup(o+r.tableStart,null,I(N(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),l.size){var g=o+1+s.content.size,v=xt(s)?o+1:g;c.replaceWith(v+r.tableStart,g+r.tableStart,l)}c.setSelection(new P(c.doc.resolve(o+r.tableStart))),e(c)}return!0}function Ot(t,e){var n=k(t.schema);return Et((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function Et(t){return function(e,n){var r,i,o=e.selection;if(o instanceof P){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;r=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(r=_(o.$from),!r)return!1;i=x(o.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=I(s,"rowspan",1)),s.colspan>1&&(s=I(s,"colspan",1));for(var u,l=ht(e),h=e.tr,f=0;f<l.right-l.left;f++)a.push(c?I(s,"colwidth",c&&c[f]?[c[f]]:null):s);for(var p=l.top;p<l.bottom;p++){var d=l.map.positionAt(p,l.left,l.table);p==l.top&&(d+=r.nodeSize);for(var m=l.left,g=0;m<l.right;m++,g++)m==l.left&&p==l.top||h.insert(u=h.mapping.map(d+l.tableStart,1),t({node:r,row:p,col:m}).createAndFill(a[g]))}h.setNodeMarkup(i,t({node:r,row:l.top,col:l.left}),a[0]),o instanceof P&&h.setSelection(new P(h.doc.resolve(o.$anchorCell.pos),u&&h.doc.resolve(u))),n(h)}return!0}}function At(t,e){return function(n,r){if(!C(n))return!1;var i=O(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){var o=n.tr;n.selection instanceof P?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&o.setNodeMarkup(r,null,I(n.attrs,t,e))})):o.setNodeMarkup(i.pos,null,I(i.nodeAfter.attrs,t,e)),r(o)}return!0}}function Mt(t){return function(e,n){if(!C(e))return!1;if(n){for(var r=k(e.schema),i=ht(e),o=e.tr,s=i.map.cellsInRect("column"==t?new m(i.left,0,i.right,i.map.height):"row"==t?new m(0,i.top,i.map.width,i.bottom):i),a=s.map((function(t){return i.table.nodeAt(t)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[c],r.cell,a[c].attrs);if(0==o.steps.length)for(var u=0;u<s.length;u++)o.setNodeMarkup(i.tableStart+s[u],r.header_cell,a[u].attrs);n(o)}return!0}}function Tt(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),i=0;i<r.length;i++){var o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Rt(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Mt(t):function(e,n){if(!C(e))return!1;if(n){var r=k(e.schema),i=ht(e),o=e.tr,s=Tt("row",i,r),a=Tt("column",i,r),c="column"===t?s:"row"===t&&a,u=c?1:0,l="column"==t?new m(0,u,1,i.map.height):"row"==t?new m(u,0,i.map.width,1):i,h="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(l).forEach((function(t){var e=t+i.tableStart,n=o.doc.nodeAt(e);n&&o.setNodeMarkup(e,h,n.attrs)})),n(o)}return!0}}var It=Rt("row",{useDeprecatedLogic:!0}),Dt=Rt("column",{useDeprecatedLogic:!0}),Nt=Rt("cell",{useDeprecatedLogic:!0});function jt(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,i=t.before();r>=0;r--){var o=t.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),c=t.after();a<s.childCount;a++){var u=s.child(a);if(u.childCount)return c+1;c+=u.nodeSize}}}function Pt(t){return function(e,n){if(!C(e))return!1;var r=jt(O(e),t);if(null!=r){if(n){var i=e.doc.resolve(r);n(e.tr.setSelection(s["h"].between(i,M(i))).scrollIntoView())}return!0}}}function Lt(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){var i=n.node(r);if("table"==i.type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Ft=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Bt(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Bt(t,e,n,r,i,o){for(var s=0,a=!0,c=e.firstChild,u=t.firstChild,l=0,h=0;l<u.childCount;l++)for(var f=u.child(l).attrs,p=f.colspan,d=f.colwidth,m=0;m<p;m++,h++){var g=i==h?o:d&&d[m],v=g?g+"px":"";s+=g||r,g||(a=!1),c?(c.style.width!=v&&(c.style.width=v),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=v}while(c){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Ft.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,Bt(t,this.colgroup,this.table,this.cellMinWidth),!0)},Ft.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var zt=new s["e"]("tableColumnResizing");function $t(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Ft);var i=t.lastColumnResizable;void 0===i&&(i=!0);var o=new s["d"]({key:zt,state:{init:function(t,e){return this.spec.props.nodeViews[k(e.schema).table.name]=function(t,e){return new r(t,n,e)},new Ut(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){var e=zt.getState(t);return e.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,r){Ht(t,r,e,n,i)},mouseleave:function(t){Vt(t)},mousedown:function(t,e){Wt(t,e,n)}},decorations:function(t){var e=zt.getState(t);if(e.activeHandle>-1)return te(t,e.activeHandle)},nodeViews:{}}});return o}var Ut=function(t,e){this.activeHandle=t,this.dragging=e};function Ht(t,e,n,r,i){var o=zt.getState(t.state);if(!o.dragging){var s=Jt(e.target),a=-1;if(s){var c=s.getBoundingClientRect(),u=c.left,l=c.right;e.clientX-u<=n?a=Kt(t,e,"left"):l-e.clientX<=n&&(a=Kt(t,e,"right"))}if(a!=o.activeHandle){if(!i&&-1!==a){var h=t.state.doc.resolve(a),f=h.node(-1),p=g.get(f),d=h.start(-1),m=p.colCount(h.pos-d)+h.nodeAfter.attrs.colspan-1;if(m==p.width-1)return}Gt(t,a)}}}function Vt(t){var e=zt.getState(t.state);e.activeHandle>-1&&!e.dragging&&Gt(t,-1)}function Wt(t,e,n){var r=zt.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var i=t.state.doc.nodeAt(r.activeHandle),o=qt(t,r.activeHandle,i.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=zt.getState(t.state);r.dragging&&(Xt(t,r.activeHandle,Yt(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(zt,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=zt.getState(t.state),i=Yt(r.dragging,e,n);Qt(t,r.activeHandle,i,n)}return t.dispatch(t.state.tr.setMeta(zt,{setDragging:{startX:e.clientX,startWidth:o}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault(),!0}function qt(t,e,n){var r=n.colspan,i=n.colwidth,o=i&&i[i.length-1];if(o)return o;var s=t.domAtPos(e),a=s.node.childNodes[s.offset],c=a.offsetWidth,u=r;if(i)for(var l=0;l<r;l++)i[l]&&(c-=i[l],u--);return c/u}function Jt(t){while(t&&"TD"!=t.nodeName&&"TH"!=t.nodeName)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Kt(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var i=r.pos,o=x(t.state.doc.resolve(i));if(!o)return-1;if("right"==n)return o.pos;var s=g.get(o.node(-1)),a=o.start(-1),c=s.map.indexOf(o.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function Yt(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Gt(t,e){t.dispatch(t.state.tr.setMeta(zt,{setHandle:e}))}function Xt(t,e,n){for(var r=t.state.doc.resolve(e),i=r.node(-1),o=g.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr,u=0;u<o.height;u++){var l=u*o.width+a;if(!u||o.map[l]!=o.map[l-o.width]){var h=o.map[l],f=i.nodeAt(h),p=f.attrs,d=1==p.colspan?0:a-o.colCount(h);if(!p.colwidth||p.colwidth[d]!=n){var m=p.colwidth?p.colwidth.slice():Zt(p.colspan);m[d]=n,c.setNodeMarkup(s+h,null,I(p,"colwidth",m))}}}c.docChanged&&t.dispatch(c)}function Qt(t,e,n,r){var i=t.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),a=g.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,c=t.domAtPos(i.start(-1)).node;while("TABLE"!=c.nodeName)c=c.parentNode;Bt(o,c.firstChild,c,r,a,n)}function Zt(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function te(t,e){for(var n=[],r=t.doc.resolve(e),i=r.node(-1),o=g.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,c=0;c<o.height;c++){var l=a+c*o.width-1;if((a==o.width||o.map[l]!=o.map[l+1])&&(0==c||o.map[l-1]!=o.map[l-1-o.width])){var h=o.map[l],f=s+h+i.nodeAt(h).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(u["a"].widget(f,p))}}return u["b"].create(t.doc,n)}function ee(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new s["d"]({key:S,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(S);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:F,handleDOMEvents:{mousedown:rt},createSelectionBetween:function(t){if(null!=S.getState(t.state))return t.state.selection},handleTripleClick:et,handleKeyDown:G,handlePaste:nt},appendTransaction:function(t,n,r){return $(r,ut(r,n),e)}})}function ne(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=ne(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function re(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var u=0,l=Math.min(s.text.length,a.text.length);while(u<l&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1])u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=re(s.content,a.content,n-1,r-1);if(h)return h}n-=c,r-=c}else n-=c,r-=c}}Ut.prototype.apply=function(t){var e=this,n=t.getMeta(zt);if(n&&null!=n.setHandle)return new Ut(n.setHandle,null);if(n&&void 0!==n.setDragging)return new Ut(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);A(t.doc.resolve(r))||(r=null),e=new Ut(r,e.dragging)}return e};var ie=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},oe={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};ie.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,i,o)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},ie.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},ie.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},ie.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new ie(r,this.size+t.size)},ie.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var i=0,o=0;o<e;i++){var s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new ie(n,r)},ie.prototype.cutByIndex=function(t,e){return t==e?ie.empty:0==t&&e==this.content.length?this:new ie(this.content.slice(t,e))},ie.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new ie(r,i)},ie.prototype.addToStart=function(t){return new ie([t].concat(this.content),this.size+t.nodeSize)},ie.prototype.addToEnd=function(t){return new ie(this.content.concat(t),this.size+t.nodeSize)},ie.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},oe.firstChild.get=function(){return this.content.length?this.content[0]:null},oe.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},oe.childCount.get=function(){return this.content.length},ie.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},ie.prototype.maybeChild=function(t){return this.content[t]},ie.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},ie.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),ne(this,t,e)},ie.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),re(this,t,e,n)},ie.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return ae(0,t);if(t==this.size)return ae(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?ae(n+1,o):ae(n,r);r=o}},ie.prototype.toString=function(){return"<"+this.toStringInner()+">"},ie.prototype.toStringInner=function(){return this.content.join(", ")},ie.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},ie.fromJSON=function(t,e){if(!e)return ie.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new ie(e.map(t.nodeFromJSON))},ie.fromArray=function(t){if(!t.length)return ie.empty;for(var e,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new ie(e||t,n)},ie.from=function(t){if(!t)return ie.empty;if(t instanceof ie)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ie([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(ie.prototype,oe);var se={index:0,offset:0};function ae(t,e){return se.index=t,se.offset=e,se}function ce(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!ce(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!ce(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}ie.empty=new ie([],0);var ue=function(t,e){this.type=t,this.attrs=e};function le(t){var e=Error.call(this,t);return e.__proto__=le.prototype,e}ue.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},ue.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},ue.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},ue.prototype.eq=function(t){return this==t||this.type==t.type&&ce(this.attrs,t.attrs)},ue.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},ue.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},ue.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},ue.setFrom=function(t){if(!t||0==t.length)return ue.none;if(t instanceof ue)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},ue.none=[],le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le.prototype.name="ReplaceError";var he=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},fe={size:{configurable:!0}};function pe(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),c=a.index,u=a.offset;if(o==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(pe(s.content,e-o-1,n-o-1)))}function de(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=de(a.content,e-s-1,n);return c&&t.replaceChild(o,a.copy(c))}function me(t,e,n){if(n.openStart>t.depth)throw new le("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new le("Inconsistent open depths");return ge(t,e,n,0)}function ge(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=ge(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=_e(n,t),c=a.start,u=a.end;return ke(o,Se(t,c,u,e,r))}var l=t.parent,h=l.content;return ke(l,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return ke(o,xe(t,e,r))}function ve(t,e){if(!e.type.compatibleContent(t.type))throw new le("Cannot join "+e.type.name+" onto "+t.type.name)}function ye(t,e,n){var r=t.node(n);return ve(r,e.node(n)),r}function be(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function we(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(be(t.nodeAfter,r),o++));for(var a=o;a<s;a++)be(i.child(a),r);e&&e.depth==n&&e.textOffset&&be(e.nodeBefore,r)}function ke(t,e){if(!t.type.validContent(e))throw new le("Invalid content for node "+t.type.name);return t.copy(e)}function Se(t,e,n,r,i){var o=t.depth>i&&ye(t,e,i+1),s=r.depth>i&&ye(n,r,i+1),a=[];return we(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(ve(o,s),be(ke(o,Se(t,e,n,r,i+1)),a)):(o&&be(ke(o,xe(t,e,i+1)),a),we(e,n,i,a),s&&be(ke(s,xe(n,r,i+1)),a)),we(r,null,i,a),new ie(a)}function xe(t,e,n){var r=[];if(we(null,t,n,r),t.depth>n){var i=ye(t,e,n+1);be(ke(i,xe(t,e,n+1)),r)}return we(e,null,n,r),new ie(r)}function _e(t,e){for(var n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content),o=n-1;o>=0;o--)i=e.node(o).copy(ie.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}fe.size.get=function(){return this.content.size-this.openStart-this.openEnd},he.prototype.insertAt=function(t,e){var n=de(this.content,t+this.openStart,e,null);return n&&new he(n,this.openStart,this.openEnd)},he.prototype.removeBetween=function(t,e){return new he(pe(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},he.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},he.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},he.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},he.fromJSON=function(t,e){if(!e)return he.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new he(ie.fromJSON(t,e.content),n,r)},he.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new he(t,n,r)},Object.defineProperties(he.prototype,fe),he.empty=new he(ie.empty,0,0);var Ce=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Oe={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Ce.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Oe.parent.get=function(){return this.node(this.depth)},Oe.doc.get=function(){return this.node(0)},Ce.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},Ce.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},Ce.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},Ce.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},Ce.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},Ce.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},Ce.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Oe.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Oe.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Oe.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},Ce.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r},Ce.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return ue.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},Ce.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},Ce.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},Ce.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Te(this,t,n)},Ce.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},Ce.prototype.max=function(t){return t.pos>this.pos?t:this},Ce.prototype.min=function(t){return t.pos<this.pos?t:this},Ce.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},Ce.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,u=i-c;if(n.push(o,a,r+c),!u)break;if(o=o.child(a),o.isText)break;i=u-1,r+=c+1}return new Ce(e,n,i)},Ce.resolveCached=function(t,e){for(var n=0;n<Ee.length;n++){var r=Ee[n];if(r.pos==e&&r.doc==t)return r}var i=Ee[Ae]=Ce.resolve(t,e);return Ae=(Ae+1)%Me,i},Object.defineProperties(Ce.prototype,Oe);var Ee=[],Ae=0,Me=12,Te=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Re={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Re.start.get=function(){return this.$from.before(this.depth+1)},Re.end.get=function(){return this.$to.after(this.depth+1)},Re.parent.get=function(){return this.$from.node(this.depth)},Re.startIndex.get=function(){return this.$from.index(this.depth)},Re.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Te.prototype,Re);var Ie=Object.create(null),De=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||ie.empty,this.marks=r||ue.none},Ne={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};function je(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}Ne.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Ne.childCount.get=function(){return this.content.childCount},De.prototype.child=function(t){return this.content.child(t)},De.prototype.maybeChild=function(t){return this.content.maybeChild(t)},De.prototype.forEach=function(t){this.content.forEach(t)},De.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},De.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Ne.textContent.get=function(){return this.textBetween(0,this.content.size,"")},De.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},Ne.firstChild.get=function(){return this.content.firstChild},Ne.lastChild.get=function(){return this.content.lastChild},De.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},De.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},De.prototype.hasMarkup=function(t,e,n){return this.type==t&&ce(this.attrs,e||t.defaultAttrs||Ie)&&ue.sameSet(this.marks,n||ue.none)},De.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},De.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},De.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},De.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return he.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new he(c,r.depth-o,i.depth-o)},De.prototype.replace=function(t,e,n){return me(this.resolve(t),this.resolve(e),n)},De.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}},De.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},De.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},De.prototype.resolve=function(t){return Ce.resolveCached(this,t)},De.prototype.resolveNoCache=function(t){return Ce.resolve(this,t)},De.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},Ne.isBlock.get=function(){return this.type.isBlock},Ne.isTextblock.get=function(){return this.type.isTextblock},Ne.inlineContent.get=function(){return this.type.inlineContent},Ne.isInline.get=function(){return this.type.isInline},Ne.isText.get=function(){return this.type.isText},Ne.isLeaf.get=function(){return this.type.isLeaf},Ne.isAtom.get=function(){return this.type.isAtom},De.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),je(this.marks,t)},De.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},De.prototype.canReplace=function(t,e,n,r,i){void 0===n&&(n=ie.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},De.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},De.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},De.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=ue.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!ue.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},De.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},De.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=ie.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(De.prototype,Ne);var Pe=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Le={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Pe.parse=function(t,e){var n=new Fe(t,e);if(null==n.next)return Pe.empty;var r=ze(n);n.next&&n.err("Unexpected trailing text");var i=Ge(Je(r));return Xe(i,n),i},Pe.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Pe.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},Le.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Le.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Pe.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Pe.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return ie.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<o.next.length;c+=2){var u=o.next[c],l=o.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var h=i(l,s.concat(u));if(h)return h}}}return i(this,[])},Pe.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Pe.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Le.edgeCount.get=function(){return this.next.length>>1},Pe.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Pe.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r})).join("\n")},Object.defineProperties(Pe.prototype,Le),Pe.empty=new Pe(!0);var Fe=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Be={next:{configurable:!0}};function ze(t){var e=[];do{e.push($e(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function $e(t){var e=[];do{e.push(Ue(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Ue(t){for(var e=qe(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Ve(t,e)}return e}function He(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Ve(t,e){var n=He(t),r=n;return t.eat(",")&&(r="}"!=t.next?He(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function We(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function qe(t){if(t.eat("(")){var e=ze(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=We(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Je(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),i(o(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return i(o(t.expr,e),u),i(o(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var l=e,h=0;h<t.min;h++){var f=n();i(o(t.expr,l),f),l=f}if(-1==t.max)i(o(t.expr,l),l);else for(var p=t.min;p<t.max;p++){var d=n();r(l,d),i(o(t.expr,l),d),l=d}return[r(l)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Ke(t,e){return e-t}function Ye(t,e){var n=[];return r(e),n.sort(Ke);function r(e){var i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function Ge(t){var e=Object.create(null);return n(Ye(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];Ye(t,r).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new Pe(r.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Ke);o.next.push(i[s],e[a.join(",")]||n(a))}return o}}function Xe(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],u=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(u)&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Qe(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Ze(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function tn(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new rn(t[n]);return e}Be.next.get=function(){return this.tokens[this.pos]},Fe.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Fe.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Fe.prototype,Be);var en=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=tn(n.attrs),this.defaultAttrs=Qe(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},nn={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};nn.isInline.get=function(){return!this.isBlock},nn.isTextblock.get=function(){return this.isBlock&&this.inlineContent},nn.isLeaf.get=function(){return this.contentMatch==Pe.empty},nn.isAtom.get=function(){return this.isLeaf||this.spec.atom},en.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},en.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},en.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Ze(this.attrs,t)},en.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new De(this,this.computeAttrs(t),ie.from(e),ue.setFrom(n))},en.prototype.createChecked=function(t,e,n){if(e=ie.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new De(this,this.computeAttrs(t),e,ue.setFrom(n))},en.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=ie.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(ie.empty,!0);return i?new De(this,t,e.append(i),ue.setFrom(n)):null},en.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},en.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},en.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},en.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:ue.empty:t},en.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new en(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(en.prototype,nn);var rn=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},on={isRequired:{configurable:!0}};on.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(rn.prototype,on);var sn=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=tn(r.attrs),this.rank=e,this.excluded=null;var i=Qe(this.attrs);this.instance=i&&new ue(this,i)};sn.prototype.create=function(t){return!t&&this.instance?this.instance:new ue(this,Ze(this.attrs,t))},sn.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,i){return n[t]=new sn(t,r++,e,i)})),n},sn.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},sn.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},sn.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var an={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cn={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},un={ol:!0,ul:!0},ln=1,hn=2,fn=4;function pn(t){return(t?ln:0)|("full"===t?hn:0)}var dn=function(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.solid=i,this.match=o||(s&fn?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=ue.none,this.pendingMarks=r,this.stashMarks=[]};dn.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(ie.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},dn.prototype.finish=function(t){if(!(this.options&ln)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=ie.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(ie.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},dn.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},dn.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):bn(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},dn.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!an.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var mn=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,i=e.topNode,o=pn(e.preserveWhitespace)|(n?fn:0);r=i?new dn(i.type,i.attrs,ue.none,ue.none,!0,e.topMatch||i.type.contentMatch,o):new dn(n?null:t.schema.topNodeType,null,ue.none,ue.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},gn={top:{configurable:!0},currentPos:{configurable:!0}};function vn(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&un.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function yn(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function bn(t,e){var n=e.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),i=r.type,a=r.next;if(i==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function wn(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}gn.top.get=function(){return this.nodes[this.open]},mn.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(yn(e)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},mn.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.options&hn||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&ln)e=n.options&hn?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},mn.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();un.hasOwnProperty(r)&&this.parser.normalizeLists&&vn(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:cn.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(an.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:null)},mn.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},mn.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},mn.prototype.readStyles=function(t){var e=ue.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(t[n],t[n+1],this,r);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;r=i}return e},mn.prototype.addElementByRule=function(t,e,n){var r,i,o,s,a=this;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],s=o.create(e.attrs),this.addPendingMark(s));var c=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var u=e.contentElement;"string"==typeof u?u=t.querySelector(u):"function"==typeof u&&(u=u(t)),u||(u=t),this.findAround(t,u,!0),this.addAll(u,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},mn.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&an.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},mn.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},mn.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},mn.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},mn.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var o=null==r?i.options&~fn:pn(r);i.options&fn&&0==i.content.length&&(o|=fn),this.nodes.push(new dn(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},mn.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},mn.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},mn.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},gn.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},mn.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},mn.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},mn.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var i=e.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}},mn.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},mn.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var u=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},mn.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},mn.prototype.addPendingMark=function(t){var e=wn(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},mn.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(mn.prototype,gn);var kn=65535,Sn=Math.pow(2,16);function xn(t,e){return t+e*Sn}function _n(t){return t&kn}function Cn(t){return(t-(t&kn))/Sn}var On=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},En=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};En.prototype.recover=function(t){var e=0,n=_n(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+Cn(t)},En.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},En.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},En.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+i],u=this.ranges[s+o],l=a+c;if(t<=l){var h=c?t==a?-1:t==l?1:e:e,f=a+r+(h<0?0:u);if(n)return f;var p=t==(e<0?a:l)?null:xn(s/3,t-a);return new On(f,e<0?t!=a:t!=l,p)}r+=u-c}return n?t+r:new On(t+r)},En.prototype.touches=function(t,e){for(var n=0,r=_n(e),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+i],u=a+c;if(t<=u&&s==3*r)return!0;n+=this.ranges[s+o]-c}return!1},En.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),i+=u-c}},En.prototype.invert=function(){return new En(this.ranges,!this.inverted)},En.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},En.offset=function(t){return 0==t?En.empty:new En(t<0?[0,-t,0]:[0,0,t])},En.empty=new En([]);var An=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function Mn(t){var e=Error.call(this,t);return e.__proto__=Mn.prototype,e}An.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new An(this.maps,this.mirror,t,e)},An.prototype.copy=function(){return new An(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},An.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},An.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},An.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},An.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},An.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},An.prototype.invert=function(){var t=new An;return t.appendMappingInverted(this),t},An.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},An.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},An.prototype._map=function(t,e,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,t=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),t=s.pos}return n?t:new On(t,r)},Mn.prototype=Object.create(Error.prototype),Mn.prototype.constructor=Mn,Mn.prototype.name="TransformError";var Tn=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new An},Rn={before:{configurable:!0},docChanged:{configurable:!0}};function In(){throw new Error("Override me")}Rn.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Tn.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new Mn(e.failed);return this},Tn.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Rn.docChanged.get=function(){return this.steps.length>0},Tn.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(Tn.prototype,Rn);var Dn=Object.create(null),Nn=function(){};Nn.prototype.apply=function(t){return In()},Nn.prototype.getMap=function(){return En.empty},Nn.prototype.invert=function(t){return In()},Nn.prototype.map=function(t){return In()},Nn.prototype.merge=function(t){return null},Nn.prototype.toJSON=function(){return In()},Nn.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Dn[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Nn.jsonID=function(t,e){if(t in Dn)throw new RangeError("Duplicate use of step JSON ID "+t);return Dn[t]=e,e.prototype.jsonID=t,e};var jn=function(t,e){this.doc=t,this.failed=e};jn.ok=function(t){return new jn(t,null)},jn.fail=function(t){return new jn(null,t)},jn.fromReplace=function(t,e,n,r){try{return jn.ok(t.replace(e,n,r))}catch(i){if(i instanceof le)return jn.fail(i.message);throw i}};var Pn=function(t){function e(e,n,r,i){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Fn(t,this.from,this.to)?jn.fail("Structure replace would overwrite content"):jn.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new En([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?he.empty:new he(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?he.empty:new he(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,he.fromJSON(t,n.slice),!!n.structure)},e}(Nn);Nn.jsonID("replace",Pn);var Ln=function(t){function e(e,n,r,i,o,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Fn(t,this.from,this.gapFrom)||Fn(t,this.gapTo,this.to)))return jn.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return jn.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?jn.fromReplace(t,this.from,this.to,n):jn.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new En([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,he.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Nn);function Fn(t,e,n){var r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Bn(t,e,n){var r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function zn(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function $n(t,e,n){for(var r=[],i=0;i<t.childCount;i++){var o=t.child(i);o.content.size&&(o=o.copy($n(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return ie.fromArray(r)}Nn.jsonID("replaceAround",Ln),Tn.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,i=t.depth,o=n.before(i+1),s=r.after(i+1),a=o,c=s,u=ie.empty,l=0,h=i,f=!1;h>e;h--)f||n.index(h)>0?(f=!0,u=ie.from(n.node(h).copy(u)),l++):a--;for(var p=ie.empty,d=0,m=i,g=!1;m>e;m--)g||r.after(m+1)<r.end(m)?(g=!0,p=ie.from(r.node(m).copy(p)),d++):c++;return this.step(new Ln(a,c,o,s,new he(u.append(p),l,d),u.size-l,!0))},Tn.prototype.wrap=function(t,e){for(var n=ie.empty,r=e.length-1;r>=0;r--)n=ie.from(e[r].type.create(e[r].attrs,n));var i=t.start,o=t.end;return this.step(new Ln(i,o,i,o,new he(n,0,0),e.length,!0))},Tn.prototype.setBlockType=function(t,e,n,r){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&Bn(i.doc,i.mapping.slice(o).map(e),n)){i.clearIncompatible(i.mapping.slice(o).map(e,1),n);var s=i.mapping.slice(o),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return i.step(new Ln(a,c,a+1,c-1,new he(ie.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},Tn.prototype.setNodeMarkup=function(t,e,n,r){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var o=e.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,o);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Ln(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new he(ie.from(o),0,0),1,!0))},Tn.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),i=ie.empty,o=ie.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){i=ie.from(r.node(s).copy(i));var u=n&&n[c];o=ie.from(u?u.type.create(u.attrs,o):r.node(s).copy(o))}return this.step(new Pn(t,t,new he(i.append(o),e,e),!0))},Tn.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Pn(t-e,t+e,he.empty,!0);return this.step(n)};var Un=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new he($n(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return jn.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new Hn(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Nn);Nn.jsonID("addMark",Un);var Hn=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new he($n(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return jn.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Un(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Nn);function Vn(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=he.empty),e==n&&!r.size)return null;var i=t.resolve(e),o=t.resolve(n);return Wn(i,o,r)?new Pn(e,n,r):new qn(i,o,r).fit()}function Wn(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Nn.jsonID("removeMark",Hn),Tn.prototype.addMark=function(t,e,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,u){if(r.isInline){var l=r.marks;if(!n.isInSet(l)&&u.type.allowsMarkType(n.type)){for(var h=Math.max(c,t),f=Math.min(c+r.nodeSize,e),p=n.addToSet(l),d=0;d<l.length;d++)l[d].isInSet(p)||(s&&s.to==h&&s.mark.eq(l[d])?s.to=f:i.push(s=new Hn(h,f,l[d])));a&&a.to==h?a.to=f:o.push(a=new Un(h,f,n))}}})),i.forEach((function(t){return r.step(t)})),o.forEach((function(t){return r.step(t)})),this},Tn.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var i=[],o=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){o++;var a=null;if(n instanceof sn){var c,u=r.marks;while(c=n.isInSet(u))(a||(a=[])).push(c),u=c.removeFromSet(u)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var l=Math.min(s+r.nodeSize,e),h=0;h<a.length;h++){for(var f=a[h],p=void 0,d=0;d<i.length;d++){var m=i[d];m.step==o-1&&f.eq(i[d].style)&&(p=m)}p?(p.to=l,p.step=o):i.push({style:f,from:Math.max(s,t),to:l,step:o})}}})),i.forEach((function(t){return r.step(new Hn(t.from,t.to,t.style))})),this},Tn.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),i=[],o=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=o+a.nodeSize,u=n.matchType(a.type,a.attrs);if(u){n=u;for(var l=0;l<a.marks.length;l++)e.allowsMarkType(a.marks[l].type)||this.step(new Hn(o,c,a.marks[l]))}else i.push(new Pn(o,c,he.empty));o=c}if(!n.validEnd){var h=n.fillBefore(ie.empty,!0);this.replace(o,o,new he(h,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},Tn.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=he.empty);var r=Vn(this.doc,t,e,n);return r&&this.step(r),this},Tn.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new he(ie.from(n),0,0))},Tn.prototype.delete=function(t,e){return this.replace(t,e,he.empty)},Tn.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var qn=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var i=t.node(r);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(r))})}this.placed=ie.empty;for(var o=t.depth;o>0;o--)this.placed=ie.from(t.node(o).copy(this.placed))},Jn={depth:{configurable:!0}};function Kn(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(Kn(t.firstChild.content,e-1,n)))}function Yn(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Yn(t.lastChild.content,e-1,n)))}function Gn(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function Xn(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,Xn(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ie.empty,!0)))),t.copy(r)}function Qn(t,e,n,r,i){var o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!Zn(n,o.content,s)?a:null}function Zn(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function tr(t,e,n,r,i){if(e<n){var o=t.firstChild;t=t.replaceChild(0,o.copy(tr(o.content,e+1,n,r,o)))}if(e>r){var s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(ie.empty,!0))}return t}function er(t,e){for(var n=[],r=Math.min(t.depth,e.depth),i=r;i>=0;i--){var o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;o==e.start(i)&&n.push(i)}return n}Jn.depth.get=function(){return this.frontier.length-1},qn.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;var o=this.placed,s=r.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;var c=new he(o,s,a);return e>-1?new Ln(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Pn(r.pos,i.pos,c):void 0},qn.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,r=void 0;e?(r=Gn(this.unplaced.content,e-1).firstChild,n=r.content):n=this.unplaced.content;for(var i=n.firstChild,o=this.depth;o>=0;o--){var s=this.frontier[o],a=s.type,c=s.match,u=void 0,l=void 0;if(1==t&&(i?c.matchType(i.type)||(l=c.fillBefore(ie.from(i),!1)):a.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:o,parent:r,inject:l};if(2==t&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:o,parent:r,wrap:u};if(r&&c.matchType(r.type))break}}},qn.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=Gn(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new he(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)},qn.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=Gn(e,n);if(i.childCount<=1&&n>0){var o=e.size-n<=n+i.size;this.unplaced=new he(Kn(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new he(Kn(e,n,1),n,r)},qn.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,i=t.inject,o=t.wrap;while(this.depth>n)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,l=0,h=[],f=this.frontier[n],p=f.match,d=f.type;if(i){for(var m=0;m<i.childCount;m++)h.push(i.child(m));p=p.matchFragment(i)}var g=c.size+e-(a.content.size-a.openEnd);while(l<c.childCount){var v=c.child(l),y=p.matchType(v.type);if(!y)break;l++,(l>1||0==u||v.content.size)&&(p=y,h.push(Xn(v.mark(d.allowedMarks(v.marks)),1==l?u:0,l==c.childCount?g:-1)))}var b=l==c.childCount;b||(g=-1),this.placed=Yn(this.placed,n,ie.from(h)),this.frontier[n].match=p,b&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,k=c;w<g;w++){var S=k.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),k=S.content}this.unplaced=b?0==e?he.empty:new he(Kn(a.content,e-1,1),e-1,g<0?a.openEnd:e-1):new he(Kn(a.content,e,l),a.openStart,a.openEnd)},qn.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Qn(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,i=this.$to.after(r);while(r>1&&i==this.$to.end(--r))++i;return i},qn.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,i=n.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Qn(t,e,i,r,o);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],u=c.match,l=c.type,h=Qn(t,a,l,u,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},qn.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=Yn(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t},qn.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Yn(this.placed,this.depth,ie.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},qn.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(ie.empty,!0);e.childCount&&(this.placed=Yn(this.placed,this.frontier.length,e))},Object.defineProperties(qn.prototype,Jn),Tn.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),i=this.doc.resolve(e);if(Wn(r,i,n))return this.step(new Pn(t,e,n));var o=er(r,this.doc.resolve(e));0==o[o.length-1]&&o.pop();var s=-(r.depth+1);o.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;o.indexOf(a)>-1?s=a:r.before(a)==c&&o.splice(1,0,-a)}for(var l=o.indexOf(s),h=[],f=n.openStart,p=n.content,d=0;;d++){var m=p.firstChild;if(h.push(m),d==n.openStart)break;p=m.content}f>0&&h[f-1].type.spec.defining&&r.node(l).type!=h[f-1].type?f-=1:f>=2&&h[f-1].isTextblock&&h[f-2].type.spec.defining&&r.node(l).type!=h[f-2].type&&(f-=2);for(var g=n.openStart;g>=0;g--){var v=(g+f+1)%(n.openStart+1),y=h[v];if(y)for(var b=0;b<o.length;b++){var w=o[(b+l)%o.length],k=!0;w<0&&(k=!1,w=-w);var S=r.node(w-1),x=r.index(w-1);if(S.canReplaceWith(x,x,y.type,y.marks))return this.replace(r.before(w),k?i.after(w):e,new he(tr(n.content,0,n.openStart,v),v,n.openEnd))}}for(var _=this.steps.length,C=o.length-1;C>=0;C--){if(this.replace(t,e,n),this.steps.length>_)break;var O=o[C];O<0||(t=r.before(O),e=i.after(O))}return this},Tn.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=zn(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new he(ie.from(n),0,0))},Tn.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),i=er(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var nr=Object.create(null),rr=function(t,e,n){this.ranges=n||[new or(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},ir={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};ir.anchor.get=function(){return this.$anchor.pos},ir.head.get=function(){return this.$head.pos},ir.from.get=function(){return this.$from.pos},ir.to.get=function(){return this.$to.pos},ir.$from.get=function(){return this.ranges[0].$from},ir.$to.get=function(){return this.ranges[0].$to},ir.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},rr.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},rr.prototype.replace=function(t,e){void 0===e&&(e=he.empty);for(var n=e.content.lastChild,r=null,i=0;i<e.openEnd;i++)r=n,n=n.lastChild;for(var o=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],u=c.$from,l=c.$to,h=t.mapping.slice(o);t.replaceRange(h.map(u.pos),h.map(l.pos),a?he.empty:e),0==a&&pr(t,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}},rr.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=t.mapping.slice(n),u=c.map(s.pos),l=c.map(a.pos);i?t.deleteRange(u,l):(t.replaceRangeWith(u,l,e),pr(t,n,e.isInline?-1:1))}},rr.findFrom=function(t,e,n){var r=t.parent.inlineContent?new sr(t):fr(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var i=t.depth-1;i>=0;i--){var o=e<0?fr(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):fr(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(o)return o}},rr.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new lr(t.node(0))},rr.atStart=function(t){return fr(t,t,0,0,1)||new lr(t)},rr.atEnd=function(t){return fr(t,t,t.content.size,t.childCount,-1)||new lr(t)},rr.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=nr[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},rr.jsonID=function(t,e){if(t in nr)throw new RangeError("Duplicate use of selection JSON ID "+t);return nr[t]=e,e.prototype.jsonID=t,e},rr.prototype.getBookmark=function(){return sr.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(rr.prototype,ir),rr.prototype.visible=!0;var or=function(t,e){this.$from=t,this.$to=e},sr=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return t.near(i);var o=n.resolve(r.map(this.anchor));return new e(o.parent.inlineContent?o:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=he.empty),t.prototype.replace.call(this,e,n),n==he.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new ar(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,i,!0)||t.findFrom(r,-i,!0);if(!s)return t.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor,n.pos<r.pos!=o<0&&(n=r))),new e(n,r)},Object.defineProperties(e.prototype,n),e}(rr);rr.jsonID("text",sr);var ar=function(t,e){this.anchor=t,this.head=e};ar.prototype.map=function(t){return new ar(t.map(this.anchor),t.map(this.head))},ar.prototype.resolve=function(t){return sr.between(t.resolve(this.anchor),t.resolve(this.head))};var cr=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new he(ie.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new ur(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(rr);cr.prototype.visible=!1,rr.jsonID("node",cr);var ur=function(t){this.anchor=t};ur.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new ar(r,r):new ur(r)},ur.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&cr.isSelectable(n)?new cr(e):rr.near(e)};var lr=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=he.empty),n==he.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return hr},e}(rr);rr.jsonID("all",lr);var hr={map:function(){return this},resolve:function(t){return new lr(t)}};function fr(t,e,n,r,i,o){if(e.inlineContent)return sr.create(t,n);for(var s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&cr.isSelectable(a))return cr.create(t,n-(i<0?a.nodeSize:0))}else{var c=fr(t,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function pr(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof Pn||i instanceof Ln){var o,s=t.mapping.maps[r];s.forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(rr.near(t.doc.resolve(o),n))}}}var dr=1,mr=2,gr=4,vr=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|dr)&~mr,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&dr)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=mr,this},e.prototype.ensureMarks=function(t){return ue.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&mr)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~mr,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||ue.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(e);i=n==e?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(rr.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=gr,this},n.scrolledIntoView.get=function(){return(this.updated&gr)>0},Object.defineProperties(e.prototype,n),e}(Tn);function yr(t,e){return e&&t?t.bind(e):t}var br=function(t,e,n){this.name=t,this.init=yr(e.init,n),this.apply=yr(e.apply,n)},wr=[new br("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new br("selection",{init:function(t,e){return t.selection||rr.atStart(e.doc)},apply:function(t){return t.selection}}),new br("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new br("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],kr=function(t,e){var n=this;this.schema=t,this.fields=wr.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new br(t.key,t.spec.state,t))}))},Sr=function(t){this.config=t},xr={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};xr.schema.get=function(){return this.config.schema},xr.plugins.get=function(){return this.config.plugins},Sr.prototype.apply=function(t){return this.applyTransaction(t).state},Sr.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},Sr.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,u=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<o?{state:n,n:e.length}:{state:this,n:0})}e.push(u),n=n.applyInner(u),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},Sr.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new Sr(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}for(var o=0;o<_r.length;o++)_r[o](this,t,e);return e},xr.tr.get=function(){return new vr(this)},Sr.create=function(t){for(var e=new kr(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Sr(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},Sr.prototype.reconfigure=function(t){for(var e=new kr(this.schema,t.plugins),n=e.fields,r=new Sr(e),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(t,r)}return r},Sr.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e},Sr.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new kr(t.schema,t.plugins),i=new Sr(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=De.fromJSON(t.schema,e.doc);else if("selection"==r.name)i.selection=rr.fromJSON(i.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var o in n){var s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(i[r.name]=a.fromJSON.call(s,t,e[o],i))}i[r.name]=r.init(t,i)}})),i},Sr.addApplyListener=function(t){_r.push(t)},Sr.removeApplyListener=function(t){var e=_r.indexOf(t);e>-1&&_r.splice(e,1)},Object.defineProperties(Sr.prototype,xr);var _r=[];function Cr(t,e){return e?t.createChecked(null,e):t.createAndFill()}function Or(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function Er(t,e,n,r,i){const o=Or(t),s=[],a=[];for(let u=0;u<n;u+=1){const t=Cr(o.cell,i);if(t&&a.push(t),r){const t=Cr(o.header_cell,i);t&&s.push(t)}}const c=[];for(let u=0;u<e;u+=1)c.push(o.row.createChecked(null,r&&0===u?s:a));return o.table.createChecked(null,c)}function Ar(t){return t instanceof P}const Mr=({editor:t})=>{const{selection:e}=t.state;if(!Ar(e))return!1;let n=0;const r=Object(o["g"])(e.ranges[0].$from,t=>"table"===t.type.name);null===r||void 0===r||r.node.descendants(t=>{if("table"===t.type.name)return!1;["tableCell","tableHeader"].includes(t.type.name)&&(n+=1)});const i=n===e.ranges.length;return!!i&&(t.commands.deleteTable(),!0)};function Tr(t,e,n,r,i,o){let s=0,a=!0,c=e.firstChild;const u=t.firstChild;for(let l=0,h=0;l<u.childCount;l+=1){const{colspan:t,colwidth:n}=u.child(l).attrs;for(let u=0;u<t;u+=1,h+=1){const t=i===h?o:n&&n[u],l=t?t+"px":"";s+=t||r,t||(a=!1),c?(c.style.width!==l&&(c.style.width=l),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=l}}while(c){const t=c.nextSibling;c.parentNode.removeChild(c),c=t}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}class Rr{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Tr(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type===this.node.type&&(this.node=t,Tr(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return"attributes"===t.type&&(t.target===this.table||this.colgroup.contains(t.target))}}const Ir=o["d"].create({name:"table",defaultOptions:{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Rr,lastColumnResizable:!0,allowTableNodeSelection:!1},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){return["table",Object(o["m"])(this.options.HTMLAttributes,t),["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const s=Er(o.schema,t,e,n);if(i){const t=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(sr.near(r.doc.resolve(t)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>pt(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>dt(t,e),deleteColumn:()=>({state:t,dispatch:e})=>gt(t,e),addRowBefore:()=>({state:t,dispatch:e})=>bt(t,e),addRowAfter:()=>({state:t,dispatch:e})=>wt(t,e),deleteRow:()=>({state:t,dispatch:e})=>St(t,e),deleteTable:()=>({state:t,dispatch:e})=>Lt(t,e),mergeCells:()=>({state:t,dispatch:e})=>Ct(t,e),splitCell:()=>({state:t,dispatch:e})=>Ot(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Dt(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>It(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>Nt(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>!!Ct(t,e)||Ot(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>At(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>Pt(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>Pt(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&ut(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const n=P.create(e.doc,t.anchorCell,t.headCell);e.setSelection(n)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Mr,"Mod-Backspace":Mr,Delete:Mr,"Mod-Delete":Mr}},addProseMirrorPlugins(){return[...this.options.resizable?[$t({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],ee({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options};return{tableRole:Object(o["f"])(Object(o["h"])(t,"tableRole",e))}}});e["a"]=Ir},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d03":function(t,e,n){var r=n("6eeb"),i=Date.prototype,o="Invalid Date",s="toString",a=i[s],c=i.getTime;String(new Date(NaN))!=o&&r(i,s,(function(){var t=c.call(this);return t===t?a.call(this):o}))},"0d3b":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("c430"),s=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},1037:function(t,e,n){"use strict";var r=n("9980"),i=n("5313"),o=n("0ac0");function s(t){return void 0===t&&(t={}),new i["d"]({view:function(e){return new a(e,t)}})}var a=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};a.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},a.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},a.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},a.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var i=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,c,u=this.editorView.dom.offsetParent;if(this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!u||u==document.body&&"static"==getComputedStyle(u).position)a=-pageXOffset,c=-pageYOffset;else{var l=u.getBoundingClientRect();a=l.left-u.scrollLeft,c=l.top-u.scrollTop}this.element.style.left=t.left-a+"px",this.element.style.top=t.top-c+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},a.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},a.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(n=Object(o["g"])(this.editorView.state.doc,n,this.editorView.dragging.slice),null==n))return this.setCursor(null);this.setCursor(n),this.scheduleRemoval(5e3)}}},a.prototype.dragend=function(){this.scheduleRemoval(20)},a.prototype.drop=function(){this.scheduleRemoval(20)},a.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};const c=r["b"].create({name:"dropCursor",defaultOptions:{color:"currentColor",width:1,class:null},addProseMirrorPlugins(){return[s(this.options)]}});e["a"]=c},"107c":function(t,e,n){var r=n("d039");t.exports=r((function(){var t=RegExp("(?<a>b)","string".charAt(5));return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"14b4":function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"hardBreak",defaultOptions:{HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Object(r["m"])(this.options.HTMLAttributes,t)]},addCommands(){return{setHardBreak:()=>({commands:t})=>t.first([()=>t.exitCode(),()=>t.insertContent({type:this.name})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});e["a"]=i},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),s=n("9112");for(var a in i){var c=r[a],u=c&&c.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(l){u.forEach=o}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1ab4":function(t,e,n){"use strict";n.d(e,"a",(function(){return bn}));var r=n("9980"),i=n("5313");function o(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function s(t){var e=o(t).Element;return t instanceof e||t instanceof Element}function a(t){var e=o(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function c(t){if("undefined"===typeof ShadowRoot)return!1;var e=o(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var u=Math.round;function l(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),r=1,i=1;return a(t)&&e&&(r=n.width/t.offsetWidth||1,i=n.height/t.offsetHeight||1),{width:u(n.width/r),height:u(n.height/i),top:u(n.top/i),right:u(n.right/r),bottom:u(n.bottom/i),left:u(n.left/r),x:u(n.left/r),y:u(n.top/i)}}function h(t){var e=o(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function f(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function p(t){return t!==o(t)&&a(t)?f(t):h(t)}function d(t){return t?(t.nodeName||"").toLowerCase():null}function m(t){return((s(t)?t.ownerDocument:t.document)||window.document).documentElement}function g(t){return l(m(t)).left+h(t).scrollLeft}function v(t){return o(t).getComputedStyle(t)}function y(t){var e=v(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function b(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return 1!==n||1!==r}function w(t,e,n){void 0===n&&(n=!1);var r=a(e),i=a(e)&&b(e),o=m(e),s=l(t,i),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==d(e)||y(o))&&(c=p(e)),a(e)?(u=l(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):o&&(u.x=g(o))),{x:s.left+c.scrollLeft-u.x,y:s.top+c.scrollTop-u.y,width:s.width,height:s.height}}function k(t){var e=l(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function S(t){return"html"===d(t)?t:t.assignedSlot||t.parentNode||(c(t)?t.host:null)||m(t)}function x(t){return["html","body","#document"].indexOf(d(t))>=0?t.ownerDocument.body:a(t)&&y(t)?t:x(S(t))}function _(t,e){var n;void 0===e&&(e=[]);var r=x(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),s=o(r),a=i?[s].concat(s.visualViewport||[],y(r)?r:[]):r,c=e.concat(a);return i?c:c.concat(_(S(a)))}function C(t){return["table","td","th"].indexOf(d(t))>=0}function O(t){return a(t)&&"fixed"!==v(t).position?t.offsetParent:null}function E(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&a(t)){var r=v(t);if("fixed"===r.position)return null}var i=S(t);while(a(i)&&["html","body"].indexOf(d(i))<0){var o=v(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}function A(t){var e=o(t),n=O(t);while(n&&C(n)&&"static"===v(n).position)n=O(n);return n&&("html"===d(n)||"body"===d(n)&&"static"===v(n).position)?e:n||E(t)||e}var M="top",T="bottom",R="right",I="left",D="auto",N=[M,T,R,I],j="start",P="end",L="clippingParents",F="viewport",B="popper",z="reference",$=N.reduce((function(t,e){return t.concat([e+"-"+j,e+"-"+P])}),[]),U=[].concat(N,[D]).reduce((function(t,e){return t.concat([e,e+"-"+j,e+"-"+P])}),[]),H="beforeRead",V="read",W="afterRead",q="beforeMain",J="main",K="afterMain",Y="beforeWrite",G="write",X="afterWrite",Q=[H,V,W,q,J,K,Y,G,X];function Z(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name);var o=[].concat(t.requires||[],t.requiresIfExists||[]);o.forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function tt(t){var e=Z(t);return Q.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function et(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function nt(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var rt={placement:"bottom",modifiers:[],strategy:"absolute"};function it(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function ot(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?rt:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},rt,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],c=!1,u={state:i,setOptions:function(n){h(),i.options=Object.assign({},o,i.options,n),i.scrollParents={reference:s(t)?_(t):t.contextElement?_(t.contextElement):[],popper:_(e)};var a=tt(nt([].concat(r,i.options.modifiers)));return i.orderedModifiers=a.filter((function(t){return t.enabled})),l(),u.update()},forceUpdate:function(){if(!c){var t=i.elements,e=t.reference,n=t.popper;if(it(e,n)){i.rects={reference:w(e,A(n),"fixed"===i.options.strategy),popper:k(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,l=void 0===a?{}:a,h=o.name;"function"===typeof s&&(i=s({state:i,options:l,name:h,instance:u})||i)}else i.reset=!1,r=-1}}},update:et((function(){return new Promise((function(t){u.forceUpdate(),t(i)}))})),destroy:function(){h(),c=!0}};if(!it(t,e))return u;function l(){i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:u,options:r}),c=function(){};a.push(s||c)}}))}function h(){a.forEach((function(t){return t()})),a=[]}return u.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var st={passive:!0};function at(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=void 0===i||i,a=r.resize,c=void 0===a||a,u=o(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach((function(t){t.addEventListener("scroll",n.update,st)})),c&&u.addEventListener("resize",n.update,st),function(){s&&l.forEach((function(t){t.removeEventListener("scroll",n.update,st)})),c&&u.removeEventListener("resize",n.update,st)}}var ct={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:at,data:{}};function ut(t){return t.split("-")[0]}function lt(t){return t.split("-")[1]}function ht(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ft(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?ut(i):null,s=i?lt(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case M:e={x:a,y:n.y-r.height};break;case T:e={x:a,y:n.y+n.height};break;case R:e={x:n.x+n.width,y:c};break;case I:e={x:n.x-r.width,y:c};break;default:e={x:n.x,y:n.y}}var u=o?ht(o):null;if(null!=u){var l="y"===u?"height":"width";switch(s){case j:e[u]=e[u]-(n[l]/2-r[l]/2);break;case P:e[u]=e[u]+(n[l]/2-r[l]/2);break;default:}}return e}function pt(t){var e=t.state,n=t.name;e.modifiersData[n]=ft({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var dt={name:"popperOffsets",enabled:!0,phase:"read",fn:pt,data:{}},mt=Math.max,gt=Math.min,vt=Math.round,yt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bt(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:vt(vt(e*i)/i)||0,y:vt(vt(n*i)/i)||0}}function wt(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.offsets,a=t.position,c=t.gpuAcceleration,u=t.adaptive,l=t.roundOffsets,h=!0===l?bt(s):"function"===typeof l?l(s):s,f=h.x,p=void 0===f?0:f,d=h.y,g=void 0===d?0:d,y=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),w=I,k=M,S=window;if(u){var x=A(n),_="clientHeight",C="clientWidth";x===o(n)&&(x=m(n),"static"!==v(x).position&&(_="scrollHeight",C="scrollWidth")),x=x,i===M&&(k=T,g-=x[_]-r.height,g*=c?1:-1),i===I&&(w=R,p-=x[C]-r.width,p*=c?1:-1)}var O,E=Object.assign({position:a},u&&yt);return c?Object.assign({},E,(O={},O[k]=b?"0":"",O[w]=y?"0":"",O.transform=(S.devicePixelRatio||1)<2?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",O)):Object.assign({},E,(e={},e[k]=b?g+"px":"",e[w]=y?p+"px":"",e.transform="",e))}function kt(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,u={placement:ut(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,wt(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,wt(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var St={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kt,data:{}};function xt(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];a(i)&&d(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))}function _t(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),s=o.reduce((function(t,e){return t[e]="",t}),{});a(r)&&d(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}}var Ct={name:"applyStyles",enabled:!0,phase:"write",fn:xt,effect:_t,requires:["computeStyles"]};function Ot(t,e,n){var r=ut(t),i=[I,M].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[I,R].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Et(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=U.reduce((function(t,n){return t[n]=Ot(n,e.rects,o),t}),{}),a=s[e.placement],c=a.x,u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}var At={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Et},Mt={left:"right",right:"left",bottom:"top",top:"bottom"};function Tt(t){return t.replace(/left|right|bottom|top/g,(function(t){return Mt[t]}))}var Rt={start:"end",end:"start"};function It(t){return t.replace(/start|end/g,(function(t){return Rt[t]}))}function Dt(t){var e=o(t),n=m(t),r=e.visualViewport,i=n.clientWidth,s=n.clientHeight,a=0,c=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,c=r.offsetTop)),{width:i,height:s,x:a+g(t),y:c}}function Nt(t){var e,n=m(t),r=h(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=mt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=mt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+g(t),c=-r.scrollTop;return"rtl"===v(i||n).direction&&(a+=mt(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function jt(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&c(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Pt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Lt(t){var e=l(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Ft(t,e){return e===F?Pt(Dt(t)):a(e)?Lt(e):Pt(Nt(m(t)))}function Bt(t){var e=_(S(t)),n=["absolute","fixed"].indexOf(v(t).position)>=0,r=n&&a(t)?A(t):t;return s(r)?e.filter((function(t){return s(t)&&jt(t,r)&&"body"!==d(t)})):[]}function zt(t,e,n){var r="clippingParents"===e?Bt(t):[].concat(e),i=[].concat(r,[n]),o=i[0],s=i.reduce((function(e,n){var r=Ft(t,n);return e.top=mt(r.top,e.top),e.right=gt(r.right,e.right),e.bottom=gt(r.bottom,e.bottom),e.left=mt(r.left,e.left),e}),Ft(t,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function $t(){return{top:0,right:0,bottom:0,left:0}}function Ut(t){return Object.assign({},$t(),t)}function Ht(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function Vt(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.boundary,a=void 0===o?L:o,c=n.rootBoundary,u=void 0===c?F:c,h=n.elementContext,f=void 0===h?B:h,p=n.altBoundary,d=void 0!==p&&p,g=n.padding,v=void 0===g?0:g,y=Ut("number"!==typeof v?v:Ht(v,N)),b=f===B?z:B,w=t.elements.reference,k=t.rects.popper,S=t.elements[d?b:f],x=zt(s(S)?S:S.contextElement||m(t.elements.popper),a,u),_=l(w),C=ft({reference:_,element:k,strategy:"absolute",placement:i}),O=Pt(Object.assign({},k,C)),E=f===B?O:_,A={top:x.top-E.top+y.top,bottom:E.bottom-x.bottom+y.bottom,left:x.left-E.left+y.left,right:E.right-x.right+y.right},I=t.modifiersData.offset;if(f===B&&I){var D=I[i];Object.keys(A).forEach((function(t){var e=[R,T].indexOf(t)>=0?1:-1,n=[M,T].indexOf(t)>=0?"y":"x";A[t]+=D[n]*e}))}return A}function Wt(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?U:c,l=lt(r),h=l?a?$:$.filter((function(t){return lt(t)===l})):N,f=h.filter((function(t){return u.indexOf(t)>=0}));0===f.length&&(f=h);var p=f.reduce((function(e,n){return e[n]=Vt(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[ut(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}function qt(t){if(ut(t)===D)return[];var e=Tt(t);return[It(t),e,It(e)]}function Jt(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,u=n.padding,l=n.boundary,h=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,d=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,v=ut(g),y=v===g,b=c||(y||!d?[Tt(g)]:qt(g)),w=[g].concat(b).reduce((function(t,n){return t.concat(ut(n)===D?Wt(e,{placement:n,boundary:l,rootBoundary:h,padding:u,flipVariations:d,allowedAutoPlacements:m}):n)}),[]),k=e.rects.reference,S=e.rects.popper,x=new Map,_=!0,C=w[0],O=0;O<w.length;O++){var E=w[O],A=ut(E),N=lt(E)===j,P=[M,T].indexOf(A)>=0,L=P?"width":"height",F=Vt(e,{placement:E,boundary:l,rootBoundary:h,altBoundary:f,padding:u}),B=P?N?R:I:N?T:M;k[L]>S[L]&&(B=Tt(B));var z=Tt(B),$=[];if(o&&$.push(F[A]<=0),a&&$.push(F[B]<=0,F[z]<=0),$.every((function(t){return t}))){C=E,_=!1;break}x.set(E,$)}if(_)for(var U=d?3:1,H=function(t){var e=w.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},V=U;V>0;V--){var W=H(V);if("break"===W)break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}}var Kt={name:"flip",enabled:!0,phase:"main",fn:Jt,requiresIfExists:["offset"],data:{_skip:!1}};function Yt(t){return"x"===t?"y":"x"}function Gt(t,e,n){return mt(t,gt(e,n))}function Xt(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,h=n.padding,f=n.tether,p=void 0===f||f,d=n.tetherOffset,m=void 0===d?0:d,g=Vt(e,{boundary:c,rootBoundary:u,padding:h,altBoundary:l}),v=ut(e.placement),y=lt(e.placement),b=!y,w=ht(v),S=Yt(w),x=e.modifiersData.popperOffsets,_=e.rects.reference,C=e.rects.popper,O="function"===typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,E={x:0,y:0};if(x){if(o||a){var D="y"===w?M:I,N="y"===w?T:R,P="y"===w?"height":"width",L=x[w],F=x[w]+g[D],B=x[w]-g[N],z=p?-C[P]/2:0,$=y===j?_[P]:C[P],U=y===j?-C[P]:-_[P],H=e.elements.arrow,V=p&&H?k(H):{width:0,height:0},W=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$t(),q=W[D],J=W[N],K=Gt(0,_[P],V[P]),Y=b?_[P]/2-z-K-q-O:$-K-q-O,G=b?-_[P]/2+z+K+J+O:U+K+J+O,X=e.elements.arrow&&A(e.elements.arrow),Q=X?"y"===w?X.clientTop||0:X.clientLeft||0:0,Z=e.modifiersData.offset?e.modifiersData.offset[e.placement][w]:0,tt=x[w]+Y-Z-Q,et=x[w]+G-Z;if(o){var nt=Gt(p?gt(F,tt):F,L,p?mt(B,et):B);x[w]=nt,E[w]=nt-L}if(a){var rt="x"===w?M:I,it="x"===w?T:R,ot=x[S],st=ot+g[rt],at=ot-g[it],ct=Gt(p?gt(st,tt):st,ot,p?mt(at,et):at);x[S]=ct,E[S]=ct-ot}}e.modifiersData[r]=E}}var Qt={name:"preventOverflow",enabled:!0,phase:"main",fn:Xt,requiresIfExists:["offset"]},Zt=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,Ut("number"!==typeof t?t:Ht(t,N))};function te(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ut(n.placement),c=ht(a),u=[I,R].indexOf(a)>=0,l=u?"height":"width";if(o&&s){var h=Zt(i.padding,n),f=k(o),p="y"===c?M:I,d="y"===c?T:R,m=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],g=s[c]-n.rects.reference[c],v=A(o),y=v?"y"===c?v.clientHeight||0:v.clientWidth||0:0,b=m/2-g/2,w=h[p],S=y-f[l]-h[d],x=y/2-f[l]/2+b,_=Gt(w,x,S),C=c;n.modifiersData[r]=(e={},e[C]=_,e.centerOffset=_-x,e)}}function ee(t){var e=t.state,n=t.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=e.elements.popper.querySelector(i),i))&&jt(e.elements.popper,i)&&(e.elements.arrow=i)}var ne={name:"arrow",enabled:!0,phase:"main",fn:te,effect:ee,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function re(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ie(t){return[M,R,T,I].some((function(e){return t[e]>=0}))}function oe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Vt(e,{elementContext:"reference"}),a=Vt(e,{altBoundary:!0}),c=re(s,r),u=re(a,i,o),l=ie(c),h=ie(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}var se={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:oe},ae=[ct,dt,St,Ct,At,Kt,Qt,ne,se],ce=ot({defaultModifiers:ae}),ue="tippy-box",le="tippy-content",he="tippy-backdrop",fe="tippy-arrow",pe="tippy-svg-arrow",de={passive:!0,capture:!0};function me(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function ge(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function ve(t,e){return"function"===typeof t?t.apply(void 0,e):t}function ye(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function be(t){return t.split(/\s+/).filter(Boolean)}function we(t){return[].concat(t)}function ke(t,e){-1===t.indexOf(e)&&t.push(e)}function Se(t){return t.filter((function(e,n){return t.indexOf(e)===n}))}function xe(t){return t.split("-")[0]}function _e(t){return[].slice.call(t)}function Ce(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function Oe(){return document.createElement("div")}function Ee(t){return["Element","Fragment"].some((function(e){return ge(t,e)}))}function Ae(t){return ge(t,"NodeList")}function Me(t){return ge(t,"MouseEvent")}function Te(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function Re(t){return Ee(t)?[t]:Ae(t)?_e(t):Array.isArray(t)?t:_e(document.querySelectorAll(t))}function Ie(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function De(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function Ne(t){var e,n=we(t),r=n[0];return(null==r||null==(e=r.ownerDocument)?void 0:e.body)?r.ownerDocument:document}function je(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props,s=o.interactiveBorder,a=xe(i.placement),c=i.modifiersData.offset;if(!c)return!0;var u="bottom"===a?c.top.y:0,l="top"===a?c.bottom.y:0,h="right"===a?c.left.x:0,f="left"===a?c.right.x:0,p=e.top-r+u>s,d=r-e.bottom-l>s,m=e.left-n+h>s,g=n-e.right-f>s;return p||d||m||g}))}function Pe(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}var Le={isTouch:!1},Fe=0;function Be(){Le.isTouch||(Le.isTouch=!0,window.performance&&document.addEventListener("mousemove",ze))}function ze(){var t=performance.now();t-Fe<20&&(Le.isTouch=!1,document.removeEventListener("mousemove",ze)),Fe=t}function $e(){var t=document.activeElement;if(Te(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ue(){document.addEventListener("touchstart",Be,de),window.addEventListener("blur",$e)}var He="undefined"!==typeof window&&"undefined"!==typeof document,Ve=He?navigator.userAgent:"",We=/MSIE |Trident\//.test(Ve);var qe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Je={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ke=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},qe,{},Je),Ye=Object.keys(Ke),Ge=function(t){var e=Object.keys(t);e.forEach((function(e){Ke[e]=t[e]}))};function Xe(t){var e=t.plugins||[],n=e.reduce((function(e,n){var r=n.name,i=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:i),e}),{});return Object.assign({},t,{},n)}function Qe(t,e){var n=e?Object.keys(Xe(Object.assign({},Ke,{plugins:e}))):Ye,r=n.reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(i){e[n]=r}return e}),{});return r}function Ze(t,e){var n=Object.assign({},e,{content:ve(e.content,[t])},e.ignoreAttributes?{}:Qe(t,e.plugins));return n.aria=Object.assign({},Ke.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var tn=function(){return"innerHTML"};function en(t,e){t[tn()]=e}function nn(t){var e=Oe();return!0===t?e.className=fe:(e.className=pe,Ee(t)?e.appendChild(t):en(e,t)),e}function rn(t,e){Ee(e.content)?(en(t,""),t.appendChild(e.content)):"function"!==typeof e.content&&(e.allowHTML?en(t,e.content):t.textContent=e.content)}function on(t){var e=t.firstElementChild,n=_e(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(le)})),arrow:n.find((function(t){return t.classList.contains(fe)||t.classList.contains(pe)})),backdrop:n.find((function(t){return t.classList.contains(he)}))}}function sn(t){var e=Oe(),n=Oe();n.className=ue,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Oe();function i(n,r){var i=on(e),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||rn(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(nn(r.arrow))):o.appendChild(nn(r.arrow)):a&&o.removeChild(a)}return r.className=le,r.setAttribute("data-state","hidden"),rn(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}sn.$$tippy=!0;var an=1,cn=[],un=[];function ln(t,e){var n,r,i,o,s,a,c,u=Ze(t,Object.assign({},Ke,{},Xe(Ce(e)))),l=!1,h=!1,f=!1,p=!1,d=[],m=ye(G,u.interactiveDebounce),g=an++,v=null,y=Se(u.plugins),b={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},w={id:g,reference:t,popper:Oe(),popperInstance:v,props:u,state:b,plugins:y,clearDelayTimeouts:ct,setProps:ut,setContent:lt,show:ht,hide:ft,hideWithInteractivity:pt,enable:st,disable:at,unmount:dt,destroy:mt};if(!u.render)return w;var k=u.render(w),S=k.popper,x=k.onUpdate;S.setAttribute("data-tippy-root",""),S.id="tippy-"+w.id,w.popper=S,t._tippy=w,S._tippy=w;var _=y.map((function(t){return t.fn(w)})),C=t.hasAttribute("aria-expanded");return J(),P(),D(),N("onCreate",[w]),u.showOnCreate&&it(),S.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),S.addEventListener("mouseleave",(function(t){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(T().addEventListener("mousemove",m),m(t))})),w;function O(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function E(){return"hold"===O()[0]}function A(){var t;return!!(null==(t=w.props.render)?void 0:t.$$tippy)}function M(){return c||t}function T(){var t=M().parentNode;return t?Ne(t):document}function R(){return on(S)}function I(t){return w.state.isMounted&&!w.state.isVisible||Le.isTouch||o&&"focus"===o.type?0:me(w.props.delay,t?0:1,Ke.delay)}function D(){S.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",S.style.zIndex=""+w.props.zIndex}function N(t,e,n){var r;(void 0===n&&(n=!0),_.forEach((function(n){n[t]&&n[t].apply(void 0,e)})),n)&&(r=w.props)[t].apply(r,e)}function j(){var e=w.props.aria;if(e.content){var n="aria-"+e.content,r=S.id,i=we(w.props.triggerTarget||t);i.forEach((function(t){var e=t.getAttribute(n);if(w.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function P(){if(!C&&w.props.aria.expanded){var e=we(w.props.triggerTarget||t);e.forEach((function(t){w.props.interactive?t.setAttribute("aria-expanded",w.state.isVisible&&t===M()?"true":"false"):t.removeAttribute("aria-expanded")}))}}function L(){T().removeEventListener("mousemove",m),cn=cn.filter((function(t){return t!==m}))}function F(t){if((!Le.isTouch||!f&&"mousedown"!==t.type)&&(!w.props.interactive||!S.contains(t.target))){if(M().contains(t.target)){if(Le.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[w,t]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),h=!0,setTimeout((function(){h=!1})),w.state.isMounted||U())}}function B(){f=!0}function z(){f=!1}function $(){var t=T();t.addEventListener("mousedown",F,!0),t.addEventListener("touchend",F,de),t.addEventListener("touchstart",z,de),t.addEventListener("touchmove",B,de)}function U(){var t=T();t.removeEventListener("mousedown",F,!0),t.removeEventListener("touchend",F,de),t.removeEventListener("touchstart",z,de),t.removeEventListener("touchmove",B,de)}function H(t,e){W(t,(function(){!w.state.isVisible&&S.parentNode&&S.parentNode.contains(S)&&e()}))}function V(t,e){W(t,e)}function W(t,e){var n=R().box;function r(t){t.target===n&&(Pe(n,"remove",r),e())}if(0===t)return e();Pe(n,"remove",s),Pe(n,"add",r),s=r}function q(e,n,r){void 0===r&&(r=!1);var i=we(w.props.triggerTarget||t);i.forEach((function(t){t.addEventListener(e,n,r),d.push({node:t,eventType:e,handler:n,options:r})}))}function J(){E()&&(q("touchstart",Y,{passive:!0}),q("touchend",X,{passive:!0})),be(w.props.trigger).forEach((function(t){if("manual"!==t)switch(q(t,Y),t){case"mouseenter":q("mouseleave",X);break;case"focus":q(We?"focusout":"blur",Q);break;case"focusin":q("focusout",Q);break}}))}function K(){d.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),d=[]}function Y(t){var e,n=!1;if(w.state.isEnabled&&!Z(t)&&!h){var r="focus"===(null==(e=o)?void 0:e.type);o=t,c=t.currentTarget,P(),!w.state.isVisible&&Me(t)&&cn.forEach((function(e){return e(t)})),"click"===t.type&&(w.props.trigger.indexOf("mouseenter")<0||l)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:it(t),"click"===t.type&&(l=!n),n&&!r&&ot(t)}}function G(t){var e=t.target,n=M().contains(e)||S.contains(e);if("mousemove"!==t.type||!n){var r=rt().concat(S).map((function(t){var e,n=t._tippy,r=null==(e=n.popperInstance)?void 0:e.state;return r?{popperRect:t.getBoundingClientRect(),popperState:r,props:u}:null})).filter(Boolean);je(r,t)&&(L(),ot(t))}}function X(t){var e=Z(t)||w.props.trigger.indexOf("click")>=0&&l;e||(w.props.interactive?w.hideWithInteractivity(t):ot(t))}function Q(t){w.props.trigger.indexOf("focusin")<0&&t.target!==M()||w.props.interactive&&t.relatedTarget&&S.contains(t.relatedTarget)||ot(t)}function Z(t){return!!Le.isTouch&&E()!==t.type.indexOf("touch")>=0}function tt(){et();var e=w.props,n=e.popperOptions,r=e.placement,i=e.offset,o=e.getReferenceClientRect,s=e.moveTransition,c=A()?on(S).arrow:null,u=o?{getBoundingClientRect:o,contextElement:o.contextElement||M()}:t,l={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(A()){var n=R(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?r.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?r.setAttribute("data-"+t,""):r.removeAttribute("data-"+t)})),e.attributes.popper={}}}},h=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},l];A()&&c&&h.push({name:"arrow",options:{element:c,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),w.popperInstance=ce(u,S,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:h}))}function et(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function nt(){var t,e=w.props.appendTo,n=M();t=w.props.interactive&&e===Ke.appendTo||"parent"===e?n.parentNode:ve(e,[n]),t.contains(S)||t.appendChild(S),tt()}function rt(){return _e(S.querySelectorAll("[data-tippy-root]"))}function it(t){w.clearDelayTimeouts(),t&&N("onTrigger",[w,t]),$();var e=I(!0),r=O(),i=r[0],o=r[1];Le.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){w.show()}),e):w.show()}function ot(t){if(w.clearDelayTimeouts(),N("onUntrigger",[w,t]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&l)){var e=I(!1);e?r=setTimeout((function(){w.state.isVisible&&w.hide()}),e):i=requestAnimationFrame((function(){w.hide()}))}}else U()}function st(){w.state.isEnabled=!0}function at(){w.hide(),w.state.isEnabled=!1}function ct(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function ut(e){if(!w.state.isDestroyed){N("onBeforeUpdate",[w,e]),K();var n=w.props,r=Ze(t,Object.assign({},w.props,{},e,{ignoreAttributes:!0}));w.props=r,J(),n.interactiveDebounce!==r.interactiveDebounce&&(L(),m=ye(G,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?we(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded"),P(),D(),x&&x(n,r),w.popperInstance&&(tt(),rt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),N("onAfterUpdate",[w,e])}}function lt(t){w.setProps({content:t})}function ht(){var t=w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=Le.isTouch&&!w.props.touch,i=me(w.props.duration,0,Ke.duration);if(!(t||e||n||r)&&!M().hasAttribute("disabled")&&(N("onShow",[w],!1),!1!==w.props.onShow(w))){if(w.state.isVisible=!0,A()&&(S.style.visibility="visible"),D(),$(),w.state.isMounted||(S.style.transition="none"),A()){var o=R(),s=o.box,c=o.content;Ie([s,c],0)}a=function(){var t;if(w.state.isVisible&&!p){if(p=!0,S.offsetHeight,S.style.transition=w.props.moveTransition,A()&&w.props.animation){var e=R(),n=e.box,r=e.content;Ie([n,r],i),De([n,r],"visible")}j(),P(),ke(un,w),null==(t=w.popperInstance)||t.forceUpdate(),w.state.isMounted=!0,N("onMount",[w]),w.props.animation&&A()&&V(i,(function(){w.state.isShown=!0,N("onShown",[w])}))}},nt()}}function ft(){var t=!w.state.isVisible,e=w.state.isDestroyed,n=!w.state.isEnabled,r=me(w.props.duration,1,Ke.duration);if(!(t||e||n)&&(N("onHide",[w],!1),!1!==w.props.onHide(w))){if(w.state.isVisible=!1,w.state.isShown=!1,p=!1,l=!1,A()&&(S.style.visibility="hidden"),L(),U(),D(),A()){var i=R(),o=i.box,s=i.content;w.props.animation&&(Ie([o,s],r),De([o,s],"hidden"))}j(),P(),w.props.animation?A()&&H(r,w.unmount):w.unmount()}}function pt(t){T().addEventListener("mousemove",m),ke(cn,m),m(t)}function dt(){w.state.isVisible&&w.hide(),w.state.isMounted&&(et(),rt().forEach((function(t){t._tippy.unmount()})),S.parentNode&&S.parentNode.removeChild(S),un=un.filter((function(t){return t!==w})),w.state.isMounted=!1,N("onHidden",[w]))}function mt(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),K(),delete t._tippy,w.state.isDestroyed=!0,N("onDestroy",[w]))}}function hn(t,e){void 0===e&&(e={});var n=Ke.plugins.concat(e.plugins||[]);Ue();var r=Object.assign({},e,{plugins:n}),i=Re(t),o=i.reduce((function(t,e){var n=e&&ln(e,r);return n&&t.push(n),t}),[]);return Ee(t)?o[0]:o}hn.defaultProps=Ke,hn.setDefaultProps=Ge,hn.currentInput=Le;Object.assign({},Ct,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});hn.setDefaultProps({render:sn});var fn=hn;class pn{constructor({editor:t,element:e,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.editor=t,this.element=e,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(t={}){this.tippy=fn(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...t})}update(t,e){const{state:n,composing:i}=t,{doc:o,selection:s}=n,a=e&&e.doc.eq(o)&&e.selection.eq(s);if(i||a)return;const{empty:c,ranges:u}=s,l=Math.min(...u.map(t=>t.$from.pos)),h=Math.max(...u.map(t=>t.$to.pos)),f=!o.textBetween(l,h).length&&Object(r["j"])(t.state.selection);c||f?this.hide():(this.tippy.setProps({getReferenceClientRect:()=>{if(Object(r["i"])(t.state.selection)){const e=t.nodeDOM(l);if(e)return e.getBoundingClientRect()}return Object(r["o"])(t,l,h)}}),this.show())}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const dn=new i["e"]("menuBubble"),mn=t=>new i["d"]({key:dn,view:e=>new pn({view:e,...t})});r["b"].create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[mn({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});class gn{constructor({editor:t,element:e,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.editor=t,this.element=e,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(t={}){this.tippy=fn(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...t})}update(t,e){const{state:n,composing:i}=t,{doc:o,selection:s}=n,a=e&&e.doc.eq(o)&&e.selection.eq(s);if(i||a)return;const{$anchor:c,empty:u,from:l,to:h}=s,f=1===c.depth,p=!s.$anchor.parent.isLeaf&&!s.$anchor.parent.textContent,d=f&&p;u&&d?(this.tippy.setProps({getReferenceClientRect:()=>Object(r["o"])(t,l,h)}),this.show()):this.hide()}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const vn=new i["e"]("menuFloating"),yn=t=>new i["d"]({key:vn,view:e=>new gn({view:e,...t})});r["b"].create({name:"floatingMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[yn({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});n("2b0e");r["a"];const bn={name:"EditorContent",props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.options.element&&this.$nextTick(()=>{const e=this.$el;e&&t.options.element.firstChild&&(e.append(...t.options.element.childNodes),t.contentComponent=this,t.setOptions({element:e}),t.createNodeViews())})}}},render(t){return t("div")},beforeDestroy(){const{editor:t}=this;if(!t)return;if(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild)return;const e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}};Boolean;r["e"]},"1b25":function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"l",(function(){return l})),n.d(e,"h",(function(){return h})),n.d(e,"k",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return d})),n.d(e,"g",(function(){return w})),n.d(e,"b",(function(){return k})),n.d(e,"d",(function(){return S})),n.d(e,"a",(function(){return x})),n.d(e,"c",(function(){return _}));var r=n("d72c"),i=n("c77f"),o=n("ca0e");class s{constructor(t){this.arr=t,this.pos=0}}const a=t=>new s(t),c=t=>t.pos!==t.arr.length,u=(t,e)=>{const n=r["c"](t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},l=t=>u(t,f(t)),h=t=>t.arr[t.pos++],f=t=>{let e=0,n=0;while(1){const r=t.arr[t.pos++];if(e|=(r&i["k"])<<n,n+=7,r<i["g"])return e>>>0;if(n>35)throw new Error("Integer out of range!")}},p=t=>{let e=t.arr[t.pos++],n=e&i["j"],r=6;const o=(e&i["f"])>0?-1:1;if(0===(e&i["g"]))return o*n;while(1){if(e=t.arr[t.pos++],n|=(e&i["k"])<<r,r+=7,e<i["g"])return o*(n>>>0);if(r>41)throw new Error("Integer out of range!")}},d=t=>{let e=f(t);if(0===e)return"";{let n=String.fromCodePoint(h(t));if(--e<100)while(e--)n+=String.fromCodePoint(h(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},m=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},g=t=>m(t,4).getFloat32(0,!1),v=t=>m(t,8).getFloat64(0,!1),y=t=>m(t,8).getBigInt64(0,!1),b=[t=>{},t=>null,p,g,v,y,t=>!1,t=>!0,d,t=>{const e=f(t),n={};for(let r=0;r<e;r++){const e=d(t);n[e]=w(t)}return n},t=>{const e=f(t),n=[];for(let r=0;r<e;r++)n.push(w(t));return n},l],w=t=>b[127-h(t)](t);class k extends s{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),c(this)?this.count=f(this)+1:this.count=-1),this.count--,this.s}}class S extends s{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=p(this);const t=o["d"](this.s);this.count=1,t&&(this.s=-this.s,this.count=f(this)+2)}return this.count--,this.s}}class x extends s{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=p(this),e=1&t;this.diff=t>>1,this.count=1,e&&(this.count=f(this)+2)}return this.s+=this.diff,this.count--,this.s}}class _{constructor(t){this.decoder=new S(t),this.str=d(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}},"1b9f":function(t,e,n){!function(e,r){t.exports=r(n("753f"))}(self,(function(t){return(()=>{var e,n,r={968:t=>{self,t.exports=(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};let n,r,i,o;var s;t.d(e,{default:()=>C}),function(t){t.SetSize="set-size",t.StreamItems="stream-items",t.StreamContextItem="stream-context-item",t.SaveItems="save-items",t.SelectItem="select-item",t.AssociateItem="associate-item",t.DeassociateItem="deassociate-item",t.ClearSelection="clear-selection",t.CreateItem="create-item",t.CreateItems="create-items",t.DeleteItems="delete-items",t.SetComponentData="set-component-data",t.InstallLocalComponent="install-local-component",t.ToggleActivateComponent="toggle-activate-component",t.RequestPermissions="request-permissions",t.PresentConflictResolution="present-conflict-resolution",t.DuplicateItem="duplicate-item",t.ComponentRegistered="component-registered",t.ActivateThemes="themes",t.Reply="reply",t.SaveSuccess="save-success",t.SaveError="save-error",t.ThemesActivated="themes-activated",t.KeyDown="key-down",t.KeyUp="key-up",t.Click="click"}(n||(n={})),function(t){t[t.Web=1]="Web",t[t.Desktop=2]="Desktop",t[t.Mobile=3]="Mobile"}(r||(r={})),function(t){t.Any="*",t.Item="SF|Item",t.RootKey="SN|RootKey|NoSync",t.ItemsKey="SN|ItemsKey",t.EncryptedStorage="SN|EncryptedStorage",t.Note="Note",t.Tag="Tag",t.SmartTag="SN|SmartTag",t.Component="SN|Component",t.Editor="SN|Editor",t.ActionsExtension="Extension",t.UserPrefs="SN|UserPreferences",t.HistorySession="SN|HistorySession",t.Theme="SN|Theme",t.Mfa="SF|MFA",t.ServerExtension="SF|Extension",t.FilesafeCredentials="SN|FileSafe|Credentials",t.FilesafeFileMetadata="SN|FileSafe|FileMetadata",t.FilesafeIntegration="SN|FileSafe|Integration",t.ExtensionRepo="SN|ExtensionRepo"}(i||(i={})),function(t){t.Pinned="pinned",t.Archived="archived",t.Locked="locked",t.UserModifiedDate="client_updated_at",t.DefaultEditor="defaultEditor",t.MobileRules="mobileRules",t.NotAvailableOnMobile="notAvailableOnMobile",t.MobileActive="mobileActive",t.LastSize="lastSize",t.PrefersPlainEditor="prefersPlainEditor",t.ComponentInstallError="installError"}(o||(o={}));var a=new Uint8Array(16);function c(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(t){return"string"==typeof t&&u.test(t)};for(var h=[],f=0;f<256;++f)h.push((f+256).toString(16).substr(1));const p=function(t,e,n){var r=(t=t||{}).random||(t.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[t[e+0]]+h[t[e+1]]+h[t[e+2]]+h[t[e+3]]+"-"+h[t[e+4]]+h[t[e+5]]+"-"+h[t[e+6]]+h[t[e+7]]+"-"+h[t[e+8]]+h[t[e+9]]+"-"+h[t[e+10]]+h[t[e+11]]+h[t[e+12]]+h[t[e+13]]+h[t[e+14]]+h[t[e+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n}(r)},d=t=>{var e;const n={[r.Web]:"web",[r.Desktop]:"desktop",[r.Mobile]:"mobile"};return null!==(e=n[t])&&void 0!==e?e:n[r.Web]},m=t=>null!=t,g=()=>{};class v{static get isSupported(){return!(!window.console&&!console)}static get info(){return v.isSupported&&this.enabled?console.log.bind(console):g}static get error(){return v.isSupported?console.error.bind(console):g}}var y,b,w,k;function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(b="enabled")in(y=v)?Object.defineProperty(y,b,{value:!1,enumerable:!0,configurable:!0,writable:!0}):y[b]=!1,function(t){t.Component="component"}(w||(w={})),function(t){t.Shift="Shift",t.Ctrl="Control",t.Meta="Meta"}(k||(k={}));class C{constructor(t){if(_(this,"contentWindow",void 0),_(this,"initialPermissions",void 0),_(this,"onReadyCallback",void 0),_(this,"component",{activeThemes:[],acceptsThemes:!0}),_(this,"sentMessages",[]),_(this,"messageQueue",[]),_(this,"lastStreamedItem",void 0),_(this,"pendingSaveItems",void 0),_(this,"pendingSaveTimeout",void 0),_(this,"pendingSaveParams",void 0),_(this,"coallesedSaving",!0),_(this,"coallesedSavingDelay",250),_(this,"messageHandler",void 0),_(this,"keyDownEventListener",void 0),_(this,"keyUpEventListener",void 0),_(this,"clickEventListener",void 0),!t||!t.targetWindow)throw new Error("contentWindow must be a valid Window object.");this.contentWindow=t.targetWindow,this.processParameters(t),this.registerMessageHandler(),this.registerKeyboardEventListeners(),this.registerMouseEventListeners()}processParameters(t){var e;const{initialPermissions:n,options:r,onReady:i}=t;var o;n&&n.length>0&&(this.initialPermissions=n),m(null==r?void 0:r.coallesedSaving)&&(this.coallesedSaving=r.coallesedSaving),m(null==r?void 0:r.coallesedSavingDelay)&&(this.coallesedSavingDelay=r.coallesedSavingDelay),m(null==r?void 0:r.acceptsThemes)&&(this.component.acceptsThemes=null===(o=null==r?void 0:r.acceptsThemes)||void 0===o||o),m(i)&&(this.onReadyCallback=i),v.enabled=null!==(e=null==r?void 0:r.debug)&&void 0!==e&&e}deinit(){this.onReadyCallback=void 0,this.component={acceptsThemes:!0,activeThemes:[]},this.messageQueue=[],this.sentMessages=[],this.lastStreamedItem=void 0,this.pendingSaveItems=void 0,this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0,this.messageHandler&&(this.contentWindow.document.removeEventListener("message",this.messageHandler),this.contentWindow.removeEventListener("message",this.messageHandler)),this.keyDownEventListener&&this.contentWindow.removeEventListener("keydown",this.keyDownEventListener),this.keyUpEventListener&&this.contentWindow.removeEventListener("keyup",this.keyUpEventListener),this.clickEventListener&&this.contentWindow.removeEventListener("click",this.clickEventListener)}registerMessageHandler(){this.messageHandler=t=>{if(v.info("Components API Message received:",t.data),document.referrer&&new URL(document.referrer).origin!==new URL(t.origin).origin)return;if(this.component.origin){if(t.origin!==this.component.origin)return}else this.component.origin=t.origin;const{data:e}=t,n=(t=>{if("string"!=typeof t)return!1;try{const e=JSON.parse(t),n=Object.prototype.toString.call(e);return"[object Object]"===n||"[object Array]"===n}catch(t){return!1}})(e)?JSON.parse(e):e;n?this.handleMessage(n):v.error("Invalid data received. Skipping...")},this.contentWindow.document.addEventListener("message",this.messageHandler,!1),this.contentWindow.addEventListener("message",this.messageHandler,!1),v.info("Waiting for messages...")}registerKeyboardEventListeners(){this.keyDownEventListener=t=>{v.info("A key has been pressed: ".concat(t.key)),t.ctrlKey?this.keyDownEvent(k.Ctrl):t.shiftKey?this.keyDownEvent(k.Shift):(t.metaKey||"Meta"===t.key)&&this.keyDownEvent(k.Meta)},this.keyUpEventListener=t=>{v.info("A key has been released: ".concat(t.key)),"Control"===t.key?this.keyUpEvent(k.Ctrl):"Shift"===t.key?this.keyUpEvent(k.Shift):"Meta"===t.key&&this.keyUpEvent(k.Meta)},this.contentWindow.addEventListener("keydown",this.keyDownEventListener,!1),this.contentWindow.addEventListener("keyup",this.keyUpEventListener,!1)}registerMouseEventListeners(){this.clickEventListener=t=>{v.info("A click has been performed."),this.mouseClickEvent()},this.contentWindow.addEventListener("click",this.clickEventListener,!1)}handleMessage(t){switch(t.action){case n.ComponentRegistered:this.component.sessionKey=t.sessionKey,t.componentData&&(this.component.data=t.componentData),this.onReady(t.data),v.info("Component successfully registered with payload:",t);break;case n.ActivateThemes:this.activateThemes(t.data.themes);break;default:{var e,r;if(!t.original)return;const n=null===(e=this.sentMessages)||void 0===e?void 0:e.filter(e=>{var n;return e.messageId===(null===(n=t.original)||void 0===n?void 0:n.messageId)})[0];if(!n){const t=this.contentWindow.document.title,e=("The extension '".concat(t,"' is attempting to communicate with Standard Notes, ")+"but an error is preventing it from doing so. Please restart this extension and try again.").replace("  "," ");return void v.info(e)}null==n||null===(r=n.callback)||void 0===r||r.call(n,t.data);break}}}onReady(t){this.component.environment=t.environment,this.component.platform=t.platform,this.component.uuid=t.uuid,this.initialPermissions&&this.initialPermissions.length>0&&this.requestPermissions(this.initialPermissions);for(const e of this.messageQueue)this.postMessage(e.action,e.data,e.callback);this.messageQueue=[],v.info("Data passed to onReady:",t),this.activateThemes(t.activeThemeUrls||[]),this.postMessage(n.ThemesActivated,{}),this.onReadyCallback&&this.onReadyCallback()}getSelfComponentUUID(){return this.component.uuid}isRunningInDesktopApplication(){return this.component.environment===d(r.Desktop)}isRunningInMobileApplication(){return this.component.environment===d(r.Mobile)}getComponentDataValueForKey(t){if(this.component.data)return this.component.data[t]}setComponentDataValueForKey(t,e){if(!this.component.data)throw new Error("The component has not been initialized.");if(!t||t&&0===t.length)throw new Error("The key for the data value should be a valid string.");this.component.data=x(x({},this.component.data),{},{[t]:e}),this.postMessage(n.SetComponentData,{componentData:this.component.data})}clearComponentData(){this.component.data={},this.postMessage(n.SetComponentData,{componentData:this.component.data})}postMessage(t,e,n){if(!this.component.sessionKey)return void this.messageQueue.push({action:t,data:e,api:w.Component,callback:n});const r={action:t,data:e,messageId:this.generateUUID(),sessionKey:this.component.sessionKey,api:w.Component},i=JSON.parse(JSON.stringify(r));let o;i.callback=n,this.sentMessages.push(i),o=this.isRunningInMobileApplication()?JSON.stringify(r):r,v.info("Posting message:",o),this.contentWindow.parent.postMessage(o,this.component.origin)}requestPermissions(t,e){this.postMessage(n.RequestPermissions,{permissions:t},()=>{e&&e()})}activateThemes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.component.acceptsThemes)return;v.info("Incoming themes:",t);const{activeThemes:e}=this.component;if(e&&e.sort().toString()==t.sort().toString())return;let n=t;const r=[];for(const i of e)t.includes(i)?n=n.filter(t=>t!==i):r.push(i);v.info("Deactivating themes:",r),v.info("Activating themes:",n);for(const i of r)this.deactivateTheme(i);this.component.activeThemes=t;for(const i of n){if(!i)continue;const t=this.contentWindow.document.createElement("link");t.id=btoa(i),t.href=i,t.type="text/css",t.rel="stylesheet",t.media="screen,print",t.className="custom-theme",this.contentWindow.document.getElementsByTagName("head")[0].appendChild(t)}}themeElementForUrl(t){return Array.from(this.contentWindow.document.getElementsByClassName("custom-theme")).slice().find(e=>e.id==btoa(t))}deactivateTheme(t){const e=this.themeElementForUrl(t);e&&e.parentNode&&(e.setAttribute("disabled","true"),e.parentNode.removeChild(e))}generateUUID(){return p()}get platform(){return this.component.platform}get environment(){return this.component.environment}streamItems(t,e){this.postMessage(n.StreamItems,{content_types:t},t=>{e(t.items)})}streamContextItem(t){this.postMessage(n.StreamContextItem,{},e=>{const{item:n}=e;(!this.lastStreamedItem||this.lastStreamedItem.uuid!==n.uuid)&&this.pendingSaveTimeout&&(clearTimeout(this.pendingSaveTimeout),this._performSavingOfItems(this.pendingSaveParams),this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0),this.lastStreamedItem=n,t(this.lastStreamedItem)})}selectItem(t){this.postMessage(n.SelectItem,{item:this.jsonObjectForItem(t)})}clearSelection(){this.postMessage(n.ClearSelection,{content_type:i.Tag})}createItem(t,e){this.postMessage(n.CreateItem,{item:this.jsonObjectForItem(t)},t=>{let{item:n}=t;!n&&t.items&&t.items.length>0&&(n=t.items[0]),this.associateItem(n),e&&e(n)})}createItems(t,e){const r=t.map(t=>this.jsonObjectForItem(t));this.postMessage(n.CreateItems,{items:r},t=>{e&&e(t.items)})}associateItem(t){this.postMessage(n.AssociateItem,{item:this.jsonObjectForItem(t)})}deassociateItem(t){this.postMessage(n.DeassociateItem,{item:this.jsonObjectForItem(t)})}deleteItem(t,e){this.deleteItems([t],e)}deleteItems(t,e){const r={items:t.map(t=>this.jsonObjectForItem(t))};this.postMessage(n.DeleteItems,r,t=>{e&&e(t)})}sendCustomEvent(t,e,n){this.postMessage(t,e,t=>{n&&n(t)})}saveItem(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.saveItems([t],e,n)}saveItemWithPresave(t,e,n){this.saveItemsWithPresave([t],e,n)}saveItemsWithPresave(t,e,n){this.saveItems(t,n,!1,e)}_performSavingOfItems(t){let{items:e,presave:r,callback:i}=t;r&&r();const o=[];for(const n of e)o.push(this.jsonObjectForItem(n));this.postMessage(n.SaveItems,{items:o},()=>{i&&i()})}saveItems(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(this.pendingSaveItems||(this.pendingSaveItems=[]),this.coallesedSaving&&!n){this.pendingSaveTimeout&&clearTimeout(this.pendingSaveTimeout);const n=t.map(t=>t.uuid),i=this.pendingSaveItems.filter(t=>!n.includes(t.uuid));this.pendingSaveItems=i.concat(t),this.pendingSaveParams={items:this.pendingSaveItems,presave:r,callback:e},this.pendingSaveTimeout=setTimeout(()=>{this._performSavingOfItems(this.pendingSaveParams),this.pendingSaveItems=[],this.pendingSaveTimeout=void 0,this.pendingSaveParams=null},this.coallesedSavingDelay)}else this._performSavingOfItems({items:t,presave:r,callback:e})}setSize(t,e){this.postMessage(n.SetSize,{type:"container",width:t,height:e})}keyDownEvent(t){this.postMessage(n.KeyDown,{keyboardModifier:t})}keyUpEvent(t){this.postMessage(n.KeyUp,{keyboardModifier:t})}mouseClickEvent(){this.postMessage(n.Click,{})}jsonObjectForItem(t){const e=Object.assign({},t);return e.children=null,e.parent=null,e}getItemAppDataValue(t,e){var n,r;return null==t||null===(n=t.content)||void 0===n||null===(r=n.appData)||void 0===r?void 0:r["org.standardnotes.sn"][e]}}return e.default})()},695:e=>{"use strict";e.exports=t}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return r[t](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var i=Object.create(null);o.r(i);var s={};e=e||[null,n({}),n([]),n(n)];for(var a=2&r&&t;"object"==typeof a&&!~e.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>t[e]);return s.default=()=>t,o.d(i,s),i},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{"use strict";o.d(s,{default:()=>d});var t=o(968),e=o.n(t);const n=async t=>{await new Promise(e=>setTimeout(e,1e3*t))};function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class i{constructor(t){this.options=t,r(this,"uuidToFileTempUrlAndTypeMapping",{}),r(this,"currentlyLoadingIds",[]),r(this,"statusElementMapping",{}),r(this,"fileTypeToElementType",{"image/png":"img","image/jpg":"img","image/jpeg":"img","image/gif":"img","image/tiff":"img","image/bmp":"img","video/mp4":"video","audio/mpeg":"audio","audio/mp3":"audio"})}fileTypeForElementType(t){return this.fileTypeToElementType[t.toLowerCase()]}loadFileSafeElements(){const t=this.options.getElementsBySelector("*[fsplaceholder]");for(const e of t)this.loadFileSafeElement(e)}async loadFileSafeElement(t){var e;const{fileSafeInstance:r}=this.options,i=t.getAttribute("fsid"),o=null!==(e=t.getAttribute("fsName"))&&void 0!==e?e:"",s=o&&"undefined"!=o?o:"file";if(!i)return!1;const a=this.uuidToFileTempUrlAndTypeMapping[i];if(a)return this.insertMediaElement({fsid:i,fsElement:t,url:a.url,fileType:a.fileType,fsName:a.fsName}),!1;if(this.currentlyLoadingIds.includes(i))return!1;const c=r.findFileDescriptor(i);if(!c)return this.setStatus({fsElement:t,fsid:i,status:"Unable to find ".concat(s," ").concat(i,"."),removable:!0}),!1;const u='[fsid="'.concat(c.uuid,'"][fscollapsable]');if(document.querySelectorAll("img".concat(u,", figure").concat(u,", video").concat(u,", audio").concat(u)).length>0)return!1;this.currentlyLoadingIds.push(i),this.setStatus({fsElement:t,fsid:i,status:"Downloading ".concat(s,"...")}),await n(.05);const l=await r.downloadFileFromDescriptor(c).catch(()=>{this.setStatus({fsElement:t,fsid:i,status:"Unable to download ".concat(s," ").concat(i,".")})});if(!l)return!1;this.setStatus({fsElement:t,fsid:i,status:"Decrypting ".concat(s,"...")}),await n(.05);const h=await r.decryptFile({fileDescriptor:c,fileItem:l}).catch(()=>{this.setStatus({fsElement:t,fsid:i,status:"Unable to decrypt ".concat(s," ").concat(i,".")})});if(!h)return!1;this.setStatus({fsElement:t,fsid:i}),await n(.05);const f=c.content.fileType,p=r.createTemporaryFileUrl({base64Data:h.decryptedData,dataType:f});return this.insertMediaElement({fsid:i,fileType:f,fsName:o,fsElement:t,url:p}),(()=>{this.currentlyLoadingIds.splice(this.currentlyLoadingIds.indexOf(i),1)})(),this.uuidToFileTempUrlAndTypeMapping[i]={fileType:f,url:p,fsName:o},!0}insertMediaElement(t){let e,{url:n,fsid:r,fsName:i,fileType:o,fsElement:s}=t;switch(this.fileTypeForElementType(o)){case"img":e=this.createImageElement({url:n,fsid:r,fsName:i,fsElement:s});break;case"video":e=this.createVideoElement({url:n,fsid:r,fileType:o,fsName:i,fsElement:s});break;case"audio":e=this.createAudioElement({url:n,fsid:r,fsName:i});break;default:e=this.createDownloadElement({url:n,fsid:r,fsName:i})}this.insertElementNearElement(e,s),s.remove()}wrapElementInTag(t){let{element:e,tagName:n,fsid:r,fsName:i}=t;const o=document.createElement(n);return o.setAttribute("fsid",r),o.setAttribute("fsName",i),o.setAttribute("fscollapsable","true"),o.setAttribute("contenteditable","true"),o.append(e),o}createImageElement(t){let{url:e,fsid:n,fsName:r,fsElement:i}=t;const o=document.createElement("img");o.setAttribute("src",e),o.setAttribute("srcset","".concat(e," 2x")),o.setAttribute("fsid",n),o.setAttribute("fsName",r),o.setAttribute("fscollapsable","true");const s=i.getAttribute("width");s&&o.setAttribute("width",s);const a=i.getAttribute("height");return a&&o.setAttribute("height",a),o}createVideoElement(t){let{url:e,fsid:n,fileType:r,fsName:i,fsElement:o}=t;const s=document.createElement("video");s.setAttribute("controls","true"),s.setAttribute("fsid",n),s.setAttribute("fsName",i),s.setAttribute("fscollapsable","true");const a=o.getAttribute("width");a&&s.setAttribute("width",a);const c=o.getAttribute("height");c&&s.setAttribute("height",c);const u=document.createElement("source");return u.setAttribute("src",e),u.setAttribute("type",r),s.append(u),this.wrapElementInTag({fsid:n,fsName:i,element:s,tagName:"p"})}createDownloadElement(t){let{url:e,fsid:n,fsName:r}=t;const i=document.createElement("a");return i.setAttribute("fsid",n),i.setAttribute("fsName",r),i.setAttribute("ghost","true"),i.setAttribute("fscollapsable","true"),i.setAttribute("href",e),i.textContent="".concat(r),i}createAudioElement(t){let{url:e,fsid:n,fsName:r}=t;const i=document.createElement("audio");return i.setAttribute("src",e),i.setAttribute("controls","true"),i.setAttribute("fsid",n),i.setAttribute("fsName",r),i.setAttribute("fscollapsable","true"),this.wrapElementInTag({fsid:n,fsName:r,element:i,tagName:"p"})}setStatus(t){let{status:e,fsElement:n,fsid:r,removable:i=!1}=t;if(r){const t=this.statusElementMapping[r];t&&(t.remove(),delete this.statusElementMapping[r])}if(e){let t=document.createElement("label");return t.setAttribute("id",r),t.setAttribute("ghost","true"),t.setAttribute("contenteditable","false"),t.style.fontWeight="bold",t.textContent=e,i&&(t.style.userSelect="all"),t=this.insertElementNearElement(t,n),r&&(this.statusElementMapping[r]=t),t}}insertStatusAtCursor(t){const e=Math.random().toString(36).substring(7);return this.setStatus({status:t,fsid:e,fsElement:null}),e}removeCursorStatus(t){const e=this.options.getElementsBySelector("#".concat(t));e.length>0&&e[0].remove()}insertElementNearElement(t,e){const n=this.options.preprocessElement(t);let r="child";if(e&&"figure"==n.tagName.toLowerCase()){const t=e.closest("p");t&&(e=t,r="afterend")}return this.options.insertElement(n,e,r),n}}class a{constructor(t){this.options=t}onKeyUp(t){let{isEnter:e,isPaste:n,isSpace:r}=t;(e||n||r)&&this.searchPatterns({searchPreviousLine:null!=e&&e})}searchPatterns(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchPreviousLine:!1};const e=t.searchPreviousLine?this.options.getPreviousLineText():this.options.getCurrentLineText();for(const n of this.options.patterns){const r=n.regex.exec(e);if(!r)continue;const i=r[0];if(i){const e=n.callback(i);this.replaceSelection(n.regex,e,t.searchPreviousLine)}}}replaceSelection(t,e,n){var r,i,o;null!==(r=this.options)&&void 0!==r&&r.beforeExpand&&this.options.beforeExpand(),this.options.replaceText({regex:t,replacement:e,searchPreviousLine:n}),null!==(i=this.options)&&void 0!==i&&i.afterExpand&&(null===(o=this.options)||void 0===o||o.afterExpand())}}const c=/(<p>)?\[FileSafe[^\]]*\](<\/p>)?/g,u=t=>t.replace(c,t=>h(t)),l=t=>"[FileSafe:".concat(t.uuid,":").concat(t.content.fileName,"]"),h=t=>{const e=(t=(t=(t=t.replace("<p>","")).replace("</p>","")).replace("[","").replace("]","")).split(":"),n=e[1],r=e[2],i=e[3];let o="";if(i){const t=i.split("x");o="width=".concat(t[0]," height=").concat(t[1])}return"<p fsplaceholder=true style='display: none;' fscollapsable=true ghost=true fsid='".concat(n,"' fsname='").concat(r,"' ").concat(o,"></p>")};function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p;!function(t){t.PlainText="plaintext",t.Html="html",t.Markdown="markdown",t.Json="json"}(p||(p={}));class d{constructor(t,e){this.delegate=t,this.options=e,f(this,"fileIdsPendingAssociation",[]),f(this,"componentRelay",void 0),f(this,"fileLoader",void 0),f(this,"textExpander",void 0),f(this,"fileSafeLoading",void 0),f(this,"fileSafeClass",void 0),f(this,"fileSafeInstance",void 0),f(this,"note",void 0),f(this,"ignoreNextTextChange",void 0),f(this,"needsFileSafeElementLoad",void 0),f(this,"previousText",void 0),this.connectToBridge(),this.options.supportsFileSafe&&(this.fileSafeLoading=this.importFileSafe())}connectToBridge(){const{coallesedSaving:t,coallesedSavingDelay:n,mode:r,supportsFileSafe:i}=this.options;this.componentRelay=new(e())({targetWindow:window,options:{coallesedSaving:t,coallesedSavingDelay:n},onReady:()=>{const{platform:t}=this.componentRelay;t&&document.documentElement.classList.add(t)}}),this.componentRelay.streamContextItem(async t=>{let e=!0;this.note&&this.note.uuid==t.uuid&&(e=!1);const n=this.note;if(i){const e=this.fileSafeClass.getSFItemClass();this.note=new e(t),this.fileSafeInstance.setCurrentNote(this.note)}else this.note=t;if(t.isMetadataUpdate)return;let o=t.content.text;if(r===p.Html&&e&&(/<[a-z][\s\S]*>/i.test(o)||(this.ignoreNextTextChange=!0)),this.previousText=o,i&&(this.needsFileSafeElementLoad=!0,o=u(o)),this.delegate.onNoteValueChange&&await this.delegate.onNoteValueChange(t),this.delegate.setEditorRawText(o),this.delegate.onNoteLockToggle){var s,a;const t=null!==(s=this.componentRelay.getItemAppDataValue(n,"locked"))&&void 0!==s&&s,e=null!==(a=this.componentRelay.getItemAppDataValue(this.note,"locked"))&&void 0!==a&&a;t!==e&&this.delegate.onNoteLockToggle(e)}e&&this.delegate.clearUndoHistory()})}async importFileSafe(){return Promise.resolve().then(o.t.bind(o,695,23)).then(t=>(this.fileSafeClass=t.default,this.configureFileSafe(),this.fileSafeInstance))}configureFileSafe(){this.fileSafeInstance=new this.fileSafeClass({componentManager:this.componentRelay}),this.fileSafeInstance.addDataChangeObserver(()=>{const t=this.fileSafeInstance.getAllFileDescriptors();if(this.note&&this.fileIdsPendingAssociation.length>0){let e=!1;for(const n of this.fileIdsPendingAssociation.slice()){const r=t.find(t=>t.uuid==n);if(!r)continue;e=!0,this.fileIdsPendingAssociation.splice(this.fileIdsPendingAssociation.indexOf(n),1);const i=l(r);this.delegate.insertRawText(i)}e&&this.textExpander.searchPatterns()}t.length>0&&this.fileLoader.loadFileSafeElements()}),this.fileSafeInstance.addNewFileDescriptorHandler(t=>{this.fileIdsPendingAssociation.push(t.uuid)}),this.fileLoader=new i({fileSafeInstance:this.fileSafeInstance,getElementsBySelector:this.delegate.getElementsBySelector,insertElement:this.delegate.insertElement,preprocessElement:this.delegate.preprocessElement}),this.textExpander=new a({afterExpand:()=>this.fileLoader.loadFileSafeElements(),getCurrentLineText:this.delegate.getCurrentLineText,getPreviousLineText:this.delegate.getPreviousLineText,replaceText:this.delegate.replaceText,patterns:[{regex:c,callback:t=>u(t)}]})}async getFileSafe(){return!this.fileSafeInstance&&this.fileSafeLoading?this.fileSafeLoading:this.importFileSafe()}onEditorKeyUp(t){let{isSpace:e,isEnter:n}=t;this.textExpander.onKeyUp({isSpace:e,isEnter:n})}onEditorPaste(){this.textExpander.onKeyUp({isPaste:!0})}onEditorValueChanged(t){const{mode:e,supportsFileSafe:n}=this.options;if(this.needsFileSafeElementLoad&&(this.needsFileSafeElementLoad=!1,this.fileLoader.loadFileSafeElements()),this.ignoreNextTextChange)return void(this.ignoreNextTextChange=!1);if(n&&(t=(t=>{const e=(new DOMParser).parseFromString(t,"text/html"),n=e.querySelectorAll("*[fscollapsable]");for(const r of n){const t=r.getAttribute("fsid"),e=r.getAttribute("fsname"),n=r.getAttribute("width"),i=r.getAttribute("height"),o=["FileSafe",t,e];if(n&&i){const t="".concat(n,"x").concat(i);o.push(t)}const s="<p>[".concat(o.join(":"),"]</p>");r.insertAdjacentHTML("afterend",s),r.remove()}return e.querySelectorAll("*[ghost]").forEach(t=>t.remove()),e.body.innerHTML})(t),this.previousText==t))return;if(this.previousText=t,!this.note)return;const r=this.note;this.componentRelay.saveItemWithPresave(r,()=>{if(r.content.text=t,this.delegate.generateCustomPreview){const e=this.delegate.generateCustomPreview(t);e.html?r.content.preview_html=e.html:e.plain&&(r.content.preview_plain=e.plain)}else{if(e===p.Html){let e=t.replace(c,t=>"");e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return t.length<=e?t:t.substring(0,e)+"..."}((t=>{const e=document.implementation.createHTMLDocument().body;return e.innerHTML=t,e.textContent||e.innerText||""})(e)),r.content.preview_plain=e.length>0?e:" "}else r.content.preview_plain=t;r.content.preview_html=null}})}canUploadFiles(){const t=this.fileSafeInstance.getAllCredentials(),e=this.fileSafeInstance.getAllIntegrations();return t.length>0&&e.length>0}async uploadJSFileObject(t){const e=this.fileLoader.insertStatusAtCursor("Processing file...");return this.fileSafeInstance.encryptAndUploadJavaScriptFileObject(t).then(()=>{this.fileLoader.removeCursorStatus(e)})}saveItemWithPresave(t,e){this.componentRelay.saveItemWithPresave(t,e)}}})(),s.default})()}))},"1bd2":function(t,e,n){"use strict";var r=n("9980"),i=n("7428"),o=n("576a"),s=n("5313"),a=(n("f248"),n("9a61")),c=n("70a9"),u=n("ca0e");const l=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style","border-color: "+t.color);const n=document.createElement("div");return n.setAttribute("style","background-color: "+t.color),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},h=(t,e,n)=>{const r=c["b"].getState(t),s=r.doc,l=[];return null!=r.snapshot||null!=r.prevSnapshot||null===r.binding?o["b"].create(t.doc,[]):(e.getStates().forEach((e,c)=>{if(c!==s.clientID&&null!=e.cursor){const h=e.user||{};null==h.color&&(h.color="#ffa500"),null==h.name&&(h.name="User: "+c);let f=Object(a["b"])(s,r.type,i["r"](e.cursor.anchor),r.binding.mapping),p=Object(a["b"])(s,r.type,i["r"](e.cursor.head),r.binding.mapping);if(null!==f&&null!==p){const e=u["f"](t.doc.content.size-1,0);f=u["g"](f,e),p=u["g"](p,e),l.push(o["a"].widget(p,()=>n(h),{key:c+"",side:10}));const r=u["g"](f,p),i=u["f"](f,p);l.push(o["a"].inline(r,i,{style:`background-color: ${h.color}70`},{inclusiveEnd:!0,inclusiveStart:!1}))}}}),o["b"].create(t.doc,l))},f=(t,{cursorBuilder:e=l,getSelection:n=(t=>t.selection)}={},r="cursor")=>new s["d"]({key:c["a"],state:{init(n,r){return h(r,t,e)},apply(n,r,i,o){const s=c["b"].getState(o),a=n.getMeta(c["a"]);return s&&s.isChangeOrigin||a&&a.awarenessUpdated?h(o,t,e):r.map(n.mapping,n.doc)}},props:{decorations:t=>c["a"].getState(t)},view:e=>{const o=()=>{e.docView&&Object(a["c"])(e,c["a"],{awarenessUpdated:!0})},s=()=>{const o=c["b"].getState(e.state),s=t.getLocalState()||{};if(e.hasFocus()&&null!==o.binding){const c=n(e.state),u=Object(a["a"])(c.anchor,o.type,o.binding.mapping),l=Object(a["a"])(c.head,o.type,o.binding.mapping);null!=s.cursor&&i["n"](i["r"](s.cursor.anchor),u)&&i["n"](i["r"](s.cursor.head),l)||t.setLocalStateField(r,{anchor:u,head:l})}else null!=s.cursor&&null!==Object(a["b"])(o.doc,o.type,i["r"](s.cursor.anchor),o.binding.mapping)&&t.setLocalStateField(r,null)};return t.on("change",o),e.dom.addEventListener("focusin",s),e.dom.addEventListener("focusout",s),{update:s,destroy:()=>{e.dom.removeEventListener("focusin",s),e.dom.removeEventListener("focusout",s),t.off("change",o),t.setLocalStateField(r,null)}}}}),p=t=>Array.from(t.entries()).map(([t,e])=>({clientId:t,...e.user})),d=r["b"].create({name:"collaborationCursor",priority:1e3,defaultOptions:{provider:null,user:{name:null,color:null},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style","border-color: "+t.color);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style","background-color: "+t.color),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},onUpdate:()=>null},addCommands(){return{user:t=>()=>(this.options.user=t,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0)}},addProseMirrorPlugins(){return[f((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.options.provider.awareness.on("change",()=>{this.options.onUpdate(p(this.options.provider.awareness.states))}),this.options.provider.awareness.on("update",()=>{this.options.onUpdate(p(this.options.provider.awareness.states))}),this.options.provider.on("status",t=>{"connected"===t.status&&this.options.provider.awareness.setLocalStateField("user",this.options.user)}),this.options.onUpdate(p(this.options.provider.awareness.states)),this.options.provider.awareness))(),{cursorBuilder:this.options.render})]}});e["a"]=d},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c35":function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=u.prototype):(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,n,r):"string"===typeof e?d(t,e,n):v(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return h(e),e<=0?c(t,e):void 0!==n?"string"===typeof r?c(t,e).fill(n,r):c(t,e).fill(n):c(t,e)}function p(t,e){if(h(e),t=c(t,e<0?0:0|y(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(e,n);t=c(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function m(t,e){var n=e.length<0?0:0|y(e.length);t=c(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function g(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=u.prototype):t=m(t,e),t}function v(t,e){if(u.isBuffer(e)){var n=0|y(e.length);return t=c(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?c(t,0):m(t,e);if("Buffer"===e.type&&o(e.data))return m(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),u.alloc(+t)}function w(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(r)return G(t).length;e=(""+e).toLowerCase(),r=!0}}function k(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return j(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function S(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function x(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){var o,s=1,a=t.length,c=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var h=!0,f=0;f<c;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function C(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function O(t,e,n,r){return tt(G(e,t.length-n),t,n,r)}function E(t,e,n,r){return tt(X(e),t,n,r)}function A(t,e,n,r){return E(t,e,n,r)}function M(t,e,n,r){return tt(Z(e),t,n,r)}function T(t,e,n,r){return tt(Q(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);var r=[],i=e;while(i<n){var o,s,a,c,u=t[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:o=t[i+1],128===(192&o)&&(c=(31&u)<<6|63&o,c>127&&(l=c));break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return N(r)}e.Buffer=u,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:s(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return f(null,t,e,n)},u.allocUnsafe=function(t){return p(null,t)},u.allocUnsafeSlow=function(t){return p(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=w,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):k.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return x(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return x(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return C(this,t,e,n);case"utf8":case"utf-8":return O(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function N(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=D));return n}function j(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function L(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Y(t[o]);return i}function F(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function $(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function H(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(t,e,n,r,o){return o||H(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function W(t,e,n,r,o){return o||H(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);var r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);var r=e,i=1,o=this[t+--r];while(r>0&&(i*=256))o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;z(this,t,e,n,i,0)}var o=1,s=0;this[e]=255&t;while(++s<n&&(o*=256))this[e+s]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;z(this,t,e,n,i,0)}var o=n-1,s=1;this[e+o]=255&t;while(--o>=0&&(s*=256))this[e+o]=t/s&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):$(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):$(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);z(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;this[e]=255&t;while(++o<n&&(s*=256))t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);z(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;this[e+o]=255&t;while(--o>=0&&(s*=256))t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):$(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):$(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return V(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return V(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return W(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return W(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:G(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function J(t){if(t=K(t).replace(q,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function K(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Q(t,e){for(var n,r,i,o=[],s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Z(t){return r.toByteArray(J(t))}function tt(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function et(t){return t!==t}}).call(this,n("c8ba"))},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(c){}return n}},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},"1d1c":function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("37e8");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:o})},"1d2f":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));Object.assign;const r=Object.keys,i=t=>r(t).length,o=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},s=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a=(t,e)=>t===e||i(t)===i(e)&&o(t,(t,n)=>(void 0!==t||s(e,n))&&e[n]===t)},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1d8c":function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return p}));var r=n("2309"),i=n("5da9"),o=n("e394"),s=n("c823");const a="undefined"!==typeof t&&t.release&&/node|io\.js/.test(t.release.name),c="undefined"!==typeof window&&!a;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let u;const l=[],h=()=>{if(void 0===u)if(a){u=r["c"]();const e=t.argv;let n=null;for(let t=0;t<e.length;t++){const r=e[t];"-"===r[0]?(null!==n&&u.set(n,""),n=r):null!==n?(u.set(n,r),n=null):l.push(r)}null!==n&&u.set(n,"")}else"object"===typeof location?(u=r["c"](),(location.search||"?").slice(1).split("&").forEach(t=>{if(0!==t.length){const[e,n]=t.split("=");u.set("--"+i["b"](e,"-"),n),u.set("-"+i["b"](e,"-"),n)}})):u=r["c"]();return u},f=t=>h().has(t),p=t=>a?o["a"](Object({NODE_ENV:"production",BASE_URL:"/TipTapSN/"})[t.toUpperCase()]):o["a"](s["b"].getItem(t)),d=t=>f("--"+t)||null!==p(t);d("production")}).call(this,n("4362"))},"1d91":function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"text",group:"inline"});e["a"]=i},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("2d00"),s=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1e58":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));const r=t=>new Error(t),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},"1fb5":function(t,e,n){"use strict";e.byteLength=l,e.toByteArray=f,e.fromByteArray=m;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function l(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function h(t,e,n){return 3*(e+n)/4-n}function f(t){var e,n,r=u(t),s=r[0],a=r[1],c=new o(h(t,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c}function p(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function d(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(p(r));return i.join("")}function m(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(d(t,a,a+s>c?c:a+s));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2163:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a}));n("fca1");var r=n("1d2f");const i=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&i(t,e,n+1)}},o=()=>{},s=(t,e)=>t===e,a=(t,e)=>{if(null==t||null==e)return s(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!a(t.get(n),e.get(n)))return!1;break;case Object:if(r["d"](t)!==r["d"](e))return!1;for(const n in t)if(!r["b"](t,n)||!a(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;break;default:return!1}return!0}},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),s=n("0366"),a=n("35a1"),c=n("2a62"),u=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,p,d,m,g,v=n&&n.that,y=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),k=s(e,v,1+y+w),S=function(t){return l&&c(l),new u(!0,t)},x=function(t){return y?(r(t),w?k(t[0],t[1],S):k(t[0],t[1])):w?k(t,S):k(t)};if(b)l=t;else{if(h=a(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(f=0,p=o(t.length);p>f;f++)if(d=x(t[f]),d&&d instanceof u)return d;return new u(!1)}l=h.call(t)}m=l.next;while(!(g=m.call(l)).done){try{d=x(g.value)}catch(_){throw c(l),_}if("object"==typeof d&&d&&d instanceof u)return d}return new u(!1)}},2309:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a}));const r=()=>new Map,i=t=>{const e=r();return t.forEach((t,n)=>{e.set(n,t)}),e},o=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},s=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},a=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),s=n("6eeb"),a=n("ce4e"),c=n("e893"),u=n("94ca");t.exports=function(t,e){var n,l,h,f,p,d,m=t.target,g=t.global,v=t.stat;if(l=g?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,l)for(h in e){if(p=e[h],t.noTargetGet?(d=i(l,h),f=d&&d.value):f=l[h],n=u(g?h:m+(v?".":"#")+h,t.forced),!n&&void 0!==f){if(typeof p===typeof f)continue;c(p,f)}(t.sham||f&&f.sham)&&o(p,"sham",!0),s(l,h,p,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},2532:function(t,e,n){"use strict";var r=n("23e7"),i=n("5a34"),o=n("1d80"),s=n("577e"),a=n("ab13");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~s(o(this)).indexOf(s(i(t)),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),o=n("577e"),s=n("d039"),a=n("ad6d"),c="toString",u=RegExp.prototype,l=u[c],h=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=c;(h||f)&&r(RegExp.prototype,c,(function(){var t=i(this),e=o(t.source),n=t.flags,r=o(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),s=n("83ab"),a=o("species");t.exports=function(t){var e=r(t),n=i.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},2684:function(t,e,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,o=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,s=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,a=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm,c=r["c"].create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark("italic"),toggleItalic:()=>({commands:t})=>t.toggleMark("italic"),unsetItalic:()=>({commands:t})=>t.unsetMark("italic")}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Object(r["k"])(i,this.type),Object(r["k"])(s,this.type)]},addPasteRules(){return[Object(r["l"])(o,this.type),Object(r["l"])(a,this.type)]}});e["a"]=c},2718:function(t,e,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^\s*([-+*])\s$/,s=r["d"].create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t})=>t.toggleList("bulletList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Object(i["e"])(o,this.type)]}});e["a"]=s},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,o,s,a){var c,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:u}}n.d(e,"a",(function(){return r}))},"29a1":function(t,e,n){t.exports=n.p+"img/remixicon.symbol.f09b1c74.svg"},"2a62":function(t,e,n){var r=n("825a");t.exports=function(t){var e=t["return"];if(void 0!==e)return r(e.call(t)).value}},"2b0e":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function s(t){return!1===t}function a(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function c(t){return null!==t&&"object"===typeof t}var u=Object.prototype.toString;function l(t){return"[object Object]"===u.call(t)}function h(t){return"[object RegExp]"===u.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return i(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function d(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function w(t,e){return b.call(t,e)}function k(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var S=/-(\w)/g,x=k((function(t){return t.replace(S,(function(t,e){return e?e.toUpperCase():""}))})),_=k((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),C=/\B([A-Z])/g,O=k((function(t){return t.replace(C,"-$1").toLowerCase()}));function E(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function A(t,e){return t.bind(e)}var M=Function.prototype.bind?A:E;function T(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function R(t,e){for(var n in e)t[n]=e[n];return t}function I(t){for(var e={},n=0;n<t.length;n++)t[n]&&R(e,t[n]);return e}function D(t,e,n){}var N=function(t,e,n){return!1},j=function(t){return t};function P(t,e){if(t===e)return!0;var n=c(t),r=c(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every((function(t,n){return P(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var s=Object.keys(t),a=Object.keys(e);return s.length===a.length&&s.every((function(n){return P(t[n],e[n])}))}catch(u){return!1}}function L(t,e){for(var n=0;n<t.length;n++)if(P(t[n],e))return n;return-1}function F(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var B="data-server-rendered",z=["component","directive","filter"],$=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:N,isReservedAttr:N,isUnknownElement:N,getTagNamespace:D,parsePlatformTagName:j,mustUseProp:N,async:!0,_lifecycleHooks:$},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function W(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^"+H.source+".$_\\d]");function J(t){if(!q.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var K,Y="__proto__"in{},G="undefined"!==typeof window,X="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Q=X&&WXEnvironment.platform.toLowerCase(),Z=G&&window.navigator.userAgent.toLowerCase(),tt=Z&&/msie|trident/.test(Z),et=Z&&Z.indexOf("msie 9.0")>0,nt=Z&&Z.indexOf("edge/")>0,rt=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===Q),it=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ot={}.watch,st=!1;if(G)try{var at={};Object.defineProperty(at,"passive",{get:function(){st=!0}}),window.addEventListener("test-passive",null,at)}catch(_s){}var ct=function(){return void 0===K&&(K=!G&&!X&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),K},ut=G&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function lt(t){return"function"===typeof t&&/native code/.test(t.toString())}var ht,ft="undefined"!==typeof Symbol&&lt(Symbol)&&"undefined"!==typeof Reflect&&lt(Reflect.ownKeys);ht="undefined"!==typeof Set&&lt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var pt=D,dt=0,mt=function(){this.id=dt++,this.subs=[]};mt.prototype.addSub=function(t){this.subs.push(t)},mt.prototype.removeSub=function(t){y(this.subs,t)},mt.prototype.depend=function(){mt.target&&mt.target.addDep(this)},mt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},mt.target=null;var gt=[];function vt(t){gt.push(t),mt.target=t}function yt(){gt.pop(),mt.target=gt[gt.length-1]}var bt=function(t,e,n,r,i,o,s,a){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},wt={child:{configurable:!0}};wt.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,wt);var kt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function St(t){return new bt(void 0,void 0,void 0,String(t))}function xt(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var _t=Array.prototype,Ct=Object.create(_t),Ot=["push","pop","shift","unshift","splice","sort","reverse"];Ot.forEach((function(t){var e=_t[t];W(Ct,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=e.apply(this,n),s=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&s.observeArray(i),s.dep.notify(),o}))}));var Et=Object.getOwnPropertyNames(Ct),At=!0;function Mt(t){At=t}var Tt=function(t){this.value=t,this.dep=new mt,this.vmCount=0,W(t,"__ob__",this),Array.isArray(t)?(Y?Rt(t,Ct):It(t,Ct,Et),this.observeArray(t)):this.walk(t)};function Rt(t,e){t.__proto__=e}function It(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];W(t,o,e[o])}}function Dt(t,e){var n;if(c(t)&&!(t instanceof bt))return w(t,"__ob__")&&t.__ob__ instanceof Tt?n=t.__ob__:At&&!ct()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Tt(t)),e&&n&&n.vmCount++,n}function Nt(t,e,n,r,i){var o=new mt,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set;a&&!c||2!==arguments.length||(n=t[e]);var u=!i&&Dt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):n;return mt.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Lt(e))),e},set:function(e){var r=a?a.call(t):n;e===r||e!==e&&r!==r||a&&!c||(c?c.call(t,e):n=e,u=!i&&Dt(e),o.notify())}})}}function jt(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Nt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Pt(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||w(t,e)&&(delete t[e],n&&n.dep.notify())}}function Lt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Lt(e)}Tt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Nt(t,e[n])},Tt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Dt(t[e])};var Ft=U.optionMergeStrategies;function Bt(t,e){if(!e)return t;for(var n,r,i,o=ft?Reflect.ownKeys(e):Object.keys(e),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(r=t[n],i=e[n],w(t,n)?r!==i&&l(r)&&l(i)&&Bt(r,i):jt(t,n,i));return t}function zt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?Bt(r,i):i}:e?t?function(){return Bt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function $t(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Ut(n):n}function Ut(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Ht(t,e,n,r){var i=Object.create(t||null);return e?R(i,e):i}Ft.data=function(t,e,n){return n?zt(t,e,n):e&&"function"!==typeof e?t:zt(t,e)},$.forEach((function(t){Ft[t]=$t})),z.forEach((function(t){Ft[t+"s"]=Ht})),Ft.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in R(i,t),e){var s=i[o],a=e[o];s&&!Array.isArray(s)&&(s=[s]),i[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return i},Ft.props=Ft.methods=Ft.inject=Ft.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return R(i,t),e&&R(i,e),i},Ft.provide=zt;var Vt=function(t,e){return void 0===e?t:e};function Wt(t,e){var n=t.props;if(n){var r,i,o,s={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=x(i),s[o]={type:null})}else if(l(n))for(var a in n)i=n[a],o=x(a),s[o]=l(i)?i:{type:i};else 0;t.props=s}}function qt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var s=n[o];r[o]=l(s)?R({from:o},s):{from:s}}else 0}}function Jt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function Kt(t,e,n){if("function"===typeof e&&(e=e.options),Wt(e,n),qt(e,n),Jt(e),!e._base&&(e.extends&&(t=Kt(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Kt(t,e.mixins[r],n);var o,s={};for(o in t)a(o);for(o in e)w(t,o)||a(o);function a(r){var i=Ft[r]||Vt;s[r]=i(t[r],e[r],n,r)}return s}function Yt(t,e,n,r){if("string"===typeof n){var i=t[e];if(w(i,n))return i[n];var o=x(n);if(w(i,o))return i[o];var s=_(o);if(w(i,s))return i[s];var a=i[n]||i[o]||i[s];return a}}function Gt(t,e,n,r){var i=e[t],o=!w(n,t),s=n[t],a=ee(Boolean,i.type);if(a>-1)if(o&&!w(i,"default"))s=!1;else if(""===s||s===O(t)){var c=ee(String,i.type);(c<0||a<c)&&(s=!0)}if(void 0===s){s=Xt(r,i,t);var u=At;Mt(!0),Dt(s),Mt(u)}return s}function Xt(t,e,n){if(w(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Zt(e.type)?r.call(t):r}}var Qt=/^\s*function (\w+)/;function Zt(t){var e=t&&t.toString().match(Qt);return e?e[1]:""}function te(t,e){return Zt(t)===Zt(e)}function ee(t,e){if(!Array.isArray(e))return te(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(te(e[n],t))return n;return-1}function ne(t,e,n){vt();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var s=!1===i[o].call(r,t,e,n);if(s)return}catch(_s){ie(_s,r,"errorCaptured hook")}}}ie(t,e,n)}finally{yt()}}function re(t,e,n,r,i){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(t){return ne(t,r,i+" (Promise/async)")})),o._handled=!0)}catch(_s){ne(_s,r,i)}return o}function ie(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(_s){_s!==t&&oe(_s,null,"config.errorHandler")}oe(t,e,n)}function oe(t,e,n){if(!G&&!X||"undefined"===typeof console)throw t;console.error(t)}var se,ae=!1,ce=[],ue=!1;function le(){ue=!1;var t=ce.slice(0);ce.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&lt(Promise)){var he=Promise.resolve();se=function(){he.then(le),rt&&setTimeout(D)},ae=!0}else if(tt||"undefined"===typeof MutationObserver||!lt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())se="undefined"!==typeof setImmediate&&lt(setImmediate)?function(){setImmediate(le)}:function(){setTimeout(le,0)};else{var fe=1,pe=new MutationObserver(le),de=document.createTextNode(String(fe));pe.observe(de,{characterData:!0}),se=function(){fe=(fe+1)%2,de.data=String(fe)},ae=!0}function me(t,e){var n;if(ce.push((function(){if(t)try{t.call(e)}catch(_s){ne(_s,e,"nextTick")}else n&&n(e)})),ue||(ue=!0,se()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ge=new ht;function ve(t){ye(t,ge),ge.clear()}function ye(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!c(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){n=t.length;while(n--)ye(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ye(t[r[n]],e)}}}var be=k((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function we(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return re(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)re(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function ke(t,e,n,i,s,a){var c,u,l,h;for(c in t)u=t[c],l=e[c],h=be(c),r(u)||(r(l)?(r(u.fns)&&(u=t[c]=we(u,a)),o(h.once)&&(u=t[c]=s(h.name,u,h.capture)),n(h.name,u,h.capture,h.passive,h.params)):u!==l&&(l.fns=u,t[c]=l));for(c in e)r(t[c])&&(h=be(c),i(h.name,e[c],h.capture))}function Se(t,e,n){var s;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var a=t[e];function c(){n.apply(this,arguments),y(s.fns,c)}r(a)?s=we([c]):i(a.fns)&&o(a.merged)?(s=a,s.fns.push(c)):s=we([a,c]),s.merged=!0,t[e]=s}function xe(t,e,n){var o=e.options.props;if(!r(o)){var s={},a=t.attrs,c=t.props;if(i(a)||i(c))for(var u in o){var l=O(u);_e(s,c,u,l,!0)||_e(s,a,u,l,!1)}return s}}function _e(t,e,n,r,o){if(i(e)){if(w(e,n))return t[n]=e[n],o||delete e[n],!0;if(w(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function Ce(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Oe(t){return a(t)?[St(t)]:Array.isArray(t)?Ae(t):void 0}function Ee(t){return i(t)&&i(t.text)&&s(t.isComment)}function Ae(t,e){var n,s,c,u,l=[];for(n=0;n<t.length;n++)s=t[n],r(s)||"boolean"===typeof s||(c=l.length-1,u=l[c],Array.isArray(s)?s.length>0&&(s=Ae(s,(e||"")+"_"+n),Ee(s[0])&&Ee(u)&&(l[c]=St(u.text+s[0].text),s.shift()),l.push.apply(l,s)):a(s)?Ee(u)?l[c]=St(u.text+s):""!==s&&l.push(St(s)):Ee(s)&&Ee(u)?l[c]=St(u.text+s.text):(o(t._isVList)&&i(s.tag)&&r(s.key)&&i(e)&&(s.key="__vlist"+e+"_"+n+"__"),l.push(s)));return l}function Me(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Te(t){var e=Re(t.$options.inject,t);e&&(Mt(!1),Object.keys(e).forEach((function(n){Nt(t,n,e[n])})),Mt(!0))}function Re(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var s=t[o].from,a=e;while(a){if(a._provided&&w(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in t[o]){var c=t[o].default;n[o]="function"===typeof c?c.call(e):c}else 0}}return n}}function Ie(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==e&&o.fnContext!==e||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,c=n[a]||(n[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(De)&&delete n[u];return n}function De(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Ne(t){return t.isComment&&t.asyncFactory}function je(t,e,r){var i,o=Object.keys(e).length>0,s=t?!!t.$stable:!o,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(s&&r&&r!==n&&a===r.$key&&!o&&!r.$hasNormal)return r;for(var c in i={},t)t[c]&&"$"!==c[0]&&(i[c]=Pe(e,c,t[c]))}else i={};for(var u in e)u in i||(i[u]=Le(e,u));return t&&Object.isExtensible(t)&&(t._normalized=i),W(i,"$stable",s),W(i,"$key",a),W(i,"$hasNormal",o),i}function Pe(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Oe(t);var e=t&&t[0];return t&&(!e||1===t.length&&e.isComment&&!Ne(e))?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function Le(t,e){return function(){return t[e]}}function Fe(t,e){var n,r,o,s,a;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(c(t))if(ft&&t[Symbol.iterator]){n=[];var u=t[Symbol.iterator](),l=u.next();while(!l.done)n.push(e(l.value,n.length)),l=u.next()}else for(s=Object.keys(t),n=new Array(s.length),r=0,o=s.length;r<o;r++)a=s[r],n[r]=e(t[a],a,r);return i(n)||(n=[]),n._isVList=!0,n}function Be(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=R(R({},r),n)),i=o(n)||("function"===typeof e?e():e)):i=this.$slots[t]||("function"===typeof e?e():e);var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function ze(t){return Yt(this.$options,"filters",t,!0)||j}function $e(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Ue(t,e,n,r,i){var o=U.keyCodes[e]||n;return i&&r&&!U.keyCodes[e]?$e(i,r):o?$e(o,t):r?O(r)!==e:void 0===t}function He(t,e,n,r,i){if(n)if(c(n)){var o;Array.isArray(n)&&(n=I(n));var s=function(s){if("class"===s||"style"===s||v(s))o=t;else{var a=t.attrs&&t.attrs.type;o=r||U.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=x(s),u=O(s);if(!(c in o)&&!(u in o)&&(o[s]=n[s],i)){var l=t.on||(t.on={});l["update:"+s]=function(t){n[s]=t}}};for(var a in n)s(a)}else;return t}function Ve(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),qe(r,"__static__"+t,!1)),r}function We(t,e,n){return qe(t,"__once__"+e+(n?"_"+n:""),!0),t}function qe(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&Je(t[r],e+"_"+r,n);else Je(t,e,n)}function Je(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Ke(t,e){if(e)if(l(e)){var n=t.on=t.on?R({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function Ye(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?Ye(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Ge(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Xe(t,e){return"string"===typeof t?e+t:t}function Qe(t){t._o=We,t._n=m,t._s=d,t._l=Fe,t._t=Be,t._q=P,t._i=L,t._m=Ve,t._f=ze,t._k=Ue,t._b=He,t._v=St,t._e=kt,t._u=Ye,t._g=Ke,t._d=Ge,t._p=Xe}function Ze(t,e,r,i,s){var a,c=this,u=s.options;w(i,"_uid")?(a=Object.create(i),a._original=i):(a=i,i=i._original);var l=o(u._compiled),h=!l;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=Re(u.inject,i),this.slots=function(){return c.$slots||je(t.scopedSlots,c.$slots=Ie(r,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return je(t.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=je(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,r){var o=pn(a,t,e,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return pn(a,t,e,n,r,h)}}function tn(t,e,r,o,s){var a=t.options,c={},u=a.props;if(i(u))for(var l in u)c[l]=Gt(l,u,e||n);else i(r.attrs)&&nn(c,r.attrs),i(r.props)&&nn(c,r.props);var h=new Ze(r,c,s,o,t),f=a.render.call(null,h._c,h);if(f instanceof bt)return en(f,r,h.parent,a,h);if(Array.isArray(f)){for(var p=Oe(f)||[],d=new Array(p.length),m=0;m<p.length;m++)d[m]=en(p[m],r,h.parent,a,h);return d}}function en(t,e,n,r,i){var o=xt(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function nn(t,e){for(var n in e)t[x(n)]=e[n]}Qe(Ze.prototype);var rn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;rn.prepatch(n,n)}else{var r=t.componentInstance=an(t,Rn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Pn(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,zn(n,"mounted")),t.data.keepAlive&&(e._isMounted?Zn(n):Fn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Bn(e,!0):e.$destroy())}},on=Object.keys(rn);function sn(t,e,n,s,a){if(!r(t)){var u=n.$options._base;if(c(t)&&(t=u.extend(t)),"function"===typeof t){var l;if(r(t.cid)&&(l=t,t=xn(l,u),void 0===t))return Sn(l,e,n,s,a);e=e||{},Sr(t),i(e.model)&&ln(t.options,e);var h=xe(e,t,a);if(o(t.options.functional))return tn(t,h,e,n,s);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}cn(e);var d=t.options.name||a,m=new bt("vue-component-"+t.cid+(d?"-"+d:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:f,tag:a,children:s},l);return m}}}function an(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function cn(t){for(var e=t.hook||(t.hook={}),n=0;n<on.length;n++){var r=on[n],i=e[r],o=rn[r];i===o||i&&i._merged||(e[r]=i?un(o,i):o)}}function un(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function ln(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),s=o[r],a=e.model.callback;i(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[r]=[a].concat(s)):o[r]=a}var hn=1,fn=2;function pn(t,e,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=fn),dn(t,e,n,r,i)}function dn(t,e,n,r,o){if(i(n)&&i(n.__ob__))return kt();if(i(n)&&i(n.is)&&(e=n.is),!e)return kt();var s,a,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===fn?r=Oe(r):o===hn&&(r=Ce(r)),"string"===typeof e)?(a=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),s=U.isReservedTag(e)?new bt(U.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(c=Yt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):sn(c,n,t,r,e)):s=sn(e,n,t,r);return Array.isArray(s)?s:i(s)?(i(a)&&mn(s,a),i(n)&&gn(n),s):kt()}function mn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var s=0,a=t.children.length;s<a;s++){var c=t.children[s];i(c.tag)&&(r(c.ns)||o(n)&&"svg"!==c.tag)&&mn(c,e,n)}}function gn(t){c(t.style)&&ve(t.style),c(t.class)&&ve(t.class)}function vn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=Ie(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return pn(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return pn(t,e,n,r,i,!0)};var o=r&&r.data;Nt(t,"$attrs",o&&o.attrs||n,null,!0),Nt(t,"$listeners",e._parentListeners||n,null,!0)}var yn,bn=null;function wn(t){Qe(t.prototype),t.prototype.$nextTick=function(t){return me(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=je(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{bn=e,t=r.call(e._renderProxy,e.$createElement)}catch(_s){ne(_s,e,"render"),t=e._vnode}finally{bn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=kt()),t.parent=i,t}}function kn(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),c(t)?e.extend(t):t}function Sn(t,e,n,r,i){var o=kt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function xn(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=bn;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var s=t.owners=[n],a=!0,u=null,l=null;n.$on("hook:destroyed",(function(){return y(s,n)}));var h=function(t){for(var e=0,n=s.length;e<n;e++)s[e].$forceUpdate();t&&(s.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},f=F((function(n){t.resolved=kn(n,e),a?s.length=0:h(!0)})),d=F((function(e){i(t.errorComp)&&(t.error=!0,h(!0))})),m=t(f,d);return c(m)&&(p(m)?r(t.resolved)&&m.then(f,d):p(m.component)&&(m.component.then(f,d),i(m.error)&&(t.errorComp=kn(m.error,e)),i(m.loading)&&(t.loadingComp=kn(m.loading,e),0===m.delay?t.loading=!0:u=setTimeout((function(){u=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,h(!1))}),m.delay||200)),i(m.timeout)&&(l=setTimeout((function(){l=null,r(t.resolved)&&d(null)}),m.timeout)))),a=!1,t.loading?t.loadingComp:t.resolved}}function _n(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||Ne(n)))return n}}function Cn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Mn(t,e)}function On(t,e){yn.$on(t,e)}function En(t,e){yn.$off(t,e)}function An(t,e){var n=yn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function Mn(t,e,n){yn=t,ke(e,n||{},On,En,An,t),yn=void 0}function Tn(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o,s=n._events[t];if(!s)return n;if(!e)return n._events[t]=null,n;var a=s.length;while(a--)if(o=s[a],o===e||o.fn===e){s.splice(a,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?T(n):n;for(var r=T(arguments,1),i='event handler for "'+t+'"',o=0,s=n.length;o<s;o++)re(n[o],e,r,e,i)}return e}}var Rn=null;function In(t){var e=Rn;return Rn=t,function(){Rn=e}}function Dn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Nn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=In(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){zn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),zn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function jn(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=kt),zn(t,"beforeMount"),r=function(){t._update(t._render(),n)},new rr(t,r,D,{before:function(){t._isMounted&&!t._isDestroyed&&zn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,zn(t,"mounted")),t}function Pn(t,e,r,i,o){var s=i.data.scopedSlots,a=t.$scopedSlots,c=!!(s&&!s.$stable||a!==n&&!a.$stable||s&&t.$scopedSlots.$key!==s.$key||!s&&t.$scopedSlots.$key),u=!!(o||t.$options._renderChildren||c);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){Mt(!1);for(var l=t._props,h=t.$options._propKeys||[],f=0;f<h.length;f++){var p=h[f],d=t.$options.props;l[p]=Gt(p,d,e,t)}Mt(!0),t.$options.propsData=e}r=r||n;var m=t.$options._parentListeners;t.$options._parentListeners=r,Mn(t,r,m),u&&(t.$slots=Ie(o,i.context),t.$forceUpdate())}function Ln(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Fn(t,e){if(e){if(t._directInactive=!1,Ln(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Fn(t.$children[n]);zn(t,"activated")}}function Bn(t,e){if((!e||(t._directInactive=!0,!Ln(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Bn(t.$children[n]);zn(t,"deactivated")}}function zn(t,e){vt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)re(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var $n=[],Un=[],Hn={},Vn=!1,Wn=!1,qn=0;function Jn(){qn=$n.length=Un.length=0,Hn={},Vn=Wn=!1}var Kn=0,Yn=Date.now;if(G&&!tt){var Gn=window.performance;Gn&&"function"===typeof Gn.now&&Yn()>document.createEvent("Event").timeStamp&&(Yn=function(){return Gn.now()})}function Xn(){var t,e;for(Kn=Yn(),Wn=!0,$n.sort((function(t,e){return t.id-e.id})),qn=0;qn<$n.length;qn++)t=$n[qn],t.before&&t.before(),e=t.id,Hn[e]=null,t.run();var n=Un.slice(),r=$n.slice();Jn(),tr(n),Qn(r),ut&&U.devtools&&ut.emit("flush")}function Qn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&zn(r,"updated")}}function Zn(t){t._inactive=!1,Un.push(t)}function tr(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Fn(t[e],!0)}function er(t){var e=t.id;if(null==Hn[e]){if(Hn[e]=!0,Wn){var n=$n.length-1;while(n>qn&&$n[n].id>t.id)n--;$n.splice(n+1,0,t)}else $n.push(t);Vn||(Vn=!0,me(Xn))}}var nr=0,rr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++nr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"===typeof e?this.getter=e:(this.getter=J(e),this.getter||(this.getter=D)),this.value=this.lazy?void 0:this.get()};rr.prototype.get=function(){var t;vt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(_s){if(!this.user)throw _s;ne(_s,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ve(t),yt(),this.cleanupDeps()}return t},rr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},rr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},rr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():er(this)},rr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||c(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'+this.expression+'"';re(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},rr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},rr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},rr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var ir={enumerable:!0,configurable:!0,get:D,set:D};function or(t,e,n){ir.get=function(){return this[e][n]},ir.set=function(t){this[e][n]=t},Object.defineProperty(t,n,ir)}function sr(t){t._watchers=[];var e=t.$options;e.props&&ar(t,e.props),e.methods&&mr(t,e.methods),e.data?cr(t):Dt(t._data={},!0),e.computed&&hr(t,e.computed),e.watch&&e.watch!==ot&&gr(t,e.watch)}function ar(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||Mt(!1);var s=function(o){i.push(o);var s=Gt(o,e,n,t);Nt(r,o,s),o in t||or(t,"_props",o)};for(var a in e)s(a);Mt(!0)}function cr(t){var e=t.$options.data;e=t._data="function"===typeof e?ur(e,t):e||{},l(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var o=n[i];0,r&&w(r,o)||V(o)||or(t,"_data",o)}Dt(e,!0)}function ur(t,e){vt();try{return t.call(e,e)}catch(_s){return ne(_s,e,"data()"),{}}finally{yt()}}var lr={lazy:!0};function hr(t,e){var n=t._computedWatchers=Object.create(null),r=ct();for(var i in e){var o=e[i],s="function"===typeof o?o:o.get;0,r||(n[i]=new rr(t,s||D,D,lr)),i in t||fr(t,i,o)}}function fr(t,e,n){var r=!ct();"function"===typeof n?(ir.get=r?pr(e):dr(n),ir.set=D):(ir.get=n.get?r&&!1!==n.cache?pr(e):dr(n.get):D,ir.set=n.set||D),Object.defineProperty(t,e,ir)}function pr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),mt.target&&e.depend(),e.value}}function dr(t){return function(){return t.call(this,this)}}function mr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?D:M(e[n],t)}function gr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)vr(t,n,r[i]);else vr(t,n,r)}}function vr(t,e,n,r){return l(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function yr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=jt,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,n){var r=this;if(l(e))return vr(r,t,e,n);n=n||{},n.user=!0;var i=new rr(r,t,e,n);if(n.immediate){var o='callback for immediate watcher "'+i.expression+'"';vt(),re(e,r,[i.value],r,o),yt()}return function(){i.teardown()}}}var br=0;function wr(t){t.prototype._init=function(t){var e=this;e._uid=br++,e._isVue=!0,t&&t._isComponent?kr(e,t):e.$options=Kt(Sr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Dn(e),Cn(e),vn(e),zn(e,"beforeCreate"),Te(e),sr(e),Me(e),zn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function kr(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function Sr(t){var e=t.options;if(t.super){var n=Sr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=xr(t);i&&R(t.extendOptions,i),e=t.options=Kt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function xr(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function _r(t){this._init(t)}function Cr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=T(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Or(t){t.mixin=function(t){return this.options=Kt(this.options,t),this}}function Er(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var s=function(t){this._init(t)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=e++,s.options=Kt(n.options,t),s["super"]=n,s.options.props&&Ar(s),s.options.computed&&Mr(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,z.forEach((function(t){s[t]=n[t]})),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=t,s.sealedOptions=R({},s.options),i[r]=s,s}}function Ar(t){var e=t.options.props;for(var n in e)or(t.prototype,"_props",n)}function Mr(t){var e=t.options.computed;for(var n in e)fr(t.prototype,n,e[n])}function Tr(t){z.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Rr(t){return t&&(t.Ctor.options.name||t.tag)}function Ir(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Dr(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var s=n[o];if(s){var a=s.name;a&&!e(a)&&Nr(n,o,r,i)}}}function Nr(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}wr(_r),yr(_r),Tn(_r),Nn(_r),wn(_r);var jr=[String,RegExp,Array],Pr={name:"keep-alive",abstract:!0,props:{include:jr,exclude:jr,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,r=t.vnodeToCache,i=t.keyToCache;if(r){var o=r.tag,s=r.componentInstance,a=r.componentOptions;e[i]={name:Rr(a),tag:o,componentInstance:s},n.push(i),this.max&&n.length>parseInt(this.max)&&Nr(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Nr(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Dr(t,(function(t){return Ir(e,t)}))})),this.$watch("exclude",(function(e){Dr(t,(function(t){return!Ir(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=_n(t),n=e&&e.componentOptions;if(n){var r=Rr(n),i=this,o=i.include,s=i.exclude;if(o&&(!r||!Ir(o,r))||s&&r&&Ir(s,r))return e;var a=this,c=a.cache,u=a.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;c[l]?(e.componentInstance=c[l].componentInstance,y(u,l),u.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||t&&t[0]}},Lr={KeepAlive:Pr};function Fr(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:pt,extend:R,mergeOptions:Kt,defineReactive:Nt},t.set=jt,t.delete=Pt,t.nextTick=me,t.observable=function(t){return Dt(t),t},t.options=Object.create(null),z.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,R(t.options.components,Lr),Cr(t),Or(t),Er(t),Tr(t)}Fr(_r),Object.defineProperty(_r.prototype,"$isServer",{get:ct}),Object.defineProperty(_r.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_r,"FunctionalRenderContext",{value:Ze}),_r.version="2.6.14";var Br=g("style,class"),zr=g("input,textarea,option,select,progress"),$r=function(t,e,n){return"value"===n&&zr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Ur=g("contenteditable,draggable,spellcheck"),Hr=g("events,caret,typing,plaintext-only"),Vr=function(t,e){return Yr(e)||"false"===e?"false":"contenteditable"===t&&Hr(e)?e:"true"},Wr=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),qr="http://www.w3.org/1999/xlink",Jr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Kr=function(t){return Jr(t)?t.slice(6,t.length):""},Yr=function(t){return null==t||!1===t};function Gr(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Xr(r.data,e));while(i(n=n.parent))n&&n.data&&(e=Xr(e,n.data));return Qr(e.staticClass,e.class)}function Xr(t,e){return{staticClass:Zr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Qr(t,e){return i(t)||i(e)?Zr(t,ti(e)):""}function Zr(t,e){return t?e?t+" "+e:t:e||""}function ti(t){return Array.isArray(t)?ei(t):c(t)?ni(t):"string"===typeof t?t:""}function ei(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=ti(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ni(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ri={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ii=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oi=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),si=function(t){return ii(t)||oi(t)};function ai(t){return oi(t)?"svg":"math"===t?"math":void 0}var ci=Object.create(null);function ui(t){if(!G)return!0;if(si(t))return!1;if(t=t.toLowerCase(),null!=ci[t])return ci[t];var e=document.createElement(t);return t.indexOf("-")>-1?ci[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:ci[t]=/HTMLUnknownElement/.test(e.toString())}var li=g("text,number,password,search,email,tel,url");function hi(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function fi(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function pi(t,e){return document.createElementNS(ri[t],e)}function di(t){return document.createTextNode(t)}function mi(t){return document.createComment(t)}function gi(t,e,n){t.insertBefore(e,n)}function vi(t,e){t.removeChild(e)}function yi(t,e){t.appendChild(e)}function bi(t){return t.parentNode}function wi(t){return t.nextSibling}function ki(t){return t.tagName}function Si(t,e){t.textContent=e}function xi(t,e){t.setAttribute(e,"")}var _i=Object.freeze({createElement:fi,createElementNS:pi,createTextNode:di,createComment:mi,insertBefore:gi,removeChild:vi,appendChild:yi,parentNode:bi,nextSibling:wi,tagName:ki,setTextContent:Si,setStyleScope:xi}),Ci={create:function(t,e){Oi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Oi(t,!0),Oi(e))},destroy:function(t){Oi(t,!0)}};function Oi(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,s=r.$refs;e?Array.isArray(s[n])?y(s[n],o):s[n]===o&&(s[n]=void 0):t.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var Ei=new bt("",{},[]),Ai=["create","activate","update","remove","destroy"];function Mi(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&Ti(t,e)||o(t.isAsyncPlaceholder)&&r(e.asyncFactory.error))}function Ti(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||li(r)&&li(o)}function Ri(t,e,n){var r,o,s={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(s[o]=r);return s}function Ii(t){var e,n,s={},c=t.modules,u=t.nodeOps;for(e=0;e<Ai.length;++e)for(s[Ai[e]]=[],n=0;n<c.length;++n)i(c[n][Ai[e]])&&s[Ai[e]].push(c[n][Ai[e]]);function l(t){return new bt(u.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function n(){0===--n.listeners&&f(t)}return n.listeners=e,n}function f(t){var e=u.parentNode(t);i(e)&&u.removeChild(e,t)}function p(t,e,n,r,s,a,c){if(i(t.elm)&&i(a)&&(t=a[c]=xt(t)),t.isRootInsert=!s,!d(t,e,n,r)){var l=t.data,h=t.children,f=t.tag;i(f)?(t.elm=t.ns?u.createElementNS(t.ns,f):u.createElement(f,t),S(t),b(t,h,e),i(l)&&k(t,e),y(n,t.elm,r)):o(t.isComment)?(t.elm=u.createComment(t.text),y(n,t.elm,r)):(t.elm=u.createTextNode(t.text),y(n,t.elm,r))}}function d(t,e,n,r){var s=t.data;if(i(s)){var a=i(t.componentInstance)&&s.keepAlive;if(i(s=s.hook)&&i(s=s.init)&&s(t,!1),i(t.componentInstance))return m(t,e),y(n,t.elm,r),o(a)&&v(t,e,n,r),!0}}function m(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,w(t)?(k(t,e),S(t)):(Oi(t),e.push(t))}function v(t,e,n,r){var o,a=t;while(a.componentInstance)if(a=a.componentInstance._vnode,i(o=a.data)&&i(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Ei,a);e.push(a);break}y(n,t.elm,r)}function y(t,e,n){i(t)&&(i(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)p(e[r],n,t.elm,null,!0,e,r)}else a(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function w(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function k(t,n){for(var r=0;r<s.create.length;++r)s.create[r](Ei,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(Ei,t),i(e.insert)&&n.push(t))}function S(t){var e;if(i(e=t.fnScopeId))u.setStyleScope(t.elm,e);else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent}i(e=Rn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function x(t,e,n,r,i,o){for(;r<=i;++r)p(n[r],o,t,e,!1,n,r)}function _(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)_(t.children[n])}function C(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(O(r),_(r)):f(r.elm))}}function O(t,e){if(i(e)||i(t.data)){var n,r=s.remove.length+1;for(i(e)?e.listeners+=r:e=h(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&O(n,e),n=0;n<s.remove.length;++n)s.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else f(t.elm)}function E(t,e,n,o,s){var a,c,l,h,f=0,d=0,m=e.length-1,g=e[0],v=e[m],y=n.length-1,b=n[0],w=n[y],k=!s;while(f<=m&&d<=y)r(g)?g=e[++f]:r(v)?v=e[--m]:Mi(g,b)?(M(g,b,o,n,d),g=e[++f],b=n[++d]):Mi(v,w)?(M(v,w,o,n,y),v=e[--m],w=n[--y]):Mi(g,w)?(M(g,w,o,n,y),k&&u.insertBefore(t,g.elm,u.nextSibling(v.elm)),g=e[++f],w=n[--y]):Mi(v,b)?(M(v,b,o,n,d),k&&u.insertBefore(t,v.elm,g.elm),v=e[--m],b=n[++d]):(r(a)&&(a=Ri(e,f,m)),c=i(b.key)?a[b.key]:A(b,e,f,m),r(c)?p(b,o,t,g.elm,!1,n,d):(l=e[c],Mi(l,b)?(M(l,b,o,n,d),e[c]=void 0,k&&u.insertBefore(t,l.elm,g.elm)):p(b,o,t,g.elm,!1,n,d)),b=n[++d]);f>m?(h=r(n[y+1])?null:n[y+1].elm,x(t,h,n,d,y,o)):d>y&&C(e,f,m)}function A(t,e,n,r){for(var o=n;o<r;o++){var s=e[o];if(i(s)&&Mi(t,s))return o}}function M(t,e,n,a,c,l){if(t!==e){i(e.elm)&&i(a)&&(e=a[c]=xt(e));var h=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?I(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var f,p=e.data;i(p)&&i(f=p.hook)&&i(f=f.prepatch)&&f(t,e);var d=t.children,m=e.children;if(i(p)&&w(e)){for(f=0;f<s.update.length;++f)s.update[f](t,e);i(f=p.hook)&&i(f=f.update)&&f(t,e)}r(e.text)?i(d)&&i(m)?d!==m&&E(h,d,m,n,l):i(m)?(i(t.text)&&u.setTextContent(h,""),x(h,null,m,0,m.length-1,n)):i(d)?C(d,0,d.length-1):i(t.text)&&u.setTextContent(h,""):t.text!==e.text&&u.setTextContent(h,e.text),i(p)&&i(f=p.hook)&&i(f=f.postpatch)&&f(t,e)}}}function T(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var R=g("attrs,class,staticClass,staticStyle,key");function I(t,e,n,r){var s,a=e.tag,c=e.data,u=e.children;if(r=r||c&&c.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(s=c.hook)&&i(s=s.init)&&s(e,!0),i(s=e.componentInstance)))return m(e,n),!0;if(i(a)){if(i(u))if(t.hasChildNodes())if(i(s=c)&&i(s=s.domProps)&&i(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var l=!0,h=t.firstChild,f=0;f<u.length;f++){if(!h||!I(h,u[f],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else b(e,u,n);if(i(c)){var p=!1;for(var d in c)if(!R(d)){p=!0,k(e,n);break}!p&&c["class"]&&ve(c["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,a){if(!r(e)){var c=!1,h=[];if(r(t))c=!0,p(e,h);else{var f=i(t.nodeType);if(!f&&Mi(t,e))M(t,e,h,null,null,a);else{if(f){if(1===t.nodeType&&t.hasAttribute(B)&&(t.removeAttribute(B),n=!0),o(n)&&I(t,e,h))return T(e,h,!0),t;t=l(t)}var d=t.elm,m=u.parentNode(d);if(p(e,h,d._leaveCb?null:m,u.nextSibling(d)),i(e.parent)){var g=e.parent,v=w(e);while(g){for(var y=0;y<s.destroy.length;++y)s.destroy[y](g);if(g.elm=e.elm,v){for(var b=0;b<s.create.length;++b)s.create[b](Ei,g);var k=g.data.hook.insert;if(k.merged)for(var S=1;S<k.fns.length;S++)k.fns[S]()}else Oi(g);g=g.parent}}i(m)?C([t],0,0):i(t.tag)&&_(t)}}return T(e,h,c),e.elm}i(t)&&_(t)}}var Di={create:Ni,update:Ni,destroy:function(t){Ni(t,Ei)}};function Ni(t,e){(t.data.directives||e.data.directives)&&ji(t,e)}function ji(t,e){var n,r,i,o=t===Ei,s=e===Ei,a=Li(t.data.directives,t.context),c=Li(e.data.directives,e.context),u=[],l=[];for(n in c)r=a[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Bi(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(Bi(i,"bind",e,t),i.def&&i.def.inserted&&u.push(i));if(u.length){var h=function(){for(var n=0;n<u.length;n++)Bi(u[n],"inserted",e,t)};o?Se(e,"insert",h):h()}if(l.length&&Se(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Bi(l[n],"componentUpdated",e,t)})),!o)for(n in a)c[n]||Bi(a[n],"unbind",t,t,s)}var Pi=Object.create(null);function Li(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=Pi),i[Fi(r)]=r,r.def=Yt(e.$options,"directives",r.name,!0);return i}function Fi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Bi(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(_s){ne(_s,n.context,"directive "+t.name+" "+e+" hook")}}var zi=[Ci,Di];function $i(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var o,s,a,c=e.elm,u=t.data.attrs||{},l=e.data.attrs||{};for(o in i(l.__ob__)&&(l=e.data.attrs=R({},l)),l)s=l[o],a=u[o],a!==s&&Ui(c,o,s,e.data.pre);for(o in(tt||nt)&&l.value!==u.value&&Ui(c,"value",l.value),u)r(l[o])&&(Jr(o)?c.removeAttributeNS(qr,Kr(o)):Ur(o)||c.removeAttribute(o))}}function Ui(t,e,n,r){r||t.tagName.indexOf("-")>-1?Hi(t,e,n):Wr(e)?Yr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Ur(e)?t.setAttribute(e,Vr(e,n)):Jr(e)?Yr(n)?t.removeAttributeNS(qr,Kr(e)):t.setAttributeNS(qr,e,n):Hi(t,e,n)}function Hi(t,e,n){if(Yr(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Vi={create:$i,update:$i};function Wi(t,e){var n=e.elm,o=e.data,s=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=Gr(e),c=n._transitionClasses;i(c)&&(a=Zr(a,ti(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var qi,Ji={create:Wi,update:Wi},Ki="__r",Yi="__c";function Gi(t){if(i(t[Ki])){var e=tt?"change":"input";t[e]=[].concat(t[Ki],t[e]||[]),delete t[Ki]}i(t[Yi])&&(t.change=[].concat(t[Yi],t.change||[]),delete t[Yi])}function Xi(t,e,n){var r=qi;return function i(){var o=e.apply(null,arguments);null!==o&&to(t,i,n,r)}}var Qi=ae&&!(it&&Number(it[1])<=53);function Zi(t,e,n,r){if(Qi){var i=Kn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}qi.addEventListener(t,e,st?{capture:n,passive:r}:n)}function to(t,e,n,r){(r||qi).removeEventListener(t,e._wrapper||e,n)}function eo(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};qi=e.elm,Gi(n),ke(n,i,Zi,to,Xi,e.context),qi=void 0}}var no,ro={create:eo,update:eo};function io(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,s=e.elm,a=t.data.domProps||{},c=e.data.domProps||{};for(n in i(c.__ob__)&&(c=e.data.domProps=R({},c)),a)n in c||(s[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=o;var u=r(o)?"":String(o);oo(s,u)&&(s.value=u)}else if("innerHTML"===n&&oi(s.tagName)&&r(s.innerHTML)){no=no||document.createElement("div"),no.innerHTML="<svg>"+o+"</svg>";var l=no.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(l.firstChild)s.appendChild(l.firstChild)}else if(o!==a[n])try{s[n]=o}catch(_s){}}}}function oo(t,e){return!t.composing&&("OPTION"===t.tagName||so(t,e)||ao(t,e))}function so(t,e){var n=!0;try{n=document.activeElement!==t}catch(_s){}return n&&t.value!==e}function ao(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return m(n)!==m(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var co={create:io,update:io},uo=k((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function lo(t){var e=ho(t.style);return t.staticStyle?R(t.staticStyle,e):e}function ho(t){return Array.isArray(t)?I(t):"string"===typeof t?uo(t):t}function fo(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=lo(i.data))&&R(r,n)}(n=lo(t.data))&&R(r,n);var o=t;while(o=o.parent)o.data&&(n=lo(o.data))&&R(r,n);return r}var po,mo=/^--/,go=/\s*!important$/,vo=function(t,e,n){if(mo.test(e))t.style.setProperty(e,n);else if(go.test(n))t.style.setProperty(O(e),n.replace(go,""),"important");else{var r=bo(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},yo=["Webkit","Moz","ms"],bo=k((function(t){if(po=po||document.createElement("div").style,t=x(t),"filter"!==t&&t in po)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<yo.length;n++){var r=yo[n]+e;if(r in po)return r}}));function wo(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var s,a,c=e.elm,u=o.staticStyle,l=o.normalizedStyle||o.style||{},h=u||l,f=ho(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?R({},f):f;var p=fo(e,!0);for(a in h)r(p[a])&&vo(c,a,"");for(a in p)s=p[a],s!==h[a]&&vo(c,a,null==s?"":s)}}var ko={create:wo,update:wo},So=/\s+/;function xo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(So).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function _o(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(So).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Co(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&R(e,Oo(t.name||"v")),R(e,t),e}return"string"===typeof t?Oo(t):void 0}}var Oo=k((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Eo=G&&!et,Ao="transition",Mo="animation",To="transition",Ro="transitionend",Io="animation",Do="animationend";Eo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(To="WebkitTransition",Ro="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Io="WebkitAnimation",Do="webkitAnimationEnd"));var No=G?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function jo(t){No((function(){No(t)}))}function Po(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),xo(t,e))}function Lo(t,e){t._transitionClasses&&y(t._transitionClasses,e),_o(t,e)}function Fo(t,e,n){var r=zo(t,e),i=r.type,o=r.timeout,s=r.propCount;if(!i)return n();var a=i===Ao?Ro:Do,c=0,u=function(){t.removeEventListener(a,l),n()},l=function(e){e.target===t&&++c>=s&&u()};setTimeout((function(){c<s&&u()}),o+1),t.addEventListener(a,l)}var Bo=/\b(transform|all)(,|$)/;function zo(t,e){var n,r=window.getComputedStyle(t),i=(r[To+"Delay"]||"").split(", "),o=(r[To+"Duration"]||"").split(", "),s=$o(i,o),a=(r[Io+"Delay"]||"").split(", "),c=(r[Io+"Duration"]||"").split(", "),u=$o(a,c),l=0,h=0;e===Ao?s>0&&(n=Ao,l=s,h=o.length):e===Mo?u>0&&(n=Mo,l=u,h=c.length):(l=Math.max(s,u),n=l>0?s>u?Ao:Mo:null,h=n?n===Ao?o.length:c.length:0);var f=n===Ao&&Bo.test(r[To+"Property"]);return{type:n,timeout:l,propCount:h,hasTransform:f}}function $o(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Uo(e)+Uo(t[n])})))}function Uo(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Ho(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Co(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var s=o.css,a=o.type,u=o.enterClass,l=o.enterToClass,h=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,d=o.appearActiveClass,g=o.beforeEnter,v=o.enter,y=o.afterEnter,b=o.enterCancelled,w=o.beforeAppear,k=o.appear,S=o.afterAppear,x=o.appearCancelled,_=o.duration,C=Rn,O=Rn.$vnode;while(O&&O.parent)C=O.context,O=O.parent;var E=!C._isMounted||!t.isRootInsert;if(!E||k||""===k){var A=E&&f?f:u,M=E&&d?d:h,T=E&&p?p:l,R=E&&w||g,I=E&&"function"===typeof k?k:v,D=E&&S||y,N=E&&x||b,j=m(c(_)?_.enter:_);0;var P=!1!==s&&!et,L=qo(I),B=n._enterCb=F((function(){P&&(Lo(n,T),Lo(n,M)),B.cancelled?(P&&Lo(n,A),N&&N(n)):D&&D(n),n._enterCb=null}));t.data.show||Se(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),I&&I(n,B)})),R&&R(n),P&&(Po(n,A),Po(n,M),jo((function(){Lo(n,A),B.cancelled||(Po(n,T),L||(Wo(j)?setTimeout(B,j):Fo(n,a,B)))}))),t.data.show&&(e&&e(),I&&I(n,B)),P||L||B()}}}function Vo(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Co(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var s=o.css,a=o.type,u=o.leaveClass,l=o.leaveToClass,h=o.leaveActiveClass,f=o.beforeLeave,p=o.leave,d=o.afterLeave,g=o.leaveCancelled,v=o.delayLeave,y=o.duration,b=!1!==s&&!et,w=qo(p),k=m(c(y)?y.leave:y);0;var S=n._leaveCb=F((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Lo(n,l),Lo(n,h)),S.cancelled?(b&&Lo(n,u),g&&g(n)):(e(),d&&d(n)),n._leaveCb=null}));v?v(x):x()}function x(){S.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),b&&(Po(n,u),Po(n,h),jo((function(){Lo(n,u),S.cancelled||(Po(n,l),w||(Wo(k)?setTimeout(S,k):Fo(n,a,S)))}))),p&&p(n,S),b||w||S())}}function Wo(t){return"number"===typeof t&&!isNaN(t)}function qo(t){if(r(t))return!1;var e=t.fns;return i(e)?qo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Jo(t,e){!0!==e.data.show&&Ho(e)}var Ko=G?{create:Jo,activate:Jo,remove:function(t,e){!0!==t.data.show?Vo(t,e):e()}}:{},Yo=[Vi,Ji,ro,co,ko,Ko],Go=Yo.concat(zi),Xo=Ii({nodeOps:_i,modules:Go});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&os(t,"input")}));var Qo={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Se(n,"postpatch",(function(){Qo.componentUpdated(t,e,n)})):Zo(t,e,n.context),t._vOptions=[].map.call(t.options,ns)):("textarea"===n.tag||li(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",rs),t.addEventListener("compositionend",is),t.addEventListener("change",is),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Zo(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,ns);if(i.some((function(t,e){return!P(t,r[e])}))){var o=t.multiple?e.value.some((function(t){return es(t,i)})):e.value!==e.oldValue&&es(e.value,i);o&&os(t,"change")}}}};function Zo(t,e,n){ts(t,e,n),(tt||nt)&&setTimeout((function(){ts(t,e,n)}),0)}function ts(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,s,a=0,c=t.options.length;a<c;a++)if(s=t.options[a],i)o=L(r,ns(s))>-1,s.selected!==o&&(s.selected=o);else if(P(ns(s),r))return void(t.selectedIndex!==a&&(t.selectedIndex=a));i||(t.selectedIndex=-1)}}function es(t,e){return e.every((function(e){return!P(e,t)}))}function ns(t){return"_value"in t?t._value:t.value}function rs(t){t.target.composing=!0}function is(t){t.target.composing&&(t.target.composing=!1,os(t.target,"input"))}function os(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function ss(t){return!t.componentInstance||t.data&&t.data.transition?t:ss(t.componentInstance._vnode)}var as={bind:function(t,e,n){var r=e.value;n=ss(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Ho(n,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=ss(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Ho(n,(function(){t.style.display=t.__vOriginalDisplay})):Vo(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},cs={model:Qo,show:as},us={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ls(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ls(_n(e.children)):t}function hs(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[x(o)]=i[o];return e}function fs(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function ps(t){while(t=t.parent)if(t.data.transition)return!0}function ds(t,e){return e.key===t.key&&e.tag===t.tag}var ms=function(t){return t.tag||Ne(t)},gs=function(t){return"show"===t.name},vs={name:"transition",props:us,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(ms),n.length)){0;var r=this.mode;0;var i=n[0];if(ps(this.$vnode))return i;var o=ls(i);if(!o)return i;if(this._leaving)return fs(t,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=hs(this),u=this._vnode,l=ls(u);if(o.data.directives&&o.data.directives.some(gs)&&(o.data.show=!0),l&&l.data&&!ds(o,l)&&!Ne(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=R({},c);if("out-in"===r)return this._leaving=!0,Se(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),fs(t,i);if("in-out"===r){if(Ne(o))return u;var f,p=function(){f()};Se(c,"afterEnter",p),Se(c,"enterCancelled",p),Se(h,"delayLeave",(function(t){f=t}))}}return i}}},ys=R({tag:String,moveClass:String},us);delete ys.mode;var bs={props:ys,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=In(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],s=hs(this),a=0;a<i.length;a++){var c=i[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(r){for(var u=[],l=[],h=0;h<r.length;h++){var f=r[h];f.data.transition=s,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?u.push(f):l.push(f)}this.kept=t(e,null,u),this.removed=l}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ws),t.forEach(ks),t.forEach(Ss),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;Po(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Ro,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Ro,t),n._moveCb=null,Lo(n,e))})}})))},methods:{hasMove:function(t,e){if(!Eo)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){_o(n,t)})),xo(n,e),n.style.display="none",this.$el.appendChild(n);var r=zo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ws(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function ks(t){t.data.newPos=t.elm.getBoundingClientRect()}function Ss(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var xs={Transition:vs,TransitionGroup:bs};_r.config.mustUseProp=$r,_r.config.isReservedTag=si,_r.config.isReservedAttr=Br,_r.config.getTagNamespace=ai,_r.config.isUnknownElement=ui,R(_r.options.directives,cs),R(_r.options.components,xs),_r.prototype.__patch__=G?Xo:D,_r.prototype.$mount=function(t,e){return t=t&&G?hi(t):void 0,jn(this,t,e)},G&&setTimeout((function(){U.devtools&&ut&&ut.emit("init",_r)}),0),e["a"]=_r}).call(this,n("c8ba"))},"2b3d":function(t,e,n){"use strict";n("3ca3");var r,i=n("23e7"),o=n("83ab"),s=n("0d3b"),a=n("da84"),c=n("37e8"),u=n("6eeb"),l=n("19aa"),h=n("5135"),f=n("60da"),p=n("4df4"),d=n("6547").codeAt,m=n("5fb2"),g=n("577e"),v=n("d44e"),y=n("9861"),b=n("69f3"),w=a.URL,k=y.URLSearchParams,S=y.getState,x=b.set,_=b.getterFor("URL"),C=Math.floor,O=Math.pow,E="Invalid authority",A="Invalid scheme",M="Invalid host",T="Invalid port",R=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,D=/\d/,N=/^0x/i,j=/^[0-7]+$/,P=/^\d+$/,L=/^[\dA-Fa-f]+$/,F=/[\0\t\n\r #%/:<>?@[\\\]^|]/,B=/[\0\t\n\r #/:<>?@[\\\]^|]/,z=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,$=/[\t\n\r]/g,U=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return M;if(n=V(e.slice(1,-1)),!n)return M;t.host=n}else if(Z(t)){if(e=m(e),F.test(e))return M;if(n=H(e),null===n)return M;t.host=n}else{if(B.test(e))return M;for(n="",r=p(e),i=0;i<r.length;i++)n+=X(r[i],J);t.host=n}},H=function(t){var e,n,r,i,o,s,a,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),e=c.length,e>4)return t;for(n=[],r=0;r<e;r++){if(i=c[r],""==i)return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=N.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?P:8==o?j:L).test(i))return t;s=parseInt(i,o)}n.push(s)}for(r=0;r<e;r++)if(s=n[r],r==e-1){if(s>=O(256,5-e))return null}else if(s>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*O(256,3-r);return a},V=function(t){var e,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,u++,l=u}while(f()){if(8==u)return;if(":"!=f()){e=n=0;while(n<4&&L.test(f()))e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,u>6)return;r=0;while(f()){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!D.test(f()))return;while(D.test(f())){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}c[u]=256*c[u]+i,r++,2!=r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[u++]=e}else{if(null!==l)return;h++,u++,l=u}}if(null!==l){s=u-l,u=7;while(0!=u&&s>0)a=c[u],c[u--]=c[l+s-1],c[l+--s]=a}else if(8!=u)return;return c},W=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e},q=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=C(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=W(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},J={},K=f({},J,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=f({},K,{"#":1,"?":1,"{":1,"}":1}),G=f({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),X=function(t,e){var n=d(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Z=function(t){return h(Q,t.scheme)},tt=function(t){return""!=t.username||""!=t.password},et=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},nt=function(t,e){var n;return 2==t.length&&R.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},rt=function(t){var e;return t.length>1&&nt(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},it=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&nt(e[0],!0)||e.pop()},ot=function(t){return"."===t||"%2e"===t.toLowerCase()},st=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},at={},ct={},ut={},lt={},ht={},ft={},pt={},dt={},mt={},gt={},vt={},yt={},bt={},wt={},kt={},St={},xt={},_t={},Ct={},Ot={},Et={},At=function(t,e,n,i){var o,s,a,c,u=n||at,l=0,f="",d=!1,m=!1,g=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(z,"")),e=e.replace($,""),o=p(e);while(l<=o.length){switch(s=o[l],u){case at:if(!s||!R.test(s)){if(n)return A;u=ut;continue}f+=s.toLowerCase(),u=ct;break;case ct:if(s&&(I.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(n)return A;f="",u=ut,l=0;continue}if(n&&(Z(t)!=h(Q,f)||"file"==f&&(tt(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,n)return void(Z(t)&&Q[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?u=wt:Z(t)&&i&&i.scheme==t.scheme?u=lt:Z(t)?u=dt:"/"==o[l+1]?(u=ht,l++):(t.cannotBeABaseURL=!0,t.path.push(""),u=Ct)}break;case ut:if(!i||i.cannotBeABaseURL&&"#"!=s)return A;if(i.cannotBeABaseURL&&"#"==s){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,u=Et;break}u="file"==i.scheme?wt:ft;continue;case lt:if("/"!=s||"/"!=o[l+1]){u=ft;continue}u=mt,l++;break;case ht:if("/"==s){u=gt;break}u=_t;continue;case ft:if(t.scheme=i.scheme,s==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==s||"\\"==s&&Z(t))u=pt;else if("?"==s)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",u=Ot;else{if("#"!=s){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),u=_t;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",u=Et}break;case pt:if(!Z(t)||"/"!=s&&"\\"!=s){if("/"!=s){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,u=_t;continue}u=gt}else u=mt;break;case dt:if(u=mt,"/"!=s||"/"!=f.charAt(l+1))continue;l++;break;case mt:if("/"!=s&&"\\"!=s){u=gt;continue}break;case gt:if("@"==s){d&&(f="%40"+f),d=!0,a=p(f);for(var v=0;v<a.length;v++){var y=a[v];if(":"!=y||g){var b=X(y,G);g?t.password+=b:t.username+=b}else g=!0}f=""}else if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(t)){if(d&&""==f)return E;l-=p(f).length+1,f="",u=vt}else f+=s;break;case vt:case yt:if(n&&"file"==t.scheme){u=St;continue}if(":"!=s||m){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(t)){if(Z(t)&&""==f)return M;if(n&&""==f&&(tt(t)||null!==t.port))return;if(c=U(t,f),c)return c;if(f="",u=xt,n)return;continue}"["==s?m=!0:"]"==s&&(m=!1),f+=s}else{if(""==f)return M;if(c=U(t,f),c)return c;if(f="",u=bt,n==yt)return}break;case bt:if(!D.test(s)){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(t)||n){if(""!=f){var w=parseInt(f,10);if(w>65535)return T;t.port=Z(t)&&w===Q[t.scheme]?null:w,f=""}if(n)return;u=xt;continue}return T}f+=s;break;case wt:if(t.scheme="file","/"==s||"\\"==s)u=kt;else{if(!i||"file"!=i.scheme){u=_t;continue}if(s==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==s)t.host=i.host,t.path=i.path.slice(),t.query="",u=Ot;else{if("#"!=s){rt(o.slice(l).join(""))||(t.host=i.host,t.path=i.path.slice(),it(t)),u=_t;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",u=Et}}break;case kt:if("/"==s||"\\"==s){u=St;break}i&&"file"==i.scheme&&!rt(o.slice(l).join(""))&&(nt(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),u=_t;continue;case St:if(s==r||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&nt(f))u=_t;else if(""==f){if(t.host="",n)return;u=xt}else{if(c=U(t,f),c)return c;if("localhost"==t.host&&(t.host=""),n)return;f="",u=xt}continue}f+=s;break;case xt:if(Z(t)){if(u=_t,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=r&&(u=_t,"/"!=s))continue}else t.fragment="",u=Et;else t.query="",u=Ot;break;case _t:if(s==r||"/"==s||"\\"==s&&Z(t)||!n&&("?"==s||"#"==s)){if(st(f)?(it(t),"/"==s||"\\"==s&&Z(t)||t.path.push("")):ot(f)?"/"==s||"\\"==s&&Z(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&nt(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(s==r||"?"==s||"#"==s))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==s?(t.query="",u=Ot):"#"==s&&(t.fragment="",u=Et)}else f+=X(s,Y);break;case Ct:"?"==s?(t.query="",u=Ot):"#"==s?(t.fragment="",u=Et):s!=r&&(t.path[0]+=X(s,J));break;case Ot:n||"#"!=s?s!=r&&("'"==s&&Z(t)?t.query+="%27":t.query+="#"==s?"%23":X(s,J)):(t.fragment="",u=Et);break;case Et:s!=r&&(t.fragment+=X(s,K));break}l++}},Mt=function(t){var e,n,r=l(this,Mt,"URL"),i=arguments.length>1?arguments[1]:void 0,s=g(t),a=x(r,{type:"URL"});if(void 0!==i)if(i instanceof Mt)e=_(i);else if(n=At(e={},g(i)),n)throw TypeError(n);if(n=At(a,s,null,e),n)throw TypeError(n);var c=a.searchParams=new k,u=S(c);u.updateSearchParams(a.query),u.updateURL=function(){a.query=String(c)||null},o||(r.href=Rt.call(r),r.origin=It.call(r),r.protocol=Dt.call(r),r.username=Nt.call(r),r.password=jt.call(r),r.host=Pt.call(r),r.hostname=Lt.call(r),r.port=Ft.call(r),r.pathname=Bt.call(r),r.search=zt.call(r),r.searchParams=$t.call(r),r.hash=Ut.call(r))},Tt=Mt.prototype,Rt=function(){var t=_(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,s=t.path,a=t.query,c=t.fragment,u=e+":";return null!==i?(u+="//",tt(t)&&(u+=n+(r?":"+r:"")+"@"),u+=q(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},It=function(){var t=_(this),e=t.scheme,n=t.port;if("blob"==e)try{return new Mt(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&Z(t)?e+"://"+q(t.host)+(null!==n?":"+n:""):"null"},Dt=function(){return _(this).scheme+":"},Nt=function(){return _(this).username},jt=function(){return _(this).password},Pt=function(){var t=_(this),e=t.host,n=t.port;return null===e?"":null===n?q(e):q(e)+":"+n},Lt=function(){var t=_(this).host;return null===t?"":q(t)},Ft=function(){var t=_(this).port;return null===t?"":String(t)},Bt=function(){var t=_(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},zt=function(){var t=_(this).query;return t?"?"+t:""},$t=function(){return _(this).searchParams},Ut=function(){var t=_(this).fragment;return t?"#"+t:""},Ht=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&c(Tt,{href:Ht(Rt,(function(t){var e=_(this),n=g(t),r=At(e,n);if(r)throw TypeError(r);S(e.searchParams).updateSearchParams(e.query)})),origin:Ht(It),protocol:Ht(Dt,(function(t){var e=_(this);At(e,g(t)+":",at)})),username:Ht(Nt,(function(t){var e=_(this),n=p(g(t));if(!et(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=X(n[r],G)}})),password:Ht(jt,(function(t){var e=_(this),n=p(g(t));if(!et(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=X(n[r],G)}})),host:Ht(Pt,(function(t){var e=_(this);e.cannotBeABaseURL||At(e,g(t),vt)})),hostname:Ht(Lt,(function(t){var e=_(this);e.cannotBeABaseURL||At(e,g(t),yt)})),port:Ht(Ft,(function(t){var e=_(this);et(e)||(t=g(t),""==t?e.port=null:At(e,t,bt))})),pathname:Ht(Bt,(function(t){var e=_(this);e.cannotBeABaseURL||(e.path=[],At(e,g(t),xt))})),search:Ht(zt,(function(t){var e=_(this);t=g(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",At(e,t,Ot)),S(e.searchParams).updateSearchParams(e.query)})),searchParams:Ht($t),hash:Ht(Ut,(function(t){var e=_(this);t=g(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",At(e,t,Et)):e.fragment=null}))}),u(Tt,"toJSON",(function(){return Rt.call(this)}),{enumerable:!0}),u(Tt,"toString",(function(){return Rt.call(this)}),{enumerable:!0}),w){var Vt=w.createObjectURL,Wt=w.revokeObjectURL;Vt&&u(Mt,"createObjectURL",(function(t){return Vt.apply(w,arguments)})),Wt&&u(Mt,"revokeObjectURL",(function(t){return Wt.apply(w,arguments)}))}v(Mt,"URL"),i({global:!0,forced:!s,sham:!o},{URL:Mt})},"2cf4":function(t,e,n){var r,i,o,s,a=n("da84"),c=n("d039"),u=n("0366"),l=n("1be4"),h=n("cc12"),f=n("1cdc"),p=n("605d"),d=a.setImmediate,m=a.clearImmediate,g=a.process,v=a.MessageChannel,y=a.Dispatch,b=0,w={},k="onreadystatechange";try{r=a.location}catch(O){}var S=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},x=function(t){return function(){S(t)}},_=function(t){S(t.data)},C=function(t){a.postMessage(String(t),r.protocol+"//"+r.host)};d&&m||(d=function(t){var e=[],n=arguments.length,r=1;while(n>r)e.push(arguments[r++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},i(b),b},m=function(t){delete w[t]},p?i=function(t){g.nextTick(x(t))}:y&&y.now?i=function(t){y.now(x(t))}:v&&!f?(o=new v,s=o.port2,o.port1.onmessage=_,i=u(s.postMessage,s,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&r&&"file:"!==r.protocol&&!c(C)?(i=C,a.addEventListener("message",_,!1)):i=k in h("script")?function(t){l.appendChild(h("script"))[k]=function(){l.removeChild(this),S(t)}}:function(t){setTimeout(x(t),0)}),t.exports={set:d,clear:m}},"2d00":function(t,e,n){var r,i,o=n("da84"),s=n("342f"),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l?(r=l.split("."),i=r[0]<4?1:r[0]+r[1]):s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"304a":function(t,e,n){"use strict";function r(t){this.content=t}n.d(e,"a",(function(){return pt})),n.d(e,"b",(function(){return Tt})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return lt})),n.d(e,"f",(function(){return L})),n.d(e,"g",(function(){return N})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return ht})),n.d(e,"j",(function(){return m})),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var i=r,o=i;function s(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var a=0;i.text[a]==o.text[a];a++)n++;return n}if(i.content.size||o.content.size){var c=s(i.content,o.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}function a(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),c=e.child(--o),u=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){var l=0,h=Math.min(s.text.length,c.text.length);while(l<h&&s.text[s.text.length-l-1]==c.text[c.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var f=a(s.content,c.content,n-1,r-1);if(f)return f}n-=u,r-=u}else n-=u,r-=u}}var c=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},u={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};c.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,i,o)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},c.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},c.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},c.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new c(r,this.size+t.size)},c.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var i=0,o=0;o<e;i++){var s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new c(n,r)},c.prototype.cutByIndex=function(t,e){return t==e?c.empty:0==t&&e==this.content.length?this:new c(this.content.slice(t,e))},c.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new c(r,i)},c.prototype.addToStart=function(t){return new c([t].concat(this.content),this.size+t.nodeSize)},c.prototype.addToEnd=function(t){return new c(this.content.concat(t),this.size+t.nodeSize)},c.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},u.firstChild.get=function(){return this.content.length?this.content[0]:null},u.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},u.childCount.get=function(){return this.content.length},c.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},c.prototype.maybeChild=function(t){return this.content[t]},c.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},c.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),s(this,t,e)},c.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),a(this,t,e,n)},c.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return h(0,t);if(t==this.size)return h(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?h(n+1,o):h(n,r);r=o}},c.prototype.toString=function(){return"<"+this.toStringInner()+">"},c.prototype.toStringInner=function(){return this.content.join(", ")},c.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},c.fromJSON=function(t,e){if(!e)return c.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(e.map(t.nodeFromJSON))},c.fromArray=function(t){if(!t.length)return c.empty;for(var e,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new c(e||t,n)},c.from=function(t){if(!t)return c.empty;if(t instanceof c)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new c([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(c.prototype,u);var l={index:0,offset:0};function h(t,e){return l.index=t,l.offset=e,l}function f(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!f(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!f(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}c.empty=new c([],0);var p=function(t,e){this.type=t,this.attrs=e};function d(t){var e=Error.call(this,t);return e.__proto__=d.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&f(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},p.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var m=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},g={size:{configurable:!0}};function v(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),c=a.index,u=a.offset;if(o==e||s.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(v(s.content,e-o-1,n-o-1)))}function y(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=y(a.content,e-s-1,n);return c&&t.replaceChild(o,a.copy(c))}function b(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return w(t,e,n,0)}function w(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=w(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=A(n,t),c=a.start,u=a.end;return C(o,O(t,c,u,e,r))}var l=t.parent,h=l.content;return C(l,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return C(o,E(t,e,r))}function k(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function S(t,e,n){var r=t.node(n);return k(r,e.node(n)),r}function x(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function _(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(x(t.nodeAfter,r),o++));for(var a=o;a<s;a++)x(i.child(a),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function C(t,e){if(!t.type.validContent(e))throw new d("Invalid content for node "+t.type.name);return t.copy(e)}function O(t,e,n,r,i){var o=t.depth>i&&S(t,e,i+1),s=r.depth>i&&S(n,r,i+1),a=[];return _(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(k(o,s),x(C(o,O(t,e,n,r,i+1)),a)):(o&&x(C(o,E(t,e,i+1)),a),_(e,n,i,a),s&&x(C(s,E(n,r,i+1)),a)),_(r,null,i,a),new c(a)}function E(t,e,n){var r=[];if(_(null,t,n,r),t.depth>n){var i=S(t,e,n+1);x(C(i,E(t,e,n+1)),r)}return _(e,null,n,r),new c(r)}function A(t,e){for(var n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content),o=n-1;o>=0;o--)i=e.node(o).copy(c.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}g.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(t,e){var n=y(this.content,t+this.openStart,e,null);return n&&new m(n,this.openStart,this.openEnd)},m.prototype.removeBetween=function(t,e){return new m(v(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},m.fromJSON=function(t,e){if(!e)return m.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new m(c.fromJSON(t,e.content),n,r)},m.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new m(t,n,r)},Object.defineProperties(m.prototype,g),m.empty=new m(c.empty,0,0);var M=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},T={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};M.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},T.parent.get=function(){return this.node(this.depth)},T.doc.get=function(){return this.node(0)},M.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},M.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},M.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},M.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},M.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},M.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},M.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},T.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},T.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},T.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},M.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r},M.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},M.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},M.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},M.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new N(this,t,n)},M.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},M.prototype.max=function(t){return t.pos>this.pos?t:this},M.prototype.min=function(t){return t.pos<this.pos?t:this},M.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},M.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,u=i-c;if(n.push(o,a,r+c),!u)break;if(o=o.child(a),o.isText)break;i=u-1,r+=c+1}return new M(e,n,i)},M.resolveCached=function(t,e){for(var n=0;n<R.length;n++){var r=R[n];if(r.pos==e&&r.doc==t)return r}var i=R[I]=M.resolve(t,e);return I=(I+1)%D,i},Object.defineProperties(M.prototype,T);var R=[],I=0,D=12,N=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},j={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};j.start.get=function(){return this.$from.before(this.depth+1)},j.end.get=function(){return this.$to.after(this.depth+1)},j.parent.get=function(){return this.$from.node(this.depth)},j.startIndex.get=function(){return this.$from.index(this.depth)},j.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(N.prototype,j);var P=Object.create(null),L=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||c.empty,this.marks=r||p.none},F={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};F.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},F.childCount.get=function(){return this.content.childCount},L.prototype.child=function(t){return this.content.child(t)},L.prototype.maybeChild=function(t){return this.content.maybeChild(t)},L.prototype.forEach=function(t){this.content.forEach(t)},L.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},L.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},F.textContent.get=function(){return this.textBetween(0,this.content.size,"")},L.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},F.firstChild.get=function(){return this.content.firstChild},F.lastChild.get=function(){return this.content.lastChild},L.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},L.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},L.prototype.hasMarkup=function(t,e,n){return this.type==t&&f(this.attrs,e||t.defaultAttrs||P)&&p.sameSet(this.marks,n||p.none)},L.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},L.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},L.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},L.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return m.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new m(c,r.depth-o,i.depth-o)},L.prototype.replace=function(t,e,n){return b(this.resolve(t),this.resolve(e),n)},L.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}},L.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},L.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},L.prototype.resolve=function(t){return M.resolveCached(this,t)},L.prototype.resolveNoCache=function(t){return M.resolve(this,t)},L.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},F.isBlock.get=function(){return this.type.isBlock},F.isTextblock.get=function(){return this.type.isTextblock},F.inlineContent.get=function(){return this.type.inlineContent},F.isInline.get=function(){return this.type.isInline},F.isText.get=function(){return this.type.isText},F.isLeaf.get=function(){return this.type.isLeaf},F.isAtom.get=function(){return this.type.isAtom},L.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),z(this.marks,t)},L.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},L.prototype.canReplace=function(t,e,n,r,i){void 0===n&&(n=c.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},L.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},L.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},L.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=p.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!p.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},L.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},L.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=c.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(L.prototype,F);var B=function(t){function e(e,n,r,i){if(t.call(this,e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(L);function z(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var $=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},U={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};$.parse=function(t,e){var n=new H(t,e);if(null==n.next)return $.empty;var r=W(n);n.next&&n.err("Unexpected trailing text");var i=et(Q(r));return nt(i,n),i},$.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},$.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},U.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},U.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},$.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},$.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return c.from(s.map((function(t){return t.createAndFill()})));for(var u=0;u<o.next.length;u+=2){var l=o.next[u],h=o.next[u+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var f=i(h,s.concat(l));if(f)return f}}}return i(this,[])},$.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},$.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},U.edgeCount.get=function(){return this.next.length>>1},$.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},$.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r})).join("\n")},Object.defineProperties($.prototype,U),$.empty=new $(!0);var H=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},V={next:{configurable:!0}};function W(t){var e=[];do{e.push(q(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function q(t){var e=[];do{e.push(J(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function J(t){for(var e=X(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Y(t,e)}return e}function K(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Y(t,e){var n=K(t),r=n;return t.eat(",")&&(r="}"!=t.next?K(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function G(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function X(t){if(t.eat("(")){var e=W(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=G(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Q(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),i(o(t.expr,c),c),[r(c)]}if("plus"==t.type){var u=n();return i(o(t.expr,e),u),i(o(t.expr,u),u),[r(u)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var l=e,h=0;h<t.min;h++){var f=n();i(o(t.expr,l),f),l=f}if(-1==t.max)i(o(t.expr,l),l);else for(var p=t.min;p<t.max;p++){var d=n();r(l,d),i(o(t.expr,l),d),l=d}return[r(l)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Z(t,e){return e-t}function tt(t,e){var n=[];return r(e),n.sort(Z);function r(e){var i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function et(t){var e=Object.create(null);return n(tt(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];tt(t,r).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new $(r.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Z);o.next.push(i[s],e[a.join(",")]||n(a))}return o}}function nt(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],u=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(u)&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function it(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function ot(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new ct(t[n]);return e}V.next.get=function(){return this.tokens[this.pos]},H.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},H.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(H.prototype,V);var st=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=ot(n.attrs),this.defaultAttrs=rt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},at={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};at.isInline.get=function(){return!this.isBlock},at.isTextblock.get=function(){return this.isBlock&&this.inlineContent},at.isLeaf.get=function(){return this.contentMatch==$.empty},at.isAtom.get=function(){return this.isLeaf||this.spec.atom},st.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},st.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},st.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:it(this.attrs,t)},st.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new L(this,this.computeAttrs(t),c.from(e),p.setFrom(n))},st.prototype.createChecked=function(t,e,n){if(e=c.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new L(this,this.computeAttrs(t),e,p.setFrom(n))},st.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=c.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(c.empty,!0);return i?new L(this,t,e.append(i),p.setFrom(n)):null},st.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},st.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},st.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},st.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},st.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new st(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(st.prototype,at);var ct=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ut={isRequired:{configurable:!0}};ut.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(ct.prototype,ut);var lt=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=ot(r.attrs),this.rank=e,this.excluded=null;var i=rt(this.attrs);this.instance=i&&new p(this,i)};lt.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,it(this.attrs,t))},lt.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,i){return n[t]=new lt(t,r++,e,i)})),n},lt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},lt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},lt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var ht=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=st.compile(this.spec.nodes,this),this.marks=lt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=$.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?ft(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],l=u.spec.excludes;u.excluded=null==l?[u]:""==l?[]:ft(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ft(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var c=t.marks[a];("_"==i||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}ht.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof st))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},ht.prototype.text=function(t,e){var n=this.nodes.text;return new B(n,n.defaultAttrs,t,p.setFrom(e))},ht.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},ht.prototype.nodeFromJSON=function(t){return L.fromJSON(this,t)},ht.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},ht.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var pt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};pt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new St(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},pt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new St(this,e,!0);return n.addAll(t,null,e.from,e.to),m.maxOpen(n.finish())},pt.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var i=this.tags[r];if(Ct(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){var o=i.getAttrs(t);if(!1===o)continue;i.attrs=o}return i}}},pt.prototype.matchStyle=function(t,e,n,r){for(var i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){var o=this.styles[i];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var s=o.getAttrs(e);if(!1===s)continue;o.attrs=s}return o}}},pt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r],o=null==i.priority?50:i.priority;if(o<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Et(t)),t.mark=e}))};for(var i in t.marks)r(i);var o=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=Et(t)),t.node=s}))};for(var s in t.nodes)o();return e},pt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new pt(t,pt.schemaRules(t)))};var dt={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},mt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},gt={ol:!0,ul:!0},vt=1,yt=2,bt=4;function wt(t){return(t?vt:0)|("full"===t?yt:0)}var kt=function(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.solid=i,this.match=o||(s&bt?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=p.none,this.pendingMarks=r,this.stashMarks=[]};kt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(c.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},kt.prototype.finish=function(t){if(!(this.options&vt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=c.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},kt.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},kt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):At(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},kt.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!dt.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var St=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,i=e.topNode,o=wt(e.preserveWhitespace)|(n?bt:0);r=i?new kt(i.type,i.attrs,p.none,p.none,!0,e.topMatch||i.type.contentMatch,o):new kt(n?null:t.schema.topNodeType,null,p.none,p.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},xt={top:{configurable:!0},currentPos:{configurable:!0}};function _t(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&gt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Ct(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ot(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Et(t){var e={};for(var n in t)e[n]=t[n];return e}function At(t,e){var n=e.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),i=r.type,a=r.next;if(i==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function Mt(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}xt.top.get=function(){return this.nodes[this.open]},St.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(Ot(e)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},St.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.options&yt||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&vt)e=n.options&yt?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},St.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();gt.hasOwnProperty(r)&&this.parser.normalizeLists&&_t(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:mt.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(dt.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:null)},St.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},St.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},St.prototype.readStyles=function(t){var e=p.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(t[n],t[n+1],this,r);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;r=i}return e},St.prototype.addElementByRule=function(t,e,n){var r,i,o,s,a=this;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],s=o.create(e.attrs),this.addPendingMark(s));var c=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var u=e.contentElement;"string"==typeof u?u=t.querySelector(u):"function"==typeof u&&(u=u(t)),u||(u=t),this.findAround(t,u,!0),this.addAll(u,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},St.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&dt.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},St.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},St.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},St.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},St.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var o=null==r?i.options&~bt:wt(r);i.options&bt&&0==i.content.length&&(o|=bt),this.nodes.push(new kt(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},St.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},St.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},St.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},xt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},St.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},St.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},St.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var i=e.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}},St.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},St.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var u=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},St.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},St.prototype.addPendingMark=function(t){var e=Mt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},St.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(St.prototype,xt);var Tt=function(t,e){this.nodes=t||{},this.marks=e||{}};function Rt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function It(t){return t.document||window.document}Tt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=It(e).createDocumentFragment());var i=n,o=null;return t.forEach((function(t){if(o||t.marks.length){o||(o=[]);var n=0,s=0;while(n<o.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<o.length)i=o.pop(),o.pop();while(s<t.marks.length){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(o.push(c,i),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(r.serializeNodeInner(t,e))})),n},Tt.prototype.serializeNodeInner=function(t,e){void 0===e&&(e={});var n=Tt.renderSpec(It(e),this.nodes[t.type.name](t)),r=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return r},Tt.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},Tt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Tt.renderSpec(It(n),r(t,e))},Tt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],i=r.indexOf(" ");i>0&&(n=r.slice(0,i),r=r.slice(i+1));var o=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var u in c=2,a)if(null!=a[u]){var l=u.indexOf(" ");l>0?s.setAttributeNS(u.slice(0,l),u.slice(l+1),a[u]):s.setAttribute(u,a[u])}for(var h=c;h<e.length;h++){var f=e[h];if(0===f){if(h<e.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=Tt.renderSpec(t,f,n),d=p.dom,m=p.contentDOM;if(s.appendChild(d),m){if(o)throw new RangeError("Multiple content holes");o=m}}return{dom:s,contentDOM:o}},Tt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Tt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Tt.nodesFromSchema=function(t){var e=Rt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Tt.marksFromSchema=function(t){return Rt(t.marks)}},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),s=o("iterator");t.exports=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||i[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),s=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=s(e),a=r.length,c=0;while(a>c)i.f(t,n=r[c++],e[n]);return t}},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("577e"),o=n("69f3"),s=n("7dd0"),a="String Iterator",c=o.set,u=o.getterFor(a);s(String,"String",(function(t){c(this,{type:a,string:i(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"3edb":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}}},"3f8c":function(t,e){t.exports={}},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,e,n){var r=n("da84");t.exports=r},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},4377:function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"doc",topNode:!0,content:"block+"});e["a"]=i},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),s=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},4674:function(t,e,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^\s*>\s$/gm,s=r["d"].create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn("blockquote"),toggleBlockquote:()=>({commands:t})=>t.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:t})=>t.lift("blockquote")}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Object(i["e"])(o,this.type)]}});e["a"]=s},4795:function(t,e,n){var r=n("23e7"),i=n("da84"),o=n("342f"),s=[].slice,a=/MSIE .\./.test(o),c=function(t){return function(e,n){var r=arguments.length>2,i=r?s.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:a},{setTimeout:c(i.setTimeout),setInterval:c(i.setInterval)})},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),s=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[s])?e:i(n)}},"485a":function(t,e,n){var r=n("861d");t.exports=function(t,e){var n,i;if("string"===e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if("string"!==e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},4930:function(t,e,n){var r=n("2d00"),i=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4976:function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"tableCell",defaultOptions:{HTMLAttributes:{}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth"),n=e?[parseInt(e,10)]:null;return{colwidth:n}}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Object(r["m"])(this.options.HTMLAttributes,t),0]}});e["a"]=i},"498a":function(t,e,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4aa6":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=()=>new Set},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),s=function(t){return function(e,n,s){var a,c=r(e),u=i(c.length),l=o(s,u);if(t&&n!=n){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),s=o("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),o=n("9bdd"),s=n("e95a"),a=n("50c4"),c=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,h,f,p,d=i(t),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,b=u(d),w=0;if(y&&(v=r(v,g>2?arguments[2]:void 0,2)),void 0==b||m==Array&&s(b))for(e=a(d.length),n=new m(e);e>w;w++)p=y?v(d[w],w):d[w],c(n,w,p);else for(h=b.call(d),f=h.next,n=new m;!(l=f.call(h)).done;w++)p=y?o(h,v,[l.value,w],!0):l.value,c(n,w,p);return n.length=w,n}},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e,n){var r=n("7b0b"),i={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return i.call(r(t),e)}},5313:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return I})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return u}));var r=n("304a"),i=n("0ac0"),o=Object.create(null),s=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r["j"].empty);for(var n=e.content.lastChild,i=null,o=0;o<e.openEnd;o++)i=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var u=a[c],l=u.$from,h=u.$to,f=t.mapping.slice(s);t.replaceRange(f.map(l.pos),f.map(h.pos),c?r["j"].empty:e),0==c&&g(t,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=t.mapping.slice(n),u=c.map(s.pos),l=c.map(a.pos);i?t.deleteRange(u,l):(t.replaceRangeWith(u,l,e),g(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new u(t):m(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var i=t.depth-1;i>=0;i--){var o=e<0?m(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):m(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(o)return o}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new p(t.node(0))},s.atStart=function(t){return m(t,t,0,0,1)||new p(t)},s.atEnd=function(t){return m(t,t,t.content.size,t.childCount,-1)||new p(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=o[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return u.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},u=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return t.near(i);var o=n.resolve(r.map(this.anchor));return new e(o.parent.inlineContent?o:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r["j"].empty),t.prototype.replace.call(this,e,n),n==r["j"].empty){var i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new l(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,i,!0)||t.findFrom(r,-i,!0);if(!s)return t.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor,n.pos<r.pos!=o<0&&(n=r))),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",u);var l=function(t,e){this.anchor=t,this.head=e};l.prototype.map=function(t){return new l(t.map(this.anchor),t.map(this.head))},l.prototype.resolve=function(t){return u.between(t.resolve(this.anchor),t.resolve(this.head))};var h=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new r["j"](r["c"].from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new f(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);h.prototype.visible=!1,s.jsonID("node",h);var f=function(t){this.anchor=t};f.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new l(r,r):new f(r)},f.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&h.isSelectable(n)?new h(e):s.near(e)};var p=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r["j"].empty),n==r["j"].empty){e.delete(0,e.doc.content.size);var i=t.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return d},e}(s);s.jsonID("all",p);var d={map:function(){return this},resolve:function(t){return new p(t)}};function m(t,e,n,r,i,o){if(e.inlineContent)return u.create(t,n);for(var s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&h.isSelectable(a))return h.create(t,n-(i<0?a.nodeSize:0))}else{var c=m(t,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function g(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o=t.steps[r];if(o instanceof i["c"]||o instanceof i["b"]){var a,c=t.mapping.maps[r];c.forEach((function(t,e,n,r){null==a&&(a=r)})),t.setSelection(s.near(t.doc.resolve(a),n))}}}var v=1,y=2,b=4,w=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|v)&~y,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&v)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=y,this},e.prototype.ensureMarks=function(t){return r["d"].sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&y)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~y,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r["d"].none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(e);i=n==e?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=b,this},n.scrolledIntoView.get=function(){return(this.updated&b)>0},Object.defineProperties(e.prototype,n),e}(i["d"]);function k(t,e){return e&&t?t.bind(e):t}var S=function(t,e,n){this.name=t,this.init=k(e.init,n),this.apply=k(e.apply,n)},x=[new S("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new S("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new S("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new S("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],_=function(t,e){var n=this;this.schema=t,this.fields=x.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new S(t.key,t.spec.state,t))}))},C=function(t){this.config=t},O={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};O.schema.get=function(){return this.config.schema},O.plugins.get=function(){return this.config.plugins},C.prototype.apply=function(t){return this.applyTransaction(t).state},C.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},C.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,u=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<o?{state:n,n:e.length}:{state:this,n:0})}e.push(u),n=n.applyInner(u),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},C.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new C(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}for(var o=0;o<E.length;o++)E[o](this,t,e);return e},O.tr.get=function(){return new w(this)},C.create=function(t){for(var e=new _(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new C(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},C.prototype.reconfigure=function(t){for(var e=new _(this.schema,t.plugins),n=e.fields,r=new C(e),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(t,r)}return r},C.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e},C.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var i=new _(t.schema,t.plugins),o=new C(i);return i.fields.forEach((function(i){if("doc"==i.name)o.doc=r["f"].fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],u=c.spec.state;if(c.key==i.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(o[i.name]=u.fromJSON.call(c,t,e[a],o))}o[i.name]=i.init(t,o)}})),o},C.addApplyListener=function(t){E.push(t)},C.removeApplyListener=function(t){var e=E.indexOf(t);e>-1&&E.splice(e,1)},Object.defineProperties(C.prototype,O);var E=[];function A(t,e,n){for(var r in t){var i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=A(i,e,{})),n[r]=i}return n}var M=function(t){this.props={},t.props&&A(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:R("plugin")};M.prototype.getState=function(t){return t[this.key]};var T=Object.create(null);function R(t){return t in T?t+"$"+ ++T[t]:(T[t]=0,t+"$")}var I=function(t){void 0===t&&(t="key"),this.key=R(t)};I.prototype.get=function(t){return t.config.pluginsByKey[this.key]},I.prototype.getState=function(t){return t[this.key]}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("4160"),n("159b"),n("dbb4"),n("1d1c"),n("7a82");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),s=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},"576a":function(t,e,n){"use strict";n.d(e,"a",(function(){return _n})),n.d(e,"b",(function(){return An})),n.d(e,"c",(function(){return $n}));var r=n("5313"),i=n("304a"),o=n("0ac0"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var l=s.ie=!!(c||u||a);s.ie_version=c?document.documentMode||6:u?+u[1]:a?+a[1]:null,s.gecko=!l&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var h=!l&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!h,s.chrome_version=h&&+h[1],s.safari=!l&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var f=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},p=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},d=null,m=function(t,e,n){var r=d||(d=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},g=function(t,e,n,r){return n&&(y(t,e,n,r,-1)||y(t,e,n,r,1))},v=/^(img|br|input|textarea|hr)$/i;function y(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:b(t))){var o=t.parentNode;if(1!=o.nodeType||k(t)||v.test(t.nodeName)||"false"==t.contentEditable)return!1;e=f(t)+(i<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(i<0?-1:0)],"false"==t.contentEditable)return!1;e=i<0?b(t):0}}}function b(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function w(t,e,n){for(var r=0==e,i=e==b(t);r||i;){if(t==n)return!0;var o=f(t);if(t=t.parentNode,!t)return!1;r=r&&0==o,i=i&&o==b(t)}}function k(t){for(var e,n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var S=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function x(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function C(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function O(t,e){return"number"==typeof t?t:t[e]}function E(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function A(t,e,n){for(var r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument,s=n||t.dom;;s=p(s)){if(!s)break;if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,c=a?C(o):E(s),u=0,l=0;if(e.top<c.top+O(r,"top")?l=-(c.top-e.top+O(i,"top")):e.bottom>c.bottom-O(r,"bottom")&&(l=e.bottom-c.bottom+O(i,"bottom")),e.left<c.left+O(r,"left")?u=-(c.left-e.left+O(i,"left")):e.right>c.right-O(r,"right")&&(u=e.right-c.right+O(i,"right")),u||l)if(a)o.defaultView.scrollBy(u,l);else{var h=s.scrollLeft,f=s.scrollTop;l&&(s.scrollTop+=l),u&&(s.scrollLeft+=u);var d=s.scrollLeft-h,m=s.scrollTop-f;e={left:e.left-d,top:e.top-m,right:e.right-d,bottom:e.bottom-m}}if(a)break}}}function M(t){for(var e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(o,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:T(t.dom)}}function T(t){for(var e=[],n=t.ownerDocument;t;t=p(t))if(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t==n)break;return e}function R(t){var e=t.refDOM,n=t.refTop,r=t.stack,i=e?e.getBoundingClientRect().top:0;I(r,0==i?0:i-n)}function I(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var D=null;function N(t){if(t.setActive)return t.setActive();if(D)return t.focus(D);var e=T(t);t.focus(null==D?{get preventScroll(){return D={preventScroll:!0},!0}}:void 0),D||(D=!1,I(e,0))}function j(t,e){for(var n,r,i=2e8,o=0,s=e.top,a=e.top,c=t.firstChild,u=0;c;c=c.nextSibling,u++){var l=void 0;if(1==c.nodeType)l=c.getClientRects();else{if(3!=c.nodeType)continue;l=m(c).getClientRects()}for(var h=0;h<l.length;h++){var f=l[h];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var p=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(p<i){n=c,i=p,r=p&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==c.nodeType&&p&&(o=u+(e.left>=(f.left+f.right)/2?1:0));continue}}!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(o=u+1)}}return n&&3==n.nodeType?P(n,r):!n||i&&1==n.nodeType?{node:t,offset:o}:j(n,r)}function P(t,e){for(var n=t.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);var o=H(r,1);if(o.top!=o.bottom&&L(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function L(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function F(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function B(t,e,n){var r=j(e,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,o,s)}function z(t,e,n,r){for(var i=-1,o=e;;){if(o==t.dom)break;var s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n)}function $(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){var s=t.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var u=a[c];if(L(e,u))return $(s,e,u)}if((o=(o+1)%r)==i)break}return t}function U(t,e){var n,r,i,o,a=t.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(e.left,e.top);c&&(n=c,i=n.offsetNode,o=n.offset)}catch(_){}if(!i&&a.caretRangeFromPoint){var u=a.caretRangeFromPoint(e.left,e.top);u&&(r=u,i=r.startContainer,o=r.startOffset)}var l,h=a.elementFromPoint(e.left,e.top+1);if(!h||!t.dom.contains(1!=h.nodeType?h.parentNode:h)){var f=t.dom.getBoundingClientRect();if(!L(e,f))return null;if(h=$(t.dom,e,f),!h)return null}if(s.safari)for(var d=h;i&&d;d=p(d))d.draggable&&(i=o=null);if(h=F(h,e),i){if(s.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){var m,g=i.childNodes[o];"IMG"==g.nodeName&&(m=g.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&o++}i==t.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(l=z(t,i,o,e))}null==l&&(l=B(t,h,e));var v=t.docView.nearestDesc(h,!0);return{pos:l,inside:v?v.posAtStart-v.border:-1}}function H(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}var V=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function W(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),i=r.node,o=r.offset,a=s.webkit||s.gecko;if(3==i.nodeType){if(!a||!V.test(i.nodeValue)&&(n<0?o:o!=i.nodeValue.length)){var c=o,u=o,l=n<0?1:-1;return n<0&&!o?(u++,l=-1):n>=0&&o==i.nodeValue.length?(c--,l=1):n<0?c--:u++,q(H(m(i,c,u),l),l<0)}var h=H(m(i,o,o),n);if(s.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var f=H(m(i,o-1,o-1),-1);if(f.top==h.top){var p=H(m(i,o,o+1),-1);if(p.top!=h.top)return q(p,p.left<f.left)}}return h}if(!t.state.doc.resolve(e).parent.inlineContent){if(o&&(n<0||o==b(i))){var d=i.childNodes[o-1];if(1==d.nodeType)return J(d.getBoundingClientRect(),!1)}if(o<b(i)){var g=i.childNodes[o];if(1==g.nodeType)return J(g.getBoundingClientRect(),!0)}return J(i.getBoundingClientRect(),n>=0)}if(o&&(n<0||o==b(i))){var v=i.childNodes[o-1],y=3==v.nodeType?m(v,b(v)-(a?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(y)return q(H(y,1),!1)}if(o<b(i)){var w=i.childNodes[o],k=3==w.nodeType?m(w,0,a?0:1):1==w.nodeType?w:null;if(k)return q(H(k,-1),!0)}return q(H(3==i.nodeType?m(i):i,-n),n>=0)}function q(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function J(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function K(t,e,n){var r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function Y(t,e,n){var r=e.selection,i="up"==n?r.$from:r.$to;return K(t,e,(function(){for(var e=t.docView.domFromPos(i.pos,"up"==n?-1:1),r=e.node;;){var o=t.docView.nearestDesc(r,!0);if(!o)break;if(o.node.isBlock){r=o.dom;break}r=o.dom.parentNode}for(var s=W(t,i.pos,1),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=m(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<c.length;u++){var l=c[u];if(l.bottom>l.top&&("up"==n?l.bottom<s.top+1:l.top>s.bottom-1))return!1}}return!0}))}var G=/[\u0590-\u08ac]/;function X(t,e,n){var r=e.selection,i=r.$head;if(!i.parent.isTextblock)return!1;var o=i.parentOffset,s=!o,a=o==i.parent.content.size,c=getSelection();return G.test(i.parent.textContent)&&c.modify?K(t,e,(function(){var e=c.getRangeAt(0),r=c.focusNode,o=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=i.depth?t.docView.domAfterPos(i.before()):t.dom,u=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&o==c.focusOffset;return c.removeAllRanges(),c.addRange(e),null!=s&&(c.caretBidiLevel=s),u})):"left"==n||"backward"==n?s:a}var Q=null,Z=null,tt=!1;function et(t,e,n){return Q==e&&Z==n?tt:(Q=e,Z=n,tt="up"==n||"down"==n?Y(t,e,n):X(t,e,n))}var nt=0,rt=1,it=2,ot=3,st=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=nt},at={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};st.prototype.matchesWidget=function(){return!1},st.prototype.matchesMark=function(){return!1},st.prototype.matchesNode=function(){return!1},st.prototype.matchesHack=function(t){return!1},at.beforePosition.get=function(){return!1},st.prototype.parseRule=function(){return null},st.prototype.stopEvent=function(){return!1},at.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},at.border.get=function(){return 0},st.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},st.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},at.posBefore.get=function(){return this.parent.posBeforeChild(this)},at.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},at.posAfter.get=function(){return this.posBefore+this.size},at.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},st.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,i;if(t==this.contentDOM)r=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;r=t.previousSibling}while(r&&(!(i=r.pmViewDesc)||i.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(t==this.contentDOM)o=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;o=t.nextSibling}while(o&&(!(s=o.pmViewDesc)||s.parent!=this))o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>f(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var u=t;;u=u.parentNode){if(u==this.dom){a=!0;break}if(u.parentNode.lastChild!=u)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},st.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!e||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==t.nodeType?t:t.parentNode):i.nodeDOM==t))return i;n=!1}}},st.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},st.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1},st.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],i=n+r.size;if(n==t&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}},st.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,i=!0;;r++,i=!1){while(r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM))n+=this.children[r++].size;var o=r==this.children.length?null:this.children[r];if(n==t&&(0==e||!o||!o.size||o.border||e<0&&i)||o&&o.domAtom&&t<n+o.size)return{node:this.contentDOM,offset:o?f(o.dom):this.contentDOM.childNodes.length};if(!o)throw new Error("Invalid position "+t);var s=n+o.size;if(!o.domAtom&&(e<0&&!o.border?s>=t:s>t)&&(s>t||r+1>=this.children.length||!this.children[r+1].beforePosition))return o.domFromPos(t-n-o.border,e);n=s}},st.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&t<=c){var u=o+a.border;if(t>=u&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,u);t=o;for(var l=s;l>0;l--){var h=this.children[l-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=f(h.dom)+1;break}t-=h.size}-1==r&&(r=0)}if(r>-1&&(c>e||s==this.children.length-1)){e=c;for(var p=s+1;p<this.children.length;p++){var d=this.children[p];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=f(d.dom);break}e+=d.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}},st.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},st.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},st.prototype.setSelection=function(t,e,n,r){for(var i=Math.min(t,e),o=Math.max(t,e),a=0,c=0;a<this.children.length;a++){var u=this.children[a],l=c+u.size;if(i>c&&o<l)return u.setSelection(t-c-u.border,e-c-u.border,n,r);c=l}var h=this.domFromPos(t,t?-1:1),p=e==t?h:this.domFromPos(e,e?-1:1),d=n.getSelection(),m=!1;if((s.gecko||s.safari)&&t==e){var v=h.node,y=h.offset;if(3==v.nodeType){if(m=y&&"\n"==v.nodeValue[y-1],m&&y==v.nodeValue.length)for(var b=v,w=void 0;b;b=b.parentNode){if(w=b.nextSibling){"BR"==w.nodeName&&(h=p={node:w.parentNode,offset:f(w)+1});break}var k=b.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{var S=v.childNodes[y-1];m=S&&("BR"==S.nodeName||"false"==S.contentEditable)}}if(s.gecko&&d.focusNode&&d.focusNode!=p.node&&1==d.focusNode.nodeType){var x=d.focusNode.childNodes[d.focusOffset];x&&"false"==x.contentEditable&&(r=!0)}if(r||m&&s.safari||!g(h.node,h.offset,d.anchorNode,d.anchorOffset)||!g(p.node,p.offset,d.focusNode,d.focusOffset)){var _=!1;if((d.extend||t==e)&&!m){d.collapse(h.node,h.offset);try{t!=e&&d.extend(p.node,p.offset),_=!0}catch(E){if(!(E instanceof DOMException))throw E}}if(!_){if(t>e){var C=h;h=p,p=C}var O=document.createRange();O.setEnd(p.node,p.offset),O.setStart(h.node,h.offset),d.removeAllRanges(),d.addRange(O)}}},st.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},at.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},st.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){var s=n+i.border,a=o-i.border;if(t>=s&&e<=a)return this.dirty=t==n||e==o?it:rt,void(t!=s||e!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-s,e-s):i.dirty=ot);i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM?it:ot}n=o}this.dirty=it},st.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?it:rt;e.dirty<n&&(e.dirty=n)}},at.domAtom.get=function(){return!1},Object.defineProperties(st.prototype,at);var ct=[],ut=function(t){function e(e,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,ct,s,null),this.widget=n,o=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return this.dirty==nt&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(st),lt=function(t){function e(e,n,r,i){t.call(this,e,ct,n,null),this.textDOM=r,this.text=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(st),ht=function(t){function e(e,n,r,i){t.call(this,e,[],r,i),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i["b"].renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return this.dirty!=ot&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),this.dirty!=nt){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=nt}},e.prototype.slice=function(t,n,r){var i=e.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Dt(o,n,s,r)),t>0&&(o=Dt(o,0,t,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},e}(st),ft=function(t){function e(e,n,r,i,o,s,a,c,u){t.call(this,e,n.isLeaf?ct:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,u)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,n,r,o,s,a){var c,u,l=s.nodeViews[n.type.name],h=l&&l(n,s,(function(){return u?u.parent?u.parent.posBeforeChild(u):void 0:a}),r,o),f=h&&h.dom,p=h&&h.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(c=i["b"].renderSpec(document,n.type.spec.toDOM(n)),f=c.dom,p=c.contentDOM);p||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var d=f;return f=xt(f,r,n),h?u=new gt(t,n,r,o,f,p,d,h,s,a+1):n.isText?new dt(t,n,r,o,f,d,s):new e(t,n,r,o,f,p,d,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?i["c"].empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return this.dirty==nt&&t.eq(this.node)&&_t(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,o=e,a=t.composing&&this.localCompositionInfo(t,e),c=a&&a.pos>-1?a:null,u=a&&a.pos<0,l=new Ot(this,c&&c.node);Mt(this.node,this.innerDeco,(function(e,s,a){e.spec.marks?l.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&l.syncToMarks(s==n.node.childCount?i["d"].none:n.node.child(s).marks,r,t),l.placeWidget(e,t,o)}),(function(e,n,i,s){var c;l.syncToMarks(e.marks,r,t),l.findNodeMatch(e,n,i,s)||u&&t.state.selection.from>o&&t.state.selection.to<o+e.nodeSize&&(c=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(e,n,i,c,t)||l.updateNextNode(e,n,i,t,s)||l.addNode(e,n,i,t,o),o+=e.nodeSize})),l.syncToMarks(ct,r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==it)&&(c&&this.protectLocalComposition(t,c),vt(this.contentDOM,this.children,t),s.ios&&Tt(this.dom))},e.prototype.localCompositionInfo=function(t,e){var n=t.state.selection,i=n.from,o=n.to;if(!(!(t.state.selection instanceof r["h"])||i<e||o>e+this.node.content.size)){var s=t.root.getSelection(),a=Rt(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){if(this.node.inlineContent){var c=a.nodeValue,u=It(this.node.content,c,i-e,o-e);return u<0?null:{node:a,pos:u,text:c}}return{node:a,pos:-1}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,i=e.text;if(!this.getDesc(n)){for(var o=n;;o=o.parentNode){if(o.parentNode==this.contentDOM)break;while(o.previousSibling)o.parentNode.removeChild(o.previousSibling);while(o.nextSibling)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new lt(this,o,n,i);t.compositionNodes.push(s),this.children=Dt(this.children,r,r+i.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(this.dirty==ot||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=nt},e.prototype.updateOuterDeco=function(t){if(!_t(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=kt(this.dom,this.nodeDOM,wt(this.outerDeco,this.node,e),wt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,n),e}(st);function pt(t,e,n,r,i){return xt(r,e,t),new ft(null,t,e,n,r,r,r,i,0)}var dt=function(t){function e(e,n,r,i,o,s,a){t.call(this,e,n,r,i,o,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){var t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(this.dirty==ot||this.dirty!=nt&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==nt&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=nt,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var i=this.node.cut(t,n),o=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},e.prototype.markDirty=function(e,n){t.prototype.markDirty.call(this,e,n),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=ot)},n.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,n),e}(ft),mt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(t){return this.dirty==nt&&this.dom.nodeName==t},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(st),gt=function(t){function e(e,n,r,i,o,s,a,c,u,l){t.call(this,e,n,r,i,o,s,a,u,l),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,i){if(this.dirty==ot)return!1;if(this.spec.update){var o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,i)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,i)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(ft);function vt(t,e,n){for(var r=t.firstChild,i=!1,o=0;o<e.length;o++){var s=e[o],a=s.dom;if(a.parentNode==t){while(a!=r)r=Ct(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof ht){var c=r?r.previousSibling:t.lastChild;vt(s.contentDOM,s.children,n),r=c?c.nextSibling:t.firstChild}}while(r)r=Ct(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}function yt(t){t&&(this.nodeName=t)}yt.prototype=Object.create(null);var bt=[new yt];function wt(t,e,n){if(0==t.length)return bt;for(var r=n?bt[0]:new yt,i=[r],o=0;o<t.length;o++){var s=t[o].type.attrs;if(s)for(var a in s.nodeName&&i.push(r=new yt(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==i.length&&i.push(r=new yt(e.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return i}function kt(t,e,n,r){if(n==bt&&r==bt)return e;for(var i=e,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=t&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=bt[0]),i=c}St(i,a||bt[0],s)}return i}function St(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){for(var o=e.class?e.class.split(" ").filter(Boolean):ct,s=n.class?n.class.split(" ").filter(Boolean):ct,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&t.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style){var u,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(u=l.exec(e.style))t.style.removeProperty(u[1])}n.style&&(t.style.cssText+=n.style)}}function xt(t,e,n){return kt(t,t,bt,wt(e,n,1!=t.nodeType))}function _t(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ct(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Ot=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=Et(t.node.content,t.children)};function Et(t,e){for(var n=t.childCount,r=e.length,i=new Map;n>0&&r>0;r--){var o=e[r-1],s=o.node;if(s){if(s!=t.child(n-1))break;--n,i.set(o,n)}}return{index:n,matched:i}}function At(t,e){return t.type.side-e.type.side}function Mt(t,e,n,r){var i=e.locals(t),o=0;if(0!=i.length)for(var s=0,a=[],c=null,u=0;;){if(s<i.length&&i[s].to==o){var l=i[s++],h=void 0;while(s<i.length&&i[s].to==o)(h||(h=[l])).push(i[s++]);if(h){h.sort(At);for(var f=0;f<h.length;f++)n(h[f],u,!!c)}else n(l,u,!!c)}var p=void 0,d=void 0;if(c)d=-1,p=c,c=null;else{if(!(u<t.childCount))break;d=u,p=t.child(u++)}for(var m=0;m<a.length;m++)a[m].to<=o&&a.splice(m--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);var g=o+p.nodeSize;if(p.isText){var v=g;s<i.length&&i[s].from<v&&(v=i[s].from);for(var y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<g&&(c=p.cut(v-o),p=p.cut(0,v-o),g=v,d=-1)}var b=a.length?p.isInline&&!p.isLeaf?a.filter((function(t){return!t.inline})):a.slice():ct;r(p,b,e.forChild(o,p),d),o=g}else for(var w=0;w<t.childCount;w++){var k=t.child(w);r(k,i,e.forChild(o,k),w),o+=k.nodeSize}}function Tt(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Rt(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=b(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function It(t,e,n,r){for(var i=0,o=0;i<t.childCount&&o<=r;){var s=t.child(i++),a=o;if(o+=s.nodeSize,s.isText){var c=s.text;while(i<t.childCount){var u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;c+=u.text}if(o>=n){var l=c.lastIndexOf(e,r-a);if(l>=0&&l+e.length+a>=n)return a+l}}}return-1}function Dt(t,e,n,r,i){for(var o=[],s=0,a=0;s<t.length;s++){var c=t[s],u=a,l=a+=c.size;u>=n||l<=e?o.push(c):(u<e&&o.push(c.slice(0,e-u,r)),i&&(o.push(i),i=null),l>n&&o.push(c.slice(n-u,c.size,r)))}return o}function Nt(t,e){var n=t.root.getSelection(),i=t.state.doc;if(!n.focusNode)return null;var o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,u,l=i.resolve(a);if(S(n)){c=l;while(o&&!o.node)o=o.parent;if(o&&o.node.isAtom&&r["c"].isSelectable(o.node)&&o.parent&&(!o.node.isInline||!w(n.focusNode,n.focusOffset,o.dom))){var h=o.posBefore;u=new r["c"](a==h?l:i.resolve(h))}}else{var f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;c=i.resolve(f)}if(!u){var p="pointer"==e||t.state.selection.head<l.pos&&!s?1:-1;u=Wt(t,c,l,p)}return u}function jt(t){return t.editable?t.hasFocus():Jt(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Pt(t,e){var n=t.state.selection;if(Ht(t,n),jt(t)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)Ut(t);else{var i,o,s=n.anchor,a=n.head;!Lt||n instanceof r["h"]||(n.$from.parent.inlineContent||(i=Ft(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=Ft(t,n.to))),t.docView.setSelection(s,a,t.root,e),Lt&&(i&&zt(i),o&&zt(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$t(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}Ot.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},Ot.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Ot.prototype.syncToMarks=function(t,e,n){var r=0,i=this.stack.length>>1,o=Math.min(i,t.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=nt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<t.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ht.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},Ot.prototype.findNodeMatch=function(t,e,n,r){var i=this.top.children,o=-1;if(r>=this.preMatch.index){for(var s=this.index;s<i.length;s++)if(i[s].matchesNode(t,e,n)){o=s;break}}else for(var a=this.index,c=Math.min(i.length,a+1);a<c;a++){var u=i[a];if(u.matchesNode(t,e,n)&&!this.preMatch.matched.has(u)){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},Ot.prototype.updateNodeAt=function(t,e,n,r,i){var o=this.top.children[r];return!!o.update(t,e,n,i)&&(this.destroyBetween(this.index,r),this.index=r+1,!0)},Ot.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}t=e}},Ot.prototype.updateNextNode=function(t,e,n,r,i){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof ft){var a=this.preMatch.matched.get(s);if(null!=a&&a!=i)return!1;var c=s.dom,u=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=ot&&_t(e,s.outerDeco));if(!u&&s.update(t,e,n,r))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Ot.prototype.addNode=function(t,e,n,r,i){this.top.children.splice(this.index++,0,ft.create(this.top,t,e,n,r,i)),this.changed=!0},Ot.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var i=new ut(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++},Ot.prototype.addTextblockHacks=function(){var t=this.top.children[this.index-1];while(t instanceof ht)t=t.children[t.children.length-1];t&&t instanceof dt&&!/\n$/.test(t.node.text)||(s.safari&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Ot.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);this.top.children.splice(this.index++,0,new mt(this.top,ct,e,null)),this.changed=!0}};var Lt=s.safari||s.chrome&&s.chrome_version<63;function Ft(t,e){var n=t.docView.domFromPos(e,0),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(s.safari&&o&&"false"==o.contentEditable)return Bt(o);if((!o||"false"==o.contentEditable)&&(!a||"false"==a.contentEditable)){if(o)return Bt(o);if(a)return Bt(a)}}function Bt(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function zt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function $t(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){jt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Ut(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,f(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Ht(t,e){if(e instanceof r["c"]){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Vt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Vt(t)}function Vt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function Wt(t,e,n,i){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r["h"].between(e,n,i)}function qt(t){return(!t.editable||t.root.activeElement==t.dom)&&Jt(t)}function Jt(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(_){return!1}}function Kt(t){var e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.root.getSelection();return g(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Yt(t,e){var n=t.selection,i=n.$anchor,o=n.$head,s=e>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r["f"].findFrom(a,e)}function Gt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Xt(t,e,n){var i=t.state.selection;if(!(i instanceof r["h"])){if(i instanceof r["c"]&&i.node.isInline)return Gt(t,new r["h"](e>0?i.$to:i.$from));var o=Yt(t.state,e);return!!o&&Gt(t,o)}if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=Yt(t.state,e);return!!(a&&a instanceof r["c"])&&Gt(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,u=i.$head,l=u.textOffset?null:e<0?u.nodeBefore:u.nodeAfter;if(!l||l.isText)return!1;var h=e<0?u.pos-l.nodeSize:u.pos;return!!(l.isAtom||(c=t.docView.descAt(h))&&!c.contentDOM)&&(r["c"].isSelectable(l)?Gt(t,new r["c"](e<0?t.state.doc.resolve(u.pos-l.nodeSize):u)):!!s.webkit&&Gt(t,new r["h"](t.state.doc.resolve(e<0?h:h+l.nodeSize))))}}function Qt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Zt(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function te(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var i,o,a=!1;for(s.gecko&&1==n.nodeType&&r<Qt(n)&&Zt(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Zt(c))i=n,o=--r;else{if(3!=c.nodeType)break;n=c,r=n.nodeValue.length}}else{if(ne(n))break;var u=n.previousSibling;while(u&&Zt(u))i=n.parentNode,o=f(u),u=u.previousSibling;if(u)n=u,r=Qt(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}a?re(t,e,n,r):i&&re(t,e,i,o)}}function ee(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var i,o,s=Qt(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Zt(a))break;i=n,o=++r}else{if(ne(n))break;var c=n.nextSibling;while(c&&Zt(c))i=c.parentNode,o=f(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=Qt(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}i&&re(t,e,i,o)}}function ne(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function re(t,e,n,r){if(S(e)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),e.removeAllRanges(),e.addRange(i)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var o=t.state;setTimeout((function(){t.state==o&&Pt(t)}),50)}function ie(t,e,n){var i=t.state.selection;if(i instanceof r["h"]&&!i.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var o=i.$from,a=i.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=Yt(t.state,e);if(c&&c instanceof r["c"])return Gt(t,c)}if(!o.parent.inlineContent){var u=e<0?o:a,l=i instanceof r["a"]?r["f"].near(u,e):r["f"].findFrom(u,e);return!!l&&Gt(t,l)}return!1}function oe(t,e){if(!(t.state.selection instanceof r["h"]))return!0;var n=t.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),t.dispatch(c),!0}return!1}function se(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ae(t){if(s.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;se(t,i,!0),setTimeout((function(){return se(t,i,!1)}),20)}}}function ce(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function ue(t,e){var n=e.keyCode,r=ce(e);return 8==n||s.mac&&72==n&&"c"==r?oe(t,-1)||te(t):46==n||s.mac&&68==n&&"c"==r?oe(t,1)||ee(t):13==n||27==n||(37==n?Xt(t,-1,r)||te(t):39==n?Xt(t,1,r)||ee(t):38==n?ie(t,-1,r)||te(t):40==n?ae(t)||ie(t,1,r)||ee(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function le(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,a=r.fromOffset,c=r.toOffset,u=r.from,l=r.to,h=t.root.getSelection(),f=null,p=h.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(f=[{node:p,offset:h.anchorOffset}],S(h)||f.push({node:h.focusNode,offset:h.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var d=c;d>a;d--){var m=o.childNodes[d-1],g=m.pmViewDesc;if("BR"==m.nodeName&&!g){c=d;break}if(!g||g.size)break}var v=t.state.doc,y=t.someProp("domParser")||i["a"].fromSchema(t.state.schema),b=v.resolve(u),w=null,k=y.parse(o,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:f,ruleFromNode:he,context:b});if(f&&null!=f[0].pos){var x=f[0].pos,_=f[1]&&f[1].pos;null==_&&(_=x),w={anchor:x+u,head:_+u}}return{doc:k,sel:w,from:u,to:l}}function he(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function fe(t,e,n,i,o){if(e<0){var a=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,c=Nt(t,a);if(c&&!t.state.selection.eq(c)){var u=t.state.tr.setSelection(c);"pointer"==a?u.setMeta("pointer",!0):"key"==a&&u.scrollIntoView(),t.dispatch(u)}}else{var l=t.state.doc.resolve(e),h=l.sharedDepth(n);e=l.before(h+1),n=t.state.doc.resolve(n).after(h+1);var f=t.state.selection,p=le(t,e,n);if(s.chrome&&t.cursorWrapper&&p.sel&&p.sel.anchor==t.cursorWrapper.deco.from){var d=t.cursorWrapper.deco.type.toDOM.nextSibling,m=d&&d.nodeValue?d.nodeValue.length:1;p.sel={anchor:p.sel.anchor+m,head:p.sel.anchor+m}}var g,v,y=t.state.doc,b=y.slice(p.from,p.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(g=t.state.selection.to,v="end"):(g=t.state.selection.from,v="start"),t.lastKeyCode=null;var w=ve(b.content,p.doc.content,p.from,g,v);if(!w){if(!(i&&f instanceof r["h"]&&!f.empty&&f.$head.sameParent(f.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if((s.ios&&t.lastIOSEnter>Date.now()-225||s.android)&&o.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))return void(t.lastIOSEnter=0);if(p.sel){var k=pe(t,t.state.doc,p.sel);k&&!k.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(k))}return}w={start:f.from,endA:f.to,endB:f.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof r["h"]&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>p.from&&"  "==p.doc.textBetween(w.start-p.from-1,w.start-p.from+1)&&(w.start--,w.endA--,w.endB--);var S,_=p.doc.resolveNoCache(w.start-p.from),C=p.doc.resolveNoCache(w.endB-p.from),O=_.sameParent(C)&&_.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!O||o.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!O&&_.pos<p.doc.content.size&&(S=r["f"].findFrom(p.doc.resolve(_.pos+1),1,!0))&&S.head==C.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>w.start&&me(y,w.start,w.endA,_,C)&&t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.chrome&&s.android&&w.toB==w.from&&(t.lastAndroidDelete=Date.now()),s.android&&!O&&_.start()!=C.start()&&0==C.parentOffset&&_.depth==C.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==w.endA&&(w.endB-=2,C=p.doc.resolveNoCache(w.endB-p.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))}))}),20));var E,A,M,T,R=w.start,I=w.endA;if(O)if(_.pos==C.pos)s.ie&&s.ie_version<=11&&0==_.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Pt(t)}),20)),E=t.state.tr.delete(R,I),A=y.resolve(w.start).marksAcross(y.resolve(w.endA));else if(w.endA==w.endB&&(T=y.resolve(w.start))&&(M=de(_.parent.content.cut(_.parentOffset,C.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start()))))E=t.state.tr,"add"==M.type?E.addMark(R,I,M.mark):E.removeMark(R,I,M.mark);else if(_.parent.child(_.index()).isText&&_.index()==C.index()-(C.textOffset?0:1)){var D=_.parent.textBetween(_.parentOffset,C.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,R,I,D)})))return;E=t.state.tr.insertText(D,R,I)}if(E||(E=t.state.tr.replace(R,I,p.doc.slice(w.start-p.from,w.endB-p.from))),p.sel){var N=pe(t,E.doc,p.sel);N&&!(s.chrome&&s.android&&t.composing&&N.empty&&(w.start!=w.endB||t.lastAndroidDelete<Date.now()-100)&&(N.head==R||N.head==E.mapping.map(I)-1)||s.ie&&N.empty&&N.head==R)&&E.setSelection(N)}A&&E.ensureMarks(A),t.dispatch(E.scrollIntoView())}}}function pe(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Wt(t,e.resolve(n.anchor),e.resolve(n.head))}function de(t,e){for(var n,r,o,s=t.firstChild.marks,a=e.firstChild.marks,c=s,u=a,l=0;l<a.length;l++)c=a[l].removeFromSet(c);for(var h=0;h<s.length;h++)u=s[h].removeFromSet(u);if(1==c.length&&0==u.length)r=c[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=u.length)return null;r=u[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var f=[],p=0;p<e.childCount;p++)f.push(o(e.child(p)));if(i["c"].from(f).eq(t))return{mark:r,type:n}}function me(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||ge(r,!0,!1)<i.pos)return!1;var o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=t.resolve(ge(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||ge(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ge(t,e,n){var r=t.depth,i=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,i++,e=!1;if(n){var o=t.node(r).maybeChild(t.indexAfter(r));while(o&&!o.isLeaf)o=o.firstChild,i++}return i}function ve(t,e,n,r,i){var o=t.findDiffStart(e,n);if(null==o)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==i){var u=Math.max(0,o-Math.min(a,c));r-=a+u-o}if(a<o&&t.size<e.size){var l=r<=o&&r>=a?o-r:0;o-=l,c=o+(c-a),a=o}else if(c<o){var h=r<=o&&r>=c?o-r:0;o-=h,a=o+(a-c),c=o}return{start:o,endA:a,endB:c}}function ye(t,e){var n=[],r=e.content,o=e.openStart,s=e.openEnd;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||i["b"].fromSchema(t.state.schema),u=Ae(),l=u.createElement("div");l.appendChild(c.serializeFragment(r,{document:u}));var h,f=l.firstChild;while(f&&1==f.nodeType&&(h=Oe[f.nodeName.toLowerCase()])){for(var p=h.length-1;p>=0;p--){var d=u.createElement(h[p]);while(l.firstChild)d.appendChild(l.firstChild);l.appendChild(d)}f=l.firstChild}f&&1==f.nodeType&&f.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n));var m=t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:l,text:m}}function be(t,e,n,r,o){var a,c,u=o.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||u||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,u||r)})),u)return new i["j"](i["c"].from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0);var h=t.someProp("clipboardTextParser",(function(t){return t(e,o,r)}));if(h)c=h;else{var f=o.marks(),p=t.state,d=p.schema,m=i["b"].fromSchema(d);a=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){a.appendChild(document.createElement("p")).appendChild(m.serializeNode(d.text(t,f)))}))}}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),a=Me(n),s.webkit&&Te(a);var g=a&&a.querySelector("[data-pm-slice]"),v=g&&/^(\d+) (\d+) (.*)/.exec(g.getAttribute("data-pm-slice"));if(!c){var y=t.someProp("clipboardParser")||t.someProp("domParser")||i["a"].fromSchema(t.state.schema);c=y.parseSlice(a,{preserveWhitespace:!(!l&&!v),context:o})}return c=v?Re(Ce(c,+v[1],+v[2]),v[3]):i["j"].maxOpen(we(c.content,o),!1),t.someProp("transformPasted",(function(t){c=t(c)})),c}function we(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n),o=r.contentMatchAt(e.index(n)),s=void 0,a=[];if(t.forEach((function(t){if(a){var e,n=o.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&s.length&&Se(n,s,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=xe(a[a.length-1],s.length));var r=ke(t,n);a.push(r),o=o.matchType(r.type,r.attrs),s=n}}})),a)return{v:i["c"].from(a)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}function ke(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,i["c"].from(t));return t}function Se(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var s=Se(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));var a=r.contentMatchAt(r.childCount);if(a.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(i["c"].from(ke(n,t,o+1))))}}function xe(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,xe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(i["c"].empty,!0);return t.copy(n.append(r))}function _e(t,e,n,r,o,s){var a=e<0?t.firstChild:t.lastChild,c=a.content;return o<r-1&&(c=_e(c,e,n,r,o+1,s)),o>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i["c"].empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}function Ce(t,e,n){return e<t.openStart&&(t=new i["j"](_e(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new i["j"](_e(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Oe={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ee=null;function Ae(){return Ee||(Ee=document.implementation.createHTMLDocument("title"))}function Me(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Ae().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((n=i&&Oe[i[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join("")),r.innerHTML=t,n)for(var o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function Te(t){for(var e=t.querySelectorAll(s.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Re(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(l){return t}for(var o=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var u=r.nodes[n[c]];if(!u||u.hasRequiredAttrs())break;o=i["c"].from(u.create(n[c+1],o)),s++,a++}return new i["j"](o,s,a)}var Ie={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},De=s.ie&&s.ie_version<=11,Ne=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ne.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Ne.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var je=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Ne,De&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};je.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},je.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},je.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Ie),De&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},je.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}De&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},je.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},je.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},je.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},je.prototype.onSelectionChange=function(){if(qt(this.view)){if(this.suppressingSelectionUpdates)return Pt(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&g(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},je.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},je.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},je.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Jt(this.view)&&!this.ignoreSelectionChange(e),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var u=this.registerMutation(t[c],a);u&&(r=r<0?u.from:Math.min(u.from,r),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(o=!0))}if(s.gecko&&a.length>1){var l=a.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var h=l[0],f=l[1];h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),Le(this.view)),this.handleDOMChange(r,i,o,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||Pt(this.view),this.currentSelection.set(e))}},je.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var i=t.previousSibling,o=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var c=t.addedNodes[a],u=c.previousSibling,l=c.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(i=u),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(o=l)}var h=i&&i.parentNode==t.target?f(i)+1:0,p=n.localPosFromDOM(t.target,h,-1),d=o&&o.parentNode==t.target?f(o):t.target.childNodes.length,m=n.localPosFromDOM(t.target,d,1);return{from:p,to:m}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Pe=!1;function Le(t){Pe||(Pe=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Fe={},Be={};function ze(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new je(t,(function(e,n,r,i){return fe(t,e,n,r,i)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Fe[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!We(t,e)||Ve(t,e)||!t.editable&&e.type in Be||n(t,e)})};for(var n in Fe)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),He(t)}function $e(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Ue(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}function He(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Ve(t,e)})}))}function Ve(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function We(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function qe(t,e){Ve(t,e)||!Fe[e.type]||!t.editable&&e.type in Be||Fe[e.type](t,e)}function Je(t){return{left:t.clientX,top:t.clientY}}function Ke(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ye(t,e,n,r,i){if(-1==r)return!1;for(var o=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>o.depth?e(t,n,o.nodeAfter,o.before(r),i,!0):e(t,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Ge(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Xe(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&r["c"].isSelectable(i))&&(Ge(t,new r["c"](n),"pointer"),!0)}function Qe(t,e){if(-1==e)return!1;var n,i,o=t.state.selection;o instanceof r["c"]&&(n=o.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r["c"].isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(Ge(t,r["c"].create(t.state.doc,i),"pointer"),!0)}function Ze(t,e,n,r,i){return Ye(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(i?Qe(t,n):Xe(t,n))}function tn(t,e,n,r){return Ye(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function en(t,e,n,r){return Ye(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||nn(t,n,r)}function nn(t,e,n){if(0!=n.button)return!1;var i=t.state.doc;if(-1==e)return!!i.inlineContent&&(Ge(t,r["h"].create(i,0,i.content.size),"pointer"),!0);for(var o=i.resolve(e),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s),c=o.before(s);if(a.inlineContent)Ge(t,r["h"].create(i,c+1,c+1+a.content.size),"pointer");else{if(!r["c"].isSelectable(a))continue;Ge(t,r["c"].create(i,c),"pointer")}return!0}}function rn(t){return hn(t)}Be.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!an(t,e))if(229!=e.keyCode&&t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||ue(t,e)?e.preventDefault():$e(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Be.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Be.keypress=function(t,e){if(!(an(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r["h"])||!n.$from.sameParent(n.$to)){var i=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,i)}))||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),e.preventDefault()}}};var on=s.mac?"metaKey":"ctrlKey";Fe.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=rn(t),r=Date.now(),i="singleClick";r-t.lastClick.time<500&&Ke(e,t.lastClick)&&!e[on]&&("singleClick"==t.lastClick.type?i="doubleClick":"doubleClick"==t.lastClick.type&&(i="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:i};var o=t.posAtCoords(Je(e));o&&("singleClick"==i?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new sn(t,o,e,n)):("doubleClick"==i?tn:en)(t,o.pos,o.inside,e)?e.preventDefault():$e(t,"pointer"))};var sn=function(t,e,n,i){var o,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=i,this.selectNode=n[on],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),a=e.inside;else{var u=t.state.doc.resolve(e.pos);o=u.parent,a=u.depth?u.before():0}this.mightDrag=null;var l=i?null:n.target,h=l?t.docView.nearestDesc(l,!0):null;this.target=h?h.dom:null;var f=t.state,p=f.selection;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||p instanceof r["c"]&&p.from<=a&&p.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),$e(t,"pointer")};function an(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}sn.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},sn.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Je(t))),this.allowDefault||!e?$e(this.view,"pointer"):Ze(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r["h"])&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Ge(this.view,r["f"].near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):$e(this.view,"pointer")}},sn.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),$e(this.view,"pointer"),0==t.buttons&&this.done()},Fe.touchdown=function(t){rn(t),$e(t,"pointer")},Fe.contextmenu=function(t){return rn(t)};var cn=s.android?5e3:-1;function un(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return hn(t)}),e))}function ln(t){t.composing=!1;while(t.compositionNodes.length>0)t.compositionNodes.pop().markParentsDirty()}function hn(t,e){if(t.domObserver.forceFlush(),ln(t),e||t.docView.dirty){var n=Nt(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}function fn(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}Be.compositionstart=Be.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),hn(t,!0),t.markCursor=null;else if(hn(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}t.composing=!0}un(t,cn)},Be.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,un(t,20))};var pn=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function dn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function mn(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gn(t,r.value,null,e):gn(t,r.textContent,r.innerHTML,e)}),50)}}function gn(t,e,n,r){var o=be(t,e,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,o||i["j"].empty)})))return!0;if(!o)return!1;var s=dn(o),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Fe.copy=Be.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var i=pn?null:e.clipboardData,o=n.content(),s=ye(t,o),a=s.dom,c=s.text;i?(e.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):fn(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Be.paste=function(t,e){var n=pn?null:e.clipboardData;n&&gn(t,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():mn(t,e)};var vn=function(t,e){this.slice=t,this.move=e},yn=s.mac?"altKey":"ctrlKey";for(var bn in Fe.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var i=t.state.selection,o=i.empty?null:t.posAtCoords(Je(e));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r["c"]?i.to-1:i.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r["c"].create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);s&&s.node.type.spec.draggable&&s!=t.docView&&t.dispatch(t.state.tr.setSelection(r["c"].create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=ye(t,a),u=c.dom,l=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(pn?"Text":"text/html",u.innerHTML),e.dataTransfer.effectAllowed="copyMove",pn||e.dataTransfer.setData("text/plain",l),t.dragging=new vn(a,!e[yn])}},Fe.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},Be.dragover=Be.dragenter=function(t,e){return e.preventDefault()},Be.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(Je(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var c=n&&n.slice;c?t.someProp("transformPasted",(function(t){c=t(c)})):c=be(t,e.dataTransfer.getData(pn?"Text":"text/plain"),pn?null:e.dataTransfer.getData("text/html"),!1,a);var u=n&&!e[yn];if(t.someProp("handleDrop",(function(n){return n(t,e,c||i["j"].empty,u)})))e.preventDefault();else if(c){e.preventDefault();var l=c?Object(o["g"])(t.state.doc,a.pos,c):a.pos;null==l&&(l=a.pos);var h=t.state.tr;u&&h.deleteSelection();var f=h.mapping.map(l),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,d=h.doc;if(p?h.replaceRangeWith(f,f,c.content.firstChild):h.replaceRange(f,f,c),!h.doc.eq(d)){var m=h.doc.resolve(f);if(p&&r["c"].isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new r["c"](m));else{var g=h.mapping.map(l);h.mapping.maps[h.mapping.maps.length-1].forEach((function(t,e,n,r){return g=r})),h.setSelection(Wt(t,m,h.doc.resolve(g)))}t.focus(),t.dispatch(h.setMeta("uiEvent","drop"))}}}}}},Fe.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&Pt(t)}),20))},Fe.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Fe.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))){var e=t.state.selection,r=e.$cursor;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},Be)Fe[bn]=Be[bn];function wn(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var kn=function(t,e){this.spec=e||En,this.side=this.spec.side||0,this.toDOM=t};kn.prototype.map=function(t,e,n,r){var i=t.mapResult(e.from+r,this.side<0?-1:1),o=i.pos,s=i.deleted;return s?null:new _n(o-n,o-n,this)},kn.prototype.valid=function(){return!0},kn.prototype.eq=function(t){return this==t||t instanceof kn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&wn(this.spec,t.spec))};var Sn=function(t,e){this.spec=e||En,this.attrs=t};Sn.prototype.map=function(t,e,n,r){var i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new _n(i,o,this)},Sn.prototype.valid=function(t,e){return e.from<e.to},Sn.prototype.eq=function(t){return this==t||t instanceof Sn&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)},Sn.is=function(t){return t.type instanceof Sn};var xn=function(t,e){this.spec=e||En,this.attrs=t};xn.prototype.map=function(t,e,n,r){var i=t.mapResult(e.from+r,1);if(i.deleted)return null;var o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new _n(i.pos-n,o.pos-n,this)},xn.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,i=n.offset;return i==e.from&&i+t.child(r).nodeSize==e.to},xn.prototype.eq=function(t){return this==t||t instanceof xn&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)};var _n=function(t,e,n){this.from=t,this.to=e,this.type=n},Cn={spec:{configurable:!0},inline:{configurable:!0}};_n.prototype.copy=function(t,e){return new _n(t,e,this.type)},_n.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},_n.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},_n.widget=function(t,e,n){return new _n(t,t,new kn(e,n))},_n.inline=function(t,e,n,r){return new _n(t,e,new Sn(n,r))},_n.node=function(t,e,n,r){return new _n(t,e,new xn(n,r))},Cn.spec.get=function(){return this.type.spec},Cn.inline.get=function(){return this.type instanceof Sn},Object.defineProperties(_n.prototype,Cn);var On=[],En={},An=function(t,e){this.local=t&&t.length?t:On,this.children=e&&e.length?e:On};An.create=function(t,e){return e.length?Pn(e,t,0,En):Mn},An.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},An.prototype.findInner=function(t,e,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,i)}},An.prototype.map=function(t,e,n){return this==Mn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||En)},An.prototype.mapInner=function(t,e,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Rn(this.children,o,t,e,n,r,i):o?new An(o.sort(Ln)):Mn},An.prototype.add=function(t,e){return e.length?this==Mn?An.create(t,e):this.addInner(t,e,0):this},An.prototype.addInner=function(t,e,n){var r,i=this,o=0;t.forEach((function(t,s){var a,c=s+n;if(a=Nn(e,t,c)){r||(r=i.children.slice());while(o<r.length&&r[o]<s)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(t,a,c+1):r.splice(o,0,s,s+t.nodeSize,Pn(a,t,c+1,En)),o+=3}}));for(var s=In(o?jn(e):e,-n),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new An(s.length?this.local.concat(s).sort(Ln):this.local,r||this.children)},An.prototype.remove=function(t){return 0==t.length||this==Mn?this:this.removeInner(t,0)},An.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+e,a=n[i+1]+e,c=0,u=void 0;c<t.length;c++)(u=t[c])&&u.from>s&&u.to<a&&(t[c]=null,(o||(o=[])).push(u));if(o){n==this.children&&(n=this.children.slice());var l=n[i+2].removeInner(o,s+1);l!=Mn?n[i+2]=l:(n.splice(i,3),i-=3)}}if(r.length)for(var h=0,f=void 0;h<t.length;h++)if(f=t[h])for(var p=0;p<r.length;p++)r[p].eq(f,e)&&(r==this.local&&(r=this.local.slice()),r.splice(p--,1));return n==this.children&&r==this.local?this:r.length||n.length?new An(r,n):Mn},An.prototype.forChild=function(t,e){if(this==Mn)return this;if(e.isLeaf)return An.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(n=this.children[i+2]);break}for(var o=t+1,s=o+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof Sn){var u=Math.max(o,c.from)-o,l=Math.min(s,c.to)-o;u<l&&(r||(r=[])).push(c.copy(u,l))}}if(r){var h=new An(r.sort(Ln));return n?new Tn([h,n]):h}return n||Mn},An.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof An)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},An.prototype.locals=function(t){return Fn(this.localsInner(t))},An.prototype.localsInner=function(t){if(this==Mn)return On;if(t.inlineContent||!this.local.some(Sn.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Sn||e.push(this.local[n]);return e};var Mn=new An;An.empty=Mn,An.removeOverlap=Fn;var Tn=function(t){this.members=t};function Rn(t,e,n,r,i,o,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],u=void 0;-1==c||t>c+o||(e>=a[s]+o?a[s+1]=-1:n>=i&&(u=r-n-(e-t))&&(a[s]+=u,a[s+1]+=u))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(c);for(var l=!1,h=0;h<a.length;h+=3)if(-1==a[h+1]){var f=n.map(t[h]+o),p=f-i;if(p<0||p>=r.content.size){l=!0;continue}var d=n.map(t[h+1]+o,-1),m=d-i,g=r.content.findIndex(p),v=g.index,y=g.offset,b=r.maybeChild(v);if(b&&y==p&&y+b.nodeSize==m){var w=a[h+2].mapInner(n,b,f+1,t[h]+o+1,s);w!=Mn?(a[h]=p,a[h+1]=m,a[h+2]=w):(a[h+1]=-2,l=!0)}else l=!0}if(l){var k=Dn(a,t,e||[],n,i,o,s),S=Pn(k,r,0,s);e=S.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var _=0,C=0;_<S.children.length;_+=3){var O=S.children[_];while(C<a.length&&a[C]<O)C+=3;a.splice(C,0,S.children[_],S.children[_+1],S.children[_+2])}}return new An(e&&e.sort(Ln),a)}function In(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(new _n(i.from+e,i.to+e,i.type))}return n}function Dn(t,e,n,r,i,o,s){function a(t,e){for(var o=0;o<t.local.length;o++){var c=t.local[o].map(r,i,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[o].spec)}for(var u=0;u<t.children.length;u+=3)a(t.children[u+2],t.children[u]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+o+1);return n}function Nn(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,i=null,o=0,s=void 0;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function jn(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Pn(t,e,n,r){var i=[],o=!1;e.forEach((function(e,s){var a=Nn(t,e,s+n);if(a){o=!0;var c=Pn(a,e,n+s+1,r);c!=Mn&&i.push(s,s+e.nodeSize,c)}}));for(var s=In(o?jn(t):t,-n).sort(Ln),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new An(s,i):Mn}function Ln(t,e){return t.from-e.from||t.to-e.to}function Fn(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var i=n+1;i<e.length;i++){var o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Bn(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Bn(e,i+1,o.copy(r.to,o.to)))}}return e}function Bn(t,e,n){while(e<t.length&&Ln(n,t[e])>0)e++;t.splice(e,0,n)}function zn(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Mn&&e.push(r)})),t.cursorWrapper&&e.push(An.create(t.state.doc,[t.cursorWrapper.deco])),Tn.from(e)}Tn.prototype.forChild=function(t,e){if(e.isLeaf)return An.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(t,e);i!=Mn&&(i instanceof Tn?n=n.concat(i.members):n.push(i))}return Tn.from(n)},Tn.prototype.eq=function(t){if(!(t instanceof Tn)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Tn.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(var o=0;o<i.length;o++)e.push(i[o])}else e=i}return e?Fn(n?e:e.sort(Ln)):On},Tn.from=function(t){switch(t.length){case 0:return Mn;case 1:return t[0];default:return new Tn(t)}};var $n=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Wn(this),this.markCursor=null,this.cursorWrapper=null,Vn(this),this.nodeViews=Jn(this),this.docView=pt(this.state.doc,Hn(this),zn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,ze(this),this.pluginViews=[],this.updatePluginViews()},Un={props:{configurable:!0},root:{configurable:!0}};function Hn(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[_n.node(0,t.state.doc.content.size,e)]}function Vn(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:_n.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Wn(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function qn(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Jn(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function Kn(t,e){var n=0,r=0;for(var i in t){if(t[i]!=e[i])return!0;n++}for(var o in e)r++;return n!=r}Un.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},$n.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&He(this),this._props=t,this.updateStateInner(t.state,!0)},$n.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},$n.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},$n.prototype.updateStateInner=function(t,e){var n=this,i=this.state,o=!1,a=!1;if(t.storedMarks&&this.composing&&(ln(this),a=!0),this.state=t,e){var c=Jn(this);Kn(c,this.nodeViews)&&(this.nodeViews=c,o=!0),He(this)}this.editable=Wn(this),Vn(this);var u=zn(this),l=Hn(this),h=e?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(t.doc,l,u);!f&&t.selection.eq(i.selection)||(a=!0);var p="preserve"==h&&a&&null==this.dom.style.overflowAnchor&&M(this);if(a){this.domObserver.stop();var d=f&&(s.ie||s.chrome)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&qn(i.selection,t.selection);if(f){var m=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(t.doc,l,u,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=pt(t.doc,l,u,this.dom,this)),m&&!this.trackWrites&&(d=!0)}d||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Kt(this))?Pt(this,d):(Ht(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==h)this.dom.scrollTop=0;else if("to selection"==h){var g=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r["c"]?A(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),g):A(this,this.coordsAtPos(t.selection.head,1),g))}else p&&R(p)},$n.prototype.destroyPluginViews=function(){var t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()},$n.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},$n.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var s=i[o].props[t];if(null!=s&&(n=e?e(s):s))return n}},$n.prototype.hasFocus=function(){return this.root.activeElement==this.dom},$n.prototype.focus=function(){this.domObserver.stop(),this.editable&&N(this.dom),Pt(this),this.domObserver.start()},Un.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},$n.prototype.posAtCoords=function(t){return U(this,t)},$n.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),W(this,t,e)},$n.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},$n.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},$n.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},$n.prototype.endOfTextblock=function(t,e){return et(this,e||this.state,t)},$n.prototype.destroy=function(){this.docView&&(Ue(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},$n.prototype.dispatchEvent=function(t){return qe(this,t)},$n.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties($n.prototype,Un)},"577e":function(t,e,n){var r=n("d9b5");t.exports=function(t){if(r(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("577e"),o=n("5899"),s="["+o+"]",a=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(t){return function(e){var n=i(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},5924:function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.toggleNode("paragraph","paragraph")}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});e["a"]=i},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5da9":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return f}));const r=String.fromCharCode,i=(String.fromCodePoint,t=>t.toLowerCase()),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,c=(t,e)=>s(t.replace(a,t=>`${e}${i(t)}`)),u=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},l="undefined"!==typeof TextEncoder?new TextEncoder:null,h=t=>l.encode(t),f=l?h:u;let p="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});p&&1===p.decode(new Uint8Array).length&&(p=null)},"5ea1":function(t,e,n){"use strict";n.d(e,"a",(function(){return gt}));var r=n("e6c4"),i=n("69a7"),o=n("ca0e");const s=1200,a=2500,c=3e4,u=t=>{if(t.shouldConnect&&null===t.ws){const e=new WebSocket(t.url),n=t.binaryType;let r=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=e=>{t.lastMessageReceived=i["a"]();const n=e.data,o="string"===typeof n?JSON.parse(n):n;o&&"pong"===o.type&&(clearTimeout(r),r=setTimeout(h,c/2)),t.emit("message",[o,t])};const l=e=>{null!==t.ws&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:e},t])):t.unsuccessfulReconnects++,setTimeout(u,o["g"](o["e"](t.unsuccessfulReconnects+1)*s,a),t)),clearTimeout(r)},h=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>l(null),e.onerror=t=>l(t),e.onopen=()=>{t.lastMessageReceived=i["a"](),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),r=setTimeout(h,c/2)}}};class l extends r["a"]{constructor(t,{binaryType:e}={}){super(),this.url=t,this.ws=null,this.binaryType=e||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&c<i["a"]()-this.lastMessageReceived&&this.ws.close()},c/2),u(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||u(this)}}var h=n("2309"),f=n("1e58"),p=n("c893"),d=n("dbda"),m=n("1b25"),g=n("679d");const v=t=>Promise.reject(t),y=t=>Promise.resolve(t);var b=n("d72c"),w=n("c823");const k=new Map;class S{constructor(t){this.room=t,this.onmessage=null,w["a"](e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:b["d"](e.newValue||"")}))}postMessage(t){w["b"].setItem(this.room,b["e"](b["b"](t)))}}const x="undefined"===typeof BroadcastChannel?S:BroadcastChannel,_=t=>h["e"](k,t,()=>{const e=new Set,n=new x(t);return n.onmessage=t=>e.forEach(e=>e(t.data)),{bc:n,subs:e}}),C=(t,e)=>_(t).subs.add(e),O=(t,e)=>_(t).subs.delete(e),E=(t,e)=>{const n=_(t);n.bc.postMessage(e),n.subs.forEach(t=>t(e))};var A=n("3edb"),M=n("8ac7"),T=n.n(M),R=n("7428");const I=0,D=1,N=2,j=(t,e)=>{d["m"](t,I);const n=R["v"](e);d["n"](t,n)},P=(t,e,n)=>{d["m"](t,D),d["n"](t,R["u"](e,n))},L=(t,e,n)=>P(e,n,m["l"](t)),F=(t,e,n)=>{try{R["m"](e,m["l"](t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},B=(t,e)=>{d["m"](t,N),d["n"](t,e)},z=F,$=(t,e,n,r)=>{const i=m["k"](t);switch(i){case I:L(t,e,n);break;case D:F(t,n,r);break;case N:z(t,n,r);break;default:throw new Error("Unknown message type")}return i};var U=n("f248"),H=n("5da9");const V=(t,e)=>{const n=H["a"](t).buffer,r=H["a"](e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(t=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},W=(t,e)=>{if(!e)return y(t);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then(t=>{const e=d["e"]();return d["l"](e,"AES-GCM"),d["n"](e,n),d["n"](e,new Uint8Array(t)),d["f"](e)})},q=(t,e)=>{const n=d["e"]();return d["g"](n,t),W(d["f"](n),e)},J=(t,e)=>{if(!e)return y(t);const n=m["e"](t),r=m["j"](n);"AES-GCM"!==r&&v(f["a"]("Unknown encryption algorithm"));const i=m["l"](n),o=m["l"](n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,o).then(t=>new Uint8Array(t))},K=(t,e)=>J(t,e).then(t=>m["g"](m["e"](new Uint8Array(t)))),Y=g["g"]("y-webrtc"),G=0,X=3,Q=1,Z=4,tt=new Map,et=new Map,nt=t=>{let e=!0;t.webrtcConns.forEach(t=>{t.synced||(e=!1)}),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),Y("synced ",g["a"],t.name,g["e"]," with all peers"))},rt=(t,e,n)=>{const r=m["e"](e),i=d["e"](),o=m["k"](r);if(void 0===t)return null;const s=t.awareness,a=t.doc;let c=!1;switch(o){case G:{d["m"](i,G);const e=$(r,i,a,t);e!==D||t.synced||n(),e===I&&(c=!0);break}case X:d["m"](i,Q),d["n"](i,U["c"](s,Array.from(s.getStates().keys()))),c=!0;break;case Q:U["b"](s,m["l"](r),t);break;case Z:{const e=1===m["h"](r),n=m["j"](r);if(n!==t.peerId&&(t.bcConns.has(n)&&!e||!t.bcConns.has(n)&&e)){const r=[],i=[];e?(t.bcConns.add(n),i.push(n)):(t.bcConns.delete(n),r.push(n)),t.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),ht(t)}break}default:return console.error("Unable to compute message"),i}return c?i:null},it=(t,e)=>{const n=t.room;return Y("received message from ",g["a"],t.remotePeerId,g["b"]," (",n.name,")",g["e"],g["f"]),rt(n,e,()=>{t.synced=!0,Y("synced ",g["a"],n.name,g["e"]," with ",g["a"],t.remotePeerId),nt(n)})},ot=(t,e)=>{Y("send message to ",g["a"],t.remotePeerId,g["e"],g["b"]," (",t.room.name,")",g["f"]);try{t.peer.send(d["f"](e))}catch(n){}},st=(t,e)=>{Y("broadcast message in ",g["a"],t.name,g["e"]),t.webrtcConns.forEach(t=>{try{t.peer.send(e)}catch(n){}})};class at{constructor(t,e,n,r){Y("establishing connection to ",g["a"],n),this.room=r,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new T.a({initiator:e,...r.provider.peerOpts}),this.peer.on("signal",e=>{dt(t,r,{to:n,from:r.peerId,type:"signal",signal:e})}),this.peer.on("connect",()=>{Y("connected to ",g["a"],n),this.connected=!0;const t=r.provider,e=t.doc,i=r.awareness,o=d["e"]();d["m"](o,G),j(o,e),ot(this,o);const s=i.getStates();if(s.size>0){const t=d["e"]();d["m"](t,Q),d["n"](t,U["c"](i,Array.from(s.keys()))),ot(this,t)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),nt(r),this.peer.destroy(),Y("closed connection to ",g["a"],n),lt(r)}),this.peer.on("error",t=>{Y("Error in connection to ",g["a"],n,": ",t),lt(r)}),this.peer.on("data",t=>{const e=it(this,t);null!==e&&ot(this,e)})}destroy(){this.peer.destroy()}}const ct=(t,e)=>W(e,t.key).then(e=>t.mux(()=>E(t.name,e))),ut=(t,e)=>{t.bcconnected&&ct(t,e),st(t,e)},lt=t=>{tt.forEach(e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&dt(e,t,{type:"announce",from:t.peerId}))})},ht=t=>{if(t.provider.filterBcConns){const e=d["e"]();d["m"](e,Z),d["i"](e,1),d["l"](e,t.peerId),ct(t,d["f"](e))}};class ft{constructor(t,e,n,r){this.peerId=p["d"](),this.doc=t,this.awareness=e.awareness,this.provider=e,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Object(A["a"])(),this.bcconnected=!1,this._bcSubscriber=t=>J(new Uint8Array(t),r).then(t=>this.mux(()=>{const e=rt(this,t,()=>{});e&&ct(this,d["f"](e))})),this._docUpdateHandler=(t,e)=>{const n=d["e"]();d["m"](n,G),B(n,t),ut(this,d["f"](n))},this._awarenessUpdateHandler=({added:t,updated:e,removed:n},r)=>{const i=t.concat(e).concat(n),o=d["e"]();d["m"](o,Q),d["n"](o,U["c"](this.awareness,i)),ut(this,d["f"](o))},this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),window.addEventListener("beforeunload",()=>{U["d"](this.awareness,[t.clientID],"window unload"),et.forEach(t=>{t.disconnect()})})}connect(){lt(this);const t=this.name;C(t,this._bcSubscriber),this.bcconnected=!0,ht(this);const e=d["e"]();d["m"](e,G),j(e,this.doc),ct(this,d["f"](e));const n=d["e"]();d["m"](n,G),P(n,this.doc),ct(this,d["f"](n));const r=d["e"]();d["m"](r,X),ct(this,d["f"](r));const i=d["e"]();d["m"](i,Q),d["n"](i,U["c"](this.awareness,[this.doc.clientID])),ct(this,d["f"](i))}disconnect(){tt.forEach(t=>{t.connected&&t.send({type:"unsubscribe",topics:[this.name]})}),U["d"](this.awareness,[this.doc.clientID],"disconnect");const t=d["e"]();d["m"](t,Z),d["i"](t,0),d["l"](t,this.peerId),ct(this,d["f"](t)),O(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(t=>t.destroy())}destroy(){this.disconnect()}}const pt=(t,e,n,r)=>{if(et.has(n))throw f["a"](`A Yjs Doc connected to room "${n}" already exists!`);const i=new ft(t,e,n,r);return et.set(n,i),i},dt=(t,e,n)=>{e.key?q(n,e.key).then(n=>{t.send({type:"publish",topic:e.name,data:b["e"](n)})}):t.send({type:"publish",topic:e.name,data:n})};class mt extends l{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{Y(`connected (${t})`);const e=Array.from(et.keys());this.send({type:"subscribe",topics:e}),et.forEach(t=>dt(this,t,{type:"announce",from:t.peerId}))}),this.on("message",t=>{switch(t.type){case"publish":{const e=t.topic,n=et.get(e);if(null==n||"string"!==typeof e)return;const r=t=>{const e=n.webrtcConns,r=n.peerId;if(null==t||t.from===r||void 0!==t.to&&t.to!==r||n.bcConns.has(t.from))return;const i=e.has(t.from)?()=>{}:()=>n.provider.emit("peers",[{removed:[],added:[t.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]);switch(t.type){case"announce":e.size<n.provider.maxConns&&(h["e"](e,t.from,()=>new at(this,!0,t.from,n)),i());break;case"signal":t.to===r&&(h["e"](e,t.from,()=>new at(this,!1,t.from,n)).peer.signal(t.signal),i());break}};n.key?"string"===typeof t.data&&K(b["d"](t.data),n.key).then(r):r(t.data)}}}),this.on("disconnect",()=>Y(`disconnect (${t})`))}}class gt extends r["a"]{constructor(t,e,{signaling:n=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:r=null,awareness:i=new U["a"](e),maxConns:s=20+o["c"](15*p["b"]()),filterBcConns:a=!0,peerOpts:c={}}={}){super(),this.roomName=t,this.doc=e,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=s,this.peerOpts=c,this.key=r?V(r,t):y(null),this.room=null,this.key.then(n=>{this.room=pt(e,this,t,n),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const e=h["e"](tt,t,()=>new mt(t));this.signalingConns.push(e),e.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),0===t.providers.size&&(t.destroy(),tt.delete(t.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),et.delete(this.roomName)}),super.destroy()}}},"5fb2":function(t,e,n){"use strict";var r=2147483647,i=36,o=1,s=26,a=38,c=700,u=72,l=128,h="-",f=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",m=i-o,g=Math.floor,v=String.fromCharCode,y=function(t){var e=[],n=0,r=t.length;while(n<r){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},b=function(t){return t+22+75*(t<26)},w=function(t,e,n){var r=0;for(t=n?g(t/c):t>>1,t+=g(t/e);t>m*s>>1;r+=i)t=g(t/m);return g(r+(m+1)*t/(t+a))},k=function(t){var e=[];t=y(t);var n,a,c=t.length,f=l,p=0,m=u;for(n=0;n<t.length;n++)a=t[n],a<128&&e.push(v(a));var k=e.length,S=k;k&&e.push(h);while(S<c){var x=r;for(n=0;n<t.length;n++)a=t[n],a>=f&&a<x&&(x=a);var _=S+1;if(x-f>g((r-p)/_))throw RangeError(d);for(p+=(x-f)*_,f=x,n=0;n<t.length;n++){if(a=t[n],a<f&&++p>r)throw RangeError(d);if(a==f){for(var C=p,O=i;;O+=i){var E=O<=m?o:O>=m+s?s:O-m;if(C<E)break;var A=C-E,M=i-E;e.push(v(b(E+A%M))),C=g(A/M)}e.push(v(b(C))),m=w(p,_,S==k),p=0,++S}}++p,++f}return e.join("")};t.exports=function(t){var e,n,r=[],i=t.toLowerCase().replace(p,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(f.test(n)?"xn--"+k(n):n);return r.join(".")}},"605d":function(t,e,n){var r=n("c6b6"),i=n("da84");t.exports="process"==r(i.process)},6069:function(t,e){t.exports="object"==typeof window},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),s=n("7418"),a=n("d1e7"),c=n("7b0b"),u=n("44ad"),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=c(t),i=arguments.length,l=1,h=s.f,f=a.f;while(i>l){var p,d=u(arguments[l++]),m=h?o(d).concat(h(d)):o(d),g=m.length,v=0;while(g>v)p=m[v++],r&&!f.call(d,p)||(n[p]=d[p])}return n}:l},"64fe":function(t,e,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^```(?<language>[a-z]*)? $/,s=/^~~~(?<language>[a-z]*)? $/,a=r["d"].create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const n=null===(e=t.firstElementChild)||void 0===e?void 0:e.getAttribute("class");if(!n)return null;const r=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:n.replace(r,"")}},renderHTML:t=>t.language?{class:this.options.languageClassPrefix+t.language}:null}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){return["pre",this.options.HTMLAttributes,["code",t,0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode("codeBlock",t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode("codeBlock","paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())}}},addInputRules(){return[Object(i["c"])(o,this.type,({groups:t})=>t),Object(i["c"])(s,this.type,({groups:t})=>t)]}});e["a"]=a},6547:function(t,e,n){var r=n("a691"),i=n("577e"),o=n("1d80"),s=function(t){return function(e,n){var s,a,c=i(o(e)),u=r(n),l=c.length;return u<0||u>=l?t?"":void 0:(s=c.charCodeAt(u),s<55296||s>56319||u+1===l||(a=c.charCodeAt(u+1))<56320||a>57343?t?c.charAt(u):s:t?c.slice(u,u+2):a-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},"65f0":function(t,e,n){var r=n("0b42");t.exports=function(t,e){return new(r(t))(0===e?0:e)}},"679d":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return y})),n.d(e,"h",(function(){return _})),n.d(e,"g",(function(){return M}));var r=n("1d8c");const i=Symbol;var o=n("7749"),s=n("b6f5");JSON.stringify,JSON.parse;var a=n("2309"),c=(n("058a"),n("ca0e"),n("69a7")),u=n("2163");const l=i(),h=i(),f=i(),p=i(),d=i(),m=i(),g=i(),v=i(),y=i(),b={[l]:o["a"]("font-weight","bold"),[h]:o["a"]("font-weight","normal"),[f]:o["a"]("color","blue"),[d]:o["a"]("color","green"),[p]:o["a"]("color","grey"),[m]:o["a"]("color","red"),[g]:o["a"]("color","purple"),[v]:o["a"]("color","orange"),[y]:o["a"]("color","black")},w={[l]:"[1m",[h]:"[2m",[f]:"[34m",[d]:"[32m",[p]:"[37m",[m]:"[31m",[g]:"[35m",[v]:"[38;5;208m",[y]:"[0m"},k=t=>{const e=[],n=[],r=a["c"]();let i=[],o=0;for(;o<t.length;o++){const i=t[o],a=b[i];if(void 0!==a)r.set(a.left,a.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const t=s["e"](r);o>0||t.length>0?(e.push("%c"+i),n.push(t)):e.push(i)}}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const e=t[o];e instanceof Symbol||i.push(e)}return i},S=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const n=t[r],i=w[n];if(void 0!==i)e.push(i);else{if(n.constructor!==String&&n.constructor!==Number)break;e.push(n)}}for(r>0&&(e.push("[0m"),n.push(e.join("")));r<t.length;r++){const e=t[r];e instanceof Symbol||n.push(e)}return n},x=r["c"]?S:k,_=(...t)=>{console.log(...x(t)),C.forEach(e=>e.print(t))},C=new Set;const O=[d,g,v,f];let E=0,A=c["a"]();const M=t=>{const e=O[E],n=r["a"]("log"),i=null!==n&&("*"===n||"true"===n||new RegExp(n,"gi").test(t));return E=(E+1)%O.length,t+=": ",i?(...n)=>{const r=c["a"](),i=r-A;A=r,_(e,t,y,...n.map(t=>"string"===typeof t||"symbol"===typeof t?t:JSON.stringify(t)),e," +"+i+"ms")}:u["d"]}},"69a7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("ca0e");const r=Date.now},"69f3":function(t,e,n){var r,i,o,s=n("7f9a"),a=n("da84"),c=n("861d"),u=n("9112"),l=n("5135"),h=n("c6cd"),f=n("f772"),p=n("d012"),d="Object already initialized",m=a.WeakMap,g=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(s||h.state){var y=h.state||(h.state=new m),b=y.get,w=y.has,k=y.set;r=function(t,e){if(w.call(y,t))throw new TypeError(d);return e.facade=t,k.call(y,t,e),e},i=function(t){return b.call(y,t)||{}},o=function(t){return w.call(y,t)}}else{var S=f("state");p[S]=!0,r=function(t,e){if(l(t,S))throw new TypeError(d);return e.facade=t,u(t,S,e),e},i=function(t){return l(t,S)?t[S]:{}},o=function(t){return l(t,S)}}t.exports={set:r,get:i,has:o,enforce:g,getterFor:v}},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),s=n("ce4e"),a=n("8925"),c=n("69f3"),u=c.get,l=c.enforce,h=String(String).split("String");(t.exports=function(t,e,n,a){var c,u=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),c=l(n),c.source||(c.source=h.join("string"==typeof e?e:""))),t!==r?(u?!p&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},"70a9":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s}));var r=n("5313");const i=new r["e"]("y-sync"),o=new r["e"]("y-undo"),s=new r["e"]("yjs-cursor")},7418:function(t,e){e.f=Object.getOwnPropertySymbols},7428:function(t,e,n){"use strict";n.d(e,"a",(function(){return Rn})),n.d(e,"b",(function(){return Ln})),n.d(e,"c",(function(){return Jn})),n.d(e,"d",(function(){return j})),n.d(e,"e",(function(){return Zn})),n.d(e,"f",(function(){return vt})),n.d(e,"g",(function(){return Ct})),n.d(e,"h",(function(){return cn})),n.d(e,"i",(function(){return Qt})),n.d(e,"j",(function(){return pn})),n.d(e,"k",(function(){return hn})),n.d(e,"l",(function(){return yn})),n.d(e,"m",(function(){return X})),n.d(e,"n",(function(){return _t})),n.d(e,"o",(function(){return xt})),n.d(e,"p",(function(){return M})),n.d(e,"q",(function(){return dt})),n.d(e,"r",(function(){return yt})),n.d(e,"s",(function(){return St})),n.d(e,"t",(function(){return Ot})),n.d(e,"u",(function(){return tt})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return mt})),n.d(e,"x",(function(){return C})),n.d(e,"y",(function(){return gt})),n.d(e,"z",(function(){return x})),n.d(e,"A",(function(){return Et})),n.d(e,"B",(function(){return Ce}));var r=n("e6c4"),i=n("fca1"),o=n("ca0e"),s=n("2309"),a=n("dbda"),c=n("1b25"),u=n("c893"),l=n("d72c"),h=n("1e58"),f=n("c77f"),p=n("2163"),d=n("4aa6"),m=n("679d"),g=n("69a7");const v=t=>({[Symbol.iterator](){return this},next:t}),y=(t,e)=>v(()=>{let n;do{n=t.next()}while(!n.done&&!e(n.value));return n}),b=(t,e)=>v(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});var w=n("1d2f");r["a"];class k{constructor(t,e){this.clock=t,this.len=e}}class S{constructor(){this.clients=new Map}}const x=(t,e,n)=>e.clients.forEach((e,r)=>{const i=t.doc.store.clients.get(r);for(let o=0;o<e.length;o++){const r=e[o];$t(t,i,r.clock,r.len,n)}}),_=(t,e)=>{let n=0,r=t.length-1;while(n<=r){const i=o["c"]((n+r)/2),s=t[i],a=s.clock;if(a<=e){if(e<a+s.len)return i;n=i+1}else r=i-1}return null},C=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==_(n,e.clock)},O=t=>{t.clients.forEach(t=>{let e,n;for(t.sort((t,e)=>t.clock-e.clock),e=1,n=1;e<t.length;e++){const r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=o["f"](r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n})},E=t=>{const e=new S;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let e=n+1;e<t.length;e++)i["a"](s,t[e].clients.get(o)||[]);e.clients.set(o,s)}});return O(e),e},A=(t,e,n,r)=>{s["e"](t.clients,e,()=>[]).push(new k(n,r))},M=()=>new S,T=t=>{const e=M();return t.clients.forEach((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const i=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new k(i,o))}}r.length>0&&e.clients.set(n,r)}),e},R=(t,e)=>{a["m"](t.restEncoder,e.clients.size),e.clients.forEach((e,n)=>{t.resetDsCurVal(),a["m"](t.restEncoder,n);const r=e.length;a["m"](t.restEncoder,r);for(let i=0;i<r;i++){const n=e[i];t.writeDsClock(n.clock),t.writeDsLen(n.len)}})},I=t=>{const e=new S,n=c["k"](t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const n=c["k"](t.restDecoder),r=c["k"](t.restDecoder);if(r>0){const i=s["e"](e.clients,n,()=>[]);for(let e=0;e<r;e++)i.push(new k(t.readDsClock(),t.readDsLen()))}}return e},D=(t,e,n)=>{const r=new S,i=c["k"](t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const i=c["k"](t.restDecoder),o=c["k"](t.restDecoder),s=n.clients.get(i)||[],a=It(n,i);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<a){a<o&&A(r,i,a,o-a);let t=Nt(s,n),c=s[t];!c.deleted&&c.id.clock<n&&(s.splice(t+1,0,Xn(e,c,n-c.id.clock)),t++);while(t<s.length){if(c=s[t++],!(c.id.clock<o))break;c.deleted||(o<c.id.clock+c.length&&s.splice(t,0,Xn(e,c,o-c.id.clock)),c.delete(e))}}else A(r,i,n,o-n)}}if(r.clients.size>0){const t=new H;return a["m"](t.restEncoder,0),R(t,r),t.toUint8Array()}return null},N=u["c"];class j extends r["a"]{constructor({guid:t=u["d"](),gc:e=!0,gcFilter:n=(()=>!0),meta:r=null,autoLoad:i=!1}={}){super(),this.gc=e,this.gcFilter=n,this.clientID=N(),this.guid=t,this.share=new Map,this.store=new Tt,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=i,this.autoLoad=i,this.meta=r}load(){const t=this._item;null===t||this.shouldLoad||Yt(t.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,e=null){Yt(this,t,e)}get(t,e=Se){const n=s["e"](this.share,t,()=>{const t=new e;return t._integrate(this,null),t}),r=n.constructor;if(e!==Se&&r!==e){if(r===Se){const r=new e;r._map=n._map,n._map.forEach(t=>{for(;null!==t;t=t.left)t.parent=r}),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,$e)}getText(t=""){return this.get(t,cn)}getMap(t=""){return this.get(t,Ve)}getXmlFragment(t=""){return this.get(t,hn)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){i["c"](this.subdocs).forEach(t=>t.destroy());const t=this._item;if(null!==t){this._item=null;const e=t.content;t.deleted?e.doc=null:(e.doc=new j({guid:this.guid,...e.opts}),e.doc._item=t),Yt(t.parent.doc,n=>{t.deleted||n.subdocsAdded.add(e.doc),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class P{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return c["k"](this.restDecoder)}readDsLen(){return c["k"](this.restDecoder)}}class L extends P{readLeftID(){return dt(c["k"](this.restDecoder),c["k"](this.restDecoder))}readRightID(){return dt(c["k"](this.restDecoder),c["k"](this.restDecoder))}readClient(){return c["k"](this.restDecoder)}readInfo(){return c["h"](this.restDecoder)}readString(){return c["j"](this.restDecoder)}readParentInfo(){return 1===c["k"](this.restDecoder)}readTypeRef(){return c["k"](this.restDecoder)}readLen(){return c["k"](this.restDecoder)}readAny(){return c["g"](this.restDecoder)}readBuf(){return l["a"](c["l"](this.restDecoder))}readJSON(){return JSON.parse(c["j"](this.restDecoder))}readKey(){return c["j"](this.restDecoder)}}class F{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=c["k"](this.restDecoder),this.dsCurrVal}readDsLen(){const t=c["k"](this.restDecoder)+1;return this.dsCurrVal+=t,t}}class B extends F{constructor(t){super(t),this.keys=[],c["k"](t),this.keyClockDecoder=new c["a"](c["l"](t)),this.clientDecoder=new c["d"](c["l"](t)),this.leftClockDecoder=new c["a"](c["l"](t)),this.rightClockDecoder=new c["a"](c["l"](t)),this.infoDecoder=new c["b"](c["l"](t),c["h"]),this.stringDecoder=new c["c"](c["l"](t)),this.parentInfoDecoder=new c["b"](c["l"](t),c["h"]),this.typeRefDecoder=new c["d"](c["l"](t)),this.lenDecoder=new c["d"](c["l"](t))}readLeftID(){return new ft(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ft(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return c["g"](this.restDecoder)}readBuf(){return c["l"](this.restDecoder)}readJSON(){return c["g"](this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class z{constructor(){this.restEncoder=a["e"]()}toUint8Array(){return a["f"](this.restEncoder)}resetDsCurVal(){}writeDsClock(t){a["m"](this.restEncoder,t)}writeDsLen(t){a["m"](this.restEncoder,t)}}class $ extends z{writeLeftID(t){a["m"](this.restEncoder,t.client),a["m"](this.restEncoder,t.clock)}writeRightID(t){a["m"](this.restEncoder,t.client),a["m"](this.restEncoder,t.clock)}writeClient(t){a["m"](this.restEncoder,t)}writeInfo(t){a["i"](this.restEncoder,t)}writeString(t){a["l"](this.restEncoder,t)}writeParentInfo(t){a["m"](this.restEncoder,t?1:0)}writeTypeRef(t){a["m"](this.restEncoder,t)}writeLen(t){a["m"](this.restEncoder,t)}writeAny(t){a["g"](this.restEncoder,t)}writeBuf(t){a["n"](this.restEncoder,t)}writeJSON(t){a["l"](this.restEncoder,JSON.stringify(t))}writeKey(t){a["l"](this.restEncoder,t)}}class U{constructor(){this.restEncoder=a["e"](),this.dsCurrVal=0}toUint8Array(){return a["f"](this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,a["m"](this.restEncoder,e)}writeDsLen(t){0===t&&h["c"](),a["m"](this.restEncoder,t-1),this.dsCurrVal+=t}}class H extends U{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a["a"],this.clientEncoder=new a["d"],this.leftClockEncoder=new a["a"],this.rightClockEncoder=new a["a"],this.infoEncoder=new a["b"](a["i"]),this.stringEncoder=new a["c"],this.parentInfoEncoder=new a["b"](a["i"]),this.typeRefEncoder=new a["d"],this.lenEncoder=new a["d"]}toUint8Array(){const t=a["e"]();return a["m"](t,0),a["n"](t,this.keyClockEncoder.toUint8Array()),a["n"](t,this.clientEncoder.toUint8Array()),a["n"](t,this.leftClockEncoder.toUint8Array()),a["n"](t,this.rightClockEncoder.toUint8Array()),a["n"](t,a["f"](this.infoEncoder)),a["n"](t,this.stringEncoder.toUint8Array()),a["n"](t,a["f"](this.parentInfoEncoder)),a["n"](t,this.typeRefEncoder.toUint8Array()),a["n"](t,this.lenEncoder.toUint8Array()),a["j"](t,a["f"](this.restEncoder)),a["f"](t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){a["g"](this.restEncoder,t)}writeBuf(t){a["n"](this.restEncoder,t)}writeJSON(t){a["g"](this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(this.keyClock++)}}const V=(t,e,n,r)=>{r=o["f"](r,e[0].id.clock);const i=Nt(e,r);a["m"](t.restEncoder,e.length-i),t.writeClient(n),a["m"](t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},W=(t,e,n)=>{const r=new Map;n.forEach((t,n)=>{It(e,n)>t&&r.set(n,t)}),Rt(e).forEach((t,e)=>{n.has(e)||r.set(e,0)}),a["m"](t.restEncoder,r.size),Array.from(r.entries()).sort((t,e)=>e[0]-t[0]).forEach(([n,r])=>{V(t,e.clients.get(n),n,r)})},q=(t,e)=>{const n=s["c"](),r=c["k"](t.restDecoder);for(let i=0;i<r;i++){const r=c["k"](t.restDecoder),i=new Array(r),o=t.readClient();let s=c["k"](t.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=t.readInfo();switch(f["i"]&r){case 0:{const e=t.readLen();i[n]=new Sn(dt(o,s),e),s+=e;break}case 10:{const e=c["k"](t.restDecoder);i[n]=new rr(dt(o,s),e),s+=e;break}default:{const a=0===(r&(f["f"]|f["g"])),c=new Zn(dt(o,s),null,(r&f["g"])===f["g"]?t.readLeftID():null,null,(r&f["f"])===f["f"]?t.readRightID():null,a?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,a&&(r&f["e"])===f["e"]?t.readString():null,tr(t,r));i[n]=c,s+=c.length}}}}return n},J=(t,e,n)=>{const r=[];let i=Array.from(n.keys()).sort((t,e)=>t-e);if(0===i.length)return null;const o=()=>{if(0===i.length)return null;let t=n.get(i[i.length-1]);while(t.refs.length===t.i){if(i.pop(),!(i.length>0))return null;t=n.get(i[i.length-1])}return t};let c=o();if(null===c&&0===r.length)return null;const u=new Tt,l=new Map,h=(t,e)=>{const n=l.get(t);(null==n||n>e)&&l.set(t,e)};let f=c.refs[c.i++];const p=new Map,d=()=>{for(const t of r){const e=t.id.client,r=n.get(e);r?(r.i--,u.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):u.clients.set(e,[t]),i=i.filter(t=>t!==e)}r.length=0};while(1){if(f.constructor!==rr){const i=s["e"](p,f.id.client,()=>It(e,f.id.client)),o=i-f.id.clock;if(o<0)r.push(f),h(f.id.client,f.id.clock-1),d();else{const i=f.getMissing(t,e);if(null!==i){r.push(f);const t=n.get(i)||{refs:[],i:0};if(t.refs.length!==t.i){f=t.refs[t.i++];continue}h(i,It(e,i)),d()}else(0===o||o<f.length)&&(f.integrate(t,o),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(null!==c&&c.i<c.refs.length)f=c.refs[c.i++];else{if(c=o(),null===c)break;f=c.refs[c.i++]}}if(u.clients.size>0){const t=new H;return W(t,u,new Map),a["m"](t.restEncoder,0),{missing:l,update:t.toUint8Array()}}return null},K=(t,e)=>W(t,e.doc.store,e.beforeState),Y=(t,e,n,r=new B(t))=>Yt(e,t=>{t.local=!1;let e=!1;const n=t.doc,i=n.store,o=q(r,n),s=J(t,i,o),a=i.pendingStructs;if(a){for(const[t,n]of a.missing)if(n<It(i,t)){e=!0;break}if(s){for(const[t,e]of s.missing){const n=a.missing.get(t);(null==n||n>e)&&a.missing.set(t,e)}a.update=ie([a.update,s.update])}}else i.pendingStructs=s;const u=D(r,t,i);if(i.pendingDs){const e=new B(c["e"](i.pendingDs));c["k"](e.restDecoder);const n=D(e,t,i);i.pendingDs=u&&n?ie([u,n]):u||n}else i.pendingDs=u;if(e){const e=i.pendingStructs.update;i.pendingStructs=null,G(t.doc,e)}},n,!1),G=(t,e,n,r=B)=>{const i=c["e"](e);Y(i,t,n,new r(i))},X=(t,e,n)=>G(t,e,n,L),Q=(t,e,n=new Map)=>{W(t,e.store,n),R(t,T(e.store))},Z=(t,e=new Uint8Array([0]),n=new H)=>{const r=nt(e);Q(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(oe(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===$)return ne(i.map((t,e)=>0===e?t:le(t)));if(n.constructor===H)return ie(i)}return i[0]},tt=(t,e)=>Z(t,e,new $),et=t=>{const e=new Map,n=c["k"](t.restDecoder);for(let r=0;r<n;r++){const n=c["k"](t.restDecoder),r=c["k"](t.restDecoder);e.set(n,r)}return e},nt=t=>et(new P(c["e"](t))),rt=(t,e)=>(a["m"](t.restEncoder,e.size),e.forEach((e,n)=>{a["m"](t.restEncoder,n),a["m"](t.restEncoder,e)}),t),it=(t,e)=>rt(t,Rt(e.store)),ot=(t,e=new U)=>(t instanceof Map?rt(e,t):it(e,t),e.toUint8Array()),st=t=>ot(t,new z);class at{constructor(){this.l=[]}}const ct=()=>new at,ut=(t,e)=>t.l.push(e),lt=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(t=>e!==t),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ht=(t,e,n)=>p["a"](t.l,[e,n]);class ft{constructor(t,e){this.client=t,this.clock=e}}const pt=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,dt=(t,e)=>new ft(t,e),mt=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw h["c"]()},gt=(t,e)=>{while(null!==e){if(e.parent===t)return!0;e=e.parent._item}return!1};class vt{constructor(t,e,n,r=0){this.type=t,this.tname=e,this.item=n,this.assoc=r}}const yt=t=>new vt(null==t.type?null:dt(t.type.client,t.type.clock),t.tname||null,null==t.item?null:dt(t.item.client,t.item.clock),null==t.assoc?0:t.assoc);class bt{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const wt=(t,e,n=0)=>new bt(t,e,n),kt=(t,e,n)=>{let r=null,i=null;return null===t._item?i=mt(t):r=dt(t._item.id.client,t._item.id.clock),new vt(r,i,e,n)},St=(t,e,n=0)=>{let r=t._start;if(n<0){if(0===e)return kt(t,null,n);e--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>e)return kt(t,dt(r.id.client,r.id.clock+e),n);e-=r.length}if(null===r.right&&n<0)return kt(t,r.lastId,n);r=r.right}return kt(t,null,n)},xt=(t,e)=>{const n=e.store,r=t.item,i=t.type,o=t.tname,s=t.assoc;let a=null,c=0;if(null!==r){if(It(n,r.client)<=r.clock)return null;const t=Yn(n,r),e=t.item;if(!(e instanceof Zn))return null;if(a=e.parent,null===a._item||!a._item.deleted){c=e.deleted||!e.countable?0:t.diff+(s>=0?0:1);let n=e.left;while(null!==n)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==o)a=e.get(o);else{if(null===i)throw h["c"]();{if(It(n,i.client)<=i.clock)return null;const{item:t}=Yn(n,i);if(!(t instanceof Zn&&t.content instanceof Jn))return null;a=t.content.type}}c=s>=0?a._length:0}return wt(a,c,t.assoc)},_t=(t,e)=>t===e||null!==t&&null!==e&&t.tname===e.tname&&pt(t.item,e.item)&&pt(t.type,e.type)&&t.assoc===e.assoc;class Ct{constructor(t,e){this.ds=t,this.sv=e}}const Ot=(t,e)=>new Ct(t,e),Et=(Ot(M(),new Map),t=>Ot(T(t.store),Rt(t.store))),At=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!C(e.ds,t.id),Mt=(t,e)=>{const n=s["e"](t.meta,Mt,d["a"]),r=t.doc.store;n.has(e)||(e.sv.forEach((e,n)=>{e<It(r,n)&&Ft(t,dt(n,e))}),x(t,e.ds,t=>{}),n.add(e))};class Tt{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Rt=t=>{const e=new Map;return t.clients.forEach((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)}),e},It=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Dt=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw h["c"]()}n.push(e)},Nt=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let a=o["c"](e/(s+i.length-1)*r);while(n<=r){if(i=t[a],s=i.id.clock,s<=e){if(e<s+i.length)return a;n=a+1}else r=a-1;a=o["c"]((n+r)/2)}throw h["c"]()},jt=(t,e)=>{const n=t.clients.get(e.client);return n[Nt(n,e.clock)]},Pt=jt,Lt=(t,e,n)=>{const r=Nt(e,n),i=e[r];return i.id.clock<n&&i instanceof Zn?(e.splice(r+1,0,Xn(t,i,n-i.id.clock)),r+1):r},Ft=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Lt(t,n,e.clock)]},Bt=(t,e,n)=>{const r=e.clients.get(n.client),i=Nt(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Sn&&r.splice(i+1,0,Xn(t,o,n.clock-o.id.clock+1)),o},zt=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Nt(r,e.id.clock)]=n},$t=(t,e,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Lt(t,e,n);do{s=e[a++],o<s.id.clock+s.length&&Lt(t,e,o),i(s)}while(a<e.length&&e[a].id.clock<o)};class Ut{constructor(t,e,n){this.doc=t,this.deleteSet=new S,this.beforeState=Rt(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Ht=(t,e)=>!(0===e.deleteSet.clients.size&&!s["a"](e.afterState,(t,n)=>e.beforeState.get(n)!==t))&&(O(e.deleteSet),K(t,e),R(t,e.deleteSet),!0),Vt=(t,e,n)=>{const r=e._item;(null===r||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&s["e"](t.changed,e,d["a"]).add(n)},Wt=(t,e)=>{const n=t[e-1],r=t[e];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(t.splice(e,1),r instanceof Zn&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},qt=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const t=e.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Nt(t,o.clock),i=t[r];r<t.length&&i.id.clock<s;i=t[++r]){const i=t[r];if(o.clock+o.len<=i.id.clock)break;i instanceof Zn&&i.deleted&&!i.keep&&n(i)&&i.gc(e,!1)}}}},Jt=(t,e)=>{t.clients.forEach((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e],i=o["g"](r.length-1,1+Nt(r,n.clock+n.len-1));for(let t=i,e=r[t];t>0&&e.id.clock>=n.clock;e=r[--t])Wt(r,t)}})},Kt=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{O(s),n.afterState=Rt(n.doc.store),r._transaction=null,r.emit("beforeObserverCalls",[n,r]);const c=[];n.changed.forEach((t,e)=>c.push(()=>{null!==e._item&&e._item.deleted||e._callObserver(n,t)})),c.push(()=>{n.changedParentTypes.forEach((t,e)=>c.push(()=>{null!==e._item&&e._item.deleted||(t=t.filter(t=>null===t.target._item||!t.target._item.deleted),t.forEach(t=>{t.currentTarget=e}),t.sort((t,e)=>t.path.length-e.path.length),ht(e._dEH,t,n))})),c.push(()=>r.emit("afterTransaction",[n,r]))}),Object(p["a"])(c,[])}finally{r.gc&&qt(s,i,r.gcFilter),Jt(s,i),n.afterState.forEach((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=i.clients.get(e),n=o["f"](Nt(t,r),1);for(let e=t.length-1;e>=n;e--)Wt(t,e)}});for(let t=0;t<a.length;t++){const{client:e,clock:n}=a[t].id,r=i.clients.get(e),o=Nt(r,n);o+1<r.length&&Wt(r,o+1),o>0&&Wt(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(r.clientID=N(),m["h"](m["c"],m["a"],"[yjs] ",m["e"],m["d"],"Changed the client-id because another client seems to be using it.")),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new $,e=Ht(t,n);e&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new H,e=Ht(t,n);e&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}n.subdocsAdded.forEach(t=>r.subdocs.add(t)),n.subdocsRemoved.forEach(t=>r.subdocs.delete(t)),r.emit("subdocs",[{loaded:n.subdocsLoaded,added:n.subdocsAdded,removed:n.subdocsRemoved}]),n.subdocsRemoved.forEach(t=>t.destroy()),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Kt(t,e+1)}}},Yt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1;null===t._transaction&&(o=!0,t._transaction=new Ut(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{e(t._transaction)}finally{o&&i[0]===t._transaction&&Kt(i,0)}};class Gt{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Xt=(t,e,n)=>{let r=null,i=null;const o=t.doc,s=t.scope;if(Yt(o,n=>{while(e.length>0&&null===r){const i=o.store,a=e.pop(),c=new Set,u=[];let l=!1;x(n,a.insertions,t=>{if(t instanceof Zn){if(null!==t.redone){let{item:e,diff:r}=Yn(i,t.id);r>0&&(e=Ft(n,dt(e.id.client,e.id.clock+r))),t=e}!t.deleted&&s.some(e=>gt(e,t))&&u.push(t)}}),x(n,a.deletions,t=>{t instanceof Zn&&s.some(e=>gt(e,t))&&!C(a.insertions,t.id)&&c.add(t)}),c.forEach(t=>{l=null!==Qn(n,t,c)||l});for(let e=u.length-1;e>=0;e--){const r=u[e];t.deleteFilter(r)&&(r.delete(n),l=!0)}r=l?a:null}n.changed.forEach((t,e)=>{t.has(null)&&e._searchMarker&&(e._searchMarker.length=0)}),i=n},t),null!=r){const e=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:e},t])}return r};class Qt extends r["a"]{constructor(t,{captureTimeout:e=500,deleteFilter:n=(()=>!0),trackedOrigins:r=new Set([null])}={}){super(),this.scope=t instanceof Array?t:[t],this.deleteFilter=n,r.add(this),this.trackedOrigins=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=this.scope[0].doc,this.lastChange=0,this.doc.on("afterTransaction",t=>{if(!this.scope.some(e=>t.changedParentTypes.has(e))||!this.trackedOrigins.has(t.origin)&&(!t.origin||!this.trackedOrigins.has(t.origin.constructor)))return;const n=this.undoing,r=this.redoing,i=n?this.redoStack:this.undoStack;n?this.stopCapturing():r||(this.redoStack=[]);const o=new S;t.afterState.forEach((e,n)=>{const r=t.beforeState.get(n)||0,i=e-r;i>0&&A(o,n,r,i)});const s=g["a"]();if(s-this.lastChange<e&&i.length>0&&!n&&!r){const e=i[i.length-1];e.deletions=E([e.deletions,t.deleteSet]),e.insertions=E([e.insertions,o])}else i.push(new Gt(t.deleteSet,o));n||r||(this.lastChange=s),x(t,t.deleteSet,t=>{t instanceof Zn&&this.scope.some(e=>gt(e,t))&&Gn(t,!0)}),this.emit("stack-item-added",[{stackItem:i[i.length-1],origin:t.origin,type:n?"redo":"undo",changedParentTypes:t.changedParentTypes},this])})}clear(){this.doc.transact(t=>{const e=e=>{x(t,e.deletions,t=>{t instanceof Zn&&this.scope.some(e=>gt(e,t))&&Gn(t,!1)})};this.undoStack.forEach(e),this.redoStack.forEach(e)}),this.undoStack=[],this.redoStack=[]}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=Xt(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=Xt(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}}function*Zt(t){const e=c["k"](t.restDecoder);for(let n=0;n<e;n++){const e=c["k"](t.restDecoder),n=t.readClient();let r=c["k"](t.restDecoder);for(let i=0;i<e;i++){const e=t.readInfo();if(10===e){const e=c["k"](t.restDecoder);yield new rr(dt(n,r),e),r+=e}else if(0!==(f["i"]&e)){const i=0===(e&(f["f"]|f["g"])),o=new Zn(dt(n,r),null,(e&f["g"])===f["g"]?t.readLeftID():null,null,(e&f["f"])===f["f"]?t.readRightID():null,i?t.readParentInfo()?t.readString():t.readLeftID():null,i&&(e&f["e"])===f["e"]?t.readString():null,tr(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new Sn(dt(n,r),e),r+=e}}}}class te{constructor(t,e){this.gen=Zt(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===rr);return this.curr}}class ee{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const ne=t=>ie(t,L,$),re=(t,e)=>{if(t.constructor===Sn){const{client:n,clock:r}=t.id;return new Sn(dt(n,r+e),t.length-e)}if(t.constructor===rr){const{client:n,clock:r}=t.id;return new rr(dt(n,r+e),t.length-e)}{const n=t,{client:r,clock:i}=n.id;return new Zn(dt(r,i+e),null,dt(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},ie=(t,e=B,n=H)=>{const r=t.map(t=>new e(c["e"](t)));let i=r.map(t=>new te(t,!0)),o=null;const s=new n,a=new ee(s);while(1){if(i=i.filter(t=>null!==t.curr),i.sort((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===rr?1:-1:n}return e.curr.id.client-t.curr.id.client}),0===i.length)break;const t=i[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)ae(a,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===rr)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{ae(a,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length,r=new rr(dt(e,o.struct.id.clock+o.struct.length),t);o={struct:r,offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===rr?o.struct.length-=e:n=re(n,e)),o.struct.mergeWith(n)||(ae(a,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==rr;n=t.next())ae(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(ae(a,o.struct,o.offset),o=null),ce(a);const u=r.map(t=>I(t)),l=E(u);return R(s,l),s.toUint8Array()},oe=(t,e,n=B,r=H)=>{const i=nt(e),s=new r,a=new ee(s),u=new n(c["e"](t)),l=new te(u,!1);while(l.curr){const t=l.curr,e=t.id.client,n=i.get(e)||0;if(l.curr.constructor!==rr)if(t.id.clock+t.length>n){ae(a,t,o["f"](n-t.id.clock,0)),l.next();while(l.curr&&l.curr.id.client===e)ae(a,l.curr,0),l.next()}else while(l.curr&&l.curr.id.client===e&&l.curr.id.clock+l.curr.length<=n)l.next();else l.next()}ce(a);const h=I(u);return R(s,h),s.toUint8Array()},se=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:a["f"](t.encoder.restEncoder)}),t.encoder.restEncoder=a["e"](),t.written=0)},ae=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&se(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),a["m"](t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},ce=t=>{se(t);const e=t.encoder.restEncoder;a["m"](e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];a["m"](e,r.written),a["j"](e,r.restEncoder)}},ue=(t,e,n)=>{const r=new e(c["e"](t)),i=new te(r,!1),o=new n,s=new ee(o);for(let c=i.curr;null!==c;c=i.next())ae(s,c,0);ce(s);const a=I(r);return R(o,a),o.toUint8Array()},le=t=>ue(t,B,$);class he{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null}get path(){return fe(this.currentTarget,this.target)}deletes(t){return C(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){const t=new Map,e=this.target,n=this.transaction.changed.get(e);n.forEach(n=>{if(null!==n){const r=e._map.get(n);let o,s;if(this.adds(r)){let t=r.left;while(null!==t&&this.adds(t))t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;o="delete",s=i["d"](t.content.getContent())}else null!==t&&this.deletes(t)?(o="update",s=i["d"](t.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=i["d"](r.content.getContent())}t.set(n,{action:o,oldValue:s})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){const e=this.target,n=d["a"](),r=d["a"](),i=[];t={added:n,deleted:r,delta:i,keys:this.keys};const o=this.transaction.changed.get(e);if(o.has(null)){let t=null;const o=()=>{t&&i.push(t)};for(let i=e._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==t&&void 0!==t.delete||(o(),t={delete:0}),t.delete+=i.length,r.add(i)):this.adds(i)?(null!==t&&void 0!==t.insert||(o(),t={insert:[]}),t.insert=t.insert.concat(i.content.getContent()),n.add(i)):(null!==t&&void 0!==t.retain||(o(),t={retain:0}),t.retain+=i.length);null!==t&&void 0===t.retain&&o()}this._changes=t}return t}}const fe=(t,e)=>{const n=[];while(null!==e._item&&e!==t){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;while(r!==e._item&&null!==r)r.deleted||t++,r=r.right;n.unshift(t)}e=e._item.parent}return n},pe=80;let de=0;class me{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=de++}}const ge=t=>{t.timestamp=de++},ve=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=de++},ye=(t,e,n)=>{if(t.length>=pe){const r=t.reduce((t,e)=>t.timestamp<e.timestamp?t:e);return ve(r,e,n),r}{const r=new me(e,n);return t.push(r),r}},be=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce((t,n)=>o["a"](e-t.index)<o["a"](e-n.index)?t:n);let r=t._start,i=0;null!==n&&(r=n.p,i=n.index,ge(n));while(null!==r.right&&i<e){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>e)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&o["a"](n.index-i)<r.parent.length/pe?(ve(n,r,i),n):ye(t._searchMarker,r,i)},we=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let e=i.p;e.marker=!1;while(e&&(e.deleted||!e.countable))e=e.left,e&&!e.deleted&&e.countable&&(i.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}i.p=e,e.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=o["f"](e,i.index+n))}},ke=(t,e,n)=>{const r=t,i=e.changedParentTypes;while(1){if(s["e"](i,t,()=>[]).push(n),null===t._item)break;t=t._item.parent}ht(r._eH,n,e)};class Se{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ct(),this._dEH=ct(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw h["b"]()}clone(){throw h["b"]()}_write(t){}get _first(){let t=this._start;while(null!==t&&t.deleted)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){ut(this._eH,t)}observeDeep(t){ut(this._dEH,t)}unobserve(t){lt(this._eH,t)}unobserveDeep(t){lt(this._dEH,t)}toJSON(){}}const xe=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)i.push(t[n]),r--;e=0}}o=o.right}return i},_e=t=>{const e=[];let n=t._start;while(null!==n){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},Ce=(t,e)=>{const n=[];let r=t._start;while(null!==r){if(r.countable&&At(r,e)){const t=r.content.getContent();for(let e=0;e<t.length;e++)n.push(t[e])}r=r.right}return n},Oe=(t,e)=>{let n=0,r=t._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)e(i[r],n++,t)}r=r.right}},Ee=(t,e)=>{const n=[];return Oe(t,(r,i)=>{n.push(e(r,i,t))}),n},Ae=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==e&&e.deleted)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},Me=(t,e)=>{const n=be(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Te=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,a=o.store,c=null===n?e._start:n.right;let u=[];const l=()=>{u.length>0&&(i=new Zn(dt(s,It(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new jn(u)),i.integrate(t,0),u=[])};r.forEach(n=>{switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(n);break;default:switch(l(),n.constructor){case Uint8Array:case ArrayBuffer:i=new Zn(dt(s,It(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new xn(new Uint8Array(n))),i.integrate(t,0);break;case j:i=new Zn(dt(s,It(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new En(n)),i.integrate(t,0);break;default:if(!(n instanceof Se))throw new Error("Unexpected content type in insert operation");i=new Zn(dt(s,It(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Jn(n)),i.integrate(t,0)}}}),l()},Re=h["a"]("Length exceeded!"),Ie=(t,e,n,r)=>{if(n>e._length)throw Re;if(0===n)return e._searchMarker&&we(e._searchMarker,n,r.length),Te(t,e,null,r);const i=n,o=be(e,n);let s=e._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Ft(t,dt(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&we(e._searchMarker,i,r.length),Te(t,e,s,r)},De=(t,e,n,r)=>{if(0===r)return;const i=n,o=r,s=be(e,n);let a=e._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Ft(t,dt(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&Ft(t,dt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw Re;e._searchMarker&&we(e._searchMarker,i,-o+r)},Ne=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},je=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let a;if(null==r)a=new jn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new jn([r]);break;case Uint8Array:a=new xn(r);break;case j:a=new En(r);break;default:if(!(r instanceof Se))throw new Error("Unexpected content type");a=new Jn(r)}new Zn(dt(s,It(o.store,s)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},Pe=(t,e)=>{const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Le=t=>{const e={};return t._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},Fe=(t,e)=>{const n=t._map.get(e);return void 0!==n&&!n.deleted},Be=t=>y(t.entries(),t=>!t[1].deleted);class ze extends he{constructor(t,e){super(t,e),this._transaction=e}}class $e extends Se{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new $e;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new $e}clone(){const t=new $e;return t.insert(0,this.toArray().map(t=>t instanceof Se?t.clone():t)),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),ke(this,t,new ze(this,t))}insert(t,e){null!==this.doc?Yt(this.doc,n=>{Ie(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?Yt(this.doc,n=>{De(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return Me(this,t)}toArray(){return _e(this)}slice(t=0,e=this.length){return xe(this,t,e)}toJSON(){return this.map(t=>t instanceof Se?t.toJSON():t)}map(t){return Ee(this,t)}forEach(t){Oe(this,t)}[Symbol.iterator](){return Ae(this)}_write(t){t.writeTypeRef(zn)}}const Ue=t=>new $e;class He extends he{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Ve extends Se{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((t,e)=>{this.set(e,t)}),this._prelimContent=null}_copy(){return new Ve}clone(){const t=new Ve;return this.forEach((e,n)=>{t.set(n,e instanceof Se?e.clone():e)}),t}_callObserver(t,e){ke(this,t,new He(this,t,e))}toJSON(){const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof Se?r.toJSON():r}}),t}get size(){return[...Be(this._map)].length}keys(){return b(Be(this._map),t=>t[0])}values(){return b(Be(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return b(Be(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){const e={};return this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)}),e}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?Yt(this.doc,e=>{Ne(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?Yt(this.doc,n=>{je(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return Pe(this,t)}has(t){return Fe(this,t)}clear(){null!==this.doc?Yt(this.doc,t=>{this.forEach((function(e,n,r){Ne(t,r,n)}))}):this._prelimContent.clear()}_write(t){t.writeTypeRef($n)}}const We=t=>new Ve,qe=(t,e)=>t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&w["a"](t,e);class Je{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&h["c"](),this.right.content.constructor){case Mn:case Ln:this.right.deleted||(this.index+=this.right.length);break;case Rn:this.right.deleted||Xe(this.currentAttributes,this.right.content);break}this.left=this.right,this.right=this.right.right}}const Ke=(t,e,n)=>{while(null!==e.right&&n>0){switch(e.right.content.constructor){case Mn:case Ln:e.right.deleted||(n<e.right.length&&Ft(t,dt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break;case Rn:e.right.deleted||Xe(e.currentAttributes,e.right.content);break}e.left=e.right,e.right=e.right.right}return e},Ye=(t,e,n)=>{const r=new Map,i=be(e,n);if(i){const e=new Je(i.p.left,i.p,i.index,r);return Ke(t,e,n-i.index)}{const i=new Je(null,e._start,0,r);return Ke(t,i,n)}},Ge=(t,e,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Rn&&qe(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach((r,s)=>{const a=n.left,c=n.right,u=new Zn(dt(o,It(i.store,o)),a,a&&a.lastId,c,c&&c.id,e,null,new Rn(s,r));u.integrate(t,0),n.right=u,n.forward()})},Xe=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},Qe=(t,e)=>{while(1){if(null===t.right)break;if(!(t.right.deleted||t.right.content.constructor===Rn&&qe(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},Ze=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],u=n.currentAttributes.get(a)||null;if(!qe(u,c)){s.set(a,u);const{left:r,right:l}=n;n.right=new Zn(dt(o,It(i.store,o)),r,r&&r.lastId,l,l&&l.id,e,null,new Rn(a,c)),n.right.integrate(t,0),n.forward()}}return s},tn=(t,e,n,r,i)=>{n.currentAttributes.forEach((t,e)=>{void 0===i[e]&&(i[e]=null)});const o=t.doc,s=o.clientID;Qe(n,i);const a=Ze(t,e,n,i),c=r.constructor===String?new Ln(r):new Mn(r);let{left:u,right:l,index:h}=n;e._searchMarker&&we(e._searchMarker,n.index,c.getLength()),l=new Zn(dt(s,It(o.store,s)),u,u&&u.lastId,l,l&&l.id,e,null,c),l.integrate(t,0),n.right=l,n.index=h,n.forward(),Ge(t,e,n,a)},en=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;Qe(n,i);const a=Ze(t,e,n,i);while(r>0&&null!==n.right){if(!n.right.deleted)switch(n.right.content.constructor){case Rn:{const{key:e,value:r}=n.right.content,o=i[e];void 0!==o&&(qe(o,r)?a.delete(e):a.set(e,r),n.right.delete(t));break}case Mn:case Ln:r<n.right.length&&Ft(t,dt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new Zn(dt(s,It(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Ln(i)),n.right.integrate(t,0),n.forward()}Ge(t,e,n,a)},nn=(t,e,n,r,i)=>{while(n&&n.content.constructor!==Ln&&n.content.constructor!==Mn)n.deleted||n.content.constructor!==Rn||Xe(i,n.content),n=n.right;let o=0;while(e!==n){if(!e.deleted){const n=e.content;switch(n.constructor){case Rn:{const{key:s,value:a}=n;(i.get(s)||null)===a&&(r.get(s)||null)!==a||(e.delete(t),o++);break}}}e=e.right}return o},rn=(t,e)=>{while(e&&e.right&&(e.right.deleted||e.right.content.constructor!==Ln&&e.right.content.constructor!==Mn))e=e.right;const n=new Set;while(e&&(e.deleted||e.content.constructor!==Ln&&e.content.constructor!==Mn)){if(!e.deleted&&e.content.constructor===Rn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},on=t=>{let e=0;return Yt(t.doc,n=>{let r=t._start,i=t._start,o=s["c"]();const a=s["b"](o);while(i){if(!1===i.deleted)switch(i.content.constructor){case Rn:Xe(a,i.content);break;case Mn:case Ln:e+=nn(n,r,i,o,a),o=s["b"](a),r=i;break}i=i.right}}),e},sn=(t,e,n)=>{const r=n,i=s["b"](e.currentAttributes),o=e.right;while(n>0&&null!==e.right){if(!1===e.right.deleted)switch(e.right.content.constructor){case Mn:case Ln:n<e.right.length&&Ft(t,dt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&nn(t,o,e.right,i,s["b"](e.currentAttributes));const a=(e.left||e.right).parent;return a._searchMarker&&we(a._searchMarker,e.index,-r+n),e};class an extends he{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)})}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];Yt(t,t=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",c=0,u=0;const l=()=>{if(null!==o){let t;switch(o){case"delete":t={delete:u},u=0;break;case"insert":t={insert:a},n.size>0&&(t.attributes={},n.forEach((e,n)=>{null!==e&&(t.attributes[n]=e)})),a="";break;case"retain":if(t={retain:c},Object.keys(s).length>0){t.attributes={};for(const e in s)t.attributes[e]=s[e]}c=0;break}e.push(t),o=null}};while(null!==i){switch(i.content.constructor){case Mn:this.adds(i)?this.deletes(i)||(l(),o="insert",a=i.content.embed,l()):this.deletes(i)?("delete"!==o&&(l(),o="delete"),u+=1):i.deleted||("retain"!==o&&(l(),o="retain"),c+=1);break;case Ln:this.adds(i)?this.deletes(i)||("insert"!==o&&(l(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(l(),o="delete"),u+=i.length):i.deleted||("retain"!==o&&(l(),o="retain"),c+=i.length);break;case Rn:{const{key:e,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const c=n.get(e)||null;qe(c,a)?i.delete(t):("retain"===o&&l(),qe(a,r.get(e)||null)?delete s[e]:s[e]=a)}}else if(this.deletes(i)){r.set(e,a);const t=n.get(e)||null;qe(t,a)||("retain"===o&&l(),s[e]=t)}else if(!i.deleted){r.set(e,a);const n=s[e];void 0!==n&&(qe(n,a)?i.delete(t):("retain"===o&&l(),null===a?s[e]=a:delete s[e]))}i.deleted||("insert"===o&&l(),Xe(n,i.content));break}}i=i.right}l();while(e.length>0){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}}),this._delta=e}return this._delta}}class cn extends Se{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(t=>t())}catch(n){console.error(n)}this._pending=null}_copy(){return new cn}clone(){const t=new cn;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new an(this,t,e),r=t.doc;if(ke(this,t,n),!t.local){let e=!1;for(const[n,i]of t.afterState.entries()){const o=t.beforeState.get(n)||0;if(i!==o&&($t(t,r.store.clients.get(n),o,i,t=>{t.deleted||t.content.constructor!==Rn||(e=!0)}),e))break}e||x(t,t.deleteSet,t=>{t instanceof Sn||e||t.parent===this&&t.content.constructor===Rn&&(e=!0)}),Yt(r,t=>{e?on(this):x(t,t.deleteSet,e=>{e instanceof Sn||e.parent===this&&rn(t,e)})})}}toString(){let t="",e=this._start;while(null!==e)!e.deleted&&e.countable&&e.content.constructor===Ln&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?Yt(this.doc,n=>{const r=new Je(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(void 0!==o.insert){const s=e||"string"!==typeof o.insert||i!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&tn(n,this,r,s,o.attributes||{})}else void 0!==o.retain?en(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&sn(n,r,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function c(){if(s.length>0){const t={};let e=!1;i.forEach((n,r)=>{e=!0,t[r]=n});const n={insert:s};e&&(n.attributes=t),r.push(n),s=""}}return Yt(o,o=>{t&&Mt(o,t),e&&Mt(o,e);while(null!==a){if(At(a,t)||void 0!==e&&At(a,e))switch(a.content.constructor){case Ln:{const r=i.get("ychange");void 0===t||At(a,t)?void 0===e||At(a,e)?void 0!==r&&(c(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.state||(c(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.state||(c(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Mn:{c();const t={insert:a.content.embed};if(i.size>0){const e={};t.attributes=e,i.forEach((t,n)=>{e[n]=t})}r.push(t);break}case Rn:At(a,t)&&(c(),Xe(i,a.content));break}a=a.right}c()},Mt),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?Yt(r,r=>{const i=Ye(r,this,t);n||(n={},i.currentAttributes.forEach((t,e)=>{n[e]=t})),tn(r,this,i,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n={}){if(e.constructor!==Object)throw new Error("Embed must be an Object");const r=this.doc;null!==r?Yt(r,r=>{const i=Ye(r,this,t);tn(r,this,i,e,n)}):this._pending.push(()=>this.insertEmbed(t,e,n))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?Yt(n,n=>{sn(n,Ye(n,this,t),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?Yt(r,r=>{const i=Ye(r,this,t);null!==i.right&&en(r,this,i,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){null!==this.doc?Yt(this.doc,e=>{Ne(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){null!==this.doc?Yt(this.doc,n=>{je(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return Pe(this,t)}getAttributes(t){return Le(this)}_write(t){t.writeTypeRef(Un)}}const un=t=>new cn;class ln{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==pn&&e.constructor!==hn||null===e._start)while(null!==t){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class hn extends Se{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new hn}clone(){const t=new hn;return t.insert(0,this.toArray().map(t=>t instanceof Se?t.clone():t)),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new ln(this,t)}querySelector(t){t=t.toUpperCase();const e=new ln(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t),n=e.next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new ln(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){ke(this,t,new mn(this,e,t))}toString(){return Ee(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Oe(this,i=>{r.insertBefore(i.toDOM(t,e,n),null)}),r}insert(t,e){null!==this.doc?Yt(this.doc,n=>{Ie(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)Yt(this.doc,n=>{const r=t&&t instanceof Se?t._item:t;Te(n,this,r,e)});else{const n=this._prelimContent,r=null===t?0:n.findIndex(e=>e===t)+1;if(0===r&&null!==t)throw h["a"]("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?Yt(this.doc,n=>{De(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return _e(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Me(this,t)}slice(t=0,e=this.length){return xe(this,t,e)}_write(t){t.writeTypeRef(Vn)}}const fn=t=>new hn;class pn extends hn{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((t,e)=>{this.setAttribute(e,t)}),this._prelimAttrs=null}_copy(){return new pn(this.nodeName)}clone(){const t=new pn(this.nodeName),e=this.getAttributes();for(const n in e)t.setAttribute(n,e[n]);return t.insert(0,this.toArray().map(t=>t instanceof Se?t.clone():t)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const s in t)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];e.push(r+'="'+t[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){null!==this.doc?Yt(this.doc,e=>{Ne(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?Yt(this.doc,n=>{je(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return Pe(this,t)}hasAttribute(t){return Fe(this,t)}getAttributes(t){return Le(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i)r.setAttribute(o,i[o]);return Oe(this,i=>{r.appendChild(i.toDOM(t,e,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(Hn),t.writeKey(this.nodeName)}}const dn=t=>new pn(t.readKey());class mn extends he{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)})}}class gn extends Ve{constructor(t){super(),this.hookName=t}_copy(){return new gn(this.hookName)}clone(){const t=new gn(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const r=e[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(Wn),t.writeKey(this.hookName)}}const vn=t=>new gn(t.readKey());class yn extends cn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new yn}clone(){const t=new yn;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort((t,e)=>t.key<e.key?-1:1),e.push({nodeName:r,attrs:n})}e.sort((t,e)=>t.nodeName<e.nodeName?-1:1);let n="";for(let r=0;r<e.length;r++){const t=e[r];n+="<"+t.nodeName;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(qn)}}const bn=t=>new yn;class wn{constructor(t,e){this.id=t,this.length=e}get deleted(){throw h["b"]()}mergeWith(t){return!1}write(t,e,n){throw h["b"]()}integrate(t,e){throw h["b"]()}}const kn=0;class Sn extends wn{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),Dt(t.doc.store,this)}write(t,e){t.writeInfo(kn),t.writeLen(this.length-e)}getMissing(t,e){return null}}class xn{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new xn(this.content)}splice(t){throw h["b"]()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const _n=t=>new xn(t.readBuf());class Cn{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Cn(this.len)}splice(t){const e=new Cn(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){A(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const On=t=>new Cn(t.readLen());class En{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new En(this.doc)}splice(t){throw h["b"]()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const An=t=>new En(new j({guid:t.readString(),...t.readAny()}));class Mn{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Mn(this.embed)}splice(t){throw h["b"]()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const Tn=t=>new Mn(t.readJSON());class Rn{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Rn(this.key,this.value)}splice(t){throw h["b"]()}mergeWith(t){return!1}integrate(t,e){e.parent._searchMarker=null}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const In=t=>new Rn(t.readString(),t.readJSON());class Dn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Dn(this.arr)}splice(t){const e=new Dn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const Nn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new Dn(n)};class jn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new jn(this.arr)}splice(t){const e=new jn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}const Pn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new jn(n)};class Ln{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ln(this.str)}splice(t){const e=new Ln(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const Fn=t=>new Ln(t.readString()),Bn=[Ue,We,un,dn,fn,vn,bn],zn=0,$n=1,Un=2,Hn=3,Vn=4,Wn=5,qn=6;class Jn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Jn(this.type._copy())}splice(t){throw h["b"]()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;while(null!==e)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(e=>{e.deleted?t._mergeStructs.push(e):e.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;while(null!==e)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(e=>{while(null!==e)e.gc(t,!0),e=e.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const Kn=t=>new Jn(Bn[t.readTypeRef()](t)),Yn=(t,e)=>{let n,r=e,i=0;do{i>0&&(r=dt(r.client,r.clock+i)),n=Pt(t,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Zn);return{item:n,diff:i}},Gn=(t,e)=>{while(null!==t&&t.keep!==e)t.keep=e,t=t.parent._item},Xn=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new Zn(dt(r,i+n),e,dt(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=dt(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o},Qn=(t,e,n)=>{const r=t.doc,i=r.store,o=r.clientID,s=e.redone;if(null!==s)return Ft(t,s);let a,c,u=e.parent._item;if(null===e.parentSub)a=e.left,c=e;else{a=e;while(null!==a.right)if(a=a.right,a.id.client!==o)return null;null!==a.right&&(a=e.parent._map.get(e.parentSub)),c=null}if(null!==u&&!0===u.deleted&&null===u.redone&&(!n.has(u)||null===Qn(t,u,n)))return null;if(null!==u&&null!==u.redone){while(null!==u.redone)u=Ft(t,u.redone);while(null!==a){let e=a;while(null!==e&&e.parent._item!==u)e=null===e.redone?null:Ft(t,e.redone);if(null!==e&&e.parent._item===u){a=e;break}a=a.left}while(null!==c){let e=c;while(null!==e&&e.parent._item!==u)e=null===e.redone?null:Ft(t,e.redone);if(null!==e&&e.parent._item===u){c=e;break}c=c.right}}const l=It(i,o),h=dt(o,l),f=new Zn(h,a,a&&a.lastId,c,c&&c.id,null===u?e.parent:u.content.type,e.parentSub,e.content.copy());return e.redone=h,Gn(f,!0),f.integrate(t,0),f};class Zn extends wn{constructor(t,e,n,r,i,o,s,a){super(t,a.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?f["b"]:0}set marker(t){(this.info&f["d"])>0!==t&&(this.info^=f["d"])}get marker(){return(this.info&f["d"])>0}get keep(){return(this.info&f["a"])>0}set keep(t){this.keep!==t&&(this.info^=f["a"])}get countable(){return(this.info&f["b"])>0}get deleted(){return(this.info&f["c"])>0}set deleted(t){this.deleted!==t&&(this.info^=f["c"])}markDeleted(){this.info|=f["c"]}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=It(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=It(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ft&&this.id.client!==this.parent.client&&this.parent.clock>=It(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Bt(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ft(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Sn||this.right&&this.right.constructor===Sn)&&(this.parent=null),this.parent){if(this.parent.constructor===ft){const t=Pt(e,this.parent);t.constructor===Sn?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===Zn&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Zn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Bt(t,t.doc.store,dt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start;const r=new Set,i=new Set;while(null!==e&&e!==this.right){if(i.add(e),r.add(e),pt(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(pt(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!i.has(Pt(t.doc.store,e.origin)))break;r.has(Pt(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Dt(t.doc.store,this),this.content.integrate(t,this),Vt(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new Sn(this.id,this.length).integrate(t,0)}get next(){let t=this.right;while(null!==t&&t.deleted)t=t.right;return t}get prev(){let t=this.left;while(null!==t&&t.deleted)t=t.left;return t}get lastId(){return 1===this.length?this.id:dt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&pt(t.origin,this.lastId)&&this.right===t&&pt(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),A(t.deleteSet,this.id.client,this.id.clock,this.length),Vt(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw h["c"]();this.content.gc(t),e?zt(t,this,new Sn(this.id,this.length)):this.content=new Cn(this.length)}write(t,e){const n=e>0?dt(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&f["i"]|(null===n?0:f["g"])|(null===r?0:f["f"])|(null===i?0:f["e"]);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=mt(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===ft?(t.writeParentInfo(!1),t.writeLeftID(e)):h["c"]();null!==i&&t.writeString(i)}this.content.write(t,e)}}const tr=(t,e)=>er[e&f["i"]](t),er=[()=>{h["c"]()},On,Nn,_n,Fn,Tn,In,Kn,Pn,An,()=>{h["c"]()}],nr=10;class rr extends wn{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){h["c"]()}write(t,e){t.writeInfo(nr),a["m"](t.restEncoder,this.length-e)}getMissing(t,e){return null}}},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("e538"),s=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||s(e,t,{value:o.f(t)})}},"753f":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){(function(e){var n;(function(e){t.exports=e()})((function(){return function(){function t(e,r,i){function o(a,c){if(!r[a]){if(!e[a]){var u="function"==typeof n&&n;if(!c&&u)return n(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};e[a][0].call(h.exports,(function(t){var n=e[a][1][t];return o(n||t)}),h,h.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<i.length;a++)o(i[a]);return o}return t}()({1:[function(t,n,r){(function(t){var e=e||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var c=0;c<e;c+=o)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);(function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var o=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)t.push(r.charAt(o>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map,i=r.charAt(64);i&&(i=t.indexOf(i),-1!=i&&(e=i));i=[];for(var o=0,s=0;s<e;s++)if(s%4){var a=r.indexOf(t.charAt(s-1))<<s%4*2,c=r.indexOf(t.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|c)<<24-o%4*8,o++}return n.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(t){function n(t,e,n,r,i,o,s){return t=t+(e&n|~e&r)+i+s,(t<<o|t>>>32-o)+e}function r(t,e,n,r,i,o,s){return t=t+(e&r|n&~r)+i+s,(t<<o|t>>>32-o)+e}function i(t,e,n,r,i,o,s){return t=t+(e^n^r)+i+s,(t<<o|t>>>32-o)+e}function o(t,e,n,r,i,o,s){return t=t+(n^(e|~r))+i+s,(t<<o|t>>>32-o)+e}for(var s=e,a=s.lib,c=a.WordArray,u=a.Hasher,l=(a=s.algo,[]),h=0;64>h;h++)l[h]=4294967296*t.abs(t.sin(h+1))|0;a=a.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;16>s;s++){var a=e+s,c=t[a];t[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}s=this._hash.words,a=t[e+0],c=t[e+1];var u=t[e+2],h=t[e+3],f=t[e+4],p=t[e+5],d=t[e+6],m=t[e+7],g=t[e+8],v=t[e+9],y=t[e+10],b=t[e+11],w=t[e+12],k=t[e+13],S=t[e+14],x=t[e+15],_=s[0],C=s[1],O=s[2],E=s[3];_=n(_,C,O,E,a,7,l[0]),E=n(E,_,C,O,c,12,l[1]),O=n(O,E,_,C,u,17,l[2]),C=n(C,O,E,_,h,22,l[3]),_=n(_,C,O,E,f,7,l[4]),E=n(E,_,C,O,p,12,l[5]),O=n(O,E,_,C,d,17,l[6]),C=n(C,O,E,_,m,22,l[7]),_=n(_,C,O,E,g,7,l[8]),E=n(E,_,C,O,v,12,l[9]),O=n(O,E,_,C,y,17,l[10]),C=n(C,O,E,_,b,22,l[11]),_=n(_,C,O,E,w,7,l[12]),E=n(E,_,C,O,k,12,l[13]),O=n(O,E,_,C,S,17,l[14]),C=n(C,O,E,_,x,22,l[15]),_=r(_,C,O,E,c,5,l[16]),E=r(E,_,C,O,d,9,l[17]),O=r(O,E,_,C,b,14,l[18]),C=r(C,O,E,_,a,20,l[19]),_=r(_,C,O,E,p,5,l[20]),E=r(E,_,C,O,y,9,l[21]),O=r(O,E,_,C,x,14,l[22]),C=r(C,O,E,_,f,20,l[23]),_=r(_,C,O,E,v,5,l[24]),E=r(E,_,C,O,S,9,l[25]),O=r(O,E,_,C,h,14,l[26]),C=r(C,O,E,_,g,20,l[27]),_=r(_,C,O,E,k,5,l[28]),E=r(E,_,C,O,u,9,l[29]),O=r(O,E,_,C,m,14,l[30]),C=r(C,O,E,_,w,20,l[31]),_=i(_,C,O,E,p,4,l[32]),E=i(E,_,C,O,g,11,l[33]),O=i(O,E,_,C,b,16,l[34]),C=i(C,O,E,_,S,23,l[35]),_=i(_,C,O,E,c,4,l[36]),E=i(E,_,C,O,f,11,l[37]),O=i(O,E,_,C,m,16,l[38]),C=i(C,O,E,_,y,23,l[39]),_=i(_,C,O,E,k,4,l[40]),E=i(E,_,C,O,a,11,l[41]),O=i(O,E,_,C,h,16,l[42]),C=i(C,O,E,_,d,23,l[43]),_=i(_,C,O,E,v,4,l[44]),E=i(E,_,C,O,w,11,l[45]),O=i(O,E,_,C,x,16,l[46]),C=i(C,O,E,_,u,23,l[47]),_=o(_,C,O,E,a,6,l[48]),E=o(E,_,C,O,m,10,l[49]),O=o(O,E,_,C,S,15,l[50]),C=o(C,O,E,_,p,21,l[51]),_=o(_,C,O,E,w,6,l[52]),E=o(E,_,C,O,h,10,l[53]),O=o(O,E,_,C,y,15,l[54]),C=o(C,O,E,_,c,21,l[55]),_=o(_,C,O,E,g,6,l[56]),E=o(E,_,C,O,x,10,l[57]),O=o(O,E,_,C,d,15,l[58]),C=o(C,O,E,_,k,21,l[59]),_=o(_,C,O,E,f,6,l[60]),E=o(E,_,C,O,b,10,l[61]),O=o(O,E,_,C,u,15,l[62]),C=o(C,O,E,_,v,21,l[63]);s[0]=s[0]+_|0,s[1]=s[1]+C|0,s[2]=s[2]+O|0,s[3]=s[3]+E|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=u._createHelper(a),s.HmacMD5=u._createHmacHelper(a)}(Math),function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=(n=t.algo,n.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){var n=this.cfg,r=n.hasher.create(),o=i.create(),s=o.words,a=n.keySize;for(n=n.iterations;s.length<a;){c&&r.update(c);var c=r.update(t).finalize(e);r.reset();for(var u=1;u<n;u++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*a,o}}));t.EvpKDF=function(t,e,n){return o.create(n).compute(t,e)}}(),e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=n.enc.Base64,c=n.algo.EvpKDF,u=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?m:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?m:d).decrypt(t,e,n,r)}}}});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=n.mode={},h=function(e,n,r){var i=this._iv;i?this._iv=t:i=this._prevBlock;for(var o=0;o<r;o++)e[n+o]^=i[o]},f=(r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;h.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),f.Decryptor=f.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),h.call(this,t,e,r),this._prevBlock=i}}),l=l.CBC=f,f=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=(n=n-t.sigBytes%n,n<<24|n<<16|n<<8|n),i=[],s=0;s<n;s+=4)i.push(r);n=o.create(i,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:l,padding:f}),reset:function(){u.reset.call(this);var t=this.cfg,e=t.iv;t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var p=r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),d=(l=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?o.create([1398893684,1701076831]).concat(t).concat(e):e).toString(a)},parse:function(t){t=a.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=o.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:n})}},r.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return e=i.finalize(e),i=i.cfg,p.create({ciphertext:e,key:n,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),m=(n=(n.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=o.random(8)),t=c.create({keySize:e+n}).compute(t,r),n=o.create(t.words.slice(e),4*n),t.sigBytes=4*e,p.create({key:t,iv:n,salt:r})}},r.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:n}),encrypt:function(t,e,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=d.encrypt.call(this,t,e,n.key,r),t.mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}}))}(),function(){for(var t=e,n=t.lib.BlockCipher,r=t.algo,i=[],o=[],s=[],a=[],c=[],u=[],l=[],h=[],f=[],p=[],d=[],m=0;256>m;m++)d[m]=128>m?m<<1:m<<1^283;var g=0,v=0;for(m=0;256>m;m++){var y=v^v<<1^v<<2^v<<3^v<<4;y=y>>>8^255&y^99;i[g]=y,o[y]=g;var b=d[g],w=d[b],k=d[w],S=257*d[y]^16843008*y;s[g]=S<<24|S>>>8,a[g]=S<<16|S>>>16,c[g]=S<<8|S>>>24,u[g]=S,S=16843009*k^65537*w^257*b^16843008*g,l[y]=S<<24|S>>>8,h[y]=S<<16|S>>>16,f[y]=S<<8|S>>>24,p[y]=S,g?(g=b^d[d[d[k^b]]],v^=d[d[v]]):g=v=1}var x=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=n.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,r=(t=4*((this._nRounds=n+6)+1),this._keySchedule=[]),o=0;o<t;o++)if(o<n)r[o]=e[o];else{var s=r[o-1];o%n?6<n&&4==o%n&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=x[o/n|0]<<24),r[o]=r[o-n]^s}for(e=this._invKeySchedule=[],n=0;n<t;n++)o=t-n,s=n%4?r[o]:r[o-4],e[n]=4>n||4>=o?s:l[i[s>>>24]]^h[i[s>>>16&255]]^f[i[s>>>8&255]]^p[i[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,c,u,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,h,f,p,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,s,a){for(var c=this._nRounds,u=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],p=4,d=1;d<c;d++){var m=r[u>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^n[p++],g=r[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&u]^n[p++],v=r[h>>>24]^i[f>>>16&255]^o[u>>>8&255]^s[255&l]^n[p++];f=r[f>>>24]^i[u>>>16&255]^o[l>>>8&255]^s[255&h]^n[p++],u=m,l=g,h=v}m=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[p++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&u])^n[p++],v=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[p++],f=(a[f>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[p++],t[e]=m,t[e+1]=g,t[e+2]=v,t[e+3]=f},keySize:8});t.AES=n._createHelper(r)}();e=e||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var c=0;c<e;c+=o)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);(function(t){for(var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,s=(r=n.algo,[]),a=[],c=function(t){return 4294967296*(t-(0|t))|0},u=2,l=0;64>l;){var h;t:{h=u;for(var f=t.sqrt(h),p=2;p<=f;p++)if(!(h%p)){h=!1;break t}h=!0}h&&(8>l&&(s[l]=c(t.pow(u,.5))),a[l]=c(t.pow(u,1/3)),l++),u++}var d=[];r=r.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|t[e+f];else{var p=d[f-15],m=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+d[f-16]}p=h+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+a[f]+d[f],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),h=l,l=u,u=c,c=s+p|0,s=o,o=i,i=r,r=p+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(r),n.HmacSHA256=o._createHmacHelper(r)})(Math),function(){var t=e,n=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,i=4*r;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}();e=e||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(r){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var c=0;c<e;c+=o)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);(function(t){var n=e,r=n.lib,i=r.Base,o=r.WordArray;n=n.x64={};n.Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),n.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:8*e.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}})})(),function(){function t(){return o.create.apply(o,arguments)}for(var n=e,r=n.lib.Hasher,i=n.x64,o=i.Word,s=i.WordArray,a=(i=n.algo,[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)]),c=[],u=0;80>u;u++)c[u]=t();i=i.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],l=n[5],h=n[6],f=(n=n[7],r.high),p=r.low,d=i.high,m=i.low,g=o.high,v=o.low,y=s.high,b=s.low,w=u.high,k=u.low,S=l.high,x=l.low,_=h.high,C=h.low,O=n.high,E=n.low,A=f,M=p,T=d,R=m,I=g,D=v,N=y,j=b,P=w,L=k,F=S,B=x,z=_,$=C,U=O,H=E,V=0;80>V;V++){var W=c[V];if(16>V)var q=W.high=0|t[e+2*V],J=W.low=0|t[e+2*V+1];else{q=c[V-15],J=q.high;var K=q.low,Y=(q=(J>>>1|K<<31)^(J>>>8|K<<24)^J>>>7,K=(K>>>1|J<<31)^(K>>>8|J<<24)^(K>>>7|J<<25),c[V-2]),G=(J=Y.high,Y.low),X=(Y=(J>>>19|G<<13)^(J<<3|G>>>29)^J>>>6,G=(G>>>19|J<<13)^(G<<3|J>>>29)^(G>>>6|J<<26),J=c[V-7],J.high),Q=c[V-16],Z=Q.high;Q=Q.low,J=K+J.low,q=q+X+(J>>>0<K>>>0?1:0),J=J+G,q=q+Y+(J>>>0<G>>>0?1:0),J=J+Q,q=q+Z+(J>>>0<Q>>>0?1:0);W.high=q,W.low=J}X=P&F^~P&z,Q=L&B^~L&$,W=A&T^A&I^T&I;var tt=M&R^M&D^R&D,et=(K=(A>>>28|M<<4)^(A<<30|M>>>2)^(A<<25|M>>>7),Y=(M>>>28|A<<4)^(M<<30|A>>>2)^(M<<25|A>>>7),G=a[V],G.high),nt=G.low;G=H+((L>>>14|P<<18)^(L>>>18|P<<14)^(L<<23|P>>>9)),Z=U+((P>>>14|L<<18)^(P>>>18|L<<14)^(P<<23|L>>>9))+(G>>>0<H>>>0?1:0),G=G+Q,Z=Z+X+(G>>>0<Q>>>0?1:0),G=G+nt,Z=Z+et+(G>>>0<nt>>>0?1:0),G=G+J,Z=Z+q+(G>>>0<J>>>0?1:0),J=Y+tt,W=K+W+(J>>>0<Y>>>0?1:0),U=z,H=$,z=F,$=B,F=P,B=L,L=j+G|0,P=N+Z+(L>>>0<j>>>0?1:0)|0,N=I,j=D,I=T,D=R,T=A,R=M,M=G+J|0,A=Z+W+(M>>>0<G>>>0?1:0)|0}p=r.low=p+M,r.high=f+A+(p>>>0<M>>>0?1:0),m=i.low=m+R,i.high=d+T+(m>>>0<R>>>0?1:0),v=o.low=v+D,o.high=g+I+(v>>>0<D>>>0?1:0),b=s.low=b+j,s.high=y+N+(b>>>0<j>>>0?1:0),k=u.low=k+L,u.high=w+P+(k>>>0<L>>>0?1:0),x=l.low=x+B,l.high=S+F+(x>>>0<B>>>0?1:0),C=h.low=C+$,h.high=_+z+(C>>>0<$>>>0?1:0),E=n.low=E+H,n.high=O+U+(E>>>0<H>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),n.SHA512=r._createHelper(i),n.HmacSHA512=r._createHmacHelper(i)}(),function(){var t=e,n=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,i=4*r;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}();e=e||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(a){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var c=0;c<e;c+=o)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);(function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=[];n=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)o[u]=0|t[e+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+o[u],l=20>u?l+(1518500249+(i&s|~i&a)):40>u?l+(1859775393+(i^s^a)):60>u?l+((i&s|i&a|s&a)-1894007588):l+((i^s^a)-899497514),c=a,a=s,s=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=i._createHelper(n),t.HmacSHA1=i._createHmacHelper(n)})(),function(){var t=e,n=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,i=4*r;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=(n=t.algo,n.HMAC),s=n.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){var n=this.cfg,r=o.create(n.hasher,t),s=i.create(),a=i.create([1]),c=s.words,u=a.words,l=n.keySize;for(n=n.iterations;c.length<l;){var h=r.update(e).finalize(a);r.reset();for(var f=h.words,p=f.length,d=h,m=1;m<n;m++){d=r.finalize(d),r.reset();for(var g=d.words,v=0;v<p;v++)f[v]^=g[v]}s.concat(h),u[0]++}return s.sigBytes=4*l,s}});t.PBKDF2=function(t,e,n){return s.create(n).compute(t,e)}}();e=e||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var c=0;c<e;c+=o)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new s.init(c,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);function n(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){return h(t)||l(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(c){i=!0,o=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return n}}function h(t){if(Array.isArray(t))return t}function f(t){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){p(o,r,i,s,a,"next",t)}function a(t){p(o,r,i,s,a,"throw",t)}s(void 0)}))}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}(function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=[];n=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)o[u]=0|t[e+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+o[u],l=20>u?l+(1518500249+(i&s|~i&a)):40>u?l+(1859775393+(i^s^a)):60>u?l+((i&s|i&a|s&a)-1894007588):l+((i^s^a)-899497514),c=a,a=s,s=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=i._createHelper(n),t.HmacSHA1=i._createHmacHelper(n)})(),Object.defineProperty(r,"__esModule",{value:!0}),r.StandardFile=r.SFItemTransformer=r.SFCryptoWeb=r.SFCryptoJS=r.SFAbstractCrypto=r.SFItemHistoryEntry=r.SFItemHistory=r.SFHistorySession=r.SFPrivileges=r.SFPredicate=r.SFItemParams=r.SFItem=r.SFSyncManager=r.SFStorageManager=r.SFSingletonManager=r.SFSessionHistoryManager=r.SFPrivilegesManager=r.SFModelManager=r.SFMigrationManager=r.SFHttpManager=r.SFAuthManager=r.SFAlertManager=void 0;var y=function(){function t(){m(this,t)}return v(t,[{key:"alert",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){window.alert(e.text),t()})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"confirm",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){window.confirm(e.text)?t():n()})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();r.SFAlertManager=y;var b=function(){function t(e,n,r,i){m(this,t),t.DidSignOutEvent="DidSignOutEvent",t.WillSignInEvent="WillSignInEvent",t.DidSignInEvent="DidSignInEvent",this.httpManager=n,this.storageManager=e,this.alertManager=r||new y,this.$timeout=i||setTimeout.bind(window),this.eventHandlers=[]}return v(t,[{key:"addEventHandler",value:function(t){return this.eventHandlers.push(t),t}},{key:"removeEventHandler",value:function(t){_.pull(this.eventHandlers,t)}},{key:"notifyEvent",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=this.eventHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(t,e||{})}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"saveKeys",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._keys=e,t.next=3,this.storageManager.setItem("mk",e.mk);case 3:return t.next=5,this.storageManager.setItem("ak",e.ak);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"signout",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._keys=null,this._authParams=null,!n){e.next=6;break}return e.abrupt("return",this.storageManager.clearAllData().then((function(){r.notifyEvent(t.DidSignOutEvent)})));case 6:this.notifyEvent(t.DidSignOutEvent);case 7:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"keys",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._keys){t.next=11;break}return t.next=3,this.storageManager.getItem("mk");case 3:if(e=t.sent,e){t.next=6;break}return t.abrupt("return",null);case 6:return t.t0=e,t.next=9,this.storageManager.getItem("ak");case 9:t.t1=t.sent,this._keys={mk:t.t0,ak:t.t1};case 11:return t.abrupt("return",this._keys);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAuthParams",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._authParams){t.next=5;break}return t.next=3,this.storageManager.getItem("auth_params");case 3:e=t.sent,this._authParams=JSON.parse(e);case 5:if(!this._authParams||this._authParams.version){t.next=9;break}return t.next=8,this.defaultProtocolVersion();case 8:this._authParams.version=t.sent;case 9:return t.abrupt("return",this._authParams);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"defaultProtocolVersion",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.keys();case 2:if(e=t.sent,!e||!e.ak){t.next=7;break}return t.abrupt("return","002");case 7:return t.abrupt("return","001");case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"protocolVersion",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAuthParams();case 2:if(e=t.sent,!e||!e.version){t.next=5;break}return t.abrupt("return",e.version);case 5:return t.abrupt("return",this.defaultProtocolVersion());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAuthParamsForEmail",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){var i,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=_.merge({email:n},r),i["api"]=k.getApiVersion(),t.abrupt("return",new Promise((function(t,n){var r=e+"/auth/params";o.httpManager.getAbsolute(r,i,(function(e){t(e)}),(function(e){console.error("Error getting auth params",e),"object"!==f(e)&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),t(e)}))})));case 3:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"isLocked",value:function(){return 1==this.locked}},{key:"unlockAndResolve",value:function(t,e){this.unlock(),t(e)}},{key:"login",value:function(){var e=d(regeneratorRuntime.mark((function e(n,r,i,o,s){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=d(regeneratorRuntime.mark((function e(c,u){var l,h,p,m,g,v,y,b,w,S,x,C,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.keys();case 2:if(l=e.sent,null==l){e.next=6;break}return c({error:{message:"Cannot log in because already signed in."}}),e.abrupt("return");case 6:if(!a.isLocked()){e.next=9;break}return c({error:{message:"Login already in progress."}}),e.abrupt("return");case 9:return a.lock(),a.notifyEvent(t.WillSignInEvent),e.next=13,a.getAuthParamsForEmail(n,r,s);case 13:if(h=e.sent,h.identifier=r,!h.error){e.next=18;break}return a.unlockAndResolve(c,h),e.abrupt("return");case 18:if(h&&h.pw_cost){e.next=21;break}return a.unlockAndResolve(c,{error:{message:"Invalid email or password."}}),e.abrupt("return");case 21:if(SFJS.supportedVersions().includes(h.version)){e.next=25;break}return p=SFJS.isVersionNewerThanLibraryVersion(h.version)?"This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.":"The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.org/help/security for more information.",a.unlockAndResolve(c,{error:{message:p}}),e.abrupt("return");case 25:if(!SFJS.isProtocolVersionOutdated(h.version)){e.next=32;break}return m="The encryption version for your account, ".concat(h.version,", is outdated and requires upgrade. You may proceed with login, but are advised to perform a security update using the web or desktop application. Please visit standardnotes.org/help/security for more information."),g=!1,e.next=30,a.alertManager.confirm({title:"Update Needed",text:m,confirmButtonText:"Sign In"})["catch"]((function(){a.unlockAndResolve(c,{error:{}}),g=!0}));case 30:if(!g){e.next=32;break}return e.abrupt("return");case 32:if(SFJS.supportsPasswordDerivationCost(h.pw_cost)){e.next=36;break}return v="Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in.",a.unlockAndResolve(c,{error:{message:v}}),e.abrupt("return");case 36:if(y=SFJS.costMinimumForVersion(h.version),!(h.pw_cost<y)){e.next=41;break}return b="Unable to login due to insecure password parameters. Please visit standardnotes.org/help/security for more information.",a.unlockAndResolve(c,{error:{message:b}}),e.abrupt("return");case 41:if(!o){e.next=47;break}if(w=SFJS.version(),h.version===w){e.next=47;break}return S="Strict sign in refused server sign in parameters. The latest security version is ".concat(w,", but your account is reported to have version ").concat(h.version,". If you'd like to proceed with sign in anyway, please disable strict sign in and try again."),a.unlockAndResolve(c,{error:{message:S}}),e.abrupt("return");case 47:return e.next=49,SFJS.crypto.computeEncryptionKeysForUser(i,h);case 49:x=e.sent,C=n+"/auth/sign_in",O=_.merge({password:x.pw,email:r},s),O["api"]=k.getApiVersion(),a.httpManager.postAbsolute(C,O,function(){var e=d(regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.handleAuthResponse(i,r,n,h,x);case 2:a.notifyEvent(t.DidSignInEvent),a.$timeout((function(){return a.unlockAndResolve(c,i)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(t){console.error("Error logging in",t),"object"!==f(t)&&(t={error:{message:"A server error occurred while trying to sign in. Please try again."}}),a.$timeout((function(){return a.unlockAndResolve(c,t)}))}));case 54:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function n(t,n,r,i,o){return e.apply(this,arguments)}return n}()},{key:"register",value:function(t,e,n){var r=this;return new Promise(function(){var i=d(regeneratorRuntime.mark((function i(o,s){var a,c,u,l,h,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!r.isLocked()){i.next=3;break}return o({error:{message:"Register already in progress."}}),i.abrupt("return");case 3:if(a=8,!(n.length<a)){i.next=8;break}return c="Your password must be at least ".concat(a," characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again."),o({error:{message:c}}),i.abrupt("return");case 8:return r.lock(),i.next=11,SFJS.crypto.generateInitialKeysAndAuthParamsForUser(e,n);case 11:u=i.sent,l=u.keys,h=u.authParams,p=t+"/auth",m=_.merge({password:l.pw,email:e},h),m["api"]=k.getApiVersion(),r.httpManager.postAbsolute(p,m,function(){var n=d(regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.handleAuthResponse(i,e,t,h,l);case 2:r.unlockAndResolve(o,i);case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),(function(t){console.error("Registration error",t),"object"!==f(t)&&(t={error:{message:"A server error occurred while trying to register. Please try again."}}),r.unlockAndResolve(o,t)}));case 18:case"end":return i.stop()}}),i)})));return function(t,e){return i.apply(this,arguments)}}())}},{key:"changePassword",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i,o){var s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=d(regeneratorRuntime.mark((function t(a,c){var u,l,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s.isLocked()){t.next=3;break}return a({error:{message:"Change password already in progress."}}),t.abrupt("return");case 3:s.lock(),u=i.pw,l=e+"/auth/change_pw",h=_.merge({new_password:u,current_password:r},o),h["api"]=k.getApiVersion(),s.httpManager.postAuthenticatedAbsolute(l,h,function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.handleAuthResponse(e,n,null,o,i);case 2:s.unlockAndResolve(a,e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){"object"!==f(t)&&(t={error:{message:"Something went wrong while changing your password. Your password was not changed. Please try again."}}),s.unlockAndResolve(a,t)}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function e(e,n,r,i,o){return t.apply(this,arguments)}return e}()},{key:"handleAuthResponse",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=3;break}return t.next=3,this.storageManager.setItem("server",r);case 3:return this._authParams=i,t.next=6,this.storageManager.setItem("auth_params",JSON.stringify(i));case 6:return t.next=8,this.storageManager.setItem("jwt",e.token);case 8:return t.abrupt("return",this.saveKeys(o));case 9:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i,o){return t.apply(this,arguments)}return e}()}]),t}();r.SFAuthManager=b;var w="undefined"!==typeof window?window:"undefined"!==typeof t?t:null,k=function(){function t(e,n){m(this,t),this.$timeout=e||setTimeout.bind(w)}return v(t,null,[{key:"getApiVersion",value:function(){return"20190520"}}]),v(t,[{key:"setJWTRequestHandler",value:function(t){this.jwtRequestHandler=t}},{key:"setAuthHeadersForRequest",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.jwtRequestHandler();case 2:n=t.sent,n&&e.setRequestHeader("Authorization","Bearer "+n);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"postAbsolute",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpRequest("post",e,n,r,i));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"postAuthenticatedAbsolute",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpRequest("post",e,n,r,i,!0));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"patchAbsolute",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpRequest("patch",e,n,r,i));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"getAbsolute",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.httpRequest("get",e,n,r,i));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"httpRequest",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i,o){var s,a=this,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=c.length>5&&void 0!==c[5]&&c[5],t.abrupt("return",new Promise(function(){var t=d(regeneratorRuntime.mark((function t(c,u){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l=new XMLHttpRequest,l.onreadystatechange=function(){if(4==l.readyState){var t=l.responseText;if(t)try{t=JSON.parse(t)}catch(e){}l.status>=200&&l.status<=299?a.$timeout((function(){i(t),c(t)})):(console.error("Request error:",t),a.$timeout((function(){o(t,l.status),u(t)})))}},"get"==e&&Object.keys(r).length>0&&(n=a.urlForUrlAndParams(n,r)),l.open(e,n,!0),l.setRequestHeader("Content-type","application/json"),!s){t.next=8;break}return t.next=8,a.setAuthHeadersForRequest(l);case 8:"post"==e||"patch"==e?l.send(JSON.stringify(r)):l.send();case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));function e(e,n,r,i,o){return t.apply(this,arguments)}return e}()},{key:"urlForUrlAndParams",value:function(t,e){var n=Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&");return t.includes("?")?t+"&"+n:t+"?"+n}}]),t}();r.SFHttpManager=k;var S=function(){function t(e,n,r,i){var o=this;m(this,t),this.modelManager=e,this.syncManager=n,this.storageManager=r,this.completionHandlers=[],this.loadMigrations();var s=!1,a=i.addEventHandler((function(t){t==b.DidSignInEvent&&(s=!0)}));this.receivedLocalDataEvent=n.initialDataLoaded(),this.syncManager.addEventHandler(function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r,c,u,l,h,f,p,d,m,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r="local-data-loaded"==e,c="sync:completed"==e,!r&&!c){t.next=40;break}if(r?o.receivedLocalDataEvent=!0:c&&(o.receivedSyncCompletedEvent=!0),!o.receivedLocalDataEvent||!o.receivedSyncCompletedEvent){t.next=40;break}if(!s){t.next=39;break}return s=!1,i.removeEventHandler(a),t.next=10,o.getCompletedMigrations();case 10:u=t.sent.slice(),l=!0,h=!1,f=void 0,t.prev=14,p=u[Symbol.iterator]();case 16:if(l=(d=p.next()).done){t.next=25;break}return m=d.value,t.next=20,o.migrationForEncodedName(m);case 20:g=t.sent,g.runOnlyOnce||_.pull(o._completed,m);case 22:l=!0,t.next=16;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](14),h=!0,f=t.t0;case 31:t.prev=31,t.prev=32,l||null==p["return"]||p["return"]();case 34:if(t.prev=34,!h){t.next=37;break}throw f;case 37:return t.finish(34);case 38:return t.finish(31);case 39:o.runPendingMigrations();case 40:case"end":return t.stop()}}),t,null,[[14,27,31,39],[32,,34,38]])})));return function(e,n){return t.apply(this,arguments)}}())}return v(t,[{key:"addCompletionHandler",value:function(t){this.completionHandlers.push(t)}},{key:"removeCompletionHandler",value:function(t){_.pull(this.completionHandlers,t)}},{key:"migrationForEncodedName",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.decode(e);case 2:return n=t.sent,t.abrupt("return",this.migrations.find((function(t){return t.name==n})));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadMigrations",value:function(){this.migrations=this.registeredMigrations()}},{key:"registeredMigrations",value:function(){}},{key:"runPendingMigrations",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i,o,s,a,c,u,l,h,f,p,d,m,g,v,y,b,w,k,S,x,_,C,O,E,A,M;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPendingMigrations();case 2:for(e=t.sent,n=!0,r=!1,i=void 0,t.prev=6,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)a=s.value,a.items=[];t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](6),r=!0,i=t.t0;case 14:t.prev=14,t.prev=15,n||null==o["return"]||o["return"]();case 17:if(t.prev=17,!r){t.next=20;break}throw i;case 20:return t.finish(17);case 21:return t.finish(14);case 22:c=!0,u=!1,l=void 0,t.prev=25,h=this.modelManager.allNondummyItems[Symbol.iterator]();case 27:if(c=(f=h.next()).done){t.next=51;break}for(p=f.value,d=!0,m=!1,g=void 0,t.prev=32,v=e[Symbol.iterator]();!(d=(y=v.next()).done);d=!0)a=y.value,p.content_type==a.content_type&&a.items.push(p);t.next=40;break;case 36:t.prev=36,t.t1=t["catch"](32),m=!0,g=t.t1;case 40:t.prev=40,t.prev=41,d||null==v["return"]||v["return"]();case 43:if(t.prev=43,!m){t.next=46;break}throw g;case 46:return t.finish(43);case 47:return t.finish(40);case 48:c=!0,t.next=27;break;case 51:t.next=57;break;case 53:t.prev=53,t.t2=t["catch"](25),u=!0,l=t.t2;case 57:t.prev=57,t.prev=58,c||null==h["return"]||h["return"]();case 60:if(t.prev=60,!u){t.next=63;break}throw l;case 63:return t.finish(60);case 64:return t.finish(57);case 65:b=!0,w=!1,k=void 0,t.prev=68,S=e[Symbol.iterator]();case 70:if(b=(x=S.next()).done){t.next=81;break}if(a=x.value,!(a.items&&a.items.length>0||a.customHandler)){t.next=77;break}return t.next=75,this.runMigration(a,a.items);case 75:t.next=78;break;case 77:this.markMigrationCompleted(a);case 78:b=!0,t.next=70;break;case 81:t.next=87;break;case 83:t.prev=83,t.t3=t["catch"](68),w=!0,k=t.t3;case 87:t.prev=87,t.prev=88,b||null==S["return"]||S["return"]();case 90:if(t.prev=90,!w){t.next=93;break}throw k;case 93:return t.finish(90);case 94:return t.finish(87);case 95:for(_=!0,C=!1,O=void 0,t.prev=98,E=this.completionHandlers[Symbol.iterator]();!(_=(A=E.next()).done);_=!0)M=A.value,M();t.next=106;break;case 102:t.prev=102,t.t4=t["catch"](98),C=!0,O=t.t4;case 106:t.prev=106,t.prev=107,_||null==E["return"]||E["return"]();case 109:if(t.prev=109,!C){t.next=112;break}throw O;case 112:return t.finish(109);case 113:return t.finish(106);case 114:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21],[25,53,57,65],[32,36,40,48],[41,,43,47],[58,,60,64],[68,83,87,95],[88,,90,94],[98,102,106,114],[107,,109,113]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"encode",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",window.btoa(e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"decode",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",window.atob(e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCompletedMigrations",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._completed){t.next=5;break}return t.next=3,this.storageManager.getItem("migrations");case 3:e=t.sent,this._completed=e?JSON.parse(e):[];case 5:return t.abrupt("return",this._completed);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPendingMigrations",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i,o,s,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getCompletedMigrations();case 2:e=t.sent,n=[],r=!0,i=!1,o=void 0,t.prev=7,s=this.migrations[Symbol.iterator]();case 9:if(r=(a=s.next()).done){t.next=22;break}return c=a.value,t.t0=e,t.next=14,this.encode(c.name);case 14:if(t.t1=t.sent,t.t2=t.t0.indexOf.call(t.t0,t.t1),t.t3=-1,t.t2!=t.t3){t.next=19;break}n.push(c);case 19:r=!0,t.next=9;break;case 22:t.next=28;break;case 24:t.prev=24,t.t4=t["catch"](7),i=!0,o=t.t4;case 28:t.prev=28,t.prev=29,r||null==s["return"]||s["return"]();case 31:if(t.prev=31,!i){t.next=34;break}throw o;case 34:return t.finish(31);case 35:return t.finish(28);case 36:return t.abrupt("return",n);case 37:case"end":return t.stop()}}),t,this,[[7,24,28,36],[29,,31,35]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"markMigrationCompleted",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getCompletedMigrations();case 2:return n=t.sent,t.t0=n,t.next=6,this.encode(e.name);case 6:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),this.storageManager.setItem("migrations",JSON.stringify(n)),e.running=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"runMigration",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.running){t.next=2;break}return t.abrupt("return");case 2:if(console.log("Running migration:",e.name),e.running=!0,!e.customHandler){t.next=8;break}return t.abrupt("return",e.customHandler().then((function(){r.markMigrationCompleted(e)})));case 8:return t.abrupt("return",e.handler(n).then((function(){r.markMigrationCompleted(e)})));case 9:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();r.SFMigrationManager=S;var x=function(){function t(e){m(this,t),t.MappingSourceRemoteRetrieved="MappingSourceRemoteRetrieved",t.MappingSourceRemoteSaved="MappingSourceRemoteSaved",t.MappingSourceLocalSaved="MappingSourceLocalSaved",t.MappingSourceLocalRetrieved="MappingSourceLocalRetrieved",t.MappingSourceLocalDirtied="MappingSourceLocalDirtied",t.MappingSourceComponentRetrieved="MappingSourceComponentRetrieved",t.MappingSourceDesktopInstalled="MappingSourceDesktopInstalled",t.MappingSourceRemoteActionRetrieved="MappingSourceRemoteActionRetrieved",t.MappingSourceFileImport="MappingSourceFileImport",t.isMappingSourceRetrieved=function(e){return[t.MappingSourceRemoteRetrieved,t.MappingSourceComponentRetrieved,t.MappingSourceRemoteActionRetrieved].includes(e)},this.$timeout=e||setTimeout.bind(window),this.itemSyncObservers=[],this.items=[],this.itemsHash={},this.missedReferences={},this.uuidChangeObservers=[]}return v(t,[{key:"handleSignout",value:function(){this.items.length=0,this.itemsHash={},this.missedReferences={}}},{key:"addModelUuidChangeObserver",value:function(t,e){this.uuidChangeObservers.push({id:t,callback:e})}},{key:"notifyObserversOfUuidChange",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=this.uuidChangeObservers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;try{a.callback(t,e)}catch(c){console.error("Notify observers of uuid change exception:",c)}}}catch(u){r=!0,i=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"alternateUUIDForItem",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.createItem(n),e.next=3,SFJS.crypto.generateUUID();case 3:for(r.uuid=e.sent,r.informReferencesOfUUIDChange(n.uuid,r.uuid),this.informModelsOfUUIDChangeForItem(r,n.uuid,r.uuid),i=!0,o=!1,s=void 0,e.prev=9,a=n.referencingObjects[Symbol.iterator]();!(i=(c=a.next()).done);i=!0)u=c.value,u.setIsNoLongerBeingReferencedBy(n),n.setIsNoLongerBeingReferencedBy(u),u.addItemAsRelationship(r);e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),o=!0,s=e.t0;case 17:e.prev=17,e.prev=18,i||null==a["return"]||a["return"]();case 20:if(e.prev=20,!o){e.next=23;break}throw s;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return this.setItemsDirty(n.referencingObjects,!0),this.resolveReferencesForItem(r),this.loggingEnabled&&console.log(n.uuid,"--\x3e",r.uuid),n.deleted=!0,n.content.references=[],this.setItemDirty(n,!1,!1,t.MappingSourceLocalSaved),e.next=33,this.mapResponseItemsToLocalModels([n],t.MappingSourceLocalSaved);case 33:return this.addItem(r),this.setItemDirty(r,!0,!0,t.MappingSourceLocalSaved),this.notifyObserversOfUuidChange(n,r),e.abrupt("return",r);case 37:case"end":return e.stop()}}),e,this,[[9,13,17,25],[18,,20,24]])})));function n(t){return e.apply(this,arguments)}return n}()},{key:"informModelsOfUUIDChangeForItem",value:function(t,e,n){var r=!0,i=!1,o=void 0;try{for(var s,a=this.items[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;c.potentialItemOfInterestHasChangedItsUUID(t,e,n)}}catch(u){i=!0,o=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}}},{key:"didSyncModelsOffline",value:function(e){this.notifySyncObserversOfModels(e,t.MappingSourceLocalSaved)}},{key:"mapResponseItemsToLocalModels",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:e,source:n,sourceKey:r}));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"mapResponseItemsToLocalModelsOmittingFields",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:e,omitFields:n,source:r,sourceKey:i}));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"mapResponseItemsToLocalModelsWithOptions",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r,i,o,s,a,u,l,h,f,p,d,m,g,v,y,b,w,k,S,x,_,C,O,E,A,M,T,R,I,D,N,j,P,L,F,B,z,$,U,H;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.items,r=e.omitFields,i=e.source,o=e.sourceKey,e.options,s=[],a=[],u=[],l=!0,h=!1,f=void 0,t.prev=5,p=n[Symbol.iterator]();case 7:if(l=(d=p.next()).done){t.next=58;break}if(m=d.value,m){t.next=11;break}return t.abrupt("continue",55);case 11:if(g=!m.content&&!m.errorDecrypting,v=!m.content_type||!m.uuid,!v&&!g||m.deleted){t.next=16;break}return console.error("Server response item is corrupt:",m),t.abrupt("continue",55);case 16:if(!Array.isArray(r)){t.next=36;break}for(y=!0,b=!1,w=void 0,t.prev=20,k=r[Symbol.iterator]();!(y=(S=k.next()).done);y=!0)x=S.value,delete m[x];t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](20),b=!0,w=t.t0;case 28:t.prev=28,t.prev=29,y||null==k["return"]||k["return"]();case 31:if(t.prev=31,!b){t.next=34;break}throw w;case 34:return t.finish(31);case 35:return t.finish(28);case 36:if(_=this.findItem(m.uuid),_&&(_.updateFromJSON(m),_.dummy=!1),C=m["content_type"]||_&&_.content_type,O=this.acceptableContentTypes&&!this.acceptableContentTypes.includes(C),!O){t.next=42;break}return t.abrupt("continue",55);case 42:if(E=!1,1!=m.deleted){t.next=50;break}if(!m.dirty){t.next=48;break}E=!0,t.next=50;break;case 48:return _&&(s.push(_),u.push(_),this.removeItemLocally(_)),t.abrupt("continue",55);case 50:_||(_=this.createItem(m)),this.addItem(_,E),_.errorDecrypting||u.push(_),s.push(_),a.push(m);case 55:l=!0,t.next=7;break;case 58:t.next=64;break;case 60:t.prev=60,t.t1=t["catch"](5),h=!0,f=t.t1;case 64:t.prev=64,t.prev=65,l||null==p["return"]||p["return"]();case 67:if(t.prev=67,!h){t.next=70;break}throw f;case 70:return t.finish(67);case 71:return t.finish(64);case 72:for(A=!0,M=!1,T=void 0,t.prev=75,R=a.entries()[Symbol.iterator]();!(A=(I=R.next()).done);A=!0)D=c(I.value,2),N=D[0],j=D[1],P=s[N],j.content&&this.resolveReferencesForItem(P),P.didFinishSyncing();t.next=83;break;case 79:t.prev=79,t.t2=t["catch"](75),M=!0,T=t.t2;case 83:t.prev=83,t.prev=84,A||null==R["return"]||R["return"]();case 86:if(t.prev=86,!M){t.next=89;break}throw T;case 89:return t.finish(86);case 90:return t.finish(83);case 91:for(L=this.popMissedReferenceStructsForObjects(a),F=!0,B=!1,z=void 0,t.prev=95,$=function(){var t=H.value,e=s.find((function(e){return e.uuid==t.reference_uuid}));if(e){var n=t.for_item;n.addItemAsRelationship(e)}},U=L[Symbol.iterator]();!(F=(H=U.next()).done);F=!0)$();t.next=104;break;case 100:t.prev=100,t.t3=t["catch"](95),B=!0,z=t.t3;case 104:t.prev=104,t.prev=105,F||null==U["return"]||U["return"]();case 107:if(t.prev=107,!B){t.next=110;break}throw z;case 110:return t.finish(107);case 111:return t.finish(104);case 112:return t.next=114,this.notifySyncObserversOfModels(u,i,o);case 114:return t.abrupt("return",s);case 115:case"end":return t.stop()}}),t,this,[[5,60,64,72],[20,24,28,36],[29,,31,35],[65,,67,71],[75,79,83,91],[84,,86,90],[95,100,104,112],[105,,107,111]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"missedReferenceBuildKey",value:function(t,e){return"".concat(t,":").concat(e)}},{key:"popMissedReferenceStructsForObjects",value:function(t){if(!t||0==t.length)return[];for(var e=[],n=[],r=t.map((function(t){return t.uuid})),i=r[0].length,o=Object.keys(this.missedReferences),s=0,a=o;s<a.length;s++){var c=a[s],u=r.includes(c.substring(0,i));u&&(e.push(this.missedReferences[c]),n.push(c))}for(var l=0,h=n;l<h.length;l++){var f=h[l];delete this.missedReferences[f]}return e}},{key:"resolveReferencesForItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.errorDecrypting){var n=t.contentObject;if(t.updateLocalRelationships(),n.references){var r=n.references.slice(),i=r.map((function(t){return t.uuid})),o=!0,s=this.findItems(i,o),a=!0,u=!1,l=void 0;try{for(var h,f=s.entries()[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var p=c(h.value,2),d=p[0],m=p[1];if(m)t.addItemAsRelationship(m),e&&this.setItemDirty(m,!0);else{var g=i[d],v=this.missedReferenceBuildKey(g,t.uuid);if(!this.missedReferences[v]){var y={reference_uuid:g,for_item:t};this.missedReferences[v]=y}}}}catch(b){u=!0,l=b}finally{try{a||null==f["return"]||f["return"]()}finally{if(u)throw l}}}}}},{key:"notifySyncObserversOfModels",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,c,u,l,h=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this.itemSyncObservers.sort((function(t,e){return t.priority<e.priority?-1:1})),o=!0,s=!1,a=void 0,t.prev=4,c=regeneratorRuntime.mark((function t(){var i,o,s,a,c,u,f,p,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i=l.value,o=i.types.includes("*")?e:e.filter((function(t){return i.types.includes(t.content_type)})),s=[],a=[],c=!0,u=!1,f=void 0,t.prev=6,p=o[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)m=d.value,m.deleted?a.push(m):s.push(m);t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](6),u=!0,f=t.t0;case 14:t.prev=14,t.prev=15,c||null==p["return"]||p["return"]();case 17:if(t.prev=17,!u){t.next=20;break}throw f;case 20:return t.finish(17);case 21:return t.finish(14);case 22:if(!(o.length>0)){t.next=25;break}return t.next=25,h._callSyncObserverCallbackWithTimeout(i,o,s,a,n,r);case 25:case"end":return t.stop()}}),t,null,[[6,10,14,22],[15,,17,21]])})),u=i[Symbol.iterator]();case 7:if(o=(l=u.next()).done){t.next=12;break}return t.delegateYield(c(),"t0",9);case 9:o=!0,t.next=7;break;case 12:t.next=18;break;case 14:t.prev=14,t.t1=t["catch"](4),s=!0,a=t.t1;case 18:t.prev=18,t.prev=19,o||null==u["return"]||u["return"]();case 21:if(t.prev=21,!s){t.next=24;break}throw a;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}}),t,this,[[4,14,18,26],[19,,21,25]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"_callSyncObserverCallbackWithTimeout",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i,o,s){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,c){a.$timeout((function(){try{e.callback(n,r,i,o,s)}catch(a){console.error("Sync observer exception",a)}finally{t()}}))})));case 1:case"end":return t.stop()}}),t)})));function e(e,n,r,i,o,s){return t.apply(this,arguments)}return e}()},{key:"setItemDirty",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;this.setItemsDirty([t],e,n,r,i)}},{key:"setItemsDirty",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=!0,a=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var h=u.value;h.setDirty(n,r)}}catch(f){a=!0,c=f}finally{try{s||null==l["return"]||l["return"]()}finally{if(a)throw c}}this.notifySyncObserversOfModels(e,i||t.MappingSourceLocalDirtied,o)}},{key:"createItem",value:function(e){var n=t.ContentTypeClassMapping&&t.ContentTypeClassMapping[e.content_type];n||(n=N);var r=new n(e);return r}},{key:"createDuplicateItemFromResponseItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.setDirty){t.next=3;break}return console.error("Attempting to create conflicted copy of non-response item."),t.abrupt("return",null);case 3:return n=JSON.parse(JSON.stringify(e)),t.next=6,SFJS.crypto.generateUUID();case 6:return n.uuid=t.sent,r=this.createItem(n),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"duplicateItemAndAddAsConflict",value:function(t){return this.duplicateItemWithCustomContentAndAddAsConflict({content:t.content,duplicateOf:t})}},{key:"duplicateItemWithCustomContentAndAddAsConflict",value:function(t){var e=t.content,n=t.duplicateOf,r=this.duplicateItemWithCustomContent({content:e,duplicateOf:n});return this.addDuplicatedItemAsConflict({duplicate:r,duplicateOf:n}),r}},{key:"addDuplicatedItemAsConflict",value:function(t){var e=t.duplicate,n=t.duplicateOf;this.addDuplicatedItem(e,n),e.content.conflict_of=n.uuid}},{key:"duplicateItemWithCustomContent",value:function(t){var e=t.content,n=t.duplicateOf,r=new n.constructor({content:e});return r.created_at=n.created_at,r.content_type||(r.content_type=n.content_type),r}},{key:"duplicateItemAndAdd",value:function(t){var e=this.duplicateItemWithoutAdding(t);return this.addDuplicatedItem(e,t),e}},{key:"duplicateItemWithoutAdding",value:function(t){var e=new t.constructor({content:t.content});return e.created_at=t.created_at,e.content_type||(e.content_type=t.content_type),e}},{key:"addDuplicatedItem",value:function(t,e){this.addItem(t);var n=!0,r=!1,i=void 0;try{for(var o,s=e.referencingObjects[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.addItemAsRelationship(t),this.setItemDirty(a,!0)}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}this.resolveReferencesForItem(t),this.setItemDirty(t,!0)}},{key:"addItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addItems([t],e)}},{key:"addItems",value:function(t){var e=this;t.forEach((function(t){e.itemsHash[t.uuid]||(e.itemsHash[t.uuid]=t,e.items.push(t))}))}},{key:"addItemSyncObserver",value:function(t,e,n){this.addItemSyncObserverWithPriority({id:t,types:e,callback:n,priority:1})}},{key:"addItemSyncObserverWithPriority",value:function(t){var e=t.id,n=t.priority,r=t.types,i=t.callback;Array.isArray(r)||(r=[r]),this.itemSyncObservers.push({id:e,types:r,priority:n,callback:i})}},{key:"removeItemSyncObserver",value:function(t){_.remove(this.itemSyncObservers,_.find(this.itemSyncObservers,{id:t}))}},{key:"getDirtyItems",value:function(){return this.items.filter((function(t){return 1==t.dirty&&!t.dummy&&(!t.errorDecrypting||t.deleted)}))}},{key:"clearDirtyItems",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;s.setDirty(!1)}}catch(a){n=!0,r=a}finally{try{e||null==o["return"]||o["return"]()}finally{if(n)throw r}}}},{key:"removeAndDirtyAllRelationshipsForItem",value:function(t){if(!t.errorDecrypting){var e=!0,n=!1,r=void 0;try{for(var i,o=t.content.references[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,a=this.findItem(s.uuid);a&&(t.removeItemAsRelationship(a),a.hasRelationshipWithItem(t)&&(a.removeItemAsRelationship(t),this.setItemDirty(a,!0)))}}catch(d){n=!0,r=d}finally{try{e||null==o["return"]||o["return"]()}finally{if(n)throw r}}}var c=!0,u=!1,l=void 0;try{for(var h,f=t.referencingObjects[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;p.removeItemAsRelationship(t),this.setItemDirty(p,!0)}}catch(d){u=!0,l=d}finally{try{c||null==f["return"]||f["return"]()}finally{if(u)throw l}}t.referencingObjects=[]}},{key:"setAllItemsDirty",value:function(){var t=this.allItems;this.setItemsDirty(t,!0)}},{key:"setItemToBeDeleted",value:function(t){t.deleted=!0,t.dummy||this.setItemDirty(t,!0),this.removeAndDirtyAllRelationshipsForItem(t)}},{key:"removeItemLocally",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:_.remove(this.items,{uuid:e.uuid}),delete this.itemsHash[e.uuid],e.isBeingRemovedLocally();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"allItemsMatchingTypes",value:function(t){return this.allItems.filter((function(e){return(_.includes(t,e.content_type)||_.includes(t,"*"))&&!e.dummy}))}},{key:"invalidItems",value:function(){return this.allItems.filter((function(t){return t.errorDecrypting}))}},{key:"validItemsForContentType",value:function(t){return this.allItems.filter((function(e){return e.content_type==t&&!e.errorDecrypting}))}},{key:"findItem",value:function(t){return this.itemsHash[t]}},{key:"findItems",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value,u=this.itemsHash[c];(u||e)&&n.push(u)}}catch(l){i=!0,o=l}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return n}},{key:"itemsMatchingPredicate",value:function(t){return this.itemsMatchingPredicates([t])}},{key:"itemsMatchingPredicates",value:function(t){return this.filterItemsWithPredicates(this.allItems,t)}},{key:"filterItemsWithPredicates",value:function(t,e){var n=t.filter((function(t){var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(!t.satisfiesPredicate(a))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return!0}));return n}},{key:"importItems",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,c,u,l,h,f,p,d,m,g,v,y,b,w,k,S,x,_,C,O,E,A,M;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=[],i={},o=!0,s=!1,a=void 0,e.prev=5,c=n[Symbol.iterator]();case 7:if(o=(u=c.next()).done){e.next=18;break}if(l=u.value,h=this.findItem(l.uuid),h){e.next=13;break}return i[l.uuid]={},e.abrupt("continue",15);case 13:f=this.duplicateItemWithoutAdding(h),i[l.uuid]={frozenValue:f,itemRef:h};case 15:o=!0,e.next=7;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](5),s=!0,a=e.t0;case 24:e.prev=24,e.prev=25,o||null==c["return"]||c["return"]();case 27:if(e.prev=27,!s){e.next=30;break}throw a;case 30:return e.finish(27);case 31:return e.finish(24);case 32:p=!0,d=!1,m=void 0,e.prev=35,g=n[Symbol.iterator]();case 37:if(p=(v=g.next()).done){e.next=52;break}if(y=v.value,b=i[y.uuid],w=b.frozenValue,k=b.itemRef,!w||k.errorDecrypting){e.next=47;break}return e.next=43,this.createDuplicateItemFromResponseItem(y);case 43:S=e.sent,y.deleted||w.isItemContentEqualWith(S)||(this.addDuplicatedItemAsConflict({duplicate:S,duplicateOf:k}),r.push(S)),e.next=49;break;case 47:r.push(y),k&&k.errorDecrypting&&(k.errorDecrypting=!1);case 49:p=!0,e.next=37;break;case 52:e.next=58;break;case 54:e.prev=54,e.t1=e["catch"](35),d=!0,m=e.t1;case 58:e.prev=58,e.prev=59,p||null==g["return"]||g["return"]();case 61:if(e.prev=61,!d){e.next=64;break}throw m;case 64:return e.finish(61);case 65:return e.finish(58);case 66:return e.next=68,this.mapResponseItemsToLocalModels(r,t.MappingSourceFileImport);case 68:for(x=e.sent,_=!0,C=!1,O=void 0,e.prev=72,E=x[Symbol.iterator]();!(_=(A=E.next()).done);_=!0)M=A.value,this.setItemDirty(M,!0,!1),M.deleted=!1;e.next=80;break;case 76:e.prev=76,e.t2=e["catch"](72),C=!0,O=e.t2;case 80:e.prev=80,e.prev=81,_||null==E["return"]||E["return"]();case 83:if(e.prev=83,!C){e.next=86;break}throw O;case 86:return e.finish(83);case 87:return e.finish(80);case 88:return e.abrupt("return",x);case 89:case"end":return e.stop()}}),e,this,[[5,20,24,32],[25,,27,31],[35,54,58,66],[59,,61,65],[72,76,80,88],[81,,83,87]])})));function n(t){return e.apply(this,arguments)}return n}()},{key:"getAllItemsJSONData",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getJSONDataForItems(this.allItems,e,n,r));case 1:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"getJSONDataForItems",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e.map((function(t){var e=new j(t,n,r);return e.paramsForExportFile()}))).then((function(t){if(i&&0==t.length)return null;var e={items:t};return n&&(e["auth_params"]=r),JSON.stringify(e,null,2)})));case 1:case"end":return t.stop()}}),t)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"computeDataIntegrityHash",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.allNondummyItems.sort((function(t,e){return e.updated_at-t.updated_at})),n=e.map((function(t){return t.updatedAtTimestamp()})),r=n.join(","),t.next=6,SFJS.crypto.sha256(r);case 6:return i=t.sent,t.abrupt("return",i);case 10:return t.prev=10,t.t0=t["catch"](0),console.error("Error computing data integrity hash",t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"allItems",get:function(){return this.items.slice()}},{key:"allNondummyItems",get:function(){return this.items.filter((function(t){return!t.dummy}))}}]),t}();r.SFModelManager=x;var C=function(){function t(e,n,r){m(this,t),this.modelManager=e,this.syncManager=n,this.singletonManager=r,this.loadPrivileges(),t.CredentialAccountPassword="CredentialAccountPassword",t.CredentialLocalPasscode="CredentialLocalPasscode",t.ActionManageExtensions="ActionManageExtensions",t.ActionManageBackups="ActionManageBackups",t.ActionViewProtectedNotes="ActionViewProtectedNotes",t.ActionManagePrivileges="ActionManagePrivileges",t.ActionManagePasscode="ActionManagePasscode",t.ActionDeleteNote="ActionDeleteNote",t.SessionExpiresAtKey="SessionExpiresAtKey",t.SessionLengthKey="SessionLengthKey",t.SessionLengthNone=0,t.SessionLengthFiveMinutes=300,t.SessionLengthOneHour=3600,t.SessionLengthOneWeek=604800,this.availableActions=[t.ActionViewProtectedNotes,t.ActionDeleteNote,t.ActionManagePasscode,t.ActionManageBackups,t.ActionManageExtensions,t.ActionManagePrivileges],this.availableCredentials=[t.CredentialAccountPassword,t.CredentialLocalPasscode],this.sessionLengths=[t.SessionLengthNone,t.SessionLengthFiveMinutes,t.SessionLengthOneHour,t.SessionLengthOneWeek,t.SessionLengthIndefinite]}return v(t,[{key:"setDelegate",value:function(t){this.delegate=t}},{key:"getAvailableActions",value:function(){return this.availableActions}},{key:"getAvailableCredentials",value:function(){return this.availableCredentials}},{key:"netCredentialsForAction",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPrivileges();case 2:e.t0=n,r=e.sent.getCredentialsForAction(e.t0),i=[],o=!0,s=!1,a=void 0,e.prev=8,c=r[Symbol.iterator]();case 10:if(o=(u=c.next()).done){e.next=27;break}if(l=u.value,l!=t.CredentialAccountPassword){e.next=19;break}return e.next=15,this.delegate.isOffline();case 15:h=e.sent,h||i.push(l),e.next=24;break;case 19:if(l!=t.CredentialLocalPasscode){e.next=24;break}return e.next=22,this.delegate.hasLocalPasscode();case 22:f=e.sent,f&&i.push(l);case 24:o=!0,e.next=10;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e["catch"](8),s=!0,a=e.t1;case 33:e.prev=33,e.prev=34,o||null==c["return"]||c["return"]();case 36:if(e.prev=36,!s){e.next=39;break}throw a;case 39:return e.finish(36);case 40:return e.finish(33);case 41:return e.abrupt("return",i);case 42:case"end":return e.stop()}}),e,this,[[8,29,33,41],[34,,36,40]])})));function n(t){return e.apply(this,arguments)}return n}()},{key:"loadPrivileges",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loadPromise){t.next=2;break}return t.abrupt("return",this.loadPromise);case 2:return this.loadPromise=new Promise((function(t,n){var r=L.contentType(),i=new P("content_type","=",r);e.singletonManager.registerSingleton([i],(function(n){e.privileges=n,t(n)}),function(){var n=d(regeneratorRuntime.mark((function n(i){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=new L({content_type:r}),SFJS.crypto.generateUUIDSync){n.next=4;break}return n.next=4,o.initUUID();case 4:e.modelManager.addItem(o),e.modelManager.setItemDirty(o,!0),e.syncManager.sync(),i(o),t(o);case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())})),t.abrupt("return",this.loadPromise);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPrivileges",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.privileges){t.next=4;break}return t.abrupt("return",this.privileges);case 4:return t.abrupt("return",this.loadPrivileges());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"displayInfoForCredential",value:function(e){var n={};return n[t.CredentialAccountPassword]={label:"Account Password",prompt:"Please enter your account password."},n[t.CredentialLocalPasscode]={label:"Local Passcode",prompt:"Please enter your local passcode."},n[e]}},{key:"displayInfoForAction",value:function(e){var n={};return n[t.ActionManageExtensions]={label:"Manage Extensions"},n[t.ActionManageBackups]={label:"Download/Import Backups"},n[t.ActionViewProtectedNotes]={label:"View Protected Notes"},n[t.ActionManagePrivileges]={label:"Manage Privileges"},n[t.ActionManagePasscode]={label:"Manage Passcode"},n[t.ActionDeleteNote]={label:"Delete Notes"},n[e]}},{key:"getSessionLengthOptions",value:function(){return[{value:t.SessionLengthNone,label:"Don't Remember"},{value:t.SessionLengthFiveMinutes,label:"5 Minutes"},{value:t.SessionLengthOneHour,label:"1 Hour"},{value:t.SessionLengthOneWeek,label:"1 Week"}]}},{key:"setSessionLength",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(t){var e=new Date;return e.setSeconds(e.getSeconds()+t),e},i=r(n),e.abrupt("return",Promise.all([this.delegate.saveToStorage(t.SessionExpiresAtKey,JSON.stringify(i)),this.delegate.saveToStorage(t.SessionLengthKey,JSON.stringify(n))]));case 3:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"clearSession",value:function(){var e=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setSessionLength(t.SessionLengthNone));case 1:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"getSelectedSessionLength",value:function(){var e=d(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.delegate.getFromStorage(t.SessionLengthKey);case 2:if(n=e.sent,!n){e.next=7;break}return e.abrupt("return",JSON.parse(n));case 7:return e.abrupt("return",t.SessionLengthNone);case 8:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"getSessionExpirey",value:function(){var e=d(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.delegate.getFromStorage(t.SessionExpiresAtKey);case 2:if(n=e.sent,!n){e.next=7;break}return e.abrupt("return",new Date(JSON.parse(n)));case 7:return e.abrupt("return",new Date);case 8:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"actionHasPrivilegesConfigured",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.netCredentialsForAction(e);case 2:return t.t0=t.sent.length,t.abrupt("return",t.t0>0);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"actionRequiresPrivilege",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getSessionExpirey();case 2:if(n=t.sent,!(n>new Date)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,this.netCredentialsForAction(e);case 7:return r=t.sent,t.abrupt("return",r.length>0);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"savePrivileges",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPrivileges();case 2:e=t.sent,this.modelManager.setItemDirty(e,!0),this.syncManager.sync();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"authenticateAction",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.netCredentialsForAction(e);case 2:r=t.sent,i=[],o=[],s=!0,a=!1,c=void 0,t.prev=7,u=r[Symbol.iterator]();case 9:if(s=(l=u.next()).done){t.next=18;break}return h=l.value,t.next=13,this._verifyAuthenticationParameters(h,n[h]);case 13:f=t.sent,f?i.push(h):o.push(h);case 15:s=!0,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](7),a=!0,c=t.t0;case 24:t.prev=24,t.prev=25,s||null==u["return"]||u["return"]();case 27:if(t.prev=27,!a){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:return t.abrupt("return",{success:0==o.length,successfulCredentials:i,failedCredentials:o});case 33:case"end":return t.stop()}}),t,this,[[7,20,24,32],[25,,27,31]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"_verifyAuthenticationParameters",value:function(){var e=d(regeneratorRuntime.mark((function e(n,r){var i,o,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",s.delegate.verifyAccountPassword(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",s.delegate.verifyLocalPasscode(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n!=t.CredentialAccountPassword){e.next=6;break}return e.abrupt("return",i(r));case 6:if(n!=t.CredentialLocalPasscode){e.next=8;break}return e.abrupt("return",o(r));case 8:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()}]),t}();r.SFPrivilegesManager=C;var O="sessionHistory_persist",E="sessionHistory_revisions",A="sessionHistory_autoOptimize",M=function(){function t(e,n,r,i,o){var s=this;m(this,t),this.modelManager=e,this.storageManager=n,this.$timeout=o||setTimeout.bind(window),this.keyRequestHandler=r,this.loadFromDisk().then((function(){s.modelManager.addItemSyncObserver("session-history",i,(function(t,e,n,r,i){if(r!==x.MappingSourceLocalDirtied){var o=!0,a=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;try{s.addHistoryEntryForItem(h)}catch(f){console.log("Caught exception while trying to add item history entry",f)}}}catch(p){a=!0,c=p}finally{try{o||null==l["return"]||l["return"]()}finally{if(a)throw c}}}}))}))}return v(t,[{key:"encryptionParams",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.keyRequestHandler());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addHistoryEntryForItem",value:function(t){var e=this,n={uuid:t.uuid,content_type:t.content_type,updated_at:t.updated_at,content:t.getContentCopy()},r=this.historySession.addEntryForItem(n);this.autoOptimize&&this.historySession.optimizeHistoryForItem(t),r&&this.diskEnabled&&(this.diskTimeout&&(this.$timeout.hasOwnProperty("cancel")?this.$timeout.cancel(this.diskTimeout):clearTimeout(this.diskTimeout)),this.diskTimeout=this.$timeout((function(){e.saveToDisk()}),2e3))}},{key:"historyForItem",value:function(t){return this.historySession.historyForItem(t)}},{key:"clearHistoryForItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.historySession.clearItemHistory(e),t.abrupt("return",this.saveToDisk());case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"clearAllHistory",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.historySession.clearAllHistory(),t.abrupt("return",this.storageManager.removeItem(E));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toggleDiskSaving",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.diskEnabled=!this.diskEnabled,!this.diskEnabled){t.next=6;break}this.storageManager.setItem(O,JSON.stringify(!0)),this.saveToDisk(),t.next=8;break;case 6:return this.storageManager.setItem(O,JSON.stringify(!1)),t.abrupt("return",this.storageManager.removeItem(E));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"saveToDisk",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.diskEnabled){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.encryptionParams();case 4:e=t.sent,n=new j(this.historySession,e.keys,e.auth_params),n.paramsForSync().then((function(t){r.storageManager.setItem(E,JSON.stringify(t))}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadFromDisk",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.storageManager.getItem(O);case 2:return e=t.sent,e&&(this.diskEnabled=JSON.parse(e)),t.next=6,this.storageManager.getItem(E);case 6:if(n=t.sent,!n){t.next=18;break}return n=JSON.parse(n),t.next=11,this.encryptionParams();case 11:return r=t.sent,t.next=14,SFJS.itemTransformer.decryptItem(n,r.keys);case 14:i=new F(n),this.historySession=i,t.next=19;break;case 18:this.historySession=new F;case 19:return t.next=21,this.storageManager.getItem(A);case 21:o=t.sent,this.autoOptimize=!o||JSON.parse(o);case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toggleAutoOptimize",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.autoOptimize=!this.autoOptimize,this.autoOptimize?this.storageManager.setItem(A,JSON.stringify(!0)):this.storageManager.setItem(A,JSON.stringify(!1));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}();r.SFSessionHistoryManager=M;var T=function(){function t(e,n){var r=this;m(this,t),this.syncManager=n,this.modelManager=e,this.singletonHandlers=[],e.addItemSyncObserverWithPriority({id:"sf-singleton-manager",types:"*",priority:-1,callback:function(t,n,i,o,s){o!==x.MappingSourceLocalDirtied&&r.resolveSingletons(e.allNondummyItems,null,!0)}}),n.addEventHandler((function(t,n){if("local-data-loaded"==t)r.resolveSingletons(e.allNondummyItems,null,!0),r.initialDataLoaded=!0;else if("sync:completed"==t){if(!r.initialDataLoaded)return;r.resolveSingletons(n.retrievedItems,n.savedItems)}})),e.addModelUuidChangeObserver("singleton-manager",(function(t,e){var n=!0,i=!1,o=void 0;try{for(var s,a=r.singletonHandlers[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;c.singleton&&P.ItemSatisfiesPredicates(e,c.predicates)&&(c.singleton=null,r.resolveSingletons([e]))}}catch(u){i=!0,o=u}finally{try{n||null==a["return"]||a["return"]()}finally{if(i)throw o}}}))}return v(t,[{key:"registerSingleton",value:function(t,e,n){this.singletonHandlers.push({predicates:t,resolutionCallback:e,createBlock:n})}},{key:"resolveSingletons",value:function(t,e,n){var r=this;t=t||[],e=e||[];var i=!0,o=!1,s=void 0;try{for(var a,c=function(){var i=a.value,o=i.predicates.slice(),s=r.modelManager.filterItemsWithPredicates(t,o),c=function(){i.createBlock&&(i.pendingCreateBlockCallback=!0,i.createBlock((function(t){i.singleton=t,i.pendingCreateBlockCallback=!1,i.resolutionCallback&&i.resolutionCallback(t)})))},u=r.modelManager.filterItemsWithPredicates(e,o).length;if(s.length>0||u>0){var l=r.modelManager.itemsMatchingPredicates(o);if(l.length>=2){var h=l.sort((function(t,e){return t.errorDecrypting?1:e.errorDecrypting||t.created_at<e.created_at?-1:1})),f=h[0],p=h.slice(1,h.length),d=!0,m=!1,g=void 0;try{for(var v,y=p[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){var b=v.value;r.modelManager.setItemToBeDeleted(b)}}catch(k){m=!0,g=k}finally{try{d||null==y["return"]||y["return"]()}finally{if(m)throw g}}r.syncManager.sync(),i.singleton=f,i.resolutionCallback&&i.resolutionCallback(f)}else if(1==l.length){var w=l[0];w.errorDecrypting?(r.modelManager.setItemToBeDeleted(w),c()):i.singleton&&i.singleton===w||(i.singleton=w,i.resolutionCallback&&i.resolutionCallback(w))}}else i.singleton||n||i.pendingCreateBlockCallback||c()},u=this.singletonHandlers[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)c()}catch(l){o=!0,s=l}finally{try{i||null==u["return"]||u["return"]()}finally{if(o)throw s}}}}]),t}();r.SFSingletonManager=T;var R=function(){function t(){m(this,t)}return v(t,[{key:"setItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"removeItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"clear",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAllModels",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"saveModel",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.saveModels([e]));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"saveModels",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteModel",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"clearAllModels",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearAllData",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all([this.clear(),this.clearAllModels()]));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}();r.SFStorageManager=R;var I,D=function(){function t(e,n,r,i,o){m(this,t),t.KeyRequestLoadLocal="KeyRequestLoadLocal",t.KeyRequestSaveLocal="KeyRequestSaveLocal",t.KeyRequestLoadSaveAccount="KeyRequestLoadSaveAccount",this.httpManager=r,this.modelManager=e,this.storageManager=n,this.$interval=o||setInterval.bind(window),this.$timeout=i||setTimeout.bind(window),this.syncStatus={},this.syncStatusObservers=[],this.eventHandlers=[],this.PerSyncItemUploadLimit=150,this.ServerItemDownloadLimit=150,this.MajorDataChangeThreshold=15,this.MaxDiscordanceBeforeOutOfSync=5,this.syncDiscordance=0,this.outOfSync=!1}return v(t,[{key:"handleServerIntegrityHash",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e&&0!=e.length){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,this.modelManager.computeDataIntegrityHash();case 4:if(n=t.sent,n){t.next=7;break}return t.abrupt("return",!0);case 7:if(n===e){t.next=13;break}return this.syncDiscordance++,this.syncDiscordance>=this.MaxDiscordanceBeforeOutOfSync&&(this.outOfSync||(this.outOfSync=!0,this.notifyEvent("enter-out-of-sync"))),t.abrupt("return",!1);case 13:return this.outOfSync&&(this.outOfSync=!1,this.notifyEvent("exit-out-of-sync")),this.syncDiscordance=0,t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isOutOfSync",value:function(){return this.outOfSync}},{key:"getServerURL",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.storageManager.getItem("server");case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=window._default_sf_server;case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSyncURL",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getServerURL();case 2:return t.t0=t.sent,t.abrupt("return",t.t0+"/items/sync");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerSyncStatusObserver",value:function(t){var e={key:new Date,callback:t};return this.syncStatusObservers.push(e),e}},{key:"removeSyncStatusObserver",value:function(t){_.pull(this.syncStatusObservers,t)}},{key:"syncStatusDidChange",value:function(){var t=this;this.syncStatusObservers.forEach((function(e){e.callback(t.syncStatus)}))}},{key:"addEventHandler",value:function(t){return this.eventHandlers.push(t),t}},{key:"removeEventHandler",value:function(t){_.pull(this.eventHandlers,t)}},{key:"notifyEvent",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=this.eventHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(t,e||{})}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}},{key:"setKeyRequestHandler",value:function(t){this.keyRequestHandler=t}},{key:"getActiveKeyInfo",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.keyRequestHandler(e));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"initialDataLoaded",value:function(){return!0===this._initialDataLoaded}},{key:"_sortLocalItems",value:function(t){var e=this;return t.sort((function(t,n){var r=new Date(n.updated_at)-new Date(t.updated_at),i=e.contentTypeLoadPriority,o=0,s=0;return i&&(o=i.indexOf(t.content_type),s=i.indexOf(n.content_type),-1==o&&(o=i.length),-1==s&&(s=i.length)),o==s?r:o<s?-1:1}))}},{key:"loadLocalItems",value:function(){var e=d(regeneratorRuntime.mark((function e(){var n,r,i,o,s,a=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:{},r=n.incrementalCallback,i=n.batchSize,o=n.options,!o||!o.simulateHighLatency){e.next=5;break}return s=o.simulatedLatency||1e3,e.next=5,this._awaitSleep(s);case 5:if(!this.loadLocalDataPromise){e.next=7;break}return e.abrupt("return",this.loadLocalDataPromise);case 7:return i||(i=100),this.loadLocalDataPromise=this.storageManager.getAllModels().then((function(e){e=a._sortLocalItems(e),e=e.filter((function(t){var e=a.modelManager.findItem(t.uuid);return!e||new Date(t.dirtiedDate)>e.dirtiedDate}));var n=e.length,o=0,s=[],c=function(){var u=d(regeneratorRuntime.mark((function u(){var l,h;return regeneratorRuntime.wrap((function(u){while(1)switch(u.prev=u.next){case 0:return l=e.slice(o,o+i),u.next=3,a.handleItemsResponse(l,null,x.MappingSourceLocalRetrieved,t.KeyRequestLoadLocal);case 3:if(h=u.sent,s.push(h),o+=l.length,!(o<n)){u.next=10;break}return u.abrupt("return",new Promise((function(t,e){a.$timeout((function(){a.notifyEvent("local-data-incremental-load"),r&&r(o,n),c().then(t)}))})));case 10:a._initialDataLoaded=!0,a.notifyEvent("local-data-loaded");case 12:case"end":return u.stop()}}),u)})));return function(){return u.apply(this,arguments)}}();return c()})),e.abrupt("return",this.loadLocalDataPromise);case 10:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"writeItemsToLocalStorage",value:function(){var e=d(regeneratorRuntime.mark((function e(n,r){var i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=n.length){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise(function(){var e=d(regeneratorRuntime.mark((function e(o,s){var a,c,u,l,h,f,p,m,g,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=[],c=[],u=!0,l=!1,h=void 0,e.prev=4,f=n[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)m=p.value,!0!==m.deleted||m.dirty?a.push(m):c.push(m);e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](4),l=!0,h=e.t0;case 12:e.prev=12,e.prev=13,u||null==f["return"]||f["return"]();case 15:if(e.prev=15,!l){e.next=18;break}throw h;case 18:return e.finish(15);case 19:return e.finish(12);case 20:if(!(c.length>0)){e.next=23;break}return e.next=23,Promise.all(c.map(function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",i.storageManager.deleteModel(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 23:return e.next=25,i.getActiveKeyInfo(t.KeyRequestSaveLocal);case 25:if(g=e.sent,!(a.length>0)){e.next=33;break}return e.next=29,Promise.all(a.map(function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new j(e,g.keys,g.auth_params),t.next=3,n.paramsForLocalStorage();case 3:return n=t.sent,r&&delete n.dirty,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))["catch"]((function(t){return s(t)}));case 29:return v=e.sent,e.next=32,i.storageManager.saveModels(v)["catch"]((function(t){console.error("Error writing items",t),i.syncStatus.localError=t,i.syncStatusDidChange(),s()}));case 32:i.syncStatus.localError&&(i.syncStatus.localError=null,i.syncStatusDidChange());case 33:o();case 34:case"end":return e.stop()}}),e,null,[[4,8,12,20],[13,,15,19]])})));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"syncOffline",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r,i,o,s,a,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=!0,r=!1,i=void 0,t.prev=3,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)a=s.value,a.updated_at=new Date;t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](3),r=!0,i=t.t0;case 11:t.prev=11,t.prev=12,n||null==o["return"]||o["return"]();case 14:if(t.prev=14,!r){t.next=17;break}throw i;case 17:return t.finish(14);case 18:return t.finish(11);case 19:return t.abrupt("return",this.writeItemsToLocalStorage(e,!0).then((function(t){var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.deleted&&c.modelManager.removeItemLocally(a)}}catch(u){r=!0,i=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return c.modelManager.clearDirtyItems(e),c.modelManager.didSyncModelsOffline(e),c.notifyEvent("sync:completed",{savedItems:e}),{saved_items:e}})));case 20:case"end":return t.stop()}}),t,this,[[3,7,11,19],[12,,14,18]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"markAllItemsDirtyAndSaveOffline",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r,i,o,s,a,c,u,l,h,f,p,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=28;break}n=this.modelManager.allNondummyItems.filter((function(t){return!t.errorDecrypting})).slice(),r=!0,i=!1,o=void 0,t.prev=5,s=n[Symbol.iterator]();case 7:if(r=(a=s.next()).done){t.next=14;break}return c=a.value,t.next=11,this.modelManager.alternateUUIDForItem(c);case 11:r=!0,t.next=7;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](5),i=!0,o=t.t0;case 20:t.prev=20,t.prev=21,r||null==s["return"]||s["return"]();case 23:if(t.prev=23,!i){t.next=26;break}throw o;case 26:return t.finish(23);case 27:return t.finish(20);case 28:for(u=this.modelManager.allNondummyItems,l=!0,h=!1,f=void 0,t.prev=32,p=u[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)m=d.value,m.setDirty(!0);t.next=40;break;case 36:t.prev=36,t.t1=t["catch"](32),h=!0,f=t.t1;case 40:t.prev=40,t.prev=41,l||null==p["return"]||p["return"]();case 43:if(t.prev=43,!h){t.next=46;break}throw f;case 46:return t.finish(43);case 47:return t.finish(40);case 48:return t.abrupt("return",this.writeItemsToLocalStorage(u,!1));case 49:case"end":return t.stop()}}),t,this,[[5,16,20,28],[21,,23,27],[32,36,40,48],[41,,43,47]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setSyncToken",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._syncToken=e,t.next=3,this.storageManager.setItem("syncToken",e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSyncToken",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._syncToken){t.next=4;break}return t.next=3,this.storageManager.getItem("syncToken");case 3:this._syncToken=t.sent;case 4:return t.abrupt("return",this._syncToken);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setCursorToken",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._cursorToken=e,!e){t.next=6;break}return t.next=4,this.storageManager.setItem("cursorToken",e);case 4:t.next=8;break;case 6:return t.next=8,this.storageManager.removeItem("cursorToken");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCursorToken",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this._cursorToken){t.next=4;break}return t.next=3,this.storageManager.getItem("cursorToken");case 3:this._cursorToken=t.sent;case 4:return t.abrupt("return",this._cursorToken);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearQueuedCallbacks",value:function(){this._queuedCallbacks=[]}},{key:"callQueuedCallbacks",value:function(t){var e=this.queuedCallbacks;if(e.length){var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a(t)}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}this.clearQueuedCallbacks()}}},{key:"beginCheckingIfSyncIsTakingTooLong",value:function(){this.syncStatus.checker&&this.stopCheckingIfSyncIsTakingTooLong(),this.syncStatus.checker=this.$interval(function(){var t=(new Date-this.syncStatus.syncStart)/1e3,e=5;t>e&&(this.notifyEvent("sync:taking-too-long"),this.stopCheckingIfSyncIsTakingTooLong())}.bind(this),500)}},{key:"stopCheckingIfSyncIsTakingTooLong",value:function(){this.$interval.hasOwnProperty("cancel")?this.$interval.cancel(this.syncStatus.checker):clearInterval(this.syncStatus.checker),this.syncStatus.checker=null}},{key:"lockSyncing",value:function(){this.syncLocked=!0}},{key:"unlockSyncing",value:function(){this.syncLocked=!1}},{key:"sync",value:function(){var e=d(regeneratorRuntime.mark((function e(){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{},!this.syncLocked){e.next=4;break}return console.log("Sync Locked, Returning;"),e.abrupt("return");case 4:return e.abrupt("return",new Promise(function(){var e=d(regeneratorRuntime.mark((function e(i,o){var s,a,c,u,l,h,f,p,d,m,g,v,y,b,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n||(n={}),s=r.modelManager.getDirtyItems(),a=s.filter((function(t){return!r.lastDirtyItemsSave||t.dirtiedDate>r.lastDirtyItemsSave})),e.next=5,r.getActiveKeyInfo(t.KeyRequestLoadSaveAccount);case 5:if(c=e.sent,u=r.syncStatus.syncOpInProgress,l=r.initialDataLoaded(),!u&&l){e.next=16;break}return r.performSyncAgainOnCompletion=!0,r.lastDirtyItemsSave=new Date,e.next=13,r.writeItemsToLocalStorage(a,!1);case 13:return u&&(r.queuedCallbacks.push(i),r.loggingEnabled&&console.warn("Attempting to sync while existing sync is in progress.")),l||(r.loggingEnabled&&console.warn("(1) Attempting to perform online sync before local data has loaded"),i()),e.abrupt("return");case 16:if(r.syncStatus.syncOpInProgress=!0,!c.offline){e.next=19;break}return e.abrupt("return",r.syncOffline(s).then((function(t){r.syncStatus.syncOpInProgress=!1,i(t)}))["catch"]((function(t){r.notifyEvent("sync-exception",t)})));case 19:if(r.initialDataLoaded()){e.next=22;break}return console.error("Attempting to perform online sync before local data has loaded"),e.abrupt("return");case 22:return r.loggingEnabled&&console.log("Syncing online user."),h=r.syncStatus.needsMoreSync,r.syncStatus.syncStart=new Date,r.beginCheckingIfSyncIsTakingTooLong(),f=r.PerSyncItemUploadLimit,p=s.slice(0,f),p.length<s.length?r.syncStatus.needsMoreSync=!0:r.syncStatus.needsMoreSync=!1,h||(r.syncStatus.total=s.length,r.syncStatus.current=0),r.syncStatus.current>r.syncStatus.total&&(r.syncStatus.total=r.syncStatus.current),r.syncStatusDidChange(),e.next=34,r.writeItemsToLocalStorage(a,!1);case 34:return r.lastDirtyItemsSave=new Date,n.onPreSyncSave&&n.onPreSyncSave(),r.allRetreivedItems||(r.allRetreivedItems=[]),r.allSavedItems||(r.allSavedItems=[]),d={},d.limit=r.ServerItemDownloadLimit,n.performIntegrityCheck&&(d.compute_integrity=!0),e.prev=41,e.next=44,Promise.all(p.map((function(t){var e=new j(t,c.keys,c.auth_params);return e.additionalFields=n.additionalFields,e.paramsForSync()}))).then((function(t){d.items=t}));case 44:e.next=49;break;case 46:e.prev=46,e.t0=e["catch"](41),r.notifyEvent("sync-exception",e.t0);case 49:for(m=!0,g=!1,v=void 0,e.prev=52,y=p[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,w.dirtyCount=0;e.next=60;break;case 56:e.prev=56,e.t1=e["catch"](52),g=!0,v=e.t1;case 60:e.prev=60,e.prev=61,m||null==y["return"]||y["return"]();case 63:if(e.prev=63,!g){e.next=66;break}throw v;case 66:return e.finish(63);case 67:return e.finish(60);case 68:return e.next=70,r.getSyncToken();case 70:return d.sync_token=e.sent,e.next=73,r.getCursorToken();case 73:return d.cursor_token=e.sent,d["api"]=k.getApiVersion(),r.loggingEnabled&&console.log("Syncing with params",d),e.prev=76,e.t2=r.httpManager,e.next=80,r.getSyncURL();case 80:e.t3=e.sent,e.t4=d,e.t5=function(t){r.handleSyncSuccess(p,t,n).then((function(){i(t)}))["catch"]((function(t){console.log("Caught sync success exception:",t),r.handleSyncError(t,null,s).then((function(e){r.notifyEvent("sync-exception",t),i(e)}))}))},e.t6=function(t,e){r.handleSyncError(t,e,s).then((function(t){i(t)}))},e.t2.postAuthenticatedAbsolute.call(e.t2,e.t3,e.t4,e.t5,e.t6),e.next=90;break;case 87:e.prev=87,e.t7=e["catch"](76),console.log("Sync exception caught:",e.t7);case 90:case"end":return e.stop()}}),e,null,[[41,46],[52,56,60,68],[61,,63,67],[76,87]])})));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"_awaitSleep",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.warn("Simulating high latency sync request",e),t.abrupt("return",new Promise((function(t,n){setTimeout((function(){t()}),e)})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleSyncSuccess",value:function(){var e=d(regeneratorRuntime.mark((function e(n,r,i){var o,s,a,c,u,l,h,f,p,d,m,g,v,y,b,w,k,S,_=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i.simulateHighLatency){e.next=4;break}return o=i.simulatedLatency||1e3,e.next=4,this._awaitSleep(o);case 4:for(this.syncStatus.error=null,this.loggingEnabled&&console.log("Sync response",r),s=this.allSavedItems.map((function(t){return t.uuid})),a=r.saved_items.map((function(t){return t.uuid})),r.retrieved_items=r.retrieved_items.filter((function(t){var e=s.includes(t.uuid),n=a.includes(t.uuid);if(e||n)return!1;var r=_.modelManager.findItem(t.uuid);return!r||!r.dirty})),c=[],u=!0,l=!1,h=void 0,e.prev=13,f=n[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)d=p.value,0==d.dirtyCount&&c.push(d);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),l=!0,h=e.t0;case 21:e.prev=21,e.prev=22,u||null==f["return"]||f["return"]();case 24:if(e.prev=24,!l){e.next=27;break}throw h;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return this.modelManager.clearDirtyItems(c),e.next=32,this.handleItemsResponse(r.retrieved_items,null,x.MappingSourceRemoteRetrieved,t.KeyRequestLoadSaveAccount);case 32:return m=e.sent,this.allRetreivedItems=this.allRetreivedItems.concat(m),this.syncStatus.retrievedCount=this.allRetreivedItems.length,g=["content","auth_hash"],e.next=38,this.handleItemsResponse(r.saved_items,g,x.MappingSourceRemoteSaved,t.KeyRequestLoadSaveAccount);case 38:return v=e.sent,this.allSavedItems=this.allSavedItems.concat(v),y=r.unsaved,e.next=43,this.deprecated_handleUnsavedItemsResponse(y);case 43:return e.next=45,this.handleConflictsResponse(r.conflicts);case 45:if(b=e.sent,w=b&&b.length>0,!b){e.next=50;break}return e.next=50,this.writeItemsToLocalStorage(b,!1);case 50:return e.next=52,this.writeItemsToLocalStorage(v,!1);case 52:return e.next=54,this.writeItemsToLocalStorage(m,!1);case 54:if(!r.integrity_hash||r.cursor_token){e.next=59;break}return e.next=57,this.handleServerIntegrityHash(r.integrity_hash);case 57:k=e.sent,k||this.syncDiscordance<this.MaxDiscordanceBeforeOutOfSync&&(this.performSyncAgainOnCompletion=!0);case 59:return this.syncStatus.syncOpInProgress=!1,this.syncStatus.current+=n.length,this.syncStatusDidChange(),this.setSyncToken(r.sync_token),this.setCursorToken(r.cursor_token),this.stopCheckingIfSyncIsTakingTooLong(),e.next=67,this.getCursorToken();case 67:if(S=e.sent,!S&&!this.syncStatus.needsMoreSync){e.next=72;break}return e.abrupt("return",new Promise((function(t,e){setTimeout(function(){this.sync(i).then(t)}.bind(_),10)})));case 72:if(!w){e.next=77;break}return this.performSyncAgainOnCompletion=!1,e.abrupt("return",new Promise((function(t,e){setTimeout((function(){_.sync(i).then(t)}),10)})));case 77:return this.syncStatus.retrievedCount=0,this.syncStatus.current=0,this.syncStatus.total=0,this.syncStatusDidChange(),(this.allRetreivedItems.length>=this.majorDataChangeThreshold||v.length>=this.majorDataChangeThreshold||y&&y.length>=this.majorDataChangeThreshold||b&&b.length>=this.majorDataChangeThreshold)&&this.notifyEvent("major-data-change"),this.callQueuedCallbacks(r),this.notifyEvent("sync:completed",{retrievedItems:this.allRetreivedItems,savedItems:this.allSavedItems}),this.allRetreivedItems=[],this.allSavedItems=[],this.performSyncAgainOnCompletion&&(this.performSyncAgainOnCompletion=!1,setTimeout((function(){_.sync(i)}),10)),e.abrupt("return",r);case 88:case"end":return e.stop()}}),e,this,[[13,17,21,29],[22,,24,28]])})));function n(t,n,r){return e.apply(this,arguments)}return n}()},{key:"handleSyncError",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Sync error: ",e),401==n&&this.notifyEvent("sync-session-invalid"),e?"string"==typeof e&&(e={error:{message:e}}):e={error:{message:"Could not connect to server."}},this.syncStatus.syncOpInProgress=!1,this.syncStatus.error=e.error,this.syncStatusDidChange(),this.writeItemsToLocalStorage(r,!1),this.modelManager.didSyncModelsOffline(r),this.stopCheckingIfSyncIsTakingTooLong(),this.notifyEvent("sync:error",e.error),this.callQueuedCallbacks({error:"Sync error"}),t.abrupt("return",e);case 12:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"handleItemsResponse",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getActiveKeyInfo(i);case 2:return o=t.sent.keys,t.next=5,SFJS.itemTransformer.decryptMultipleItems(e,o);case 5:return t.next=7,this.modelManager.mapResponseItemsToLocalModelsOmittingFields(e,n,r);case 7:return s=t.sent,a=s.filter((function(t){var e=t.errorDecryptingValueChanged;return t.errorDecryptingValueChanged=!1,e})),a.length>0&&this.writeItemsToLocalStorage(a,!1),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"refreshErroredItems",value:function(){var e=d(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.modelManager.allNondummyItems.filter((function(t){return 1==t.errorDecrypting})),!(n.length>0)){e.next=3;break}return e.abrupt("return",this.handleItemsResponse(n,null,x.MappingSourceLocalRetrieved,t.KeyRequestLoadSaveAccount));case 3:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"handleConflictsResponse",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,c,u,l,h,f,p,d,m,g,v,y,b,w,k,S,_,C,O,E,A,M,T,R,I,D,j,P,L,F,B;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n&&0!=n.length){e.next=2;break}return e.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Conflicted Items:",n),r={},i=!0,o=!1,s=void 0,e.prev=7,a=n[Symbol.iterator]();case 9:if(i=(c=a.next()).done){e.next=21;break}if(u=c.value,l=u.server_item||u.unsaved_item,h=this.modelManager.findItem(l.uuid),h){e.next=16;break}return r[l.uuid]={},e.abrupt("continue",18);case 16:f=h.getContentCopy(),r[l.uuid]={frozenContent:f,itemRef:h};case 18:i=!0,e.next=9;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](7),o=!0,s=e.t0;case 27:e.prev=27,e.prev=28,i||null==a["return"]||a["return"]();case 30:if(e.prev=30,!o){e.next=33;break}throw s;case 33:return e.finish(30);case 34:return e.finish(27);case 35:p=[],d=!0,m=!1,g=void 0,e.prev=39,v=n[Symbol.iterator]();case 41:if(d=(y=v.next()).done){e.next=91;break}return b=y.value,w=b.server_item||b.unsaved_item,e.t1=SFJS.itemTransformer,e.t2=[w],e.next=48,this.getActiveKeyInfo(t.KeyRequestLoadSaveAccount);case 48:return e.t3=e.sent.keys,e.next=51,e.t1.decryptMultipleItems.call(e.t1,e.t2,e.t3);case 51:if(k=r[w.uuid],S=k.frozenContent,_=k.itemRef,_){e.next=54;break}return e.abrupt("continue",88);case 54:if(p.push(_),"uuid_conflict"!==b.type){e.next=62;break}return e.next=58,this.modelManager.alternateUUIDForItem(_);case 58:C=e.sent,p.push(C),e.next=88;break;case 62:if("sync_conflict"!==b.type){e.next=86;break}return e.next=65,this.modelManager.createDuplicateItemFromResponseItem(w);case 65:if(O=e.sent,E=this.modelManager.duplicateItemWithCustomContent({content:S,duplicateOf:_}),A=!E.isItemContentEqualWith(O),M=!_.isItemContentEqualWith(O),T=!1,R=!1,I=!1,D=!1,w.deleted||_.deleted?D=!0:A?(j=20,P=(new Date-_.client_updated_at)/1e3<j,P?(I=!0,R=!0):(T=!0,D=!0)):M?(L=!N.AreItemContentsEqual({leftContent:_.content,rightContent:O.content,keysToIgnore:_.keysToIgnoreWhenCheckingContentEquality().concat(["references"]),appDataKeysToIgnore:_.appDataKeysToIgnoreWhenCheckingContentEquality()}),F=!L,F?I=!0:(T=!0,D=!0)):D=!0,!T){e.next=79;break}return e.next=77,this.modelManager.duplicateItemWithCustomContentAndAddAsConflict({content:S,duplicateOf:_});case 77:B=e.sent,p.push(B);case 79:if(R&&(this.modelManager.addDuplicatedItemAsConflict({duplicate:O,duplicateOf:_}),p.push(O)),!D){e.next=83;break}return e.next=83,this.modelManager.mapResponseItemsToLocalModelsOmittingFields([w],null,x.MappingSourceRemoteRetrieved);case 83:I&&(_.updated_at=O.updated_at,_.setDirty(!0)),e.next=88;break;case 86:return console.error("Unsupported conflict type",b.type),e.abrupt("continue",88);case 88:d=!0,e.next=41;break;case 91:e.next=97;break;case 93:e.prev=93,e.t4=e["catch"](39),m=!0,g=e.t4;case 97:e.prev=97,e.prev=98,d||null==v["return"]||v["return"]();case 100:if(e.prev=100,!m){e.next=103;break}throw g;case 103:return e.finish(100);case 104:return e.finish(97);case 105:return e.abrupt("return",p);case 106:case"end":return e.stop()}}),e,this,[[7,23,27,35],[28,,30,34],[39,93,97,105],[98,,100,104]])})));function n(t){return e.apply(this,arguments)}return n}()},{key:"deprecated_handleUnsavedItemsResponse",value:function(){var e=d(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n&&0!=n.length){e.next=2;break}return e.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Unsaved Items:",n),r=!0,i=!1,o=void 0,e.prev=6,s=n[Symbol.iterator]();case 8:if(r=(a=s.next()).done){e.next=35;break}return c=a.value,u=c.item,e.t0=SFJS.itemTransformer,e.t1=[u],e.next=15,this.getActiveKeyInfo(t.KeyRequestLoadSaveAccount);case 15:return e.t2=e.sent.keys,e.next=18,e.t0.decryptMultipleItems.call(e.t0,e.t1,e.t2);case 18:if(l=this.modelManager.findItem(u.uuid),l){e.next=21;break}return e.abrupt("continue",32);case 21:if(h=c.error,"uuid_conflict"!==h.tag){e.next=27;break}return e.next=25,this.modelManager.alternateUUIDForItem(l);case 25:e.next=32;break;case 27:if("sync_conflict"!==h.tag){e.next=32;break}return e.next=30,this.modelManager.createDuplicateItemFromResponseItem(u);case 30:f=e.sent,u.deleted||l.isItemContentEqualWith(f)||this.modelManager.addDuplicatedItemAsConflict({duplicate:f,duplicateOf:l});case 32:r=!0,e.next=8;break;case 35:e.next=41;break;case 37:e.prev=37,e.t3=e["catch"](6),i=!0,o=e.t3;case 41:e.prev=41,e.prev=42,r||null==s["return"]||s["return"]();case 44:if(e.prev=44,!i){e.next=47;break}throw o;case 47:return e.finish(44);case 48:return e.finish(41);case 49:case"end":return e.stop()}}),e,this,[[6,37,41,49],[42,,44,48]])})));function n(t){return e.apply(this,arguments)}return n}()},{key:"stateless_downloadAllItems",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(){var r=d(regeneratorRuntime.mark((function r(i,o){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s={limit:n.limit||500,sync_token:n.syncToken,cursor_token:n.cursorToken,content_type:n.contentType,event:n.event,api:k.getApiVersion()},r.prev=1,r.t0=e.httpManager,r.next=5,e.getSyncURL();case 5:r.t1=r.sent,r.t2=s,r.t3=function(){var r=d(regeneratorRuntime.mark((function r(o){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.retrievedItems||(n.retrievedItems=[]),s=o.retrieved_items,r.next=4,e.getActiveKeyInfo(t.KeyRequestLoadSaveAccount);case 4:return a=r.sent.keys,r.next=7,SFJS.itemTransformer.decryptMultipleItems(s,a);case 7:n.retrievedItems=n.retrievedItems.concat(s.map((function(t){return e.modelManager.createItem(t)}))),n.syncToken=o.sync_token,n.cursorToken=o.cursor_token,n.cursorToken?e.stateless_downloadAllItems(n).then(i):i(n.retrievedItems);case 11:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),r.t4=function(t,e){o(t)},r.t0.postAuthenticatedAbsolute.call(r.t0,r.t1,r.t2,r.t3,r.t4),r.next=16;break;case 12:r.prev=12,r.t5=r["catch"](1),console.log("Download all items exception caught:",r.t5),o(r.t5);case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(t,e){return r.apply(this,arguments)}}())}},{key:"resolveOutOfSync",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.stateless_downloadAllItems({event:"resolve-out-of-sync"}).then(function(){var t=d(regeneratorRuntime.mark((function t(n){var r,i,o,s,a,c,u,l,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],i=!0,o=!1,s=void 0,t.prev=4,a=n[Symbol.iterator]();case 6:if(i=(c=a.next()).done){t.next=18;break}if(u=c.value,l=e.modelManager.findItem(u.uuid),!l){t.next=14;break}if(h=!u.isItemContentEqualWith(l),!h){t.next=14;break}return t.next=14,e.modelManager.duplicateItemAndAddAsConflict(l);case 14:r.push(u);case 15:i=!0,t.next=6;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](4),o=!0,s=t.t0;case 24:t.prev=24,t.prev=25,i||null==a["return"]||a["return"]();case 27:if(t.prev=27,!o){t.next=30;break}throw s;case 30:return t.finish(27);case 31:return t.finish(24);case 32:return t.next=34,e.modelManager.mapResponseItemsToLocalModelsWithOptions({items:r,source:x.MappingSourceRemoteRetrieved});case 34:return t.next=36,e.writeItemsToLocalStorage(e.modelManager.allNondummyItems);case 36:return t.abrupt("return",e.sync({performIntegrityCheck:!0}));case 37:case"end":return t.stop()}}),t,null,[[4,20,24,32],[25,,27,31]])})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSignout",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.outOfSync=!1,this.loadLocalDataPromise=null,this.performSyncAgainOnCompletion=!1,this.syncStatus.syncOpInProgress=!1,this._queuedCallbacks=[],this.syncStatus={},t.abrupt("return",this.clearSyncToken());case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearSyncToken",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._syncToken=null,this._cursorToken=null,t.abrupt("return",this.storageManager.removeItem("syncToken"));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"__setLocalDataNotLoaded",value:function(){this.loadLocalDataPromise=null,this._initialDataLoaded=!1}},{key:"queuedCallbacks",get:function(){return this._queuedCallbacks||(this._queuedCallbacks=[]),this._queuedCallbacks}}]),t}();r.SFSyncManager=D;var N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,t),this.content={},this.referencingObjects=[],this.updateFromJSON(e),this.uuid||"undefined"!==typeof SFJS&&SFJS.crypto.generateUUIDSync&&(this.uuid=SFJS.crypto.generateUUIDSync()),"object"!==f(this.content)||this.content.references||(this.content.references=[])}return v(t,[{key:"initUUID",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.uuid){t.next=4;break}return t.next=3,SFJS.crypto.generateUUID();case 3:this.uuid=t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateFromJSON",value:function(e){if(e){this.deleted=e.deleted,this.uuid=e.uuid,this.enc_item_key=e.enc_item_key,this.auth_hash=e.auth_hash,this.auth_params=e.auth_params;for(var n=["errorDecrypting","dirty","dirtyCount","dirtiedDate","dummy"],r=0,i=n;r<i.length;r++){var o=i[r];void 0!==e[o]&&(this[o]=e[o])}if(this.dirtiedDate&&"string"===typeof this.dirtiedDate&&(this.dirtiedDate=new Date(this.dirtiedDate)),this.content_type||(this.content_type=e.content_type),e.errorDecrypting)this.content=e.content;else try{var s="string"===typeof e.content?JSON.parse(e.content):e.content;t.deepMerge(this.contentObject,s)}catch(a){console.log("Error while updating item from json",a)}e.created_at&&(this.created_at=e.created_at),e.updated_at&&(this.updated_at=e.updated_at),this.created_at?this.created_at=new Date(this.created_at):this.created_at=new Date,this.updated_at?this.updated_at=new Date(this.updated_at):this.updated_at=new Date(0),this._client_updated_at=null,e.content?this.mapContentToLocalProperties(this.contentObject):1==e.deleted&&this.handleDeletedContent()}}},{key:"mapContentToLocalProperties",value:function(t){}},{key:"createContentJSONFromProperties",value:function(){var e=this.structureParams();return t.deepMerge(this.contentObject,e),e}},{key:"structureParams",value:function(){return this.getContentCopy()}},{key:"handleDeletedContent",value:function(){}},{key:"setDirty",value:function(t,e){this.dirty=t,this.dirtyCount||(this.dirtyCount=0),t?this.dirtyCount++:this.dirtyCount=0,this.dirtiedDate=new Date,t&&e?this.client_updated_at=new Date:this.hasRawClientUpdatedAtValue()||(this.client_updated_at=new Date(this.updated_at))}},{key:"updateLocalRelationships",value:function(){}},{key:"addItemAsRelationship",value:function(t){if(t.setIsBeingReferencedBy(this),!this.hasRelationshipWithItem(t)){var e=this.content.references||[];e.push({uuid:t.uuid,content_type:t.content_type}),this.content.references=e}}},{key:"removeItemAsRelationship",value:function(t){t.setIsNoLongerBeingReferencedBy(this),this.removeReferenceWithUuid(t.uuid)}},{key:"setIsBeingReferencedBy",value:function(t){_.find(this.referencingObjects,{uuid:t.uuid})||this.referencingObjects.push(t)}},{key:"setIsNoLongerBeingReferencedBy",value:function(t){_.remove(this.referencingObjects,{uuid:t.uuid}),this.hasRelationshipWithItem(t)&&(this.removeReferenceWithUuid(t.uuid),this.setDirty(!0))}},{key:"removeReferenceWithUuid",value:function(t){var e=this.content.references||[];e=e.filter((function(e){return e.uuid!=t})),this.content.references=e}},{key:"hasRelationshipWithItem",value:function(t){var e=this.content.references.find((function(e){return e.uuid==t.uuid}));return null!=e}},{key:"isBeingRemovedLocally",value:function(){}},{key:"didFinishSyncing",value:function(){}},{key:"informReferencesOfUUIDChange",value:function(t,e){}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function(t,e,n){if(!this.errorDecrypting){var r=!0,i=!1,o=void 0;try{for(var s,a=this.content.references[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;c.uuid==e&&(c.uuid=n,this.setDirty(!0))}}catch(u){i=!0,o=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}}}},{key:"doNotEncrypt",value:function(){return!1}},{key:"setDomainDataItem",value:function(t,e,n){if(n){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var r=this.content.appData[n];r||(r={}),r[t]=e,this.content.appData[n]=r}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"getDomainDataItem",value:function(t,e){if(e){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var n=this.content.appData[e];return n?n[t]:null}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"setAppDataItem",value:function(e,n){this.setDomainDataItem(e,n,t.AppDomain)}},{key:"getAppDataItem",value:function(e){return this.getDomainDataItem(e,t.AppDomain)}},{key:"hasRawClientUpdatedAtValue",value:function(){return null!=this.getAppDataItem("client_updated_at")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function(){return[]}},{key:"appDataKeysToIgnoreWhenCheckingContentEquality",value:function(){return["client_updated_at"]}},{key:"getContentCopy",value:function(){var t=JSON.parse(JSON.stringify(this.content));return t}},{key:"isItemContentEqualWith",value:function(e){return t.AreItemContentsEqual({leftContent:this.content,rightContent:e.content,keysToIgnore:this.keysToIgnoreWhenCheckingContentEquality(),appDataKeysToIgnore:this.appDataKeysToIgnoreWhenCheckingContentEquality()})}},{key:"satisfiesPredicate",value:function(t){return P.ItemSatisfiesPredicate(this,t)}},{key:"createdAtString",value:function(){return this.dateToLocalizedString(this.created_at)}},{key:"updatedAtString",value:function(){return this.dateToLocalizedString(this.client_updated_at)}},{key:"updatedAtTimestamp",value:function(){return this.updated_at.getTime()}},{key:"dateToLocalizedString",value:function(t){if("undefined"!==typeof Intl&&Intl.DateTimeFormat){if(!I){var e=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;I=new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"})}return I.format(t)}return t.toDateString()+" "+t.toLocaleTimeString()}},{key:"contentObject",get:function(){if(this.errorDecrypting)return this.content;if(!this.content)return this.content={},this.content;if(null!==this.content&&"object"===f(this.content))return this.content;try{var t=JSON.parse(this.content);return this.content=t,this.content}catch(e){return console.log("Error parsing json",e,this),this.content={},this.content}}},{key:"pinned",get:function(){return this.getAppDataItem("pinned")}},{key:"archived",get:function(){return this.getAppDataItem("archived")}},{key:"locked",get:function(){return this.getAppDataItem("locked")}},{key:"displayName",get:function(){return"Item"}},{key:"client_updated_at",get:function(){if(!this._client_updated_at){var t=this.getAppDataItem("client_updated_at");this._client_updated_at=t?new Date(t):new Date(this.updated_at)}return this._client_updated_at},set:function(t){this._client_updated_at=t,this.setAppDataItem("client_updated_at",t)}}],[{key:"deepMerge",value:function(t,e){function n(t,e){if(_.isArray(t))return e}return _.mergeWith(t,e,n),t}},{key:"AreItemContentsEqual",value:function(e){var n=e.leftContent,r=e.rightContent,i=e.keysToIgnore,o=e.appDataKeysToIgnore,s=function(t,e){if(!t)return t;var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;delete t[a]}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return t};return n=JSON.parse(JSON.stringify(n)),n.appData&&s(n.appData[t.AppDomain],o),n=s(n,i),r=JSON.parse(JSON.stringify(r)),r.appData&&s(r.appData[t.AppDomain],o),r=s(r,i),JSON.stringify(n)===JSON.stringify(r)}}]),t}();r.SFItem=N;var j=function(){function t(e,n,r){if(m(this,t),this.item=e,this.keys=n,this.auth_params=r,this.keys&&!this.auth_params)throw"SFItemParams.auth_params must be supplied if supplying keys.";if(this.auth_params&&!this.auth_params.version)throw"SFItemParams.auth_params is missing version"}return v(t,[{key:"paramsForExportFile",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.forExportFile=!0,!e){t.next=5;break}return t.abrupt("return",this.__params());case 5:return t.next=7,this.__params();case 7:return n=t.sent,t.abrupt("return",_.omit(n,["deleted"]));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"paramsForExtension",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.paramsForExportFile());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"paramsForLocalStorage",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.additionalFields=["dirty","dirtiedDate","errorDecrypting"],this.forExportFile=!0,t.abrupt("return",this.__params());case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"paramsForSync",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.__params());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"__params",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={uuid:this.item.uuid,content_type:this.item.content_type,deleted:this.item.deleted,created_at:this.item.created_at,updated_at:this.item.updated_at},this.item.errorDecrypting){t.next=23;break}if(n=this.item.doNotEncrypt()&&!this.forExportFile,!this.keys||n){t.next=11;break}return t.next=6,SFJS.itemTransformer.encryptItem(this.item,this.keys,this.auth_params);case 6:r=t.sent,_.merge(e,r),"001"!==this.auth_params.version&&(e.auth_hash=null),t.next=21;break;case 11:if(!this.forExportFile){t.next=15;break}t.t0=this.item.createContentJSONFromProperties(),t.next=19;break;case 15:return t.next=17,SFJS.crypto.base64(JSON.stringify(this.item.createContentJSONFromProperties()));case 17:t.t1=t.sent,t.t0="000"+t.t1;case 19:e.content=t.t0,this.forExportFile||(e.enc_item_key=null,e.auth_hash=null);case 21:t.next=26;break;case 23:e.content=this.item.content,e.enc_item_key=this.item.enc_item_key,e.auth_hash=this.item.auth_hash;case 26:return this.additionalFields&&_.merge(e,_.pick(this.item,this.additionalFields)),t.abrupt("return",e);case 28:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}();r.SFItemParams=j;var P=function(){function t(e,n,r){m(this,t),this.keypath=e,this.operator=n,this.value=r,t.IsRecursiveOperator(this.operator)&&(this.value=this.value.map(t.fromArray))}return v(t,null,[{key:"fromArray",value:function(e){return new t(e[0],e[1],e[2])}},{key:"ObjectSatisfiesPredicate",value:function(e,n){if(Array.isArray(n)&&(n=this.fromArray(n)),t.IsRecursiveOperator(n.operator)){if("and"===n.operator){var r=!0,i=!1,o=void 0;try{for(var s,a=n.value[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if(!this.ObjectSatisfiesPredicate(e,c))return!1}}catch(y){i=!0,o=y}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return!0}if("or"===n.operator){var u=!0,l=!1,h=void 0;try{for(var f,p=n.value[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){c=f.value;if(this.ObjectSatisfiesPredicate(e,c))return!0}}catch(y){l=!0,h=y}finally{try{u||null==p["return"]||p["return"]()}finally{if(l)throw h}}return!1}}var d=n.value;"string"==typeof d&&d.includes(".ago")&&(d=this.DateFromString(d));var m=n.keypath.split(".").reduce((function(t,e){return t&&t[e]}),e),g=[!1,"",null,void 0,NaN];if(void 0==m)return"!="==n.operator?!g.includes(n.value):g.includes(n.value);if("="==n.operator)return Array.isArray(m)?JSON.stringify(m)==JSON.stringify(d):m==d;if("!="==n.operator)return Array.isArray(m)?JSON.stringify(m)!=JSON.stringify(d):m!==d;if("<"==n.operator)return m<d;if(">"==n.operator)return m>d;if("<="==n.operator)return m<=d;if(">="==n.operator)return m>=d;if("startsWith"==n.operator)return m.startsWith(d);if("in"==n.operator)return-1!=d.indexOf(m);if("includes"==n.operator)return this.resolveIncludesPredicate(m,d);if("matches"==n.operator){var v=new RegExp(d);return v.test(m)}return!1}},{key:"resolveIncludesPredicate",value:function(e,n){if("string"==typeof n)return e.includes(n);var r;r=Array.isArray(n)?t.fromArray(n):n;var i=!0,o=!1,s=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;if(this.ObjectSatisfiesPredicate(u,r))return!0}}catch(l){o=!0,s=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw s}}return!1}},{key:"ItemSatisfiesPredicate",value:function(e,n){return Array.isArray(n)&&(n=t.fromArray(n)),this.ObjectSatisfiesPredicate(e,n)}},{key:"ItemSatisfiesPredicates",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(!this.ItemSatisfiesPredicate(t,a))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return!0}},{key:"DateFromString",value:function(t){var e=t.split("."),n=e[1],r=new Date,i=parseInt(e[0]);return"days"==n?r.setDate(r.getDate()-i):"hours"==n&&r.setHours(r.getHours()-i),r}},{key:"IsRecursiveOperator",value:function(t){return["and","or"].includes(t)}}]),t}();r.SFPredicate=P;var L=function(t){function e(t){var r;return m(this,e),r=n(this,o(e).call(this,t)),r.content.desktopPrivileges||(r.content.desktopPrivileges={}),r}return s(e,t),v(e,null,[{key:"contentType",value:function(){return"SN|Privileges"}}]),v(e,[{key:"setCredentialsForAction",value:function(t,e){this.content.desktopPrivileges[t]=e}},{key:"getCredentialsForAction",value:function(t){return this.content.desktopPrivileges[t]||[]}},{key:"toggleCredentialForAction",value:function(t,e){this.isCredentialRequiredForAction(t,e)?this.removeCredentialForAction(t,e):this.addCredentialForAction(t,e)}},{key:"removeCredentialForAction",value:function(t,e){_.pull(this.content.desktopPrivileges[t],e)}},{key:"addCredentialForAction",value:function(t,e){var n=this.getCredentialsForAction(t);n.push(e),this.setCredentialsForAction(t,n)}},{key:"isCredentialRequiredForAction",value:function(t,e){var n=this.getCredentialsForAction(t);return n.includes(e)}}]),e}(N);r.SFPrivileges=L;var F=function(t){function e(t){var r;m(this,e),r=n(this,o(e).call(this,t)),r.content.itemUUIDToItemHistoryMapping||(r.content.itemUUIDToItemHistoryMapping={});var i=Object.keys(r.content.itemUUIDToItemHistoryMapping);return i.forEach((function(t){var e=r.content.itemUUIDToItemHistoryMapping[t];r.content.itemUUIDToItemHistoryMapping[t]=new B(e)})),r}return s(e,t),v(e,[{key:"addEntryForItem",value:function(t){var e=this.historyForItem(t),n=e.addHistoryEntryForItem(t);return n}},{key:"historyForItem",value:function(t){var e=this.content.itemUUIDToItemHistoryMapping[t.uuid];return e||(e=this.content.itemUUIDToItemHistoryMapping[t.uuid]=new B),e}},{key:"clearItemHistory",value:function(t){this.historyForItem(t).clear()}},{key:"clearAllHistory",value:function(){this.content.itemUUIDToItemHistoryMapping={}}},{key:"optimizeHistoryForItem",value:function(t){var n=this.historyForItem(t);n.entries.length>e.LargeItemEntryAmountThreshold&&n.optimize()}}]),e}(N);r.SFHistorySession=F,F.LargeItemEntryAmountThreshold=60;var B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m(this,t),this.entries||(this.entries=[]),e.entries){var n=!0,r=!1,i=void 0;try{for(var o,s=e.entries[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,c=this.createEntryForItem(a.item);c.setPreviousEntry(this.getLastEntry()),this.entries.push(c)}}catch(u){r=!0,i=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}}}return v(t,[{key:"createEntryForItem",value:function(e){var n=t.HistoryEntryClassMapping&&t.HistoryEntryClassMapping[e.content_type];n||(n=z);var r=new n(e);return r}},{key:"getLastEntry",value:function(){return this.entries[this.entries.length-1]}},{key:"addHistoryEntryForItem",value:function(t){var e=this.createEntryForItem(t),n=this.getLastEntry();if(e.setPreviousEntry(n),!e.isSameAsEntry(n))return this.entries.push(e),e}},{key:"clear",value:function(){this.entries.length=0}},{key:"optimize",value:function(){var e=this,n=[],r=function(e){return e.deltaSize()>t.LargeEntryDeltaThreshold},i=function(t,i,o){if(o)n.push(t);else{i=n.indexOf(t);-1!==i&&n.splice(i,1)}if(o&&r(t)&&-1==t.operationVector()){var s=e.entries[i-1];s&&n.push(s)}};this.entries.forEach((function(t,n){if(0==n||n==e.entries.length-1)i(t,n,!0);else{var o=r(t);i(t,n,o)}})),this.entries=this.entries.filter((function(t,e){return-1!==n.indexOf(t)}))}}]),t}();r.SFItemHistory=B,B.LargeEntryDeltaThreshold=15;var z=function(){function t(e){m(this,t),this.item=N.deepMerge({},e),this.defaultContentKeyToDiffOn="text",this.textCharDiffLength=0,"string"==typeof this.item.updated_at&&(this.item.updated_at=new Date(this.item.updated_at))}return v(t,[{key:"setPreviousEntry",value:function(t){this.hasPreviousEntry=null!=t,this.item.content[this.defaultContentKeyToDiffOn]&&(this.textCharDiffLength=t?this.item.content[this.defaultContentKeyToDiffOn].length-t.item.content[this.defaultContentKeyToDiffOn].length:this.item.content[this.defaultContentKeyToDiffOn].length)}},{key:"operationVector",value:function(){return void 0!=this.textCharDiffLength?this.hasPreviousEntry&&0!=this.textCharDiffLength?this.textCharDiffLength<0?-1:1:0:1}},{key:"deltaSize",value:function(){return void 0!=this.textCharDiffLength?Math.abs(this.textCharDiffLength):1}},{key:"isSameAsEntry",value:function(t){if(!t)return!1;var e=new N(this.item),n=new N(t.item);return e.isItemContentEqualWith(n)}}]),t}();r.SFItemHistoryEntry=z;w="undefined"!==typeof window?window:"undefined"!==typeof t?t:null;var $=function(){function t(){m(this,t),this.DefaultPBKDF2Length=768}return v(t,[{key:"generateUUIDSync",value:function(){var t=w.crypto||w.msCrypto;if(t){var e=new Uint32Array(4);t.getRandomValues(e);var n=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){n++;var r=e[n>>3]>>n%8*4&15,i="x"==t?r:3&r|8;return i.toString(16)}))}var r=(new Date).getTime();w.performance&&"function"===typeof w.performance.now&&(r+=performance.now());var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==t?e:3&e|8).toString(16)}));return i}},{key:"generateUUID",value:function(){var t=d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.generateUUIDSync());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"timingSafeEqual",value:function(t,e){var n=String(t),r=String(e),i=n.length,o=0;i!==r.length&&(r=n,o=1);for(var s=0;s<i;s++)o|=n.charCodeAt(s)^r.charCodeAt(s);return 0===o}},{key:"decryptText",value:function(){var t=d(regeneratorRuntime.mark((function t(){var n,r,i,o,s,a,c,u,l,h,f,p,d=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=d.length>0&&void 0!==d[0]?d[0]:{},r=n.ciphertextToAuth,i=n.contentCiphertext,o=n.encryptionKey,s=n.iv,a=n.authHash,c=n.authKey,u=d.length>1?d[1]:void 0,!u||a){t.next=5;break}return console.error("Auth hash is required."),t.abrupt("return");case 5:if(!a){t.next=12;break}return t.next=8,this.hmac256(r,c);case 8:if(l=t.sent,!1!==this.timingSafeEqual(a,l)){t.next=12;break}return console.error("Auth hash does not match, returning null."),t.abrupt("return",null);case 12:return h=e.enc.Hex.parse(o),f=e.enc.Hex.parse(s||""),p=e.AES.decrypt(i,h,{iv:f,mode:e.mode.CBC,padding:e.pad.Pkcs7}),t.abrupt("return",p.toString(e.enc.Utf8));case 16:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"encryptText",value:function(){var t=d(regeneratorRuntime.mark((function t(n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.enc.Hex.parse(r),s=e.enc.Hex.parse(i||""),a=e.AES.encrypt(n,o,{iv:s,mode:e.mode.CBC,padding:e.pad.Pkcs7}),t.abrupt("return",a.toString());case 4:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"generateRandomKey",value:function(){var t=d(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.lib.WordArray.random(n/8).toString());case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"generateItemEncryptionKey",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=512,n=1,t.next=4,this.generateRandomKey(e);case 4:return r=t.sent,t.next=7,this.generateRandomKey(e);case 7:return i=t.sent,t.abrupt("return",this.pbkdf2(i,r,n,e));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"firstHalfOfKey",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.substring(0,e.length/2));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"secondHalfOfKey",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.substring(e.length/2,e.length));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"base64",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",w.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)}))));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"base64Decode",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",w.atob(e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"sha256",value:function(){var t=d(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.SHA256(n).toString());case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"hmac256",value:function(){var t=d(regeneratorRuntime.mark((function t(n,r){var i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.enc.Hex.parse(r),o=e.enc.Utf8.parse(n),s=e.HmacSHA256(o,i).toString(),t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"generateSalt",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.sha256([e,"SF",n,r,i].join(":"));case 2:return o=t.sent,t.abrupt("return",o);case 4:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"generateSymmetricKeyPair",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i,o,s,a,c,u,l,h=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:{},n=e.password,r=e.pw_salt,i=e.pw_cost,t.next=3,this.pbkdf2(n,r,i,this.DefaultPBKDF2Length);case 3:return o=t.sent,s=o.length,a=s/3,c=o.slice(0,a),u=o.slice(a,2*a),l=o.slice(2*a,3*a),t.abrupt("return",[c,u,l]);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"computeEncryptionKeysForUser",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("003"!=n.version){t.next=9;break}if(n.identifier){t.next=4;break}return console.error("authParams is missing identifier."),t.abrupt("return");case 4:return t.next=6,this.generateSalt(n.identifier,n.version,n.pw_cost,n.pw_nonce);case 6:r=t.sent,t.next=10;break;case 9:r=n.pw_salt;case 10:return t.abrupt("return",this.generateSymmetricKeyPair({password:e,pw_salt:r,pw_cost:n.pw_cost}).then((function(t){var e={pw:t[0],mk:t[1],ak:t[2]};return e})));case 11:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"generateInitialKeysAndAuthParamsForUser",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this.SFJS.version,i=this.SFJS.defaultPasswordGenerationCost,t.next=4,this.generateRandomKey(256);case 4:return o=t.sent,t.next=7,this.generateSalt(e,r,i,o);case 7:return s=t.sent,t.abrupt("return",this.generateSymmetricKeyPair({password:n,pw_salt:s,pw_cost:i}).then((function(t){var n={pw_nonce:o,pw_cost:i,identifier:e,version:r},s={pw:t[0],mk:t[1],ak:t[2]};return{keys:s,authParams:n}})));case 9:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();r.SFAbstractCrypto=$;var U=function(t){function r(){return m(this,r),n(this,o(r).apply(this,arguments))}return s(r,t),v(r,[{key:"pbkdf2",value:function(){var t=d(regeneratorRuntime.mark((function t(n,r,i,o){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={keySize:o/32,hasher:e.algo.SHA512,iterations:i},t.abrupt("return",e.PBKDF2(n,r,s).toString());case 2:case"end":return t.stop()}}),t)})));function n(e,n,r,i){return t.apply(this,arguments)}return n}()}]),r}($);r.SFCryptoJS=U;w="undefined"!==typeof window?window:"undefined"!==typeof t?t:null;var H=w.crypto?w.crypto.subtle:null,V=function(t){function e(){return m(this,e),n(this,o(e).apply(this,arguments))}return s(e,t),v(e,[{key:"pbkdf2",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.webCryptoImportKey(e,"PBKDF2",["deriveBits"]);case 2:if(o=t.sent,o){t.next=6;break}return console.log("Key is null, unable to continue"),t.abrupt("return",null);case 6:return t.abrupt("return",this.webCryptoDeriveBits(o,n,r,i));case 7:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"generateRandomKey",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!0,t.abrupt("return",H.generateKey({name:"AES-CBC",length:e},n,["encrypt","decrypt"]).then((function(t){return H.exportKey("raw",t).then(function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.arrayBufferToHexString(new Uint8Array(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())["catch"]((function(t){console.error("Error exporting key",t)}))}))["catch"]((function(t){console.error("Error generating key",t)})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"generateItemEncryptionKey",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=256,t.abrupt("return",Promise.all([this.generateRandomKey(e),this.generateRandomKey(e)]).then((function(t){return t.join("")})));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"encryptText",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,c,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,this.hexStringToArrayBuffer(r);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=new ArrayBuffer(16);case 7:return i=t.t0,o={name:"AES-CBC",iv:i},t.next=11,this.hexStringToArrayBuffer(n);case 11:return s=t.sent,t.next=14,this.webCryptoImportKey(s,o.name,["encrypt"]);case 14:return a=t.sent,t.next=17,this.stringToArrayBuffer(e);case 17:return c=t.sent,t.abrupt("return",crypto.subtle.encrypt(o,a,c).then(function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.arrayBufferToBase64(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 19:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"decryptText",value:function(){var t=d(regeneratorRuntime.mark((function t(){var e,n,r,i,o,s,a,c,u,l,h,f,p,m,g=this,v=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=v.length>0&&void 0!==v[0]?v[0]:{},n=e.ciphertextToAuth,r=e.contentCiphertext,i=e.encryptionKey,o=e.iv,s=e.authHash,a=e.authKey,c=v.length>1?v[1]:void 0,!c||s){t.next=5;break}return console.error("Auth hash is required."),t.abrupt("return");case 5:if(!s){t.next=12;break}return t.next=8,this.hmac256(n,a);case 8:if(u=t.sent,!1!==this.timingSafeEqual(s,u)){t.next=12;break}return console.error("Auth hash does not match, returning null. ".concat(s," != ").concat(u)),t.abrupt("return",null);case 12:if(!o){t.next=18;break}return t.next=15,this.hexStringToArrayBuffer(o);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=new ArrayBuffer(16);case 19:return l=t.t0,h={name:"AES-CBC",iv:l},t.next=23,this.hexStringToArrayBuffer(i);case 23:return f=t.sent,t.next=26,this.webCryptoImportKey(f,h.name,["decrypt"]);case 26:return p=t.sent,t.next=29,this.base64ToArrayBuffer(r);case 29:return m=t.sent,t.abrupt("return",crypto.subtle.decrypt(h,p,m).then(function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.arrayBufferToString(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())["catch"]((function(t){console.error("Error decrypting:",t)})));case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"hmac256",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r,i,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.hexStringToArrayBuffer(n);case 2:return r=t.sent,t.next=5,this.webCryptoImportKey(r,"HMAC",["sign"],{name:"SHA-256"});case 5:return i=t.sent,t.next=8,this.stringToArrayBuffer(e);case 8:return o=t.sent,t.abrupt("return",crypto.subtle.sign({name:"HMAC"},i,o).then(function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.arrayBufferToHexString(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())["catch"]((function(t){console.error("Error computing hmac",t)})));case 10:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"webCryptoImportKey",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=6;break}return t.next=3,this.stringToArrayBuffer(e);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=e;case 7:return o=t.t0,t.abrupt("return",H.importKey("raw",o,{name:n,hash:i},!1,r).then((function(t){return t}))["catch"]((function(t){return console.error(t),null})));case 9:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"webCryptoDeriveBits",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i){var o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.stringToArrayBuffer(n);case 2:return t.t0=t.sent,t.t1=r,t.t2={name:"SHA-512"},o={name:"PBKDF2",salt:t.t0,iterations:t.t1,hash:t.t2},t.abrupt("return",H.deriveBits(o,e,i).then(function(){var t=d(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.arrayBufferToHexString(new Uint8Array(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())["catch"]((function(t){return console.error(t),null})));case 7:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"stringToArrayBuffer",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Blob([e]),i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsArrayBuffer(r)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"arrayBufferToString",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Blob([e]),i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsText(r)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"arrayBufferToHexString",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=new Uint8Array(e),r="",o=0;o<n.byteLength;o++)i=n[o].toString(16),i.length<2&&(i="0"+i),r+=i;return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"hexStringToArrayBuffer",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=[],r=0;r<e.length;r+=2)n.push(parseInt(e.substr(r,2),16));return t.abrupt("return",new Uint8Array(n));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"base64ToArrayBuffer",value:function(){var t=d(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.base64Decode(e);case 2:for(n=t.sent,r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return t.abrupt("return",i.buffer);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"arrayBufferToBase64",value:function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Blob([e],{type:"application/octet-binary"}),i=new FileReader;i.onload=function(e){var n=e.target.result;t(n.substr(n.indexOf(",")+1))},i.readAsDataURL(r)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}($);r.SFCryptoWeb=V;var W=function(){function t(e){m(this,t),this.crypto=e}return v(t,[{key:"_private_encryptString",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r,i,o){var s,a,c,u,l,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("001"!==o.version){t.next=7;break}return t.next=3,this.crypto.encryptText(e,n,null);case 3:a=t.sent,s=o.version+a,t.next=21;break;case 7:return t.next=9,this.crypto.generateRandomKey(128);case 9:return c=t.sent,t.next=12,this.crypto.encryptText(e,n,c);case 12:return a=t.sent,u=[o.version,i,c,a].join(":"),t.next=16,this.crypto.hmac256(u,r);case 16:return l=t.sent,t.next=19,this.crypto.base64(JSON.stringify(o));case 19:h=t.sent,s=[o.version,l,i,c,a,h].join(":");case 21:return t.abrupt("return",s);case 22:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i,o){return t.apply(this,arguments)}return e}()},{key:"encryptItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},t.next=3,this.crypto.generateItemEncryptionKey();case 3:if(o=t.sent,"001"!==r.version){t.next=10;break}return t.next=7,this.crypto.encryptText(o,n.mk,null);case 7:i.enc_item_key=t.sent,t.next=13;break;case 10:return t.next=12,this._private_encryptString(o,n.mk,n.ak,e.uuid,r);case 12:i.enc_item_key=t.sent;case 13:return t.next=15,this.crypto.firstHalfOfKey(o);case 15:return s=t.sent,t.next=18,this.crypto.secondHalfOfKey(o);case 18:return a=t.sent,t.next=21,this._private_encryptString(JSON.stringify(e.createContentJSONFromProperties()),s,a,e.uuid,r);case 21:if(c=t.sent,"001"!==r.version){t.next=27;break}return t.next=25,this.crypto.hmac256(c,a);case 25:u=t.sent,i.auth_hash=u;case 27:return i.content=c,t.abrupt("return",i);case 29:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"encryptionComponentsFromString",value:function(t,e,n){var r=t.substring(0,3);if("001"===r)return{contentCiphertext:t.substring(3,t.length),encryptionVersion:r,ciphertextToAuth:t,iv:null,authHash:null,encryptionKey:e,authKey:n};var i=t.split(":");return{encryptionVersion:i[0],authHash:i[1],uuid:i[2],iv:i[3],contentCiphertext:i[4],authParams:i[5],ciphertextToAuth:[i[0],i[2],i[3],i[4]].join(":"),encryptionKey:e,authKey:n}}},{key:"decryptItem",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n){var r,i,o,s,a,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("string"==typeof e.content){t.next=2;break}return t.abrupt("return");case 2:if(!e.content.startsWith("000")){t.next=14;break}return t.prev=3,t.t0=JSON,t.next=7,this.crypto.base64Decode(e.content.substring(3,e.content.length));case 7:t.t1=t.sent,e.content=t.t0.parse.call(t.t0,t.t1),t.next=13;break;case 11:t.prev=11,t.t2=t["catch"](3);case 13:return t.abrupt("return");case 14:if(e.enc_item_key){t.next=17;break}return console.log("Missing item encryption key, skipping decryption."),t.abrupt("return");case 17:if(r=e.enc_item_key,i=!0,r.startsWith("002")||r.startsWith("003")||(r="001"+r,i=!1),o=this.encryptionComponentsFromString(r,n.mk,n.ak),!o.uuid||o.uuid===e.uuid){t.next=26;break}return console.error("Item key params UUID does not match item UUID"),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,t.abrupt("return");case 26:return t.next=28,this.crypto.decryptText(o,i);case 28:if(s=t.sent,s){t.next=34;break}return console.log("Error decrypting item",e),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,t.abrupt("return");case 34:return t.next=36,this.crypto.firstHalfOfKey(s);case 36:return a=t.sent,t.next=39,this.crypto.secondHalfOfKey(s);case 39:return c=t.sent,u=this.encryptionComponentsFromString(e.content,a,c),t.prev=41,t.t3=JSON,t.next=45,this.crypto.base64Decode(u.authParams);case 45:t.t4=t.sent,e.auth_params=t.t3.parse.call(t.t3,t.t4),t.next=51;break;case 49:t.prev=49,t.t5=t["catch"](41);case 51:if(!u.uuid||u.uuid===e.uuid){t.next=55;break}return e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,t.abrupt("return");case 55:return u.authHash||(u.authHash=e.auth_hash),t.next=58,this.crypto.decryptText(u,!0);case 58:l=t.sent,l?(1==e.errorDecrypting&&(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!1,e.content=l):(e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0);case 60:case"end":return t.stop()}}),t,this,[[3,11],[41,49]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"decryptMultipleItems",value:function(){var t=d(regeneratorRuntime.mark((function t(e,n,r){var i,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=function(){var t=d(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(1!=e.deleted||null!=e.content){t.next=4;break}return t.abrupt("return");case 4:if(i="string"===typeof e.content||e.content instanceof String,!i){t.next=19;break}return t.prev=6,t.next=9,o.decryptItem(e,n);case 9:t.next=19;break;case 11:if(t.prev=11,t.t0=t["catch"](6),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,!r){t.next=17;break}throw t.t0;case 17:return console.error("Error decrypting item",e,t.t0),t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return",Promise.all(e.map((function(t){return i(t)}))));case 2:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),t}();r.SFItemTransformer=W;w="undefined"!==typeof window?window:"undefined"!==typeof t?t:null;var q=function(){function t(e){if(m(this,t),w){var n="undefined"!==typeof document&&document.documentMode||/Edge/.test(navigator.userAgent);!n&&w.crypto&&w.crypto.subtle?this.crypto=new V:this.crypto=new U}e&&(this.crypto=e),this.itemTransformer=new W(this.crypto),this.crypto.SFJS={version:this.version(),defaultPasswordGenerationCost:this.defaultPasswordGenerationCost()}}return v(t,[{key:"version",value:function(){return"003"}},{key:"supportsPasswordDerivationCost",value:function(t){return!(t>5e3)||this.crypto instanceof V}},{key:"supportedVersions",value:function(){return["001","002","003"]}},{key:"isVersionNewerThanLibraryVersion",value:function(t){var e=this.version();return parseInt(t)>parseInt(e)}},{key:"isProtocolVersionOutdated",value:function(t){var e={"001":Date.parse("2018-01-01"),"002":Date.parse("2020-01-01")},n=e[t];if(!n)return!1;var r=new Date>n;return r}},{key:"costMinimumForVersion",value:function(t){return{"001":3e3,"002":3e3,"003":11e4}[t]}},{key:"defaultPasswordGenerationCost",value:function(){return this.costMinimumForVersion(this.version())}}]),t}();if(r.StandardFile=q,w)try{w.StandardFile=q,w.SFJS=new q,w.SFCryptoWeb=V,w.SFCryptoJS=U,w.SFItemTransformer=W,w.SFModelManager=x,w.SFItem=N,w.SFItemParams=j,w.SFHttpManager=k,w.SFStorageManager=R,w.SFSyncManager=D,w.SFAuthManager=b,w.SFMigrationManager=S,w.SFAlertManager=y,w.SFPredicate=P,w.SFHistorySession=F,w.SFSessionHistoryManager=M,w.SFItemHistory=B,w.SFItemHistoryEntry=z,w.SFPrivilegesManager=C,w.SFPrivileges=L,w.SFSingletonManager=T}catch(J){console.log("Exception while exporting window variables",J)}}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[1])(1)}))}).call(e,n(3))},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof t,l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{l=e.regeneratorRuntime=u?t.exports:{},l.wrap=w;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",m={},g={};g[s]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==r&&i.call(y,s)&&(g=y);var b=_.prototype=S.prototype=Object.create(g);x.prototype=b.constructor=_,_.constructor=x,_[c]=x.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},C(O.prototype),O.prototype[a]=function(){return this},l.AsyncIterator=O,l.async=function(t,e,n,r){var i=new O(w(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(b),b[c]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function w(t,e,n,r){var i=e&&e.prototype instanceof S?e:S,o=Object.create(i.prototype),s=new R(r||[]);return o._invoke=E(t,n,s),o}function k(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function S(){}function x(){}function _(){}function C(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function O(t){function e(n,r,o,s){var a=k(t[n],t,r);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(u).then((function(t){c.value=t,o(c)}),s)}s(a.arg)}var n;function r(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function E(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return D()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=A(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=k(t,e,n);if("normal"===c.type){if(r=n.done?d:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}function A(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=k(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function I(t){if(t){var e=t[s];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){while(++r<t.length)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:D}}function D(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),i=(n.n(r),n(5)),o=(n.n(i),n(0));n.n(o);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(e){s(this,t),this.componentManager=e,this.updateObservers=[],this.items=[]}return c(t,[{key:"getPlatform",value:function(){return this.componentManager.platform}},{key:"getEnvironment",value:function(){return this.componentManager.environment}},{key:"isMobile",value:function(){return"mobile"==this.getEnvironment()}},{key:"addEventHandler",value:function(t){var e={id:Math.random,callback:t};return this.updateObservers.push(e),e}},{key:"removeUpdateObserver",value:function(t){this.updateObservers.splice(this.updateObservers.indexOf(t),1)}},{key:"notifyObserversOfEvent",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.updateObservers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;s.callback(t)}}catch(a){n=!0,r=a}finally{try{e||null==o["return"]||o["return"]()}finally{if(n)throw r}}}},{key:"filterItems",value:function(t){return this.items.filter((function(e){return e.content_type==t}))}},{key:"getFileDescriptors",value:function(){return this.filterItems(t.FileDescriptorContentTypeKey)}},{key:"beginStreamingFiles",value:function(){var e=this,n=[t.FileDescriptorContentTypeKey,t.FileSafeCredentialsContentType,t.FileSafeIntegrationContentTypeKey];this.componentManager.streamItems(n,(function(t){e.handleStreamItemsMessage(t)}))}},{key:"handleStreamItemsMessage",value:function(e){var n,r,i,s,a,c,u;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:n=!0,r=!1,i=void 0,l.prev=3,s=e[Symbol.iterator]();case 5:if(n=(a=s.next()).done){l.next=18;break}if(c=a.value,c=new o["SFItem"](c),!c.deleted){l.next=11;break}return this.removeItemFromItems(c),l.abrupt("continue",15);case 11:if(!c.isMetadataUpdate){l.next=13;break}return l.abrupt("continue",15);case 13:u=this.indexOfItem(c),u>=0?this.items[u]=c:this.items.push(c);case 15:n=!0,l.next=5;break;case 18:l.next=24;break;case 20:l.prev=20,l.t0=l["catch"](3),r=!0,i=l.t0;case 24:l.prev=24,l.prev=25,n||null==s["return"]||s["return"]();case 27:if(l.prev=27,!r){l.next=30;break}throw i;case 30:return l.finish(27);case 31:return l.finish(24);case 32:this.notifyObserversOfEvent(t.BridgeEventReceivedItems);case 33:case"end":return l.stop()}}),null,this,[[3,20,24,32],[25,,27,31]])}},{key:"indexOfItem",value:function(t){for(var e in this.items)if(this.items[e].uuid==t.uuid)return e;return-1}},{key:"removeItemFromItems",value:function(t){this.items=this.items.filter((function(e){return e.uuid!==t.uuid}))}},{key:"createItem",value:function(t,e){this.createItems([t],e)}},{key:"createItems",value:function(t,e){this.componentManager.createItems(t,(function(t){e&&e(t.map((function(t){return new o["SFItem"](t)})))}))}},{key:"saveItem",value:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveItems([t]));case 1:case"end":return e.stop()}}),null,this)}},{key:"saveItems",value:function(e){var n=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,i){n.componentManager.saveItems(e,(function(e){r(e),n.notifyObserversOfEvent(t.BridgeEventSavedItem)}))})));case 1:case"end":return r.stop()}}))}},{key:"indexOfItem",value:function(t){for(var e in this.items)if(this.items[e].uuid==t.uuid)return e;return-1}},{key:"deleteItem",value:function(t,e){this.deleteItems([t],e)}},{key:"deleteItems",value:function(t,e){this.componentManager.deleteItems(t,e)}},{key:"removeItemFromItems",value:function(t){this.items=this.items.filter((function(e){return e.uuid!==t.uuid}))}}]),t}();u(l,"FileItemContentTypeKey","SN|FileSafe|File"),u(l,"FileSafeCredentialsContentType","SN|FileSafe|Credentials"),u(l,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata"),u(l,"FileSafeIntegrationContentTypeKey","SN|FileSafe|Integration"),u(l,"BridgeEventLoadedCredentials","BridgeEventLoadedCredentials"),u(l,"BridgeEventReceivedItems","BridgeEventReceivedItems"),u(l,"BridgeEventSavedItem","BridgeEventSavedItem")},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",(function(){return p}));var r=n(2),i=n(7),o=n(8),s=n(9),a=n(10),c=n(12),u=n(0);n.n(u);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var p=function(){function t(e){var n=this,c=e.componentManager;l(this,t),this.dataChangeObservers=[],this.newFileDescriptorHandlers=[],this.extensionBridge=new r["a"](c),this.extensionBridge.addEventHandler((function(t){n.notifyObservers()})),this.relayManager=new i["a"],this.integrationManager=new o["a"](this.extensionBridge),this.credentialManager=new s["a"]({extensionBridge:this.extensionBridge,onCredentialLoad:function(){n.relayManager.setCredentials(n.credentialManager.getDefaultCredentials())}}),this.fileManager=new a["a"](this.extensionBridge,this.relayManager,this.integrationManager,this.credentialManager),this.extensionBridge.beginStreamingFiles()}return f(t,null,[{key:"getSFItemClass",value:function(){return u["SFItem"]}}]),f(t,[{key:"addNewFileDescriptorHandler",value:function(t){this.newFileDescriptorHandlers.push(t)}},{key:"notifyObservers",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.dataChangeObservers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o()}}catch(s){e=!0,n=s}finally{try{t||null==i["return"]||i["return"]()}finally{if(e)throw n}}}},{key:"addDataChangeObserver",value:function(t){return this.dataChangeObservers.push(t),t}},{key:"removeDataChangeObserver",value:function(t){this.dataChangeObservers=this.dataChangeObservers.filter((function(e){return e!=t}))}},{key:"setCurrentNote",value:function(t){this.currentNote=t,this.notifyObservers()}},{key:"getAllFileDescriptors",value:function(){return this.fileManager.getAllFileDescriptors()}},{key:"findFileDescriptor",value:function(t){return this.fileManager.findFileDescriptor(t)}},{key:"fileDescriptorsForCurrentNote",value:function(){return this.fileManager.fileDescriptorsForNote(this.currentNote)}},{key:"fileDescriptorsForNote",value:function(t){return this.fileManager.fileDescriptorsForNote(t)}},{key:"fileDescriptorsEncryptedWithCredential",value:function(t){return this.fileManager.fileDescriptorsEncryptedWithCredential(t)}},{key:"deleteFileFromDescriptor",value:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fileManager.deleteFileFromDescriptor(t));case 1:case"end":return e.stop()}}),null,this)}},{key:"uploadFile",value:function(t){var e,n,r,i,o,s,a,c,u,l,h,f;return regeneratorRuntime.async((function(p){while(1)switch(p.prev=p.next){case 0:return e=t.fileItem,n=t.inputFileName,r=t.fileType,i=t.credential,o=t.note,o||(o=this.currentNote),p.next=4,regeneratorRuntime.awrap(this.fileManager.uploadFile({fileItem:e,inputFileName:n,fileType:r,credential:i,note:o}));case 4:if(s=p.sent,!s){p.next=25;break}for(a=!0,c=!1,u=void 0,p.prev=9,l=this.newFileDescriptorHandlers[Symbol.iterator]();!(a=(h=l.next()).done);a=!0)f=h.value,f(s);p.next=17;break;case 13:p.prev=13,p.t0=p["catch"](9),c=!0,u=p.t0;case 17:p.prev=17,p.prev=18,a||null==l["return"]||l["return"]();case 20:if(p.prev=20,!c){p.next=23;break}throw u;case 23:return p.finish(20);case 24:return p.finish(17);case 25:return p.abrupt("return",s);case 26:case"end":return p.stop()}}),null,this,[[9,13,17,25],[18,,20,24]])}},{key:"encryptAndUploadJavaScriptFileObject",value:function(t){var e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){var i=new FileReader;i.onload=function(r){var i,o,s,a;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:return i=r.target.result,o=i,c.next=4,regeneratorRuntime.awrap(SFJS.crypto.arrayBufferToBase64(o));case 4:return s=c.sent,c.next=7,regeneratorRuntime.awrap(e.encryptAndUploadData({base64Data:s,inputFileName:t.name,fileType:t.type}));case 7:a=c.sent,n(a);case 9:case"end":return c.stop()}}))},i.readAsArrayBuffer(t)})));case 1:case"end":return n.stop()}}))}},{key:"encryptAndUploadData",value:function(t){var e,n,r,i,o=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e=t.base64Data,n=t.inputFileName,r=t.fileType,i=this.getDefaultCredentials(),s.abrupt("return",this.encryptFile({data:e,inputFileName:n,fileType:r,credential:i}).then((function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o.uploadFile({fileItem:t,inputFileName:n,fileType:r,credential:i})["catch"]((function(t){console.error("filesafe-js | error uploading file:",t)})));case 1:case"end":return e.stop()}}))})));case 3:case"end":return s.stop()}}),null,this)}},{key:"downloadFileFromDescriptor",value:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fileManager.downloadFileFromDescriptor(t));case 1:case"end":return e.stop()}}),null,this)}},{key:"encryptFile",value:function(t){var e,n,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return e=t.data,n=t.inputFileName,r=t.fileType,i=t.credential,o.abrupt("return",this.fileManager.encryptFile({data:e,inputFileName:n,fileType:r,credential:i}));case 2:case"end":return o.stop()}}),null,this)}},{key:"decryptFile",value:function(t){var e,n,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.fileDescriptor,n=t.fileItem,r=t.credential,i.abrupt("return",this.fileManager.decryptFile({fileDescriptor:e,fileItem:n,credential:r}));case 2:case"end":return i.stop()}}),null,this)}},{key:"downloadBase64Data",value:function(t){var e=t.base64Data,n=t.fileName,r=t.fileType;c["a"].downloadData(c["a"].base64toBinary(e),n,r)}},{key:"createTemporaryFileUrl",value:function(t){var e=t.base64Data,n=t.dataType;return c["a"].tempUrlForData(c["a"].base64toBinary(e),n)}},{key:"revokeTempUrl",value:function(t){c["a"].revokeTempUrl(t)}},{key:"createNewCredentials",value:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.credentialManager.createNewCredentials());case 1:case"end":return t.stop()}}),null,this)}},{key:"numberOfFilesEncryptedWithCredential",value:function(t){return this.fileManager.fileDescriptorsEncryptedWithCredential(t).length}},{key:"credentialForFileDescriptor",value:function(t){return this.credentialManager.credentialForFileDescriptor(t)}},{key:"getAllCredentials",value:function(){return this.credentialManager.getAllCredentials()}},{key:"getDefaultCredentials",value:function(){return this.credentialManager.getDefaultCredentials()}},{key:"setCredentialAsDefault",value:function(t){return this.credentialManager.setCredentialAsDefault(t)}},{key:"deleteCredential",value:function(t){return this.credentialManager.deleteCredential(t)}},{key:"saveCredential",value:function(t){return this.credentialManager.saveCredential(t)}},{key:"getAllIntegrations",value:function(){return this.integrationManager.integrations}},{key:"integrationForFileDescriptor",value:function(t){return this.integrationManager.integrationForFileDescriptor(t)}},{key:"saveIntegrationFromCode",value:function(t){return this.integrationManager.saveIntegrationFromCode(t)}},{key:"getDefaultIntegration",value:function(){return this.integrationManager.getDefaultIntegration()}},{key:"setIntegrationAsDefault",value:function(t){return this.integrationManager.setIntegrationAsDefault(t)}},{key:"deleteIntegration",value:function(t){return this.integrationManager.deleteIntegration(t)}},{key:"displayStringForIntegration",value:function(t){return this.integrationManager.displayStringForIntegration(t)}},{key:"base64toBinary",value:function(t){return c["a"].base64toBinary(t)}},{key:"isMobile",value:function(){return this.extensionBridge.isMobile()}},{key:"getEnvironment",value:function(){return this.extensionBridge.getEnvironment()}},{key:"getPlatform",value:function(){return this.extensionBridge.getPlatform()}},{key:"copyTextToClipboard",value:function(t){return c["a"].copyTextToClipboard(t)}}]),t}()},function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash include="includes,merge,filter,map,remove,find,omit,pull,cloneDeep,pick,uniq,sortedIndexBy,mergeWith"`
 */(function(){function o(t,e){return t.set(e[0],e[1]),t}function s(t,e){return t.add(e),t}function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}function u(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function l(t,e){return!(null==t||!t.length)&&-1<g(t,e,0)}function h(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function f(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function p(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)n=e(n,t[r],r,t);return n}function d(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function m(t,e,n){var r=t.length;for(n+=-1;++n<r;)if(e(t[n],n,t))return n;return-1}function g(t,e,n){if(e===e)t:{--n;for(var r=t.length;++n<r;)if(t[n]===e){t=n;break t}t=-1}else t=m(t,v,n);return t}function v(t){return t!==t}function y(t){return function(e){return null==e?pe:e[t]}}function b(t){return function(e){return t(e)}}function w(t,e){return h(e,(function(e){return t[e]}))}function k(t,e){return t.has(e)}function S(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function x(t){var e=Object;return function(n){return t(e(n))}}function _(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function C(){}function O(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function E(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function A(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function M(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new A;++e<n;)this.add(t[e])}function T(t){this.size=(this.__data__=new E(t)).size}function R(t,e){var n=$n(t),r=!n&&zn(t),i=!n&&!r&&Un(t),o=!n&&!r&&!i&&Hn(t);if(n=n||r||i||o){r=t.length;for(var s=String,a=-1,c=Array(r);++a<r;)c[a]=s(a);r=c}else r=[];var u;s=r.length;for(u in t)!e&&!Ve.call(t,u)||n&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||At(u,s))||r.push(u);return r}function I(t,e,n){(n===pe||zt(t[e],n))&&(n!==pe||e in t)||L(t,e,n)}function D(t,e,n){var r=t[e];Ve.call(t,e)&&zt(r,n)&&(n!==pe||e in t)||L(t,e,n)}function N(t,e){for(var n=t.length;n--;)if(zt(t[n][0],e))return n;return-1}function j(t,e){return t&&lt(e,re(e),t)}function P(t,e){return t&&lt(e,ie(e),t)}function L(t,e,n){"__proto__"==e&&sn?sn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function F(t,e,n,r,i,o){var s,a=1&e,u=2&e,l=4&e;if(n&&(s=i?n(t,r,i,o):n(t)),s!==pe)return s;if(!Wt(t))return t;if(r=$n(t)){if(s=_t(t),!a)return ut(t,s)}else{var h=jn(t),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(Un(t))return st(t,a);if("[object Object]"==h||"[object Arguments]"==h||f&&!i){if(s=u||f?{}:Ct(t),!a)return u?ft(t,P(s,t)):ht(t,j(s,t))}else{if(!Me[h])return i?t:{};s=Ot(t,h,F,a)}}if(o||(o=new T),i=o.get(t))return i;o.set(t,s);u=l?u?bt:yt:u?ie:re;var p=r?pe:u(t);return c(p||t,(function(r,i){p&&(i=r,r=t[i]),D(s,i,F(r,e,n,i,t,o))})),s}function B(t,e){var n=[];return Mn(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function z(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=Et),i||(i=[]);++o<s;){var a=t[o];0<e&&n(a)?1<e?z(a,e-1,n,r,i):f(i,a):r||(i[i.length]=a)}return i}function $(t,e){e=ot(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Dt(e[n++])];return n&&n==r?t:pe}function U(t,e,n){return e=e(t),$n(t)?e:f(e,n(t))}function H(t){if(null==t)t=t===pe?"[object Undefined]":"[object Null]";else if(on&&on in Object(t)){var e=Ve.call(t,on),n=t[on];try{t[on]=pe;var r=!0}catch(t){}var i=qe.call(t);r&&(e?t[on]=n:delete t[on]),t=i}else t=qe.call(t);return t}function V(t){return qt(t)&&"[object Arguments]"==H(t)}function W(t,e,n,r,i){if(t===e)e=!0;else if(null==t||null==e||!qt(t)&&!qt(e))e=t!==t&&e!==e;else t:{var o=$n(t),s=$n(e),a=o?"[object Array]":jn(t),c=s?"[object Array]":jn(e),u=(a="[object Arguments]"==a?"[object Object]":a,c="[object Arguments]"==c?"[object Object]":c,"[object Object]"==a);s="[object Object]"==c;if((c=a==c)&&Un(t)){if(!Un(e)){e=!1;break t}o=!0,u=!1}if(c&&!u)i||(i=new T),e=o||Hn(t)?mt(t,e,n,r,W,i):gt(t,e,a,n,r,W,i);else{if(!(1&n)&&(o=u&&Ve.call(t,"__wrapped__"),a=s&&Ve.call(e,"__wrapped__"),o||a)){t=o?t.value():t,e=a?e.value():e,i||(i=new T),e=W(t,e,n,r,i);break t}if(c)e:if(i||(i=new T),o=1&n,a=yt(t),s=a.length,c=yt(e).length,s==c||o){for(u=s;u--;){var l=a[u];if(!(o?l in e:Ve.call(e,l))){e=!1;break e}}if((c=i.get(t))&&i.get(e))e=c==e;else{c=!0,i.set(t,e),i.set(e,t);for(var h=o;++u<s;){l=a[u];var f=t[l],p=e[l];if(r)var d=o?r(p,f,l,e,t,i):r(f,p,l,t,e,i);if(d===pe?f!==p&&!W(f,p,n,r,i):!d){c=!1;break}h||(h="constructor"==l)}c&&!h&&(n=t.constructor,r=e.constructor,n!=r&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(c=!1)),i.delete(t),i.delete(e),e=c}}else e=!1;else e=!1}}return e}function q(t,e){var n=e.length,r=n;if(null==t)return!r;for(t=Object(t);n--;){var i=e[n];if(i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++n<r;){i=e[n];var o=i[0],s=t[o],a=i[1];if(i[2]){if(s===pe&&!(o in t))return!1}else if(i=new T,void 0!==pe||!W(a,s,3,void 0,i))return!1}return!0}function J(t){return qt(t)&&Vt(t.length)&&!!Ae[H(t)]}function K(t){return"function"==typeof t?t:null==t?ae:"object"==typeof t?$n(t)?X(t[0],t[1]):G(t):le(t)}function Y(t,e){var n=-1,r=$t(t)?Array(t.length):[];return Mn(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function G(t){var e=St(t);return 1==e.length&&e[0][2]?Rt(e[0][0],e[0][1]):function(n){return n===t||q(n,e)}}function X(t,e){return Mt(t)&&e===e&&!Wt(e)?Rt(Dt(t),e):function(n){var r=ee(n,t);return r===pe&&r===e?ne(n,t):W(e,r,3)}}function Q(t,e,n,r,i){t!==e&&Tn(e,(function(o,s){if(Wt(o)){i||(i=new T);var a=i,c=t[s],u=e[s],l=a.get(u);if(l)I(t,s,l);else{l=r?r(c,u,s+"",t,e,a):pe;var h=l===pe;if(h){var f=$n(u),p=!f&&Un(u),d=!f&&!p&&Hn(u);l=u;f||p||d?$n(c)?l=c:Ut(c)?l=ut(c):p?(h=!1,l=st(u,!0)):d?(h=!1,l=ct(u,!0)):l=[]:Jt(u)||zn(u)?(l=c,zn(c)?l=Zt(c):(!Wt(c)||n&&Ht(c))&&(l=Ct(u))):h=!1}h&&(a.set(u,l),Q(l,u,n,r,a),a.delete(u)),I(t,s,l)}}else a=r?r(t[s],o,s+"",t,e,i):pe,a===pe&&(a=o),I(t,s,a)}),ie)}function Z(t,e){return tt(t,e,(function(e,n){return ne(t,n)}))}function tt(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=$(t,s);if(n(a,s)){var c=o;s=ot(s,t);if(Wt(c)){s=ot(s,c);for(var u=-1,l=s.length,h=l-1;null!=c&&++u<l;){var f=Dt(s[u]),p=a;if(u!=h){var d=c[f];p=pe;p===pe&&(p=Wt(d)?d:At(s[u+1])?[]:{})}D(c,f,p),c=c[f]}}}}return o}function et(t){return function(e){return $(e,t)}}function nt(t){return Pn(It(t,void 0,ae),t+"")}function rt(t){if("string"==typeof t)return t;if($n(t))return h(t,rt)+"";if(Yt(t))return En?En.call(t):"";var e=t+"";return"0"==e&&1/t==-de?"-0":e}function it(t,e){var n;if(e=ot(e,t),2>e.length)n=t;else{n=e;var r=0,i=-1,o=-1,s=n.length;for(0>r&&(r=-r>s?0:s+r),i=i>s?s:i,0>i&&(i+=s),s=r>i?0:i-r>>>0,r>>>=0,i=Array(s);++o<s;)i[o]=n[o+r];n=$(t,i)}t=n,null==t||delete t[Dt(Lt(e))]}function ot(t,e){return $n(t)?t:Mt(t,e)?[t]:Ln(te(t))}function st(t,e){if(e)return t.slice();var n=t.length;n=Qe?Qe(n):new t.constructor(n);return t.copy(n),n}function at(t){var e=new t.constructor(t.byteLength);return new Xe(e).set(new Xe(t)),e}function ct(t,e){return new t.constructor(e?at(t.buffer):t.buffer,t.byteOffset,t.length)}function ut(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function lt(t,e,n){var r=!n;n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],a=pe;a===pe&&(a=t[s]),r?L(n,s,a):D(n,s,a)}return n}function ht(t,e){return lt(t,Dn(t),e)}function ft(t,e){return lt(t,Nn(t),e)}function pt(t){return nt((function(e,n){var r,i=-1,o=n.length,s=1<o?n[o-1]:pe,a=2<o?n[2]:pe;s=3<t.length&&"function"==typeof s?(o--,s):pe;if(r=a){r=n[0];var c=n[1];if(Wt(a)){var u=typeof c;r=!!("number"==u?$t(a)&&At(c,a.length):"string"==u&&c in a)&&zt(a[c],r)}else r=!1}for(r&&(s=3>o?pe:s,o=1),e=Object(e);++i<o;)(a=n[i])&&t(e,a,i,s);return e}))}function dt(t){return Jt(t)?pe:t}function mt(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;if((c=o.get(t))&&o.get(e))return c==e;c=-1;var u=!0,l=2&n?new M:pe;for(o.set(t,e),o.set(e,t);++c<a;){var h=t[c],f=e[c];if(r)var p=s?r(f,h,c,e,t,o):r(h,f,c,t,e,o);if(p!==pe){if(p)continue;u=!1;break}if(l){if(!d(e,(function(t,e){if(!k(l,e)&&(h===t||i(h,t,n,r,o)))return l.push(e)}))){u=!1;break}}else if(h!==f&&!i(h,f,n,r,o)){u=!1;break}}return o.delete(t),o.delete(e),u}function gt(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!o(new Xe(t),new Xe(e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return zt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=S;case"[object Set]":if(a||(a=_),t.size!=e.size&&!(1&r))break;return(n=s.get(t))?n==e:(r|=2,s.set(t,e),e=mt(a(t),a(e),r,i,o,s),s.delete(t),e);case"[object Symbol]":if(On)return On.call(t)==On.call(e)}return!1}function vt(t){return Pn(It(t,pe,Pt),t+"")}function yt(t){return U(t,re,Dn)}function bt(t){return U(t,ie,Nn)}function wt(){var t=C.iteratee||ce;t=t===ce?K:t;return arguments.length?t(arguments[0],arguments[1]):t}function kt(t,e){var n=t.__data__,r=typeof e;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?n["string"==typeof e?"string":"hash"]:n.map}function St(t){for(var e=re(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,i===i&&!Wt(i)]}return e}function xt(t,e){var n=null==t?pe:t[e];return!Wt(n)||We&&We in n||!(Ht(n)?Ke:Ce).test(Nt(n))?pe:n}function _t(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Ve.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ct(t){return"function"!=typeof t.constructor||Tt(t)?{}:An(Ze(t))}function Ot(t,e,n,r){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return at(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return e=r?at(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ct(t,r);case"[object Map]":return e=r?n(S(t),1):S(t),p(e,o,new t.constructor);case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return e=new t.constructor(t.source,Se.exec(t)),e.lastIndex=t.lastIndex,e;case"[object Set]":return e=r?n(_(t),1):_(t),p(e,s,new t.constructor);case"[object Symbol]":return On?Object(On.call(t)):{}}}function Et(t){return $n(t)||zn(t)||!!(rn&&t&&t[rn])}function At(t,e){return e=null==e?9007199254740991:e,!!e&&("number"==typeof t||Ee.test(t))&&-1<t&&0==t%1&&t<e}function Mt(t,e){if($n(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Yt(t))||ve.test(t)||!ge.test(t)||null!=e&&t in Object(e)}function Tt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$e)}function Rt(t,e){return function(n){return null!=n&&n[t]===e&&(e!==pe||t in Object(n))}}function It(t,e,n){return e=hn(e===pe?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=hn(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];for(i=-1,o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),a(t,this,o)}}function Dt(t){if("string"==typeof t||Yt(t))return t;var e=t+"";return"0"==e&&1/t==-de?"-0":e}function Nt(t){if(null!=t){try{return He.call(t)}catch(t){}return t+""}return""}function jt(t,e,n){var r=null==t?0:t.length;return r?(n=null==n?0:Xt(n),0>n&&(n=hn(r+n,0)),m(t,wt(e,3),n)):-1}function Pt(t){return null!=t&&t.length?z(t,1):[]}function Lt(t){var e=null==t?0:t.length;return e?t[e-1]:pe}function Ft(t,e){var n;if(t&&t.length&&e&&e.length){n=e;var r=g,i=-1,o=n.length;for(t===n&&(n=ut(n));++i<o;)for(var s=0,a=n[i];-1<(s=r(t,a,s,void 0));)t!==t&&nn.call(t,s,1),nn.call(t,s,1);n=t}else n=t;return n}function Bt(t,e){function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=t.apply(this,r),n.cache=o.set(i,r)||o,r)}if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");return n.cache=new(Bt.Cache||A),n}function zt(t,e){return t===e||t!==t&&e!==e}function $t(t){return null!=t&&Vt(t.length)&&!Ht(t)}function Ut(t){return qt(t)&&$t(t)}function Ht(t){return!!Wt(t)&&(t=H(t),"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)}function Vt(t){return"number"==typeof t&&-1<t&&0==t%1&&9007199254740991>=t}function Wt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qt(t){return null!=t&&"object"==typeof t}function Jt(t){return!(!qt(t)||"[object Object]"!=H(t))&&(t=Ze(t),null===t||(t=Ve.call(t,"constructor")&&t.constructor,"function"==typeof t&&t instanceof t&&He.call(t)==Je))}function Kt(t){return"string"==typeof t||!$n(t)&&qt(t)&&"[object String]"==H(t)}function Yt(t){return"symbol"==typeof t||qt(t)&&"[object Symbol]"==H(t)}function Gt(t){return t?(t=Qt(t),t===de||t===-de?17976931348623157e292*(0>t?-1:1):t===t?t:0):0===t?t:0}function Xt(t){t=Gt(t);var e=t%1;return t===t?e?t-e:t:0}function Qt(t){if("number"==typeof t)return t;if(Yt(t))return me;if(Wt(t)&&(t="function"==typeof t.valueOf?t.valueOf():t,t=Wt(t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t.replace(we,"");var e=_e.test(t);return e||Oe.test(t)?Re(t.slice(2),e?2:8):xe.test(t)?me:+t}function Zt(t){return lt(t,ie(t))}function te(t){return null==t?"":rt(t)}function ee(t,e,n){return t=null==t?pe:$(t,e),t===pe?n:t}function ne(t,e){var n;if(n=null!=t){var r;n=t,r=ot(e,n);for(var i=-1,o=r.length,s=!1;++i<o;){var a=Dt(r[i]);if(!(s=null!=n&&null!=n&&a in Object(n)))break;n=n[a]}s||++i!=o?n=s:(o=null==n?0:n.length,n=!!o&&Vt(o)&&At(a,o)&&($n(n)||zn(n)))}return n}function re(t){if($t(t))t=R(t);else if(Tt(t)){var e,n=[];for(e in Object(t))Ve.call(t,e)&&"constructor"!=e&&n.push(e);t=n}else t=ln(t);return t}function ie(t){if($t(t))t=R(t,!0);else if(Wt(t)){var e,n=Tt(t),r=[];for(e in t)("constructor"!=e||!n&&Ve.call(t,e))&&r.push(e);t=r}else{if(e=[],null!=t)for(n in Object(t))e.push(n);t=e}return t}function oe(t){return null==t?[]:w(t,re(t))}function se(t){return function(){return t}}function ae(t){return t}function ce(t){return K("function"==typeof t?t:F(t,1))}function ue(){}function le(t){return Mt(t)?y(Dt(t)):et(t)}function he(){return[]}function fe(){return!1}var pe,de=1/0,me=NaN,ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/,ye=/^\./,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/^\s+|\s+$/g,ke=/\\(\\)?/g,Se=/\w*$/,xe=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,Ce=/^\[object .+?Constructor\]$/,Oe=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,Ae={};Ae["[object Float32Array]"]=Ae["[object Float64Array]"]=Ae["[object Int8Array]"]=Ae["[object Int16Array]"]=Ae["[object Int32Array]"]=Ae["[object Uint8Array]"]=Ae["[object Uint8ClampedArray]"]=Ae["[object Uint16Array]"]=Ae["[object Uint32Array]"]=!0,Ae["[object Arguments]"]=Ae["[object Array]"]=Ae["[object ArrayBuffer]"]=Ae["[object Boolean]"]=Ae["[object DataView]"]=Ae["[object Date]"]=Ae["[object Error]"]=Ae["[object Function]"]=Ae["[object Map]"]=Ae["[object Number]"]=Ae["[object Object]"]=Ae["[object RegExp]"]=Ae["[object Set]"]=Ae["[object String]"]=Ae["[object WeakMap]"]=!1;var Me={};Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object DataView]"]=Me["[object Boolean]"]=Me["[object Date]"]=Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object Symbol]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Error]"]=Me["[object Function]"]=Me["[object WeakMap]"]=!1;var Te,Re=parseInt,Ie="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Ne=Ie||De||Function("return this")(),je="object"==typeof e&&e&&!e.nodeType&&e,Pe=je&&"object"==typeof r&&r&&!r.nodeType&&r,Le=Pe&&Pe.exports===je,Fe=Le&&Ie.process;t:{try{Te=Fe&&Fe.binding&&Fe.binding("util");break t}catch(o){}Te=void 0}var Be=Te&&Te.isTypedArray,ze=Array.prototype,$e=Object.prototype,Ue=Ne["__core-js_shared__"],He=Function.prototype.toString,Ve=$e.hasOwnProperty,We=function(){var t=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),qe=$e.toString,Je=He.call(Object),Ke=RegExp("^"+He.call(Ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=Le?Ne.Buffer:pe,Ge=Ne.Symbol,Xe=Ne.Uint8Array,Qe=Ye?Ye.a:pe,Ze=x(Object.getPrototypeOf),tn=Object.create,en=$e.propertyIsEnumerable,nn=ze.splice,rn=Ge?Ge.isConcatSpreadable:pe,on=Ge?Ge.toStringTag:pe,sn=function(){try{var t=xt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),an=Math.floor,cn=Object.getOwnPropertySymbols,un=Ye?Ye.isBuffer:pe,ln=x(Object.keys),hn=Math.max,fn=Math.min,pn=Date.now,dn=xt(Ne,"DataView"),mn=xt(Ne,"Map"),gn=xt(Ne,"Promise"),vn=xt(Ne,"Set"),yn=xt(Ne,"WeakMap"),bn=xt(Object,"create"),wn=Nt(dn),kn=Nt(mn),Sn=Nt(gn),xn=Nt(vn),_n=Nt(yn),Cn=Ge?Ge.prototype:pe,On=Cn?Cn.valueOf:pe,En=Cn?Cn.toString:pe,An=function(){function t(){}return function(e){return Wt(e)?tn?tn(e):(t.prototype=e,e=new t,t.prototype=pe,e):{}}}();O.prototype.clear=function(){this.__data__=bn?bn(null):{},this.size=0},O.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},O.prototype.get=function(t){var e=this.__data__;return bn?(t=e[t],"__lodash_hash_undefined__"===t?pe:t):Ve.call(e,t)?e[t]:pe},O.prototype.has=function(t){var e=this.__data__;return bn?e[t]!==pe:Ve.call(e,t)},O.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=bn&&e===pe?"__lodash_hash_undefined__":e,this},E.prototype.clear=function(){this.__data__=[],this.size=0},E.prototype.delete=function(t){var e=this.__data__;return t=N(e,t),!(0>t)&&(t==e.length-1?e.pop():nn.call(e,t,1),--this.size,!0)},E.prototype.get=function(t){var e=this.__data__;return t=N(e,t),0>t?pe:e[t][1]},E.prototype.has=function(t){return-1<N(this.__data__,t)},E.prototype.set=function(t,e){var n=this.__data__,r=N(n,t);return 0>r?(++this.size,n.push([t,e])):n[r][1]=e,this},A.prototype.clear=function(){this.size=0,this.__data__={hash:new O,map:new(mn||E),string:new O}},A.prototype.delete=function(t){return t=kt(this,t).delete(t),this.size-=t?1:0,t},A.prototype.get=function(t){return kt(this,t).get(t)},A.prototype.has=function(t){return kt(this,t).has(t)},A.prototype.set=function(t,e){var n=kt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},M.prototype.add=M.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},M.prototype.has=function(t){return this.__data__.has(t)},T.prototype.clear=function(){this.__data__=new E,this.size=0},T.prototype.delete=function(t){var e=this.__data__;return t=e.delete(t),this.size=e.size,t},T.prototype.get=function(t){return this.__data__.get(t)},T.prototype.has=function(t){return this.__data__.has(t)},T.prototype.set=function(t,e){var n=this.__data__;if(n instanceof E){var r=n.__data__;if(!mn||199>r.length)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new A(r)}return n.set(t,e),this.size=n.size,this};var Mn=function(t,e){return function(n,r){if(null==n)return n;if(!$t(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}((function(t,e){return t&&Tn(t,e,re)})),Tn=function(t){return function(e,n,r){var i=-1,o=Object(e);r=r(e);for(var s=r.length;s--;){var a=r[t?s:++i];if(!1===n(o[a],a,o))break}return e}}(),Rn=sn?function(t,e){return sn(t,"toString",{configurable:!0,enumerable:!1,value:se(e),writable:!0})}:ae,In=vn&&1/_(new vn([,-0]))[1]==de?function(t){return new vn(t)}:ue,Dn=cn?function(t){return null==t?[]:(t=Object(t),u(cn(t),(function(e){return en.call(t,e)})))}:he,Nn=cn?function(t){for(var e=[];t;)f(e,Dn(t)),t=Ze(t);return e}:he,jn=H;(dn&&"[object DataView]"!=jn(new dn(new ArrayBuffer(1)))||mn&&"[object Map]"!=jn(new mn)||gn&&"[object Promise]"!=jn(gn.resolve())||vn&&"[object Set]"!=jn(new vn)||yn&&"[object WeakMap]"!=jn(new yn))&&(jn=function(t){var e=H(t);if(t=(t="[object Object]"==e?t.constructor:pe)?Nt(t):"")switch(t){case wn:return"[object DataView]";case kn:return"[object Map]";case Sn:return"[object Promise]";case xn:return"[object Set]";case _n:return"[object WeakMap]"}return e});var Pn=function(t){var e=0,n=0;return function(){var r=pn(),i=16-(r-n);if(n=r,0<i){if(800<=++e)return arguments[0]}else e=0;return t.apply(pe,arguments)}}(Rn),Ln=function(t){t=Bt(t,(function(t){return 500===e.size&&e.clear(),t}));var e=t.cache;return t}((function(t){var e=[];return ye.test(t)&&e.push(""),t.replace(be,(function(t,n,r,i){e.push(r?i.replace(ke,"$1"):n||t)})),e})),Fn=nt(Ft),Bn=function(t){return function(e,n,r){var i=Object(e);if(!$t(e)){var o=wt(n,3);e=re(e),n=function(t){return o(i[t],t,i)}}return n=t(e,n,r),-1<n?i[o?e[n]:n]:pe}}(jt);Bt.Cache=A;var zn=V(function(){return arguments}())?V:function(t){return qt(t)&&Ve.call(t,"callee")&&!en.call(t,"callee")},$n=Array.isArray,Un=un||fe,Hn=Be?b(Be):J,Vn=pt((function(t,e,n){Q(t,e,n)})),Wn=pt((function(t,e,n,r){Q(t,e,n,r)})),qn=vt((function(t,e){var n={};if(null==t)return n;var r=!1;e=h(e,(function(e){return e=ot(e,t),r||(r=1<e.length),e})),lt(t,bt(t),n),r&&(n=F(n,7,dt));for(var i=e.length;i--;)it(n,e[i]);return n})),Jn=vt((function(t,e){return null==t?{}:Z(t,e)}));C.constant=se,C.filter=function(t,e){return($n(t)?u:B)(t,wt(e,3))},C.flatten=Pt,C.iteratee=ce,C.keys=re,C.keysIn=ie,C.map=function(t,e){return($n(t)?h:Y)(t,wt(e,3))},C.memoize=Bt,C.merge=Vn,C.mergeWith=Wn,C.omit=qn,C.pick=Jn,C.property=le,C.pull=Fn,C.pullAll=Ft,C.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=wt(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}for(r=t?i.length:0,o=r-1;r--;)if(s=i[r],r==o||s!==a){var a=s;At(s)?nn.call(t,s,1):it(t,s)}return n},C.toPlainObject=Zt,C.uniq=function(t){if(t&&t.length)t:{var e=-1,n=l,r=t.length,i=!0,o=[],s=o;if(200<=r){if(n=In(t)){t=_(n);break t}i=!1,n=k,s=new M}else s=o;e:for(;++e<r;){var a=t[e],c=a;a=0!==a?a:0;if(i&&c===c){for(var u=s.length;u--;)if(s[u]===c)continue e;o.push(a)}else n(s,c,void 0)||(s!==o&&s.push(c),o.push(a))}t=o}else t=[];return t},C.values=oe,C.cloneDeep=function(t){return F(t,5)},C.eq=zt,C.find=Bn,C.findIndex=jt,C.get=ee,C.hasIn=ne,C.identity=ae,C.includes=function(t,e,n,r){return t=$t(t)?t:oe(t),n=n&&!r?Xt(n):0,r=t.length,0>n&&(n=hn(r+n,0)),Kt(t)?n<=r&&-1<t.indexOf(e,n):!!r&&-1<g(t,e,n)},C.isArguments=zn,C.isArray=$n,C.isArrayLike=$t,C.isArrayLikeObject=Ut,C.isBuffer=Un,C.isFunction=Ht,C.isLength=Vt,C.isObject=Wt,C.isObjectLike=qt,C.isPlainObject=Jt,C.isString=Kt,C.isSymbol=Yt,C.isTypedArray=Hn,C.last=Lt,C.stubArray=he,C.stubFalse=fe,C.noop=ue,C.sortedIndexBy=function(t,e,n){n=wt(n,2),e=n(e);for(var r=0,i=null==t?0:t.length,o=e!==e,s=null===e,a=Yt(e),c=e===pe;r<i;){var u=an((r+i)/2),l=n(t[u]),h=l!==pe,f=null===l,p=l===l,d=Yt(l);(o?p:c?p&&h:s?p&&h&&!f:a?p&&h&&!f&&!d:!f&&!d&&l<e)?r=u+1:i=u}return fn(i,4294967294)},C.toFinite=Gt,C.toInteger=Xt,C.toNumber=Qt,C.toString=te,C.VERSION="4.17.4",Ne._=C,i=function(){return C}.call(e,n,e,r),void 0===i||(r.exports=i)}).call(this)}).call(e,n(3),n(6)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),i=(n.n(r),n(0));n.n(i);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}var c=function(){function t(){o(this,t),this.httpManger=new i["SFHttpManager"],this.httpManger.setJWTRequestHandler((function(){}))}return a(t,[{key:"setCredentials",value:function(t){this.credentials=t}},{key:"uploadFile",value:function(t,e,n){var r,i,o=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return r="".concat(n.content.relayUrl,"/integrations/save-item"),i={file:{name:t,item:e},source:n.content.source,authorization:n.content.authorization},s.abrupt("return",new Promise((function(t,e){o.httpManger.postAbsolute(r,i,(function(e){t(e.metadata)}),(function(t){var n=t.error;n||(n={message:"File upload failed."}),console.log("Upload error response",n),e(n)}))})));case 3:case"end":return s.stop()}}))}},{key:"downloadFile",value:function(t,e){var n,r,i=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return n="".concat(e.content.relayUrl,"/integrations/download-item"),r={metadata:t.content.serverMetadata,authorization:e.content.authorization},o.abrupt("return",new Promise((function(t,e){i.httpManger.postAbsolute(n,r,(function(e){t(e)}),(function(t){var n=t.error;console.log("Download error response",t),e(n)}))})));case 3:case"end":return o.stop()}}))}},{key:"deleteFile",value:function(t,e){var n,r,i=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return n="".concat(e.content.relayUrl,"/integrations/delete-item"),r={metadata:t.content.serverMetadata,authorization:e.content.authorization},o.abrupt("return",new Promise((function(t,e){i.httpManger.postAbsolute(n,r,(function(e){t(e)}),(function(t){var n=t.error;console.log("Download error response",t),e(n)}))})));case 3:case"end":return o.stop()}}))}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(1),i=(n.n(r),n(0)),o=(n.n(i),n(2));function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var u=function(){function t(e){s(this,t),this.extensionBridge=e}return c(t,[{key:"integrationForFileDescriptor",value:function(t){return this.integrations.find((function(e){return t.content.serverMetadata&&e.content.source==t.content.serverMetadata.source}))}},{key:"parseIntegrationCode",value:function(t){var e=atob(t),n=JSON.parse(e);return n.rawCode=t,n}},{key:"saveIntegrationFromCode",value:function(t){var e,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=this.parseIntegrationCode(t),0==this.integrations.length&&(e.isDefaultUploadSource=!0),n=this.createAndSaveIntegrationObject(e),r.abrupt("return",n);case 4:case"end":return r.stop()}}),null,this)}},{key:"createAndSaveIntegrationObject",value:function(t){var e=new i["SFItem"]({content_type:o["a"].FileSafeIntegrationContentTypeKey,content:t});return this.extensionBridge.createItems([e]),e}},{key:"getDefaultIntegration",value:function(){return this.integrations.find((function(t){return t.content.isDefaultUploadSource}))}},{key:"setIntegrationAsDefault",value:function(t){var e=[t],n=this.getDefaultIntegration();n&&(n.content.isDefaultUploadSource=!1,e.push(n)),t.content.isDefaultUploadSource=!0,this.extensionBridge.saveItems(e)}},{key:"displayStringForIntegration",value:function(t){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},n=t.content.source.split("_"),r="",i=0,o=!0,s=!1,a=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;r+=e(l),i<n.length-1&&(r+=" "),i++}}catch(h){s=!0,a=h}finally{try{o||null==u["return"]||u["return"]()}finally{if(s)throw a}}return r}},{key:"deleteIntegration",value:function(t){var e=this,n=t.content.isDefaultUploadSource;this.extensionBridge.deleteItem(t,(function(r){if(r.deleted&&n&&e.integrations.length>0){var i=!0,o=!1,s=void 0;try{for(var a,c=e.integrations[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;if(u!=t){e.setIntegrationAsDefault(u);break}}}catch(l){o=!0,s=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw s}}}}))}},{key:"integrations",get:function(){return this.extensionBridge.filterItems(o["a"].FileSafeIntegrationContentTypeKey)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),i=(n.n(r),n(0)),o=(n.n(i),n(2));function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(e){var n=this,r=e.extensionBridge,i=e.onCredentialLoad;s(this,t),u(this,"getDefaultCredentials",(function(){var t=n.credentials.find((function(t){return t.content.isDefault}));return!t&&n.credentials.length>0&&(t=n.credentials[0]),t})),u(this,"setCredentialAsDefault",(function(t){var e=n.getDefaultCredentials();e&&(e.content.isDefault=!1),t.content.isDefault=!0,n.extensionBridge.saveItems([e,t])})),u(this,"deleteCredential",(function(t){n.extensionBridge.deleteItem(t)})),this.extensionBridge=r,this.onCredentialLoad=i,this.credentials=[],this.extensionBridge.addEventHandler((function(t){t==o["a"].BridgeEventReceivedItems&&n.reloadCredentials()}))}return c(t,[{key:"reloadCredentials",value:function(){this.credentials=[];var t=this.extensionBridge.filterItems(o["a"].FileSafeCredentialsContentType);if(0!=t.length){var e=!0,n=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var a=i.value;this.credentials.find((function(t){return t.uuid==a.uuid}))||this.credentials.push(a)}}catch(c){n=!0,r=c}finally{try{e||null==s["return"]||s["return"]()}finally{if(n)throw r}}this.onCredentialLoad(),this.credentials.length>0&&this.didLoadCredentials()}}},{key:"createNewCredentials",value:function(){var t,e,n,r,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=256,a.next=3,regeneratorRuntime.awrap(SFJS.crypto.generateRandomKey(t));case 3:return e=a.sent,a.next=6,regeneratorRuntime.awrap(SFJS.crypto.generateRandomKey(t));case 6:return n=a.sent,a.next=9,regeneratorRuntime.awrap(SFJS.crypto.generateInitialKeysAndAuthParamsForUser(e,n));case 9:return r=a.sent,r.isDefault=0==this.credentials.length,s=new i["SFItem"]({content_type:o["a"].FileSafeCredentialsContentType,content:r}),this.extensionBridge.saveItem(s),this.didLoadCredentials(),a.abrupt("return",s);case 15:case"end":return a.stop()}}),null,this)}},{key:"didLoadCredentials",value:function(){this.extensionBridge.notifyObserversOfEvent(o["a"].BridgeEventLoadedCredentials)}},{key:"credentialForFileDescriptor",value:function(t){return this.credentials.find((function(e){return t.content.references.find((function(t){return t.uuid==e.uuid}))}))}},{key:"getAllCredentials",value:function(){return this.credentials}},{key:"saveCredential",value:function(t){this.extensionBridge.saveItem(t)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(1),i=(n.n(r),n(0)),o=(n.n(i),n(11)),s=n.n(o),a=n(2);function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(e,n,r,i){c(this,t),this.extensionBridge=e,this.relayManager=n,this.integrationManager=r,this.credentialManager=i}return l(t,[{key:"getAllFileDescriptors",value:function(){return this.extensionBridge.getFileDescriptors()}},{key:"fileDescriptorsForNote",value:function(t){return t?this.extensionBridge.getFileDescriptors().filter((function(e){return e.hasRelationshipWithItem(t)})):[]}},{key:"findFileDescriptor",value:function(t){return this.extensionBridge.getFileDescriptors().find((function(e){return e.uuid==t}))}},{key:"fileDescriptorsEncryptedWithCredential",value:function(t){var e=this.extensionBridge.getFileDescriptors();return e.filter((function(e){return e.content.references.find((function(e){return e.uuid==t.uuid}))}))}},{key:"deleteFileFromDescriptor",value:function(t){var e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){e.extensionBridge.deleteItems([t],(function(r){if(r.deleted){var i=e.integrationManager.integrationForFileDescriptor(t);i&&e.relayManager.deleteFile(t,i).then((function(t){n()}))}else n(r)}))})));case 1:case"end":return n.stop()}}))}},{key:"uploadFile",value:function(t){var e,n,r,o,c,u,l,h=this;return regeneratorRuntime.async((function(f){while(1)switch(f.prev=f.next){case 0:return e=t.fileItem,n=t.inputFileName,r=t.fileType,o=t.credential,c=t.note,u=this.integrationManager.getDefaultIntegration(),n.split(".")[1],l="".concat(e.uuid,".sf.json"),f.abrupt("return",new Promise((function(t,f){var p=new s.a;p.addEventListener("message",(function(e){var s=e.data;if(s.error)return console.log("Error uploading file",s.error),void f(s.error);var u=new i["SFItem"]({content_type:a["a"].FileDescriptorContentTypeKey,content:{serverMetadata:e.data.metadata,fileName:n,fileType:r}});c&&u.addItemAsRelationship(c),u.addItemAsRelationship(o),h.extensionBridge.createItem(u,(function(e){t(e[0])}))}));var d="upload",m={outputFileName:l,fileItem:e,integration:u,operation:d,credentials:h.credentialManager.getDefaultCredentials()};p.postMessage(m)})));case 5:case"end":return f.stop()}}),null,this)}},{key:"downloadFileFromDescriptor",value:function(t){var e,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(e=this.integrationManager.integrationForFileDescriptor(t),e){r.next=6;break}throw n=t.content.serverMetadata,n?alert("Unable to find integration named '".concat(n.source,"'.")):alert("Unable to find integration for this file."),"Unable to find integration";case 6:return r.abrupt("return",this.relayManager.downloadFile(t,e).then((function(t){var e=t.items[0];return e})));case 7:case"end":return r.stop()}}),null,this)}},{key:"encryptFile",value:function(t){var e,n,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return e=t.data,n=t.inputFileName,r=t.fileType,i=t.credential,o.abrupt("return",new Promise((function(t,o){var c=new s.a;c.addEventListener("message",(function(e){t(e.data.fileItem)})),c.postMessage({operation:"encrypt",keys:i.content.keys,authParams:i.content.authParams,contentType:a["a"].FileItemContentTypeKey,fileData:e,fileName:n,fileType:r})})));case 2:case"end":return o.stop()}}))}},{key:"decryptFile",value:function(t){var e,n,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.fileDescriptor,n=t.fileItem,r=t.credential,r||(r=this.credentialManager.credentialForFileDescriptor(e)),i.abrupt("return",new Promise((function(t,e){var i=new s.a;i.addEventListener("message",(function(n){var r=n.data;r.error?e(r.error):t(r)})),i.postMessage({operation:"decrypt",keys:r.content.keys,item:n})})));case 3:case"end":return i.stop()}}),null,this)}}]),t}();h(f,"FileItemContentTypeKey","SN|FileSafe|File"),h(f,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata")},function(t,e,n){t.exports=function(){return new Worker(n.p+"filesafe-js/EncryptionWorker.js")}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",(function(){return s}));var s=function(){function t(){r(this,t)}return o(t,null,[{key:"base64toBinary",value:function(t){for(var e=atob(t),n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r));return new Uint8Array(n)}},{key:"downloadData",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=document.createElement("a");o.setAttribute("download",e);var s=this.tempUrlForData(t,n);o.href=s,o.setAttribute("target","_blank"),i?window.location.href=o.href:(document.body.appendChild(o),o.click(),o.remove()),setTimeout((function(){r.revokeTempUrl(s)}),500)}},{key:"tempUrlForData",value:function(t,e){return window.URL.createObjectURL(new Blob([t],{type:e||"text/json"}))}},{key:"revokeTempUrl",value:function(t){window.URL.revokeObjectURL(t)}},{key:"copyTextToClipboard",value:function(t){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",t);var e;if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{e=document.createElement("textarea"),e.setAttribute("readonly",!0),e.setAttribute("contenteditable",!0),e.style.position="fixed",e.value=t,document.body.appendChild(e),e.focus(),e.select();var n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),e.setSelectionRange(0,e.value.length),document.execCommand("copy")}catch(i){console.error(i),null}finally{document.body.removeChild(e)}}}]),t}()}])},7749:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));class r{constructor(t,e){this.left=t,this.right=e}}const i=(t,e)=>new r(t,e),o=(t,e)=>t.forEach(t=>e(t.left,t.right))},"77d4":function(t,e,n){"use strict";var r=n("9980"),i=n("5313");const o=r["d"].create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Object(r["m"])(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{var n;if(e){const{parent:e,pos:r}=t.selection.$from,o=r+1,s=t.doc.nodeAt(o);if(!s){const r=null===(n=e.type.contentMatch.defaultType)||void 0===n?void 0:n.create();r&&(t.insert(o,r),t.setSelection(i["h"].create(t.doc,o)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[Object(r["n"])(/^(?:---|—-|___\s|\*\*\*\s)$/,this.type)]}});e["a"]=o},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"79bb":function(t,e,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^\s*(\[([ |x])\])\s$/,s=r["d"].create({name:"taskItem",defaultOptions:{nested:!1,HTMLAttributes:{}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,parseHTML:t=>({checked:"true"===t.getAttribute("data-checked")}),renderHTML:t=>({"data-checked":t.checked}),keepOnSplit:!1}}},parseHTML(){return[{tag:'li[data-type="taskItem"]',priority:51}]},renderHTML({HTMLAttributes:t}){return["li",Object(r["m"])(this.options.HTMLAttributes,t,{"data-type":"taskItem"}),0]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem("taskItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("taskItem")};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem("taskItem")}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",t=>{if(!r.isEditable)return void(a.checked=!a.checked);const{checked:e}=t.target;r.isEditable&&"function"===typeof n&&r.chain().focus().command(({tr:t})=>(t.setNodeMarkup(n(),void 0,{checked:e}),!0)).run()}),i.dataset.checked=t.attrs.checked,t.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,c),Object.entries(e).forEach(([t,e])=>{i.setAttribute(t,e)}),{dom:i,contentDOM:c,update:t=>t.type===this.type&&(i.dataset.checked=t.attrs.checked,t.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[Object(i["e"])(o,this.type,t=>({checked:"x"===t[t.length-1]}))]}});e["a"]=s},"7a82":function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("9bf2");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:o.f})},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,i=n("825a"),o=n("37e8"),s=n("7839"),a=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),h=">",f="<",p="prototype",d="script",m=l("IE_PROTO"),g=function(){},v=function(t){return f+d+h+t+f+"/"+d+h},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=u("iframe"),n="java"+d+":";if(e.style)return e.style.display="none",c.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}w=document.domain&&r?y(r):b()||y(r);var t=s.length;while(t--)delete w[p][s[t]];return w()};a[m]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[p]=i(t),n=new g,g[p]=null,n[m]=t):n=w(),void 0===e?n:o(n,e)}},"7ca5":function(t,e,n){"use strict";n("ed65")},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),s=n("d2bb"),a=n("d44e"),c=n("9112"),u=n("6eeb"),l=n("b622"),h=n("c430"),f=n("3f8c"),p=n("ae93"),d=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=l("iterator"),v="keys",y="values",b="entries",w=function(){return this};t.exports=function(t,e,n,l,p,k,S){i(n,e,l);var x,_,C,O=function(t){if(t===p&&R)return R;if(!m&&t in M)return M[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},E=e+" Iterator",A=!1,M=t.prototype,T=M[g]||M["@@iterator"]||p&&M[p],R=!m&&T||O(p),I="Array"==e&&M.entries||T;if(I&&(x=o(I.call(new t)),d!==Object.prototype&&x.next&&(h||o(x)===d||(s?s(x,d):"function"!=typeof x[g]&&c(x,g,w)),a(x,E,!0,!0),h&&(f[E]=w))),p==y&&T&&T.name!==y&&(A=!0,R=function(){return T.call(this)}),h&&!S||M[g]===R||c(M,g,R),f[e]=R,p)if(_={values:O(y),keys:k?R:O(v),entries:O(b)},S)for(C in _)(m||A||!(C in M))&&u(M,C,_[C]);else r({target:e,proto:!0,forced:m||A},_);return _}},"7eb1":function(t,e,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,o=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,s=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,a=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,c=r["c"].create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark("bold"),toggleBold:()=>({commands:t})=>t.toggleMark("bold"),unsetBold:()=>({commands:t})=>t.unsetMark("bold")}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Object(r["k"])(i,this.type),Object(r["k"])(s,this.type)]},addPasteRules(){return[Object(r["l"])(o,this.type),Object(r["l"])(a,this.type)]}});e["a"]=c},"7eea":function(t,e,n){"use strict";var r=n("9980"),i=n("f95e");const o=/^(\d+)\.\s$/,s=r["d"].create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes(){return{start:{default:1,parseHTML:t=>({start:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1})}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",Object(r["m"])(this.options.HTMLAttributes,n),0]:["ol",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t})=>t.toggleList("orderedList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Object(i["e"])(o,this.type,t=>({start:+t[1]}),(t,e)=>e.childCount+e.attrs.start===+t[1])]}});e["a"]=s},"7f06":function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return b}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),u="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=o&&(c||+o[1]<57)||a&&c,h=0;h<10;h++)r[48+h]=r[96+h]=String(h);for(h=1;h<=24;h++)r[h+111]="F"+h;for(h=65;h<=90;h++)r[h]=String.fromCharCode(h+32),i[h]=String.fromCharCode(h);for(var f in r)i.hasOwnProperty(f)||(i[f]=r[f]);function p(t){var e=l&&(t.ctrlKey||t.altKey||t.metaKey)||(s||u)&&t.shiftKey&&t.key&&1==t.key.length,n=!e&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var d=n("5313"),m="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function g(t){var e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var c=o[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);m?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function v(t){var e=Object.create(null);for(var n in t)e[g(n)]=t[n];return e}function y(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function b(t){return new d["d"]({props:{handleKeyDown:w(t)}})}function w(t){var e=v(t);return function(t,n){var i,o=p(n),s=1==o.length&&" "!=o,a=e[y(o,n,!s)];if(a&&a(t.state,t.dispatch,t))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){var c=e[y(i,n,!0)];if(c&&c(t.state,t.dispatch,t))return!0}else if(s&&n.shiftKey){var u=e[y(o,n,!0)];if(u&&u(t.state,t.dispatch,t))return!0}return!1}}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"82d4":function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"tableRow",defaultOptions:{HTMLAttributes:{}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Object(r["m"])(this.options.HTMLAttributes,t),0]}});e["a"]=i},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,n){"use strict";var r=n("a04b"),i=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var s=r(e);s in t?i.f(t,s,o(0,n)):t[s]=n}},"841c":function(t,e,n){"use strict";var r=n("d784"),i=n("825a"),o=n("1d80"),s=n("129f"),a=n("577e"),c=n("14c3");r("search",(function(t,e,n){return[function(e){var n=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](a(n))},function(t){var r=i(this),o=a(t),u=n(e,r,o);if(u.done)return u.value;var l=r.lastIndex;s(l,0)||(r.lastIndex=0);var h=c(r,o);return s(r.lastIndex,l)||(r.lastIndex=l),null===h?-1:h.index}]}))},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"8ac7":function(t,e,n){(function(e){var n;(function(e){t.exports=e()})((function(){var t=Math.floor,r=Math.abs,i=Math.pow;return function(){function t(e,r,i){function o(a,c){if(!r[a]){if(!e[a]){var u="function"==typeof n&&n;if(!c&&u)return n(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};e[a][0].call(h.exports,(function(t){var n=e[a][1][t];return o(n||t)}),h,h.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof n&&n,a=0;a<i.length;a++)o(i[a]);return o}return t}()({1:[function(t,e,n){"use strict";function r(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function i(t,e,n){return 3*(e+n)/4-n}function o(t){var e,n,o=r(t),s=o[0],a=o[1],c=new h(i(t,s,a)),u=0,f=0<a?s-4:s;for(n=0;n<f;n+=4)e=l[t.charCodeAt(n)]<<18|l[t.charCodeAt(n+1)]<<12|l[t.charCodeAt(n+2)]<<6|l[t.charCodeAt(n+3)],c[u++]=255&e>>16,c[u++]=255&e>>8,c[u++]=255&e;return 2===a&&(e=l[t.charCodeAt(n)]<<2|l[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===a&&(e=l[t.charCodeAt(n)]<<10|l[t.charCodeAt(n+1)]<<4|l[t.charCodeAt(n+2)]>>2,c[u++]=255&e>>8,c[u++]=255&e),c}function s(t){return u[63&t>>18]+u[63&t>>12]+u[63&t>>6]+u[63&t]}function a(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(16711680&t[o]<<16)+(65280&t[o+1]<<8)+(255&t[o+2]),i.push(s(r));return i.join("")}function c(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,c=n-r;s<c;s+=o)i.push(a(t,s,s+o>c?c:s+o));return 1===r?(e=t[n-1],i.push(u[e>>2]+u[63&e<<4]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(u[e>>10]+u[63&e>>4]+u[63&e<<2]+"=")),i.join("")}n.byteLength=function(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i},n.toByteArray=o,n.fromByteArray=c;for(var u=[],l=[],h="undefined"==typeof Uint8Array?Array:Uint8Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=f.length;p<d;++p)u[p]=f[p],l[f.charCodeAt(p)]=p;l[45]=62,l[95]=63},{}],2:[function(){},{}],3:[function(t,e,n){(function(){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var e=String.fromCharCode,r=Math.min;function o(t){if(2147483647<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return h(t,e);if(ArrayBuffer.isView(t))return f(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return p(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);var i=d(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(0>t)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t,e,n){return c(t),0>=t||void 0===e?o(t):"string"==typeof n?o(t).fill(e,n):o(t).fill(e)}function l(t){return c(t),o(0>t?0:0|m(t))}function h(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=o(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function f(t){for(var e=0>t.length?0:0|m(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function p(t,e,n){if(0>e||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=s.prototype,r}function d(t){if(s.isBuffer(t)){var e=0|m(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0===t.length?"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0:"number"!=typeof t.length||J(t.length)?o(0):f(t)}function m(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function g(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(i)return r?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var r=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,J(n)&&(n=i?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,c=t.length,u=e.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>t.length||2>e.length)return-1;a=2,c/=2,u/=2,n/=2}if(i){var l=-1;for(s=n;s<c;s++)if(o(t,s)!==o(e,-1===l?0:s-l))-1!==l&&(s-=s-l),l=-1;else if(-1===l&&(l=s),s-l+1===u)return l*a}else for(n+u>c&&(n=c-u),s=n;0<=s;s--){for(var h=!0,f=0;f<u;f++)if(o(t,s+f)!==o(e,f)){h=!1;break}if(h)return s}return-1}function k(t,e,n,r){n=+n||0;var i=t.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s,a=0;a<r;++a){if(s=parseInt(e.substr(2*a,2),16),J(s))return a;t[n+a]=s}return a}function S(t,e,n,r){return W($(e,t.length-n),t,n,r)}function x(t,e,n,r){return W(U(e),t,n,r)}function _(t,e,n,r){return x(t,e,n,r)}function C(t,e,n,r){return W(V(e),t,n,r)}function O(t,e,n,r){return W(H(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,n))}function A(t,e,n){n=r(t.length,n);for(var i=[],o=e;o<n;){var s,a,c,u,l=t[o],h=null,f=239<l?4:223<l?3:191<l?2:1;if(o+f<=n)1===f?128>l&&(h=l):2===f?(s=t[o+1],128==(192&s)&&(u=(31&l)<<6|63&s,127<u&&(h=u))):3===f?(s=t[o+1],a=t[o+2],128==(192&s)&&128==(192&a)&&(u=(15&l)<<12|(63&s)<<6|63&a,2047<u&&(55296>u||57343<u)&&(h=u))):4===f&&(s=t[o+1],a=t[o+2],c=t[o+3],128==(192&s)&&128==(192&a)&&128==(192&c)&&(u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&c,65535<u&&1114112>u&&(h=u)));null===h?(h=65533,f=1):65535<h&&(h-=65536,i.push(55296|1023&h>>>10),h=56320|1023&h),i.push(h),o+=f}return M(i)}function M(t){var n=t.length;if(n<=4096)return e.apply(String,t);for(var r="",i=0;i<n;)r+=e.apply(String,t.slice(i,i+=4096));return r}function T(t,n,i){var o="";i=r(t.length,i);for(var s=n;s<i;++s)o+=e(127&t[s]);return o}function R(t,n,i){var o="";i=r(t.length,i);for(var s=n;s<i;++s)o+=e(t[s]);return o}function I(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function D(t,n,r){for(var i=t.slice(n,r),o="",s=0;s<i.length;s+=2)o+=e(i[s]+256*i[s+1]);return o}function N(t,e,n){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return e=+e,n>>>=0,i||P(t,e,n,4,34028234663852886e22,-34028234663852886e22),Y.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||P(t,e,n,8,17976931348623157e292,-17976931348623157e292),Y.write(t,e,n,r,52,8),n+8}function B(t){if(t=t.split("=")[0],t=t.trim().replace(G,""),2>t.length)return"";for(;0!=t.length%4;)t+="=";return t}function z(t){return 16>t?"0"+t.toString(16):t.toString(16)}function $(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),55295<n&&57344>n){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,128>n){if(0>(e-=1))break;o.push(n)}else if(2048>n){if(0>(e-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(e-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function U(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!(0>(e-=2));++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function V(t){return K.toByteArray(B(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!==t}var K=t("base64-js"),Y=t("ieee754");n.Buffer=s,n.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,n){return u(t,e,n)},s.allocUnsafe=function(t){return l(t)},s.allocUnsafeSlow=function(t){return l(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=r(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},s.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(q(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):v.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,i,o){if(q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),0>e||n>t.length||0>i||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,c=n-e,u=r(a,c),l=this.slice(i,o),h=t.slice(e,n),f=0;f<u;++f)if(l[f]!==h[f]){a=l[f],c=h[f];break}return a<c?-1:c<a?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=this[t],o=1,s=0;++s<e&&(o*=256);)r+=this[t+s]*o;return o*=128,r>=o&&(r-=i(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=e,o=1,s=this[t+--r];0<r&&(o*=256);)s+=this[t+--r]*o;return o*=128,s>=o&&(s-=i(2,8*e)),s},s.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),Y.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),Y.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),Y.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),Y.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var o=i(2,8*n)-1;j(this,t,e,n,o,0)}var s=1,a=0;for(this[e]=255&t;++a<n&&(s*=256);)this[e+a]=255&t/s;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var o=i(2,8*n)-1;j(this,t,e,n,o,0)}var s=n-1,a=1;for(this[e+s]=255&t;0<=--s&&(a*=256);)this[e+s]=255&t/a;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var o=i(2,8*n-1);j(this,t,e,n,o-1,-o)}var s=0,a=1,c=0;for(this[e]=255&t;++s<n&&(a*=256);)0>t&&0===c&&0!==this[e+s-1]&&(c=1),this[e+s]=255&(t/a>>0)-c;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var o=i(2,8*n-1);j(this,t,e,n,o-1,-o)}var s=n-1,a=1,c=0;for(this[e+s]=255&t;0<=--s&&(a*=256);)0>t&&0===c&&0!==this[e+s+1]&&(c=1),this[e+s]=255&(t/a>>0)-c;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,1,127,-128),0>t&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&128>i||"latin1"===r)&&(t=i)}}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),c=a.length;if(0===c)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%c]}return this};var G=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(t,e,n){(function(r){(function(){function i(){let t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof r&&"env"in r&&(t=r.env.DEBUG),t}n.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"===t||(r++,"%c"===t&&(i=r))}),t.splice(i,0,n)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),e.exports=t("./common")(n);const{formatters:o}=e.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,t("_process"))},{"./common":5,_process:12}],5:[function(t,e){e.exports=function(e){function n(t){function e(...t){if(!e.enabled)return;const i=e,o=+new Date,s=o-(r||o);i.diff=s,i.prev=r,i.curr=o,r=o,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,r)=>{if("%%"===e)return"%";a++;const o=n.formatters[r];if("function"==typeof o){const n=t[a];e=o.call(i,n),t.splice(a,1),a--}return e}),n.formatArgs.call(i,t);const c=i.log||n.log;c.apply(i,t)}let r,o=null;return e.namespace=t,e.useColors=n.useColors(),e.color=n.selectColor(t),e.extend=i,e.destroy=n.destroy,Object.defineProperty(e,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?n.enabled(t):o,set:t=>{o=t}}),"function"==typeof n.init&&n.init(e),e}function i(t,e){const r=n(this.namespace+("undefined"==typeof e?":":e)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){const t=[...n.names.map(o),...n.skips.map(o).map(t=>"-"+t)].join(",");return n.enable(""),t},n.enable=function(t){let e;n.save(t),n.names=[],n.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(e=0;e<i;e++)r[e]&&(t=r[e].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(t=>{n[t]=e[t]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return n.colors[r(e)%n.colors.length]},n.enable(n.load()),n}},{ms:11}],6:[function(t,e){"use strict";function n(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}e.exports=function(t,e,r){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof e&&(r=e,e=""),e&&(r.code=e);try{return n(t,r)}catch(e){r.message=t.message,r.stack=t.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(t));const o=n(new i,r);return o}}},{}],7:[function(t,e){"use strict";function n(t){console&&console.warn&&console.warn(t)}function r(){r.init.call(this)}function i(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function s(t,e,r,s){var a,c,u;if(i(r),c=t._events,void 0===c?(c=t._events=Object.create(null),t._eventsCount=0):(void 0!==c.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),c=t._events),u=c[e]),void 0===u)u=c[e]=r,++t._eventsCount;else if("function"==typeof u?u=c[e]=s?[r,u]:[u,r]:s?u.unshift(r):u.push(r),a=o(t),0<a&&u.length>a&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=u.length,n(l)}return t}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function u(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?p(i):h(i,i.length)}function l(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(t,e){for(var n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}function f(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function p(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function d(t,e,n){"function"==typeof t.on&&m(t,"error",e,n)}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}var g,v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};g=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var b=Number.isNaN||function(t){return t!==t};e.exports=r,e.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&d(t,i,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var w=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(t){if("number"!=typeof t||0>t||b(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");w=t}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||b(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)y(a,this,e);else{var c=a.length,u=h(a,c);for(n=0;n<c;++n)y(u[n],this,e)}return!0},r.prototype.addListener=function(t,e){return s(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return s(this,t,e,!0)},r.prototype.once=function(t,e){return i(e),this.on(t,c(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return i(e),this.prependListener(t,c(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,s,a;if(i(e),r=this._events,void 0===r)return this;if(n=r[t],void 0===n)return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,o=s;break}if(0>o)return this;0===o?n.shift():f(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return u(this,t,!0)},r.prototype.rawListeners=function(t){return u(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):l.call(t,e)},r.prototype.listenerCount=l,r.prototype.eventNames=function(){return 0<this._eventsCount?g(this._events):[]}},{}],8:[function(t,e){e.exports=function(){if("undefined"==typeof globalThis)return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}},{}],9:[function(e,n,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(t,e,n,r,o){var s,a,c=8*o-r-1,u=(1<<c)-1,l=u>>1,h=-7,f=n?o-1:0,p=n?-1:1,d=t[e+f];for(f+=p,s=d&(1<<-h)-1,d>>=-h,h+=c;0<h;s=256*s+t[e+f],f+=p,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;0<h;a=256*a+t[e+f],f+=p,h-=8);if(0===s)s=1-l;else{if(s===u)return a?NaN:1/0*(d?-1:1);a+=i(2,r),s-=l}return(d?-1:1)*a*i(2,s-r)},o.write=function(e,n,o,s,a,c){var u,l,h,f=Math.LN2,p=Math.log,d=8*c-a-1,m=(1<<d)-1,g=m>>1,v=23===a?i(2,-24)-i(2,-77):0,y=s?0:c-1,b=s?1:-1,w=0>n||0===n&&0>1/n?1:0;for(n=r(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=m):(u=t(p(n)/f),1>n*(h=i(2,-u))&&(u--,h*=2),n+=1<=u+g?v/h:v*i(2,1-g),2<=n*h&&(u++,h/=2),u+g>=m?(l=0,u=m):1<=u+g?(l=(n*h-1)*i(2,a),u+=g):(l=n*i(2,g-1)*i(2,a),u=0));8<=a;e[o+y]=255&l,y+=b,l/=256,a-=8);for(u=u<<a|l,d+=a;0<d;e[o+y]=255&u,y+=b,u/=256,d-=8);e[o+y-b]|=128*w}},{}],10:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],11:[function(t,e){var n=Math.round;function i(t){if(t+="",!(100<t.length)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?315576e5*n:"weeks"===r||"week"===r||"w"===r?6048e5*n:"days"===r||"day"===r||"d"===r?864e5*n:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?36e5*n:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?6e4*n:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1e3*n:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}function o(t){var e=r(t);return 864e5<=e?n(t/864e5)+"d":36e5<=e?n(t/36e5)+"h":6e4<=e?n(t/6e4)+"m":1e3<=e?n(t/1e3)+"s":t+"ms"}function s(t){var e=r(t);return 864e5<=e?a(t,e,864e5,"day"):36e5<=e?a(t,e,36e5,"hour"):6e4<=e?a(t,e,6e4,"minute"):1e3<=e?a(t,e,1e3,"second"):t+" ms"}function a(t,e,r,i){return n(t/r)+" "+i+(e>=1.5*r?"s":"")}e.exports=function(t,e){e=e||{};var n=typeof t;if("string"==n&&0<t.length)return i(t);if("number"===n&&isFinite(t))return e.long?s(t):o(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],12:[function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(n){try{return l.call(null,t,0)}catch(n){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(n){try{return h.call(null,t)}catch(n){return h.call(this,t)}}}function s(){m&&p&&(m=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,m=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var l,h,f=e.exports={};(function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}})();var p,d=[],m=!1,g=-1;f.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],13:[function(t,n){(function(t){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let e;n.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?t:window):t=>(e||(e=Promise.resolve())).then(t).catch(t=>setTimeout(()=>{throw t},0))}).call(this)}).call(this,"undefined"==typeof e?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:e)},{}],14:[function(t,n){(function(e,r){(function(){"use strict";var i=t("safe-buffer").Buffer,o=r.crypto||r.msCrypto;n.exports=o&&o.getRandomValues?function(t,n){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(t);if(0<t)if(65536<t)for(var s=0;s<t;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r);return"function"==typeof n?e.nextTick((function(){n(null,r)})):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,t("_process"),"undefined"==typeof e?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:e)},{_process:12,"safe-buffer":30}],15:[function(t,e){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t,e,r){function i(t,n,r){return"string"==typeof e?e:e(t,n,r)}r||(r=Error);var o=function(t){function e(e,n,r){return t.call(this,i(e,n,r))||this}return n(e,t),e}(r);o.prototype.name=r.name,o.prototype.code=t,c[t]=o}function i(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return t+""})),2<n?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(t+"")}function o(t,e,n){return t.substr(!n||0>n?0:+n,e.length)===e}function s(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function a(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}var c={};r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,c;if("string"==typeof e&&o(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be",s(t," argument"))c="The ".concat(t," ").concat(r," ").concat(i(e,"type"));else{var u=a(t,".")?"property":"argument";c='The "'.concat(t,'" ').concat(u," ").concat(r," ").concat(i(e,"type"))}return c+=". Received type ".concat(typeof n),c}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=c},{}],16:[function(t,e){(function(n){(function(){"use strict";function r(t){return this instanceof r?(a.call(this,t),c.call(this,t),this.allowHalfOpen=!0,void(t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new r(t)}function i(){this._writableState.ended||n.nextTick(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var a=t("./_stream_readable"),c=t("./_stream_writable");t("inherits")(r,a);for(var u,l=s(c.prototype),h=0;h<l.length;h++)u=l[h],r.prototype[u]||(r.prototype[u]=c.prototype[u]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(t,e){"use strict";function n(t){return this instanceof n?void r.call(this,t):new n(t)}e.exports=n;var r=t("./_stream_transform");t("inherits")(n,r),n.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":19,inherits:10}],18:[function(t,n){(function(e,r){(function(){"use strict";function i(t){return D.from(t)}function o(t){return D.isBuffer(t)||t instanceof N}function s(t,e,n){return"function"==typeof t.prependListener?t.prependListener(e,n):void(t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function a(e,n,r){M=M||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=n instanceof M),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=U(this,e,"readableHighWaterMark",r),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!P&&(P=t("string_decoder/").StringDecoder),this.decoder=new P(e.encoding),this.encoding=e.encoding)}function c(e){if(M=M||t("./_stream_duplex"),!(this instanceof c))return new c(e);var n=this instanceof M;this._readableState=new a(e,this,n),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),I.call(this)}function u(t,e,n,r,o){T("readableAddChunk",e);var s,a=t._readableState;if(null===e)a.reading=!1,d(t,a);else if(o||(s=h(a,e)),s)K(t,s);else if(a.objectMode||e&&0<e.length)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===D.prototype||(e=i(e)),r)a.endEmitted?K(t,new J):l(t,a,e,!0);else if(a.ended)K(t,new W);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?l(t,a,e,!1):v(t,a)):l(t,a,e,!1)}else r||(a.reading=!1,v(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function l(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&m(t)),v(t,e)}function h(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new V("chunk",["string","Buffer","Uint8Array"],e)),n}function f(t){return 1073741824<=t?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function p(t,e){return 0>=t||0===e.length&&e.ended?0:e.objectMode?1:t===t?(t>e.highWaterMark&&(e.highWaterMark=f(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function d(t,e){if(T("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?m(t):(e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,g(t)))}}function m(t){var n=t._readableState;T("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(T("emitReadable",n.flowing),n.emittedReadable=!0,e.nextTick(g,t))}function g(t){var e=t._readableState;T("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,_(t)}function v(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(y,t,n))}function y(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(T("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function b(t){return function(){var e=t._readableState;T("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&R(t,"data")&&(e.flowing=!0,_(t))}}function w(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function k(t){T("readable nexttick read 0"),t.read(0)}function S(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(x,t,n))}function x(t,e){T("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),_(t),e.flowing&&!e.reading&&t.read(0)}function _(t){var e=t._readableState;for(T("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function O(t){var n=t._readableState;T("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,e.nextTick(E,n,t))}function E(t,e){if(T("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var M;n.exports=c,c.ReadableState=a;t("events").EventEmitter;var T,R=function(t,e){return t.listeners(e).length},I=t("./internal/streams/stream"),D=t("buffer").Buffer,N=r.Uint8Array||function(){},j=t("util");T=j&&j.debuglog?j.debuglog("stream"):function(){};var P,L,F,B=t("./internal/streams/buffer_list"),z=t("./internal/streams/destroy"),$=t("./internal/streams/state"),U=$.getHighWaterMark,H=t("../errors").codes,V=H.ERR_INVALID_ARG_TYPE,W=H.ERR_STREAM_PUSH_AFTER_EOF,q=H.ERR_METHOD_NOT_IMPLEMENTED,J=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(c,I);var K=z.errorOrDestroy,Y=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),c.prototype.destroy=z.destroy,c.prototype._undestroy=z.undestroy,c.prototype._destroy=function(t,e){e(t)},c.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=D.from(t,e),e=""),n=!0),u(this,t,e,!1,n)},c.prototype.unshift=function(t){return u(this,t,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){P||(P=t("string_decoder/").StringDecoder);var n=new P(e);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},c.prototype.read=function(t){T("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0===e.highWaterMark?0<e.length:e.length>=e.highWaterMark)||e.ended))return T("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?O(this):m(this),null;if(t=p(t,e),0===t&&e.ended)return 0===e.length&&O(this),null;var r,i=e.needReadable;return T("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,T("length less than watermark",i)),e.ended||e.reading?(i=!1,T("reading or ended",i)):i&&(T("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(t=p(n,e))),r=0<t?C(t,e):null,null===r?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(!e.ended&&(e.needReadable=!0),n!==t&&e.ended&&O(this)),null!==r&&this.emit("data",r),r},c.prototype._read=function(){K(this,new q("_read()"))},c.prototype.pipe=function(t,n){function r(t,e){T("onunpipe"),t===f&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){T("onend"),t.end()}function o(){T("cleanup"),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("drain",g),t.removeListener("error",c),t.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",h),f.removeListener("data",a),v=!0,p.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&g()}function a(e){T("ondata");var n=t.write(e);T("dest.write",n),!1===n&&((1===p.pipesCount&&p.pipes===t||1<p.pipesCount&&-1!==A(p.pipes,t))&&!v&&(T("false write response, pause",p.awaitDrain),p.awaitDrain++),f.pause())}function c(e){T("onerror",e),h(),t.removeListener("error",c),0===R(t,"error")&&K(t,e)}function u(){t.removeListener("finish",l),h()}function l(){T("onfinish"),t.removeListener("close",u),h()}function h(){T("unpipe"),f.unpipe(t)}var f=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,T("pipe count=%d opts=%j",p.pipesCount,n);var d=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr,m=d?i:h;p.endEmitted?e.nextTick(m):f.once("end",m),t.on("unpipe",r);var g=b(f);t.on("drain",g);var v=!1;return f.on("data",a),s(t,"error",c),t.once("close",u),t.once("finish",l),t.emit("pipe",f),p.flowing||(T("pipe resume"),f.resume()),t},c.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=A(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},c.prototype.on=function(t,n){var r=I.prototype.on.call(this,t,n),i=this._readableState;return"data"===t?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==t&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,T("on readable",i.length,i.reading),i.length?m(this):!i.reading&&e.nextTick(k,this)),r},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(t,n){var r=I.prototype.removeListener.call(this,t,n);return"readable"===t&&e.nextTick(w,this),r},c.prototype.removeAllListeners=function(t){var n=I.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&e.nextTick(w,this),n},c.prototype.resume=function(){var t=this._readableState;return t.flowing||(T("resume"),t.flowing=!t.readableListening,S(this,t)),t.paused=!1,this},c.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(T("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(T("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=e.push(i);o||(r=!0,t.pause())}})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<Y.length;o++)t.on(Y[o],this.emit.bind(this,Y[o]));return this._read=function(e){T("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===L&&(L=t("./internal/streams/async_iterator")),L(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),c._fromList=C,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(e,n){return void 0===F&&(F=t("./internal/streams/from")),F(c,e,n)})}).call(this)}).call(this,t("_process"),"undefined"==typeof e?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:e)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(t,e){"use strict";function n(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new c);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(t){return this instanceof r?(h.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),void this.on("prefinish",i)):new r(t)}function i(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush((function(e,n){o(t,e,n)}))}function o(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new l;if(t._transformState.transforming)throw new u;return t.push(null)}e.exports=r;var s=t("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,c=s.ERR_MULTIPLE_CALLBACK,u=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=s.ERR_TRANSFORM_WITH_LENGTH_0,h=t("./_stream_duplex");t("inherits")(r,h),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,h.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,n){n(new a("_transform()"))},r.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},r.prototype._destroy=function(t,e){h.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(t,n){(function(e,r){(function(){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){O(e,t)}}function o(t){return R.from(t)}function s(t){return R.isBuffer(t)||t instanceof I}function a(){}function c(e,n,r){E=E||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=n instanceof E),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=j(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){v(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function u(e){E=E||t("./_stream_duplex");var n=this instanceof E;return n||A.call(u,this)?(this._writableState=new c(e,this,n),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void T.call(this)):new u(e)}function l(t,n){var r=new H;W(t,r),e.nextTick(n,r)}function h(t,n,r,i){var o;return null===r?o=new U:"string"!=typeof r&&!n.objectMode&&(o=new L("chunk",["string","Buffer"],r)),!o||(W(t,o),e.nextTick(i,o),!1)}function f(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=R.from(e,n)),e}function p(t,e,n,r,i,o){if(!n){var s=f(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else d(t,e,!1,a,r,i,o);return c}function d(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new $("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,n,r,i,o){--n.pendingcb,r?(e.nextTick(o,i),e.nextTick(_,t,n),t._writableState.errorEmitted=!0,W(t,i)):(o(i),t._writableState.errorEmitted=!0,W(t,i),_(t,n))}function g(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v(t,n){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new B;if(g(r),n)m(t,r,i,n,o);else{var s=k(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),i?e.nextTick(y,t,r,s,o):y(t,r,s,o)}}function y(t,e,n,r){n||b(t,e),e.pendingcb--,r(),_(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,d(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback,f=e.objectMode?1:u.length;if(d(t,e,!1,f,u,l,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&W(t,n),e.prefinished=!0,t.emit("prefinish"),_(t,e)}))}function x(t,n){n.prefinished||n.finalCalled||("function"!=typeof t._final||n.destroyed?(n.prefinished=!0,t.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,e.nextTick(S,t,n)))}function _(t,e){var n=k(e);if(n&&(x(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}function C(t,n,r){n.ending=!0,_(t,n),r&&(n.finished?e.nextTick(r):t.once("finish",r)),n.ended=!0,t.writable=!1}function O(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}var E;n.exports=u,u.WritableState=c;var A,M={deprecate:t("util-deprecate")},T=t("./internal/streams/stream"),R=t("buffer").Buffer,I=r.Uint8Array||function(){},D=t("./internal/streams/destroy"),N=t("./internal/streams/state"),j=N.getHighWaterMark,P=t("../errors").codes,L=P.ERR_INVALID_ARG_TYPE,F=P.ERR_METHOD_NOT_IMPLEMENTED,B=P.ERR_MULTIPLE_CALLBACK,z=P.ERR_STREAM_CANNOT_PIPE,$=P.ERR_STREAM_DESTROYED,U=P.ERR_STREAM_NULL_VALUES,H=P.ERR_STREAM_WRITE_AFTER_END,V=P.ERR_UNKNOWN_ENCODING,W=D.errorOrDestroy;t("inherits")(u,T),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:M.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(t){return!!A.call(this,t)||!(this!==u)&&t&&t._writableState instanceof c}})):A=function(t){return t instanceof this},u.prototype.pipe=function(){W(this,new z)},u.prototype.write=function(t,e,n){var r=this._writableState,i=!1,c=!r.objectMode&&s(t);return c&&!R.isBuffer(t)&&(t=o(t)),"function"==typeof e&&(n=e,e=null),c?e="buffer":!e&&(e=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ending?l(this,n):(c||h(this,r,t,n))&&(r.pendingcb++,i=p(this,r,c,t,e,n)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&w(this,t))},u.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new V(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(t,e,n){n(new F("_write()"))},u.prototype._writev=null,u.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||C(this,r,n),this},Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),u.prototype.destroy=D.destroy,u.prototype._undestroy=D.undestroy,u.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,t("_process"),"undefined"==typeof e?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:e)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(t,e){(function(n){(function(){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return{value:t,done:e}}function o(t){var e=t[l];if(null!==e){var n=t[g].read();null!==n&&(t[d]=null,t[l]=null,t[h]=null,e(i(n,!1)))}}function s(t){n.nextTick(o,t)}function a(t,e){return function(n,r){t.then((function(){return e[p]?void n(i(void 0,!0)):void e[m](n,r)}),r)}}var c,u=t("./end-of-stream"),l=Symbol("lastResolve"),h=Symbol("lastReject"),f=Symbol("error"),p=Symbol("ended"),d=Symbol("lastPromise"),m=Symbol("handlePromise"),g=Symbol("stream"),v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((c={get stream(){return this[g]},next:function(){var t=this,e=this[f];if(null!==e)return Promise.reject(e);if(this[p])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise((function(e,r){n.nextTick((function(){t[f]?r(t[f]):e(i(void 0,!0))}))}));var r,o=this[d];if(o)r=new Promise(a(o,this));else{var s=this[g].read();if(null!==s)return Promise.resolve(i(s,!1));r=new Promise(this[m])}return this[d]=r,r}},r(c,Symbol.asyncIterator,(function(){return this})),r(c,"return",(function(){var t=this;return new Promise((function(e,n){t[g].destroy(null,(function(t){return t?void n(t):void e(i(void 0,!0))}))}))})),c),v);e.exports=function(t){var e,n=Object.create(y,(e={},r(e,g,{value:t,writable:!0}),r(e,l,{value:null,writable:!0}),r(e,h,{value:null,writable:!0}),r(e,f,{value:null,writable:!0}),r(e,p,{value:t._readableState.endEmitted,writable:!0}),r(e,m,{value:function(t,e){var r=n[g].read();r?(n[d]=null,n[l]=null,n[h]=null,t(i(r,!1))):(n[l]=t,n[h]=e)},writable:!0}),e));return n[d]=null,u(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[h];return null!==e&&(n[d]=null,n[l]=null,n[h]=null,e(t)),void(n[f]=t)}var r=n[l];null!==r&&(n[d]=null,n[l]=null,n[h]=null,r(i(void 0,!0))),n[p]=!0})),t.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":24,_process:12}],22:[function(t,e){"use strict";function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?n(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e,n){l.prototype.copy.call(t,e,n)}var u=t("buffer"),l=u.Buffer,h=t("util"),f=h.inspect,p=f&&f.custom||"inspect";e.exports=function(){function t(){o(this,t),this.head=null,this.tail=null,this.length=0}return a(t,[{key:"push",value:function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return l.alloc(0);for(var e=l.allocUnsafe(t>>>0),n=this.head,r=0;n;)c(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(r+=o===i.length?i:i.slice(0,t),t-=o,0===t){o===i.length?(++n,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=l.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),t-=o,0===t){o===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:p,value:function(t,e){return f(this,r({},e,{depth:0,customInspect:!1}))}}]),t}()},{buffer:3,util:2}],23:[function(t,e){(function(t){(function(){"use strict";function n(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(e):e&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,t("_process"))},{_process:12}],24:[function(t,e){"use strict";function n(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}function r(){}function i(t){return t.setHeader&&"function"==typeof t.abort}function o(t,e,a){if("function"==typeof e)return o(t,null,e);e||(e={}),a=n(a||r);var c=e.readable||!1!==e.readable&&t.readable,u=e.writable||!1!==e.writable&&t.writable,l=function(){t.writable||f()},h=t._writableState&&t._writableState.finished,f=function(){u=!1,h=!0,c||a.call(t)},p=t._readableState&&t._readableState.endEmitted,d=function(){c=!1,p=!0,u||a.call(t)},m=function(e){a.call(t,e)},g=function(){var e;return c&&!p?(t._readableState&&t._readableState.ended||(e=new s),a.call(t,e)):u&&!h?(t._writableState&&t._writableState.ended||(e=new s),a.call(t,e)):void 0},v=function(){t.req.on("finish",f)};return i(t)?(t.on("complete",f),t.on("abort",g),t.req?v():t.on("request",v)):u&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",f),!1!==e.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",v),t.req&&t.req.removeListener("finish",f),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",f),t.removeListener("end",d),t.removeListener("error",m),t.removeListener("close",g)}}var s=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;e.exports=o},{"../../../errors":15}],25:[function(t,e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(t,e){"use strict";function n(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}function r(t){if(t)throw t}function i(t){return t.setHeader&&"function"==typeof t.abort}function o(e,r,o,s){s=n(s);var a=!1;e.on("close",(function(){a=!0})),void 0===u&&(u=t("./end-of-stream")),u(e,{readable:r,writable:o},(function(t){return t?s(t):(a=!0,void s())}));var c=!1;return function(t){if(!a)return c?void 0:(c=!0,i(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new f("pipe")))}}function s(t){t()}function a(t,e){return t.pipe(e)}function c(t){return t.length&&"function"==typeof t[t.length-1]?t.pop():r}var u,l=t("../../../errors").codes,h=l.ERR_MISSING_ARGS,f=l.ERR_STREAM_DESTROYED;e.exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=c(e);if(Array.isArray(e[0])&&(e=e[0]),2>e.length)throw new h("streams");var i,u=e.map((function(t,n){var a=n<e.length-1;return o(t,a,0<n,(function(t){i||(i=t),t&&u.forEach(s),a||(u.forEach(s),r(i))}))}));return e.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,n){"use strict";function r(t,e,n){return null==t.highWaterMark?e?t[n]:null:t.highWaterMark}var i=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(e,n,o,s){var a=r(n,s,o);if(null!=a){if(!isFinite(a)||t(a)!==a||0>a){var c=s?o:"highWaterMark";throw new i(c,a)}return t(a)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(t,e){e.exports=t("events").EventEmitter},{events:7}],29:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),n.finished=t("./lib/internal/streams/end-of-stream.js"),n.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return s(t,e,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=t("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,n),n.Buffer=i),i.prototype=Object.create(s.prototype),r(s,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0===e?r.fill(0):"string"==typeof n?r.fill(e,n):r.fill(e),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:3}],31:[function(t,e,n){"use strict";function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=r(t);if("string"!=typeof e&&(g.isEncoding===v||!v(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){var e;switch(this.encoding=i(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=f,this.end=p,e=3;break;default:return this.write=d,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(e)}function s(t){return 127>=t?0:6==t>>5?2:14==t>>4?3:30==t>>3?4:2==t>>6?-1:-2}function a(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]),0<=i?(0<i&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]),0<=i?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0))}function c(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function u(t){var e=this.lastTotal-this.lastNeed,n=c(this,t,e);return void 0===n?this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length)):n}function l(t,e){if(0==(t.length-e)%2){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function f(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function m(t){return t&&t.length?this.write(t):""}var g=t("safe-buffer").Buffer,v=g.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=a(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),void(this.lastNeed-=t.length))}},{"safe-buffer":30}],32:[function(t,n){(function(t){(function(){function e(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===(n+"").toLowerCase()}n.exports=function(t,n){function r(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this,arguments)}if(e("noDeprecation"))return t;var i=!1;return r}}).call(this)}).call(this,"undefined"==typeof e?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:e)},{}],"/":[function(t,e){function n(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function r(t){console.warn(t)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const i=t("debug")("simple-peer"),o=t("get-browser-rtc"),s=t("randombytes"),a=t("readable-stream"),c=t("queue-microtask"),u=t("err-code"),{Buffer:l}=t("buffer"),h=65536;class f extends a.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||s(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||f.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},f.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(t=>t),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=void 0===t.trickle||t.trickle,this.allowHalfTrickle=void 0!==t.allowHalfTrickle&&t.allowHalfTrickle,this.iceCompleteTimeout=t.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&"object"==typeof t.wrtc?t.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?u(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):u(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(u(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(t=>{this.destroy(u(t,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(t=>{this._addIceCandidate(t)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(t=>{this.destroy(u(t,"ERR_SET_REMOTE_DESCRIPTION"))}),t.sdp||t.candidate||t.renegotiate||t.transceiverRequest||this.destroy(u(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const e=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(e).catch(t=>{!e.address||e.address.endsWith(".local")?r("Ignoring unsupported ICE candidate."):this.destroy(u(t,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,e),this._needsNegotiation()}catch(t){this.destroy(u(t,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:e}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach(e=>{this.addTrack(e,t)})}}addTrack(t,e){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let r=n.get(e);if(r)throw r.removed?u(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):u(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(t,e),n.set(e,r),this._senderMap.set(t,n),this._needsNegotiation()}replaceTrack(t,e,n){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(t),i=r?r.get(n):null;if(!i)throw u(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");e&&this._senderMap.set(e,r),null==i.replaceTrack?this.destroy(u(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(e)}removeTrack(t,e){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),r=n?n.get(e):null;if(!r)throw u(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(t){"NS_ERROR_UNEXPECTED"===t.name?this._sendersAwaitingStable.push(r):this.destroy(u(t,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach(e=>{this.removeTrack(e,t)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,c(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,()=>{})}_destroy(t,e){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),c(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(t){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(t){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),e()}))}_setupData(t){if(!t.channel)return this.destroy(u(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=h),this.channelName=this._channel.label,this._channel.onmessage=t=>{this._onChannelMessage(t)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=t=>{const e=t.error instanceof Error?t.error:new Error(`Datachannel error: ${t.message} ${t.filename}:${t.lineno}:${t.colno}`);this.destroy(u(e,"ERR_DATA_CHANNEL"))};let e=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(e&&this._onChannelClose(),e=!0):e=!1},5e3)}_read(){}_write(t,e,n){if(this.destroyed)return n(u(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(t){return this.destroy(u(t,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(!this.destroyed){const t=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?t():this.once("connect",t)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp})}};this._pc.setLocalDescription(t).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))}).catch(t=>{this.destroy(u(t,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(t=>{this.destroy(u(t,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,this.addTransceiver(t.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(t).then(()=>{this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))}).catch(t=>{this.destroy(u(t,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(t=>{this.destroy(u(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(u(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,e=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,e),this.emit("iceStateChange",t,e),("connected"===t||"completed"===t)&&(this._pcReady=!0,this._maybeReady()),"failed"===t&&this.destroy(u(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&this.destroy(u(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const e=t=>("[object Array]"===Object.prototype.toString.call(t.values)&&t.values.forEach(e=>{Object.assign(t,e)}),t);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const r=[];n.forEach(t=>{r.push(e(t))}),t(null,r)},e=>t(e)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(this.destroyed)return;const r=[];n.result().forEach(t=>{const n={};t.names().forEach(e=>{n[e]=t.stat(e)}),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,r.push(e(n))}),t(null,r)},e=>t(e)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats((e,n)=>{if(this.destroyed)return;e&&(n=[]);const r={},i={},o={};let s=!1;n.forEach(t=>{("remotecandidate"===t.type||"remote-candidate"===t.type)&&(r[t.id]=t),("localcandidate"===t.type||"local-candidate"===t.type)&&(i[t.id]=t),("candidatepair"===t.type||"candidate-pair"===t.type)&&(o[t.id]=t)});const a=t=>{s=!0;let e=i[t.localCandidateId];e&&(e.ip||e.address)?(this.localAddress=e.ip||e.address,this.localPort=+e.port):e&&e.ipAddress?(this.localAddress=e.ipAddress,this.localPort=+e.portNumber):"string"==typeof t.googLocalAddress&&(e=t.googLocalAddress.split(":"),this.localAddress=e[0],this.localPort=+e[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[t.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(t=>{"transport"===t.type&&t.selectedCandidatePairId&&a(o[t.selectedCandidatePairId]),("googCandidatePair"===t.type&&"true"===t.googActiveConnection||("candidatepair"===t.type||"candidate-pair"===t.type)&&t.selected)&&a(t)}),s||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(u(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(t,100)})};t()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>h)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let e=t.data;e instanceof ArrayBuffer&&(e=l.from(e)),this.push(e)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach(e=>{this._debug("on track"),this.emit("track",t.track,e),this._remoteTracks.push({track:t.track,stream:e}),this._remoteStreams.some(t=>t.id===e.id)||(this._remoteStreams.push(e),c(()=>{this._debug("on stream"),this.emit("stream",e)}))})}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],i.apply(null,t)}}f.WEBRTC_SUPPORT=!!o(),f.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},f.channelConfig={},e.exports=f},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")}))}).call(this,n("c8ba"))},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+h>=1?f/c:f*Math.pow(2,1-h),e*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+p]=255&s,p+=d,s/=256,u-=8);t[n+p-d]|=128*m}},9263:function(t,e,n){"use strict";var r=n("577e"),i=n("ad6d"),o=n("9f7f"),s=n("5692"),a=n("7c73"),c=n("69f3").get,u=n("fce3"),l=n("107c"),h=RegExp.prototype.exec,f=s("native-string-replace",String.prototype.replace),p=h,d=function(){var t=/a/,e=/b*/g;return h.call(t,"a"),h.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),m=o.UNSUPPORTED_Y||o.BROKEN_CARET,g=void 0!==/()??/.exec("")[1],v=d||g||m||u||l;v&&(p=function(t){var e,n,o,s,u,l,v,y=this,b=c(y),w=r(t),k=b.raw;if(k)return k.lastIndex=y.lastIndex,e=p.call(k,w),y.lastIndex=k.lastIndex,e;var S=b.groups,x=m&&y.sticky,_=i.call(y),C=y.source,O=0,E=w;if(x&&(_=_.replace("y",""),-1===_.indexOf("g")&&(_+="g"),E=w.slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==w.charAt(y.lastIndex-1))&&(C="(?: "+C+")",E=" "+E,O++),n=new RegExp("^(?:"+C+")",_)),g&&(n=new RegExp("^"+C+"$(?!\\s)",_)),d&&(o=y.lastIndex),s=h.call(x?n:y,E),x?s?(s.input=s.input.slice(O),s[0]=s[0].slice(O),s.index=y.lastIndex,y.lastIndex+=s[0].length):y.lastIndex=0:d&&s&&(y.lastIndex=y.global?s.index+s[0].length:o),g&&s&&s.length>1&&f.call(s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&S)for(s.groups=l=a(null),u=0;u<S.length;u++)v=S[u],l[v[0]]=s[v[1]];return s}),t.exports=p},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=a[s(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},9751:function(t,e,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:==)((?:[^~]+))(?:==))$/gm,o=r["c"].create({name:"highlight",defaultOptions:{multicolor:!1,HTMLAttributes:{}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>({color:t.getAttribute("data-color")||t.style.backgroundColor}),renderHTML:t=>t.color?{"data-color":t.color,style:"background-color: "+t.color}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark("highlight",t),toggleHighlight:t=>({commands:e})=>e.toggleMark("highlight",t),unsetHighlight:()=>({commands:t})=>t.unsetMark("highlight")}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Object(r["k"])(i,this.type)]},addPasteRules(){return[Object(r["l"])(i,this.type)]}});e["a"]=o},9759:function(t,e,n){(function(e,n){t.exports=n()})(self,(function(){return(()=>{"use strict";var t={754:(t,e,n)=>{n.r(e),n.d(e,{SKAlert:()=>r});class r{constructor({title:t,text:e,buttons:n}){this.title=t,this.text=e,this.buttons=n}buttonsString(){const t=function(t,e){return`\n        <button id='button-${e}' class='sn-button small ${t.style}'>\n          <div class='sk-label'>${t.text}</div>\n        </button>\n      `};let e=this.buttons.map((function(e,n){return t(e,n)})).join(""),n=`\n      <div class='sk-button-group'>\n        ${e}\n      </div>\n    `;return n}templateString(){let t,e;this.buttons?(t=`\n        <div class="sk-panel-row" style='margin-top: 8px;'>\n          ${this.buttonsString()}\n        </div>\n      `,e=""):(t="",e='style="padding-bottom: 8px"');let n=this.title?`<div class='sk-h3 sk-panel-section-title'>${this.title}</div>`:"",r=this.text?`<p class='sk-p'>${this.text}</p>`:"",i=`\n      <div class="sk-modal">\n        <div class="sk-modal-background"></div>\n        <div class="sk-modal-content">\n          <div class="sn-component">\n            <div class="sk-panel" style='max-width: 500px;'>\n              <div class="sk-panel-content" ${e}>\n                <div class="sk-panel-section">\n                  ${n}\n\n                  <div class="sk-panel-row">\n                    ${r}\n                  </div>\n\n                  ${t}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;return i}dismiss(){this.onElement.removeChild(this.element)}primaryButton(){let t=this.buttons.find(t=>!0===t.primary);return t||(t=this.buttons[this.buttons.length-1]),t}present({onElement:t}={}){t||(t=document.body),this.onElement=t,this.element=document.createElement("div"),this.element.className="sn-component",this.element.innerHTML=this.templateString().trim(),t.appendChild(this.element),this.buttons&&this.buttons.length&&this.buttons.forEach((t,e)=>{let n=this.element.querySelector("#button-"+e);n.onclick=()=>{t.action&&t.action(),this.dismiss()},0===e&&n.focus()})}}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}return n.m=t,n.x=t=>{},(()=>{n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={388:0},e=[[754]],r=t=>{},i=(i,o)=>{for(var s,a,[c,u,l,h]=o,f=0,p=[];f<c.length;f++)a=c[f],n.o(t,a)&&t[a]&&p.push(t[a][0]),t[a]=0;for(s in u)n.o(u,s)&&(n.m[s]=u[s]);l&&l(n),i&&i(o);while(p.length)p.shift()();return h&&e.push.apply(e,h),r()},o=self["webpackChunkSK_name_"]=self["webpackChunkSK_name_"]||[];function s(){for(var r,i=0;i<e.length;i++){for(var o=e[i],s=!0,a=1;a<o.length;a++){var c=o[a];0!==t[c]&&(s=!1)}s&&(e.splice(i--,1),r=n(n.s=o[0]))}return 0===e.length&&(n.x(),n.x=t=>{}),r}o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o));var a=n.x;n.x=()=>(n.x=a||(t=>{}),(r=s)())})(),n.x()})()}))},9861:function(t,e,n){"use strict";n("e260");var r=n("23e7"),i=n("d066"),o=n("0d3b"),s=n("6eeb"),a=n("e2cc"),c=n("d44e"),u=n("9ed3"),l=n("69f3"),h=n("19aa"),f=n("5135"),p=n("0366"),d=n("f5df"),m=n("825a"),g=n("861d"),v=n("577e"),y=n("7c73"),b=n("5c6c"),w=n("9a1f"),k=n("35a1"),S=n("b622"),x=i("fetch"),_=i("Request"),C=_&&_.prototype,O=i("Headers"),E=S("iterator"),A="URLSearchParams",M=A+"Iterator",T=l.set,R=l.getterFor(A),I=l.getterFor(M),D=/\+/g,N=Array(4),j=function(t){return N[t-1]||(N[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},P=function(t){try{return decodeURIComponent(t)}catch(e){return t}},L=function(t){var e=t.replace(D," "),n=4;try{return decodeURIComponent(e)}catch(r){while(n)e=e.replace(j(n--),P);return e}},F=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},z=function(t){return B[t]},$=function(t){return encodeURIComponent(t).replace(F,z)},U=function(t,e){if(e){var n,r,i=e.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),t.push({key:L(r.shift()),value:L(r.join("="))}))}},H=function(t){this.entries.length=0,U(this.entries,t)},V=function(t,e){if(t<e)throw TypeError("Not enough arguments")},W=u((function(t,e){T(this,{type:M,iterator:w(R(t).entries),kind:e})}),"Iterator",(function(){var t=I(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),q=function(){h(this,q,A);var t,e,n,r,i,o,s,a,c,u=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(T(l,{type:A,entries:p,updateURL:function(){},updateSearchParams:H}),void 0!==u)if(g(u))if(t=k(u),"function"===typeof t){e=t.call(u),n=e.next;while(!(r=n.call(e)).done){if(i=w(m(r.value)),o=i.next,(s=o.call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:v(s.value),value:v(a.value)})}}else for(c in u)f(u,c)&&p.push({key:c,value:v(u[c])});else U(p,"string"===typeof u?"?"===u.charAt(0)?u.slice(1):u:v(u))},J=q.prototype;if(a(J,{append:function(t,e){V(arguments.length,2);var n=R(this);n.entries.push({key:v(t),value:v(e)}),n.updateURL()},delete:function(t){V(arguments.length,1);var e=R(this),n=e.entries,r=v(t),i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){V(arguments.length,1);for(var e=R(this).entries,n=v(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){V(arguments.length,1);for(var e=R(this).entries,n=v(t),r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){V(arguments.length,1);var e=R(this).entries,n=v(t),r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){V(arguments.length,1);for(var n,r=R(this),i=r.entries,o=!1,s=v(t),a=v(e),c=0;c<i.length;c++)n=i[c],n.key===s&&(o?i.splice(c--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var t,e,n,r=R(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){var e,n=R(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)e=n[i++],r(e.value,e.key,this)},keys:function(){return new W(this,"keys")},values:function(){return new W(this,"values")},entries:function(){return new W(this,"entries")}},{enumerable:!0}),s(J,E,J.entries),s(J,"toString",(function(){var t,e=R(this).entries,n=[],r=0;while(r<e.length)t=e[r++],n.push($(t.key)+"="+$(t.value));return n.join("&")}),{enumerable:!0}),c(q,A),r({global:!0,forced:!o},{URLSearchParams:q}),!o&&"function"==typeof O){var K=function(t){if(g(t)){var e,n=t.body;if(d(n)===A)return e=t.headers?new O(t.headers):new O,e.has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),y(t,{body:b(0,String(n)),headers:b(0,e)})}return t};if("function"==typeof x&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return x(t,arguments.length>1?K(arguments[1]):{})}}),"function"==typeof _){var Y=function(t){return h(this,Y,"Request"),new _(t,arguments.length>1?K(arguments[1]):{})};C.constructor=Y,Y.prototype=C,r({global:!0,forced:!0},{Request:Y})}}t.exports={URLSearchParams:q,getState:R}},"986d":function(t,e,n){"use strict";var r=n("9980"),i=n("70a9"),o=n("5313"),s=n("9b6a"),a=n("7428");const c=t=>{const e=i["c"].getState(t).undoManager;if(null!=e)return e.undo(),!0},u=t=>{const e=i["c"].getState(t).undoManager;if(null!=e)return e.redo(),!0},l=({protectedNodes:t=new Set(["paragraph"]),trackedOrigins:e=[]}={})=>new o["d"]({key:i["c"],state:{init:(n,r)=>{const o=i["b"].getState(r),s=new a["i"](o.type,{trackedOrigins:new Set([i["b"]].concat(e)),deleteFilter:e=>!(e instanceof a["e"])||!(e.content instanceof a["c"])||!(e.content.type instanceof a["h"]||e.content.type instanceof a["j"]&&t.has(e.content.type.nodeName))||0===e.content.type._length});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(t,e,n,r)=>{const o=i["b"].getState(r).binding,a=e.undoManager,c=a.undoStack.length>0,u=a.redoStack.length>0;return o?{undoManager:a,prevSel:Object(s["a"])(o,n),hasUndoOps:c,hasRedoOps:u}:c!==e.hasUndoOps||u!==e.hasRedoOps?Object.assign({},e,{hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}):e}},view:t=>{const e=i["b"].getState(t.state),n=i["c"].getState(t.state).undoManager;return n.on("stack-item-added",({stackItem:n})=>{const r=e.binding;r&&n.meta.set(r,i["c"].getState(t.state).prevSel)}),n.on("stack-item-popped",({stackItem:t})=>{const n=e.binding;n&&(n.beforeTransactionSelection=t.meta.get(n)||n.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}}),h=r["b"].create({name:"collaboration",defaultOptions:{document:null,field:"default",fragment:null},onCreate(){this.editor.extensionManager.extensions.find(t=>"history"===t.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i["c"].getState(e).undoManager;return 0!==r.undoStack.length&&(!n||c(e))},redo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i["c"].getState(e).undoManager;return 0!==r.redoStack.length&&(!n||u(e))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field);return[Object(s["c"])(t),l()]}});e["a"]=h},9980:function(t,e,n){"use strict";n.d(e,"a",(function(){return Hn})),n.d(e,"b",(function(){return xt})),n.d(e,"c",(function(){return Wn})),n.d(e,"d",(function(){return Vn})),n.d(e,"e",(function(){return Jn})),n.d(e,"f",(function(){return dt})),n.d(e,"g",(function(){return dn})),n.d(e,"h",(function(){return st})),n.d(e,"i",(function(){return Qn})),n.d(e,"j",(function(){return ne})),n.d(e,"k",(function(){return Gn})),n.d(e,"l",(function(){return Xn})),n.d(e,"m",(function(){return ut})),n.d(e,"n",(function(){return Kn})),n.d(e,"o",(function(){return Zn}));var r=n("5313"),i=n("576a"),o=n("304a"),s=n("7f06"),a=n("f95e"),c=n("0ac0");function u(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function l(t,e,n){var i=t.selection,o=i.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var s=p(o);if(!s){var a=o.blockRange(),u=a&&Object(c["j"])(a);return null!=u&&(e&&e(t.tr.lift(a,u).scrollIntoView()),!0)}var l=s.nodeBefore;if(!l.type.spec.isolating&&E(t,s,e))return!0;if(0==o.parent.content.size&&(h(l,"end")||r["c"].isSelectable(l))){if(e){var f=t.tr.deleteRange(o.before(),o.after());f.setSelection(h(l,"end")?r["f"].findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):r["c"].create(f.doc,s.pos-l.nodeSize)),e(f.scrollIntoView())}return!0}return!(!l.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos-l.nodeSize,s.pos).scrollIntoView()),!0)}function h(t,e,n){for(;t;t="start"==e?t.firstChild:t.lastChild){if(t.isTextblock)return!0;if(n&&1!=t.childCount)return!1}return!1}function f(t,e,n){var i=t.selection,o=i.$head,s=i.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;a=p(o)}var c=a&&a.nodeBefore;return!(!c||!r["c"].isSelectable(c))&&(e&&e(t.tr.setSelection(r["c"].create(t.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)}function p(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function d(t,e,n){var i=t.selection,o=i.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var s=g(o);if(!s)return!1;var a=s.nodeAfter;if(E(t,s,e))return!0;if(0==o.parent.content.size&&(h(a,"start")||r["c"].isSelectable(a))){if(e){var c=t.tr.deleteRange(o.before(),o.after());c.setSelection(h(a,"start")?r["f"].findFrom(c.doc.resolve(c.mapping.map(s.pos)),1):r["c"].create(c.doc,c.mapping.map(s.pos))),e(c.scrollIntoView())}return!0}return!(!a.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0)}function m(t,e,n){var i=t.selection,o=i.$head,s=i.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;a=g(o)}var c=a&&a.nodeAfter;return!(!c||!r["c"].isSelectable(c))&&(e&&e(t.tr.setSelection(r["c"].create(t.doc,a.pos)).scrollIntoView()),!0)}function g(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function v(t,e){var n=t.selection,r=n.$from,i=n.$to,o=r.blockRange(i),s=o&&Object(c["j"])(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}function y(t,e){var n=t.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function b(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function w(t,e){var n=t.selection,i=n.$head,o=n.$anchor;if(!i.parent.type.spec.code||!i.sameParent(o))return!1;var s=i.node(-1),a=i.indexAfter(-1),c=b(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(e){var u=i.after(),l=t.tr.replaceWith(u,u,c.createAndFill());l.setSelection(r["f"].near(l.doc.resolve(u),1)),e(l.scrollIntoView())}return!0}function k(t,e){var n=t.selection,i=n.$from,o=n.$to;if(n instanceof r["a"]||i.parent.inlineContent||o.parent.inlineContent)return!1;var s=b(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(r["h"].create(c.doc,a+1)),e(c.scrollIntoView())}return!0}function S(t,e){var n=t.selection,r=n.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var i=r.before();if(Object(c["f"])(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}var o=r.blockRange(),s=o&&Object(c["j"])(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}function x(t,e){var n=t.selection,i=n.$from,o=n.$to;if(t.selection instanceof r["c"]&&t.selection.node.isBlock)return!(!i.parentOffset||!Object(c["f"])(t.doc,i.pos))&&(e&&e(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(e){var s=o.parentOffset==o.parent.content.size,a=t.tr;(t.selection instanceof r["h"]||t.selection instanceof r["a"])&&a.deleteSelection();var u=0==i.depth?null:b(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=s&&u?[{type:u}]:null,h=Object(c["f"])(a.doc,a.mapping.map(i.pos),1,l);if(l||h||!Object(c["f"])(a.doc,a.mapping.map(i.pos),1,u&&[{type:u}])||(l=[{type:u}],h=!0),h&&(a.split(a.mapping.map(i.pos),1,l),!s&&!i.parentOffset&&i.parent.type!=u)){var f=a.mapping.map(i.before()),p=a.doc.resolve(f);i.node(-1).canReplaceWith(p.index(),p.index()+1,u)&&a.setNodeMarkup(a.mapping.map(i.before()),u)}e(a.scrollIntoView())}return!0}function _(t,e){var n,i=t.selection,o=i.$from,s=i.to,a=o.sharedDepth(s);return 0!=a&&(n=o.before(a),e&&e(t.tr.setSelection(r["c"].create(t.doc,n))),!0)}function C(t,e){return e&&e(t.tr.setSelection(new r["a"](t.doc))),!0}function O(t,e,n){var r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(o,o+1)||!i.isTextblock&&!Object(c["e"])(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function E(t,e,n){var i,s,a=e.nodeBefore,u=e.nodeAfter;if(a.type.spec.isolating||u.type.spec.isolating)return!1;if(O(t,e,n))return!0;var l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(i=(s=a.contentMatchAt(a.childCount)).findWrapping(u.type))&&s.matchType(i[0]||u.type).validEnd){if(n){for(var f=e.pos+u.nodeSize,p=o["c"].empty,d=i.length-1;d>=0;d--)p=o["c"].from(i[d].create(null,p));p=o["c"].from(a.copy(p));var m=t.tr.step(new c["b"](e.pos-1,f,e.pos,f,new o["j"](p,1,0),i.length,!0)),g=f+2*i.length;Object(c["e"])(m.doc,g)&&m.join(g),n(m.scrollIntoView())}return!0}var v=r["f"].findFrom(e,1),y=v&&v.$from.blockRange(v.$to),b=y&&Object(c["j"])(y);if(null!=b&&b>=e.depth)return n&&n(t.tr.lift(y,b).scrollIntoView()),!0;if(l&&h(u,"start",!0)&&h(a,"end")){for(var w=a,k=[];;){if(k.push(w),w.isTextblock)break;w=w.lastChild}for(var S=u,x=1;!S.isTextblock;S=S.firstChild)x++;if(w.canReplace(w.childCount,w.childCount,S.content)){if(n){for(var _=o["c"].empty,C=k.length-1;C>=0;C--)_=o["c"].from(k[C].copy(_));var E=t.tr.step(new c["b"](e.pos-k.length,e.pos+u.nodeSize,e.pos+x,e.pos+u.nodeSize-x,new o["j"](_,k.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function A(t,e){return function(n,r){var i=n.selection,o=i.$from,s=i.$to,a=o.blockRange(s),u=a&&Object(c["h"])(a,t,e);return!!u&&(r&&r(n.tr.wrap(a,u).scrollIntoView()),!0)}}function M(t,e){return function(n,r){var i=n.selection,o=i.from,s=i.to,a=!1;return n.doc.nodesBetween(o,s,(function(r,i){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var o=n.doc.resolve(i),s=o.index();a=o.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(o,s,t,e).scrollIntoView()),!0)}}function T(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return function(e,n,r){for(var i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}var R=T(u,l,f),I=T(u,d,m),D={Enter:T(y,k,S,x),"Mod-Enter":w,Backspace:R,"Mod-Backspace":R,Delete:I,"Mod-Delete":I,"Mod-a":C},N={"Ctrl-h":D["Backspace"],"Alt-Backspace":D["Mod-Backspace"],"Ctrl-d":D["Delete"],"Ctrl-Alt-Backspace":D["Mod-Delete"],"Alt-Delete":D["Mod-Delete"],"Alt-d":D["Mod-Delete"]};for(var j in D)N[j]=D[j];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function P(t,e){return function(n,r){var i=n.selection,s=i.$from,a=i.$to,u=s.blockRange(a),l=!1,h=u;if(!u)return!1;if(u.depth>=2&&s.node(u.depth-1).type.compatibleContent(t)&&0==u.startIndex){if(0==s.index(u.depth-1))return!1;var f=n.doc.resolve(u.start-2);h=new o["g"](f,f,u.depth),u.endIndex<u.parent.childCount&&(u=new o["g"](s,n.doc.resolve(a.end(u.depth)),u.depth)),l=!0}var p=Object(c["h"])(h,t,e,u);return!!p&&(r&&r(L(n.tr,u,p,l,t).scrollIntoView()),!0)}}function L(t,e,n,r,i){for(var s=o["c"].empty,a=n.length-1;a>=0;a--)s=o["c"].from(n[a].type.create(n[a].attrs,s));t.step(new c["b"](e.start-(r?2:0),e.end,e.start,e.end,new o["j"](s,0,0),n.length,!0));for(var u=0,l=0;l<n.length;l++)n[l].type==i&&(u=l+1);for(var h=n.length-u,f=e.start+n.length-(r?2:0),p=e.parent,d=e.startIndex,m=e.endIndex,g=!0;d<m;d++,g=!1)!g&&Object(c["f"])(t.doc,f,h)&&(t.split(f,h),f+=2*h),f+=p.child(d).nodeSize;return t}function F(t){return function(e,n){var r=e.selection,i=r.$from,o=r.$to,s=i.blockRange(o,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!n||(i.node(s.depth-1).type==t?B(e,n,t,s):z(e,n,s)))}}function B(t,e,n,r){var i=t.tr,s=r.end,a=r.$to.end(r.depth);return s<a&&(i.step(new c["b"](s-1,a,s,a,new o["j"](o["c"].from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new o["g"](i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth)),e(i.lift(r,Object(c["j"])(r)).scrollIntoView()),!0}function z(t,e,n){for(var r=t.tr,i=n.parent,s=n.end,a=n.endIndex-1,u=n.startIndex;a>u;a--)s-=i.child(a).nodeSize,r.delete(s-1,s+1);var l=r.doc.resolve(n.start),h=l.nodeAfter,f=0==n.startIndex,p=n.endIndex==i.childCount,d=l.node(-1),m=l.index(-1);if(!d.canReplace(m+(f?0:1),m+1,h.content.append(p?o["c"].empty:o["c"].from(i))))return!1;var g=l.pos,v=g+h.nodeSize;return r.step(new c["b"](g-(f?1:0),v+(p?1:0),g+1,v-1,new o["j"]((f?o["c"].empty:o["c"].from(i.copy(o["c"].empty))).append(p?o["c"].empty:o["c"].from(i.copy(o["c"].empty))),f?0:1,p?0:1),f?0:1)),e(r.scrollIntoView()),!0}function $(t){return function(e,n){var r=e.selection,i=r.$from,s=r.$to,a=i.blockRange(s,(function(e){return e.childCount&&e.firstChild.type==t}));if(!a)return!1;var u=a.startIndex;if(0==u)return!1;var l=a.parent,h=l.child(u-1);if(h.type!=t)return!1;if(n){var f=h.lastChild&&h.lastChild.type==l.type,p=o["c"].from(f?t.create():null),d=new o["j"](o["c"].from(t.create(null,o["c"].from(l.type.create(null,p)))),f?3:1,0),m=a.start,g=a.end;n(e.tr.step(new c["b"](m-(f?3:1),g,m,g,d,1,!0)).scrollIntoView())}return!0}}function U(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function H(t,e){if("string"===typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function V(t,e){const n=H(e,t.schema),{from:r,to:i}=t.selection;let o=[];t.doc.nodesBetween(r,i,t=>{o=[...o,t]});const s=o.reverse().find(t=>t.type.name===n.name);return s?{...s.attrs}:{}}function W(t,e){if("string"===typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function q(t,e){const n=W(e,t.schema),{from:r,to:i,empty:o}=t.selection;let s=[];o?s=t.selection.$head.marks():t.doc.nodesBetween(r,i,t=>{s=[...s,...t.marks]});const a=s.find(t=>t.type.name===n.name);return a?{...a.attrs}:{}}function J(t,e){const n=U("string"===typeof e?e:e.name,t.schema);return"node"===n?V(t,e):"mark"===n?q(t,e):{}}function K(t,e){const n=Object.keys(e);return!n.length||!!n.filter(n=>e[n]===t[n]).length}function Y(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?H(e,t.schema):null;let a=[];if(t.doc.nodesBetween(r,i,(t,e)=>{if(!t.isText){const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize);a=[...a,{node:t,from:n,to:o}]}}),o)return!!a.filter(t=>!s||s.name===t.node.type.name).find(t=>K(t.node.attrs,n));const c=i-r,u=a.filter(t=>!s||s.name===t.node.type.name).filter(t=>K(t.node.attrs,n)).reduce((t,e)=>{const n=e.to-e.from;return t+n},0);return u>=c}function G(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?W(e,t.schema):null;if(o)return!!(t.storedMarks||t.selection.$from.marks()).filter(t=>!s||s.name===t.type.name).find(t=>K(t.attrs,n));let a=0,c=[];if(t.doc.nodesBetween(r,i,(t,e)=>{if(t.isText){const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize),s=o-n;a+=s,c=[...c,...t.marks.map(t=>({mark:t,from:n,to:o}))]}}),0===a)return!1;const u=c.filter(t=>!s||s.name===t.mark.type.name).filter(t=>K(t.mark.attrs,n)).reduce((t,e)=>{const n=e.to-e.from;return t+n},0),l=c.filter(t=>!s||t.mark.type!==s&&t.mark.type.excludes(s)).reduce((t,e)=>{const n=e.to-e.from;return t+n},0),h=u>0?u+l:u;return h>=a}function X(t,e,n={}){if(!e)return Y(t,null,n)||G(t,null,n);const r=U(e,t.schema);return"node"===r?Y(t,e,n):"mark"===r&&G(t,e,n)}function Q(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Z(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function tt(t,e,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof t&&null!==t)try{return Array.isArray(t)?o["c"].fromArray(t.map(t=>e.nodeFromJSON(t))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),tt("",e,n)}if("string"===typeof t){const r=o["a"].fromSchema(e);return n.slice?r.parseSlice(Z(t),n.parseOptions).content:r.parse(Z(t),n.parseOptions)}return tt("",e,n)}function et(t,e,n={}){return tt(t,e,{slice:!1,parseOptions:n})}function nt(t,e){const n=o["b"].fromSchema(e).serializeFragment(t.content),r=document.implementation.createHTMLDocument(),i=r.createElement("div");return i.appendChild(n),i.innerHTML}function rt(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function it(t){const e=document.querySelector("style[data-tiptap-style]");if(null!==e)return e;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(n),n}class ot{constructor(t,e){this.editor=t,this.commands=e}createCommands(){const{commands:t,editor:e}=this,{state:n,view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([t,e])=>{const n=(...t)=>{const n=e(...t)(o);return i.getMeta("preventDispatch")||r.dispatch(i),n};return[t,n]}))}createChain(t,e=!0){const{commands:n,editor:r}=this,{state:i,view:o}=r,s=[],a=!!t,c=t||i.tr,u=()=>(a||!e||c.getMeta("preventDispatch")||o.dispatch(c),s.every(t=>!0===t)),l={...Object.fromEntries(Object.entries(n).map(([t,n])=>{const r=(...t)=>{const r=this.buildProps(c,e),i=n(...t)(r);return s.push(i),l};return[t,r]})),run:u};return l}createCan(t){const{commands:e,editor:n}=this,{state:r}=n,i=void 0,o=t||r.tr,s=this.buildProps(o,i),a=Object.fromEntries(Object.entries(e).map(([t,e])=>[t,(...t)=>e(...t)({...s,dispatch:i})]));return{...a,chain:()=>this.createChain(o,i)}}buildProps(t,e=!0){const{editor:n,commands:r}=this,{state:i,view:o}=n;i.storedMarks&&t.setStoredMarks(i.storedMarks);const s={tr:t,editor:n,view:o,state:this.chainableState(t,i),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([t,e])=>[t,(...t)=>e(...t)(s)]))}};return s}chainableState(t,e){let{selection:n}=t,{doc:r}=t,{storedMarks:i}=t;return{...e,schema:e.schema,plugins:e.plugins,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return r},get tr(){return n=t.selection,r=t.doc,i=t.storedMarks,t}}}}function st(t,e,n={}){if(void 0===t.config[e]&&t.parent)return st(t.parent,e,n);if("function"===typeof t.config[e]){const r=t.config[e].bind({...n,parent:t.parent?st(t.parent,e,n):null});return r}return t.config[e]}function at(t){const e=t.filter(t=>"extension"===t.type),n=t.filter(t=>"node"===t.type),r=t.filter(t=>"mark"===t.type);return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function ct(t){const e=[],{nodeExtensions:n,markExtensions:r}=at(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return t.forEach(t=>{const n={name:t.name,options:t.options},r=st(t,"addGlobalAttributes",n);if(!r)return;const i=r();i.forEach(t=>{t.types.forEach(n=>{Object.entries(t.attributes).forEach(([t,r])=>{e.push({type:n,name:t,attribute:{...o,...r}})})})})}),i.forEach(t=>{const n={name:t.name,options:t.options},r=st(t,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach(([n,r])=>{e.push({type:t.name,name:n,attribute:{...o,...r}})})}),e}function ut(...t){return t.filter(t=>!!t).reduce((t,e)=>{const n={...t};return Object.entries(e).forEach(([t,e])=>{const r=n[t];n[t]=r?"class"===t?[n[t],e].join(" "):"style"===t?[n[t],e].join("; "):e:e}),n},{})}function lt(t,e){return e.filter(t=>t.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]}).reduce((t,e)=>ut(t,e),{})}function ht(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function ft(t){return"string"!==typeof t?t:t.match(/^\d*(\.\d+)?$/)?Number(t):"true"===t||"false"!==t&&t}function pt(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;const i=e.filter(t=>t.attribute.rendered).reduce((t,e)=>{const r=e.attribute.parseHTML?e.attribute.parseHTML(n)||{}:{[e.name]:ft(n.getAttribute(e.name))},i=Object.fromEntries(Object.entries(r).filter(([,t])=>void 0!==t&&null!==t));return{...t,...i}},{});return{...r,...i}}}}function dt(t,e,...n){return"function"===typeof t?e?t.bind(e)(...n):t(...n):t}function mt(t){return Object.fromEntries(Object.entries(t).filter(([t,e])=>("attrs"!==t||!ht(e))&&(null!==e&&void 0!==e)))}function gt(t){var e;const n=ct(t),{nodeExtensions:r,markExtensions:i}=at(t),s=null===(e=r.find(t=>st(t,"topNode")))||void 0===e?void 0:e.name,a=Object.fromEntries(r.map(e=>{const r=n.filter(t=>t.type===e.name),i={name:e.name,options:e.options},o=t.reduce((t,n)=>{const r=st(n,"extendNodeSchema",i);return{...t,...r?r(e):{}}},{}),s=mt({...o,content:dt(st(e,"content",i)),marks:dt(st(e,"marks",i)),group:dt(st(e,"group",i)),inline:dt(st(e,"inline",i)),atom:dt(st(e,"atom",i)),selectable:dt(st(e,"selectable",i)),draggable:dt(st(e,"draggable",i)),code:dt(st(e,"code",i)),defining:dt(st(e,"defining",i)),isolating:dt(st(e,"isolating",i)),attrs:Object.fromEntries(r.map(t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]}))}),a=dt(st(e,"parseHTML",i));a&&(s.parseDOM=a.map(t=>pt(t,r)));const c=st(e,"renderHTML",i);return c&&(s.toDOM=t=>c({node:t,HTMLAttributes:lt(t,r)})),[e.name,s]})),c=Object.fromEntries(i.map(e=>{const r=n.filter(t=>t.type===e.name),i={name:e.name,options:e.options},o=t.reduce((t,n)=>{const r=st(n,"extendMarkSchema",i);return{...t,...r?r(e):{}}},{}),s=mt({...o,inclusive:dt(st(e,"inclusive",i)),excludes:dt(st(e,"excludes",i)),group:dt(st(e,"group",i)),spanning:dt(st(e,"spanning",i)),attrs:Object.fromEntries(r.map(t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]}))}),a=dt(st(e,"parseHTML",i));a&&(s.parseDOM=a.map(t=>pt(t,r)));const c=st(e,"renderHTML",i);return c&&(s.toDOM=t=>c({mark:t,HTMLAttributes:lt(t,r)})),[e.name,s]}));return new o["i"]({topNode:s,nodes:a,marks:c})}function vt(t,e){return e.nodes[t]?e.nodes[t]:e.marks[t]?e.marks[t]:null}class yt{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=yt.resolve(t),this.schema=gt(this.extensions),this.extensions.forEach(t=>{var e;const n={name:t.name,options:t.options,editor:this.editor,type:vt(t.name,this.schema)};if("mark"===t.type){const r=null===(e=dt(st(t,"keepOnSplit",n)))||void 0===e||e;r&&this.splittableMarks.push(t.name)}const r=st(t,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=st(t,"onCreate",n);i&&this.editor.on("create",i);const o=st(t,"onUpdate",n);o&&this.editor.on("update",o);const s=st(t,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=st(t,"onTransaction",n);a&&this.editor.on("transaction",a);const c=st(t,"onFocus",n);c&&this.editor.on("focus",c);const u=st(t,"onBlur",n);u&&this.editor.on("blur",u);const l=st(t,"onDestroy",n);l&&this.editor.on("destroy",l)})}static resolve(t){return yt.sort(yt.flatten(t))}static flatten(t){return t.map(t=>{const e={name:t.name,options:t.options},n=st(t,"addExtensions",e);return n?[t,...this.flatten(n())]:t}).flat(10)}static sort(t){const e=100;return t.sort((t,n)=>{const r=st(t,"priority")||e,i=st(n,"priority")||e;return r>i?-1:r<i?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,editor:this.editor,type:vt(e.name,this.schema)},r=st(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){return[...this.extensions].reverse().map(t=>{const e={name:t.name,options:t.options,editor:this.editor,type:vt(t.name,this.schema)},n=[],r=st(t,"addKeyboardShortcuts",e);if(r){const t=Object.fromEntries(Object.entries(r()).map(([t,e])=>[t,()=>e({editor:this.editor})])),e=Object(s["b"])(t);n.push(e)}const i=st(t,"addInputRules",e);if(this.editor.options.enableInputRules&&i){const t=i(),e=t.length?[Object(a["b"])({rules:t})]:[];n.push(...e)}const o=st(t,"addPasteRules",e);if(this.editor.options.enablePasteRules&&o){const t=o();n.push(...t)}const c=st(t,"addProseMirrorPlugins",e);if(c){const t=c();n.push(...t)}return n}).flat()}get attributes(){return ct(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=at(this.extensions);return Object.fromEntries(e.filter(t=>!!st(t,"addNodeView")).map(e=>{const n=this.attributes.filter(t=>t.type===e.name),r={name:e.name,options:e.options,editor:t,type:H(e.name,this.schema)},i=st(e,"addNodeView",r);if(!i)return[];const o=(r,o,s,a)=>{const c=lt(r,n);return i()({editor:t,node:r,getPos:s,decorations:a,HTMLAttributes:c,extension:e})};return[e.name,o]}))}get textSerializers(){const{editor:t}=this,{nodeExtensions:e}=at(this.extensions);return Object.fromEntries(e.filter(t=>!!st(t,"renderText")).map(e=>{const n={name:e.name,options:e.options,editor:t,type:H(e.name,this.schema)},r=st(e,"renderText",n);if(!r)return[];const i=t=>r(t);return[e.name,i]}))}}class bt{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(t=>t.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(t=>t!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function wt(t){return Object.prototype.toString.call(t).slice(8,-1)}function kt(t){return"Object"===wt(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function St(t,e){const n={...t};return kt(t)&&kt(e)&&Object.keys(e).forEach(r=>{kt(e[r])?r in t?n[r]=St(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class xt{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new xt(t)}configure(t={}){const e=this.extend();return e.options=St(this.options,t),e}extend(t={}){const e=new xt(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}const _t=(t,e,n,r,i)=>{let o="",s=!0;return t.state.doc.nodesBetween(e,n,(a,c)=>{var u;const l=t.extensionManager.textSerializers[a.type.name];l?(o+=l({node:a}),s=!r):a.isText?(o+=null===(u=null===a||void 0===a?void 0:a.text)||void 0===u?void 0:u.slice(Math.max(e,c)-c,n-c),s=!r):a.isLeaf&&i?(o+=i,s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o},Ct=xt.create({name:"editable",addProseMirrorPlugins(){return[new r["d"]({key:new r["e"]("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{from:e,to:n}=t.state.selection;return _t(t,e,n,"\n")}}})]}}),Ot=()=>({view:t})=>{const e=t.dom;return e.blur(),!0};var Et=Object.freeze({__proto__:null,blur:Ot});const At=(t=!1)=>({commands:e})=>e.setContent("",t);var Mt=Object.freeze({__proto__:null,clearContent:At});const Tt=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return i.forEach(r=>{t.doc.nodesBetween(r.$from.pos,r.$to.pos,(t,r)=>{if(t.type.isText)return;const i=e.doc.resolve(e.mapping.map(r)),o=e.doc.resolve(e.mapping.map(r+t.nodeSize)),s=i.blockRange(o);if(!s)return;const a=Object(c["j"])(s);if(t.type.isTextblock&&n){const{defaultType:t}=i.parent.contentMatchAt(i.index());e.setNodeMarkup(s.start,t)}(a||0===a)&&n&&e.lift(s,a)})}),!0};var Rt=Object.freeze({__proto__:null,clearNodes:Tt});const It=t=>e=>t(e);var Dt=Object.freeze({__proto__:null,command:It});const Nt=()=>({state:t,dispatch:e})=>k(t,e);var jt=Object.freeze({__proto__:null,createParagraphNear:Nt});const Pt=t=>({tr:e,state:n,dispatch:r})=>{const i=H(t,n.schema),o=e.selection.$anchor;for(let t=o.depth;t>0;t-=1){const n=o.node(t);if(n.type===i){if(r){const n=o.before(t),r=o.after(t);e.delete(n,r).scrollIntoView()}return!0}}return!1};var Lt=Object.freeze({__proto__:null,deleteNode:Pt});const Ft=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0};var Bt=Object.freeze({__proto__:null,deleteRange:Ft});const zt=()=>({state:t,dispatch:e})=>u(t,e);var $t=Object.freeze({__proto__:null,deleteSelection:zt});const Ut=()=>({commands:t})=>t.keyboardShortcut("Enter");var Ht=Object.freeze({__proto__:null,enter:Ut});const Vt=()=>({state:t,dispatch:e})=>w(t,e);var Wt=Object.freeze({__proto__:null,exitCode:Vt});function qt(t,e,n={}){return t.find(t=>t.type===e&&K(t.attrs,n))}function Jt(t,e,n={}){return!!qt(t,e,n)}function Kt(t,e,n={}){if(!t||!e)return;const r=t.parent.childAfter(t.parentOffset);if(!r.node)return;const i=qt(r.node.marks,e,n);if(!i)return;let o=t.index(),s=t.start()+r.offset,a=o+1,c=s+r.node.nodeSize;qt(r.node.marks,e,n);while(o>0&&i.isInSet(t.parent.child(o-1).marks))o-=1,s-=t.parent.child(o).nodeSize;while(a<t.parent.childCount&&Jt(t.parent.child(a).marks,e,n))c+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:c}}const Yt=(t,e={})=>({tr:n,state:i,dispatch:o})=>{const s=W(t,i.schema),{doc:a,selection:c}=n,{$from:u,from:l,to:h}=c;if(o){const t=Kt(u,s,e);if(t&&t.from<=l&&t.to>=h){const e=r["h"].create(a,t.from,t.to);n.setSelection(e)}}return!0};var Gt=Object.freeze({__proto__:null,extendMarkRange:Yt});const Xt=t=>e=>{const n="function"===typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1};var Qt=Object.freeze({__proto__:null,first:Xt});function Zt(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function te(t){var e;return"class"===(null===(e=t.constructor)||void 0===e?void 0:e.toString().substring(0,5))}function ee(t){return t&&"object"===typeof t&&!Array.isArray(t)&&!te(t)}function ne(t){return ee(t)&&t instanceof r["h"]}function re(t,e=null){if(!e)return null;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){const{size:e}=t.doc.content;return{from:e,to:e}}return{from:e,to:e}}const ie=(t=null)=>({editor:e,view:n,tr:i,dispatch:o})=>{if(n.hasFocus()&&null===t||!1===t)return!0;if(o&&null===t&&!ne(e.state.selection))return n.focus(),!0;const{from:s,to:a}=re(e.state,t)||e.state.selection,{doc:c,storedMarks:u}=i,l=Zt(s,0,c.content.size),h=Zt(a,0,c.content.size),f=r["h"].create(c,l,h),p=e.state.selection.eq(f);return o&&(i.setSelection(f),p&&u&&i.setStoredMarks(u),n.focus()),!0};var oe=Object.freeze({__proto__:null,focus:ie});const se=(t,e)=>n=>t.every((t,r)=>e(t,{...n,index:r}));var ae=Object.freeze({__proto__:null,forEach:se});const ce=t=>({tr:e,commands:n})=>n.insertContentAt({from:e.selection.from,to:e.selection.to},t);var ue=Object.freeze({__proto__:null,insertContent:ce});function le(t,e,n){const i=t.steps.length-1;if(i<e)return;const o=t.steps[i];if(!(o instanceof c["c"]||o instanceof c["b"]))return;const s=t.mapping.maps[i];let a=0;s.forEach((t,e,n,r)=>{0===a&&(a=r)}),t.setSelection(r["f"].near(t.doc.resolve(a),n))}const he=(t,e)=>({tr:n,dispatch:r,editor:i})=>{if(r){const r=tt(e,i.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===r.toString())return!0;const{from:o,to:s}="number"===typeof t?{from:t,to:t}:t;n.replaceWith(o,s,r),le(n,n.steps.length-1,1)}return!0};var fe=Object.freeze({__proto__:null,insertContentAt:he});const pe=()=>({state:t,dispatch:e})=>l(t,e);var de=Object.freeze({__proto__:null,joinBackward:pe});const me=()=>({state:t,dispatch:e})=>d(t,e);var ge=Object.freeze({__proto__:null,joinForward:me});const ve="undefined"!==typeof navigator&&/Mac/.test(navigator.platform);function ye(t){const e=t.split(/-(?!$)/);let n,r,i,o,s=e[e.length-1];"Space"===s&&(s=" ");for(let a=0;a<e.length-1;a+=1){const t=e[a];if(/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))n=!0;else if(/^(c|ctrl|control)$/i.test(t))r=!0;else if(/^s(hift)?$/i.test(t))i=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);ve?o=!0:r=!0}}return n&&(s="Alt-"+s),r&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}const be=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=ye(t).split(/-(?!$)/),s=o.find(t=>!["Alt","Ctrl","Meta","Shift"].includes(t)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",t=>t(n,a))});return null===c||void 0===c||c.steps.forEach(t=>{const e=t.map(r.mapping);e&&i&&r.maybeStep(e)}),!0};var we=Object.freeze({__proto__:null,keyboardShortcut:be});const ke=(t,e={})=>({state:n,dispatch:r})=>{const i=H(t,n.schema),o=Y(n,i,e);return!!o&&v(n,r)};var Se=Object.freeze({__proto__:null,lift:ke});const xe=()=>({state:t,dispatch:e})=>S(t,e);var _e=Object.freeze({__proto__:null,liftEmptyBlock:xe});const Ce=t=>({state:e,dispatch:n})=>{const r=H(t,e.schema);return F(r)(e,n)};var Oe=Object.freeze({__proto__:null,liftListItem:Ce});const Ee=()=>({state:t,dispatch:e})=>y(t,e);var Ae=Object.freeze({__proto__:null,newlineInCode:Ee});const Me=(t,e={})=>({state:n,commands:r})=>{console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");const{from:i,to:o}=n.selection,s={from:i,to:o};return r.replaceRange(s,t,e)};var Te=Object.freeze({__proto__:null,replace:Me});const Re=(t,e,n={})=>({tr:r,state:i,dispatch:o})=>{console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");const s=H(e,i.schema),{from:a,to:c}=t;return o&&r.replaceRangeWith(a,c,s.create(n)),!0};var Ie=Object.freeze({__proto__:null,replaceRange:Re});function De(t,e){const n="string"===typeof e?[e]:e;return Object.keys(t).reduce((e,r)=>(n.includes(r)||(e[r]=t[r]),e),{})}const Ne=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=U("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=H(t,r.schema)),"mark"===a&&(s=W(t,r.schema)),i&&n.selection.ranges.forEach(t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,(t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,De(t.attrs,e)),s&&t.marks.length&&t.marks.forEach(i=>{s===i.type&&n.addMark(r,r+t.nodeSize,s.create(De(i.attrs,e)))})})}),!0)};var je=Object.freeze({__proto__:null,resetAttributes:Ne});const Pe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0);var Le=Object.freeze({__proto__:null,scrollIntoView:Pe});const Fe=()=>({state:t,dispatch:e})=>C(t,e);var Be=Object.freeze({__proto__:null,selectAll:Fe});const ze=()=>({state:t,dispatch:e})=>f(t,e);var $e=Object.freeze({__proto__:null,selectNodeBackward:ze});const Ue=()=>({state:t,dispatch:e})=>m(t,e);var He=Object.freeze({__proto__:null,selectNodeForward:Ue});const Ve=()=>({state:t,dispatch:e})=>_(t,e);var We=Object.freeze({__proto__:null,selectParentNode:Ve});const qe=(t,e=!1,n={})=>({tr:i,editor:o,dispatch:s})=>{const{doc:a}=i,c=et(t,o.schema,n),u=r["h"].create(a,0,a.content.size);return s&&i.setSelection(u).replaceSelectionWith(c,!1).setMeta("preventUpdate",!e),!0};var Je=Object.freeze({__proto__:null,setContent:qe});const Ke=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,c=W(t,r.schema);if(i)if(s){const t=q(r,c);n.addStoredMark(c.create({...t,...e}))}else a.forEach(t=>{const i=t.$from.pos,o=t.$to.pos;r.doc.nodesBetween(i,o,(t,r)=>{const s=Math.max(r,i),a=Math.min(r+t.nodeSize,o),u=t.marks.find(t=>t.type===c);u?t.marks.forEach(t=>{c===t.type&&n.addMark(s,a,c.create({...t.attrs,...e}))}):n.addMark(s,a,c.create(e))})});return!0};var Ye=Object.freeze({__proto__:null,setMark:Ke});const Ge=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0);var Xe=Object.freeze({__proto__:null,setMeta:Ge});const Qe=(t,e={})=>({state:n,dispatch:r})=>{const i=H(t,n.schema);return M(i,e)(n,r)};var Ze=Object.freeze({__proto__:null,setNode:Qe});const tn=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,i=Zt(t,0,n.content.size),o=r["c"].create(n,i);e.setSelection(o)}return!0};var en=Object.freeze({__proto__:null,setNodeSelection:tn});const nn=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:i,to:o}="number"===typeof t?{from:t,to:t}:t,s=Zt(i,0,n.content.size),a=Zt(o,0,n.content.size),c=r["h"].create(n,s,a);e.setSelection(c)}return!0};var rn=Object.freeze({__proto__:null,setTextSelection:nn});const on=t=>({state:e,dispatch:n})=>{const r=H(t,e.schema);return $(r)(e,n)};var sn=Object.freeze({__proto__:null,sinkListItem:on});function an(t,e,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=t.find(t=>t.type===e&&t.name===n);return!!r&&r.attribute.keepOnSplit}))}function cn(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function un(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(t=>null===e||void 0===e?void 0:e.includes(t.type.name));t.tr.ensureMarks(r)}}const ln=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:o})=>{const{selection:s,doc:a}=e,{$from:u,$to:l}=s,h=o.extensionManager.attributes,f=an(h,u.node().type.name,u.node().attrs);if(s instanceof r["c"]&&s.node.isBlock)return!(!u.parentOffset||!Object(c["f"])(a,u.pos))&&(i&&(t&&un(n,o.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(i){const i=l.parentOffset===l.parent.content.size;s instanceof r["h"]&&e.deleteSelection();const a=0===u.depth?void 0:cn(u.node(-1).contentMatchAt(u.indexAfter(-1)));let h=i&&a?[{type:a,attrs:f}]:void 0,p=Object(c["f"])(e.doc,e.mapping.map(u.pos),1,h);if(h||p||!Object(c["f"])(e.doc,e.mapping.map(u.pos),1,a?[{type:a}]:void 0)||(p=!0,h=a?[{type:a,attrs:f}]:void 0),p&&(e.split(e.mapping.map(u.pos),1,h),a&&!i&&!u.parentOffset&&u.parent.type!==a)){const t=e.mapping.map(u.before()),n=e.doc.resolve(t);u.node(-1).canReplaceWith(n.index(),n.index()+1,a)&&e.setNodeMarkup(e.mapping.map(u.before()),a)}t&&un(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0};var hn=Object.freeze({__proto__:null,splitBlock:ln});const fn=t=>({tr:e,state:n,dispatch:i,editor:s})=>{var a;const u=H(t,n.schema),{$from:l,$to:h}=n.selection,f=n.selection.node;if(f&&f.isBlock||l.depth<2||!l.sameParent(h))return!1;const p=l.node(-1);if(p.type!==u)return!1;const d=s.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==u||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let t=o["c"].empty;const n=l.index(-1)?1:l.index(-2)?2:3;for(let e=l.depth-n;e>=l.depth-3;e-=1)t=o["c"].from(l.node(e).copy(t));const i=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,s=an(d,l.node().type.name,l.node().attrs),c=(null===(a=u.contentMatch.defaultType)||void 0===a?void 0:a.createAndFill(s))||void 0;t=t.append(o["c"].from(u.createAndFill(null,c)||void 0));const h=l.before(l.depth-(n-1));e.replace(h,l.after(-i),new o["j"](t,4-n,0));let f=-1;e.doc.nodesBetween(h,e.doc.content.size,(t,e)=>{if(f>-1)return!1;t.isTextblock&&0===t.content.size&&(f=e+1)}),f>-1&&e.setSelection(r["h"].near(e.doc.resolve(f))),e.scrollIntoView()}return!0}const m=h.pos===l.end()?p.contentMatchAt(0).defaultType:null,g=an(d,p.type.name,p.attrs),v=an(d,l.node().type.name,l.node().attrs);e.delete(l.pos,h.pos);const y=m?[{type:u,attrs:g},{type:m,attrs:v}]:[{type:u,attrs:g}];return!!Object(c["f"])(e.doc,l.pos,2)&&(i&&e.split(l.pos,2,y).scrollIntoView(),!0)};var pn=Object.freeze({__proto__:null,splitListItem:fn});function dn(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function mn(t){return e=>dn(e.$from,t)}function gn(t,e){const{nodeExtensions:n}=at(e),r=n.find(e=>e.name===t);if(!r)return!1;const i={name:r.name,options:r.options},o=dt(st(r,"group",i));return"string"===typeof o&&o.split(" ").includes("list")}const vn=(t,e)=>({editor:n,tr:r,state:i,dispatch:o,chain:s,commands:a,can:c})=>{const{extensions:u}=n.extensionManager,l=H(t,i.schema),h=H(e,i.schema),{selection:f}=i,{$from:p,$to:d}=f,m=p.blockRange(d);if(!m)return!1;const g=mn(t=>gn(t.type.name,u))(f);if(m.depth>=1&&g&&m.depth-g.depth<=1){if(g.node.type===l)return a.liftListItem(h);if(gn(g.node.type.name,u)&&l.validContent(g.node.content)&&o)return r.setNodeMarkup(g.pos,l),!0}const v=c().wrapInList(l);return v?a.wrapInList(l):s().clearNodes().wrapInList(l).run()};var yn=Object.freeze({__proto__:null,toggleList:vn});const bn=(t,e={})=>({state:n,commands:r})=>{const i=W(t,n.schema),o=G(n,i,e);return o?r.unsetMark(i):r.setMark(i,e)};var wn=Object.freeze({__proto__:null,toggleMark:bn});const kn=(t,e,n={})=>({state:r,commands:i})=>{const o=H(t,r.schema),s=H(e,r.schema),a=Y(r,o,n);return a?i.setNode(s):i.setNode(o,n)};var Sn=Object.freeze({__proto__:null,toggleNode:kn});const xn=(t,e={})=>({state:n,dispatch:r})=>{const i=H(t,n.schema),o=Y(n,i,e);return o?v(n,r):A(i,e)(n,r)};var _n=Object.freeze({__proto__:null,toggleWrap:xn});const Cn=()=>({state:t,dispatch:e})=>Object(a["d"])(t,e);var On=Object.freeze({__proto__:null,undoInputRule:Cn});const En=()=>({tr:t,state:e,dispatch:n})=>{const{selection:r}=t,{empty:i,ranges:o}=r;return i||n&&Object.entries(e.schema.marks).forEach(([,e])=>{o.forEach(n=>{t.removeMark(n.$from.pos,n.$to.pos,e)})}),!0};var An=Object.freeze({__proto__:null,unsetAllMarks:En});const Mn=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=e,o=W(t,n.schema),{$from:s,empty:a,ranges:c}=i;if(r){if(a){let{from:t,to:n}=i;const r=Kt(s,o);r&&(t=r.from,n=r.to),e.removeMark(t,n,o)}else c.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos,o)});e.removeStoredMark(o)}return!0};var Tn=Object.freeze({__proto__:null,unsetMark:Mn});const Rn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=U("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=H(t,r.schema)),"mark"===a&&(s=W(t,r.schema)),i&&n.selection.ranges.forEach(t=>{const i=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(i,a,(t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach(o=>{if(s===o.type){const c=Math.max(r,i),u=Math.min(r+t.nodeSize,a);n.addMark(c,u,s.create({...o.attrs,...e}))}})})}),!0)};var In=Object.freeze({__proto__:null,updateAttributes:Rn});const Dn=(t,e={})=>({state:n,dispatch:r})=>{const i=H(t,n.schema),o=Y(n,i,e);return!o&&A(i,e)(n,r)};var Nn=Object.freeze({__proto__:null,wrapIn:Dn});const jn=(t,e={})=>({state:n,dispatch:r})=>{const i=H(t,n.schema);return P(i,e)(n,r)};var Pn=Object.freeze({__proto__:null,wrapInList:jn});const Ln=xt.create({name:"commands",addCommands(){return{...Et,...Mt,...Rt,...Dt,...jt,...Lt,...Bt,...$t,...Ht,...Wt,...Gt,...Qt,...oe,...ae,...ue,...fe,...de,...ge,...we,...Se,..._e,...Oe,...Ae,...Te,...Ie,...je,...Le,...Be,...$e,...He,...We,...Je,...Ye,...Xe,...Ze,...en,...rn,...sn,...hn,...pn,...yn,...wn,...Sn,..._n,...On,...An,...Tn,...In,...Nn,...Pn}}}),Fn=xt.create({name:"editable",addProseMirrorPlugins(){return[new r["d"]({key:new r["e"]("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bn=xt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new r["d"]({key:new r["e"]("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),zn=xt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:t})=>[()=>t.undoInputRule(),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:t})=>[()=>t.deleteSelection(),()=>t.joinForward(),()=>t.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:()=>t(),"Mod-Backspace":()=>t(),Delete:()=>e(),"Mod-Delete":()=>e()}}});var $n=Object.freeze({__proto__:null,ClipboardTextSerializer:Ct,Commands:Ln,Editable:Fn,FocusEvents:Bn,Keymap:zn});const Un='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';class Hn extends bt{constructor(t={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get commands(){return this.commandManager.createCommands()}chain(){return this.commandManager.createChain()}can(){return this.commandManager.createCan()}injectCSS(){this.options.injectCSS&&document&&(this.css=it(Un))}setOptions(t={}){this.options={...this.options,...t}}setEditable(t){this.setOptions({editable:t}),this.view&&this.state&&!this.isDestroyed&&this.view.updateState(this.state)}get isEditable(){return this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n="function"===typeof e?e(t,this.state.plugins):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"===typeof t?t+"$":t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(t=>!t.key.startsWith(e))});this.view.updateState(n)}createExtensionManager(){const t=Object.entries($n).map(([,t])=>t),e=[...t,...this.options.extensions].filter(t=>["extension","node","mark"].includes(null===t||void 0===t?void 0:t.type));this.extensionManager=new yt(e,this)}createCommandManager(){this.commandManager=new ot(this,this.extensionManager.commands)}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new i["c"](this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r["b"].create({doc:et(this.options.content,this.schema,this.options.parseOptions)})});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews();const e=this.view.dom;e.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach(t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)}):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this});const r=t.getMeta("focus"),i=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event}),i&&this.emit("blur",{editor:this,event:i.event}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return J(this.state,t)}getNodeAttributes(t){return console.warn("[tiptap warn]: editor.getNodeAttributes() is deprecated. please use editor.getAttributes() instead."),V(this.state,t)}getMarkAttributes(t){return console.warn("[tiptap warn]: editor.getMarkAttributes() is deprecated. please use editor.getAttributes() instead."),q(this.state,t)}isActive(t,e){const n="string"===typeof t?t:null,r="string"===typeof t?e:t;return X(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return nt(this.state.doc,this.schema)}get isEmpty(){return rt(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),Q(this.css)}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}class Vn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new Vn(t)}configure(t={}){const e=this.extend();return e.options=St(this.options,t),e}extend(t={}){const e=new Vn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}class Wn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,this.options=this.config.defaultOptions}static create(t={}){return new Wn(t)}configure(t={}){const e=this.extend();return e.options=St(this.options,t),e}extend(t={}){const e=new Wn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,e.options=t.defaultOptions?t.defaultOptions:e.parent.options,e}}function qn(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}class Jn{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return null}get contentDOM(){return null}onDragStart(t){var e,n,i;const{view:o}=this.editor,s=t.target,a=3===s.nodeType?null===(e=s.parentElement)||void 0===e?void 0:e.closest("[data-drag-handle]"):s.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(s))||!a)return;let c=0,u=0;if(this.dom!==a){const e=this.dom.getBoundingClientRect(),n=a.getBoundingClientRect();c=n.x-e.x+t.offsetX,u=n.y-e.y+t.offsetY}null===(i=t.dataTransfer)||void 0===i||i.setDragImage(this.dom,c,u);const l=r["c"].create(o.state.doc,this.getPos()),h=o.state.tr.setSelection(l);o.dispatch(h)}stopEvent(t){var e;if(!this.dom)return!1;if("function"===typeof this.options.stopEvent)return this.options.stopEvent({event:t});const n=t.target,i=this.dom.contains(n)&&!(null===(e=this.contentDOM)||void 0===e?void 0:e.contains(n));if(!i)return!1;const o=["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable;if(o)return!0;const{isEditable:s}=this.editor,{isDragging:a}=this,c=!!this.node.type.spec.draggable,u=r["c"].isSelectable(this.node),l="copy"===t.type,h="paste"===t.type,f="cut"===t.type,p="mousedown"===t.type,d=t.type.startsWith("drag")||"drop"===t.type;if(!c&&u&&d&&t.preventDefault(),c&&d&&!a)return t.preventDefault(),!1;if(c&&s&&!a&&p){const t=n.closest("[data-drag-handle]"),e=t&&(this.dom===t||this.dom.contains(t));e&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(a||l||h||f||p&&u)}ignoreMutation(t){if(!this.dom||!this.contentDOM)return!0;if("function"===typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:t});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===t.type)return!1;if(this.dom.contains(t.target)&&"childList"===t.type&&qn()){const e=[...Array.from(t.addedNodes),...Array.from(t.removedNodes)];if(e.every(t=>t.isContentEditable))return!1}return this.contentDOM===t.target&&"attributes"===t.type||!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0})}deleteNode(){const t=this.getPos(),e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}}function Kn(t,e,n){return new a["a"](t,(t,r,i,o)=>{const s=n instanceof Function?n(r):n,{tr:a}=t;return r[0]&&a.replaceWith(i-1,o,e.create(s)),a})}function Yn(t,e,n){let r=[];return n.doc.nodesBetween(t,e,(t,e)=>{r=[...r,...t.marks.map(n=>({from:e,to:e+t.nodeSize,mark:n}))]}),r}function Gn(t,e,n){return new a["a"](t,(t,r,i,o)=>{const s=n instanceof Function?n(r):n,{tr:a}=t,c=r[r.length-1],u=r[0];let l=o;if(c){const n=u.search(/\S/),r=i+u.indexOf(c),h=r+c.length,f=Yn(i,o,t).filter(t=>{const{excluded:n}=t.mark.type;return n.find(t=>t.name===e.name)}).filter(t=>t.to>r);if(f.length)return null;h<o&&a.delete(h,o),r>i&&a.delete(i+n,r),l=i+n+c.length,a.addMark(i+n,l,e.create(s)),a.removeStoredMark(e)}return a})}function Xn(t,e,n){const i=(r,s)=>{const a=[];return r.forEach(r=>{if(r.isText&&r.text){const{text:i}=r;let o,c=0;while(null!==(o=t.exec(i))){const t=Math.max(o.length-2,0),i=Math.max(o.length-1,0);if(null===s||void 0===s?void 0:s.type.allowsMarkType(e)){const s=o.index,u=s+o[0].indexOf(o[t]),l=u+o[t].length,h=u+o[t].lastIndexOf(o[i]),f=h+o[i].length,p=n instanceof Function?n(o):n;if(!p&&void 0!==p)continue;u>0&&a.push(r.cut(c,u)),a.push(r.cut(h,f).mark(e.create(p).addToSet(r.marks))),c=l}}c<i.length&&a.push(r.cut(c))}else a.push(r.copy(i(r.content,r)))}),o["c"].fromArray(a)};return new r["d"]({key:new r["e"]("markPasteRule"),props:{transformPasted:t=>new o["j"](i(t.content),t.openStart,t.openEnd)}})}function Qn(t){return ee(t)&&t instanceof r["c"]}function Zn(t,e,n){const r=t.coordsAtPos(e),i=t.coordsAtPos(n,-1),o=Math.min(r.top,i.top),s=Math.max(r.bottom,i.bottom),a=Math.min(r.left,i.left),c=Math.max(r.right,i.right),u=c-a,l=s-o,h=a,f=o,p={top:o,bottom:s,left:a,right:c,width:u,height:l,x:h,y:f};return{...p,toJSON:()=>p}}},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),s=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),h=n("1dde"),f=n("b622"),p=n("2d00"),d=f("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=h("concat"),b=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)},w=!v||!y;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,n,r,i,o,s=a(this),h=l(s,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?s:arguments[e],b(o)){if(i=c(o.length),f+i>m)throw TypeError(g);for(n=0;n<i;n++,f++)n in o&&u(h,f,o[n])}else{if(f>=m)throw TypeError(g);u(h,f++,o)}return h.length=f,h}})},"9a1f":function(t,e,n){var r=n("825a"),i=n("35a1");t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},"9a61":function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));n("9b6a");var r=n("7428"),i=(n("576a"),n("304a"),n("1e58")),o=n("2309"),s=n("058a");let a=null;const c=()=>{const t=a;a=null,t.forEach((t,e)=>{const n=e.state.tr;t.forEach((t,e)=>{n.setMeta(e,t)}),e.dispatch(n)})},u=(t,e,n)=>{a||(a=new Map,s["b"](0,c)),o["e"](a,t,o["c"]).set(e,n)},l=(t,e,n)=>{if(0===t)return r["s"](e,0);let o=null===e._first?null:e._first.content.type;while(null!==o&&e!==o){if(o.constructor===r["l"]){if(o._length>=t)return r["s"](o,t);if(t-=o._length,null!==o._item&&null!==o._item.next)o=o._item.next.content.type;else{do{o=null===o._item?null:o._item.parent,t--}while(o!==e&&null!==o&&null!==o._item&&null===o._item.next);null!==o&&o!==e&&(o=null===o._item?null:o._item.next.content.type)}}else{const i=(n.get(o)||{nodeSize:0}).nodeSize;if(null!==o._first&&t<i)o=o._first.content.type,t--;else{if(1===t&&0===o._length&&i>1)return new r["f"](null===o._item?null:o._item.id,null===o._item?r["w"](o):null,null);if(t-=i,null!==o._item&&null!==o._item.next)o=o._item.next.content.type;else{if(0===t)return o=null===o._item?o:o._item.parent,new r["f"](null===o._item?null:o._item.id,null===o._item?r["w"](o):null,null);do{o=o._item.parent,t--}while(o!==e&&null===o._item.next);o!==e&&(o=o._item.next.content.type)}}}if(null===o)throw i["c"]();if(0===t&&o.constructor!==r["l"]&&o!==e)return h(o._item.parent,o._item)}return r["s"](e,e._length)},h=(t,e)=>{let n=null,i=null;return null===t._item?i=r["w"](t):n=r["q"](t._item.id.client,t._item.id.clock),new r["f"](n,i,e.id)},f=(t,e,n,i)=>{const o=r["o"](n,t);if(null===o||o.type!==e&&!r["y"](e,o.type._item))return null;let s=o.type,a=0;if(s.constructor===r["l"])a=o.index;else if(null===s._item||!s._item.deleted){let t=s._first,e=0;while(e<s._length&&e<o.index&&null!==t){if(!t.deleted){const n=t.content.type;e++,n.constructor===r["l"]?a+=n._length:a+=i.get(n).nodeSize}t=t.right}a+=1}while(s!==e&&null!==s._item){const t=s._item.parent;if(null===t._item||!t._item.deleted){a+=1;let e=t._first;while(null!==e){const t=e.content.type;if(t===s)break;e.deleted||(t.constructor===r["l"]?a+=t._length:a+=i.get(t).nodeSize),e=e.right}}s=t}return a-1}},"9b6a":function(t,e,n){"use strict";n.d(e,"c",(function(){return k})),n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return z}));var r=n("3edb"),i=n("304a"),o=n("5313"),s=n("ca0e"),a=n("1d2f"),c=n("4aa6");n("2163");const u=(t,e)=>{let n=0,r=0;while(n<t.length&&n<e.length&&t[n]===e[n])n++;if(n!==t.length||n!==e.length)while(r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1])r++;return{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},l=u;var h=n("1e58"),f=n("70a9"),p=n("7428"),d=n("9a61"),m=n("c893"),g=n("1d8c"),v=n("b6f5");const y=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!p["x"](e.ds,t.id),b=[{light:"#ecd44433",dark:"#ecd444"}],w=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const n=c["a"]();t.forEach(t=>n.add(t)),e=e.filter(t=>!n.has(t))}t.set(n,m["a"](e))}return t.get(n)},k=(t,{colors:e=b,colorMapping:n=new Map,permanentUserData:r=null}={})=>{let i=!1;const s=new o["d"]({props:{editable:t=>{const e=f["b"].getState(t);return null==e.snapshot&&null==e.prevSnapshot}},key:f["b"],state:{init:(i,o)=>({type:t,doc:t.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:e,colorMapping:n,permanentUserData:r}),apply:(t,e)=>{const n=t.getMeta(f["b"]);if(void 0!==n){e=Object.assign({},e);for(const t in n)e[t]=n[t]}return e.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==e.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||setTimeout(()=>{null==n.restore?e.binding._renderSnapshot(n.snapshot,n.prevSnapshot,e):(e.binding._renderSnapshot(n.snapshot,n.snapshot,e),delete e.restore,delete e.snapshot,delete e.prevSnapshot,e.binding._prosemirrorChanged(e.binding.prosemirrorView.state.doc))},0)),e}},view:e=>{const n=new _(t,e);return setTimeout(()=>{n._forceRerender(),e.dispatch(e.state.tr.setMeta(f["b"],{binding:n}))},0),{update:()=>{const t=s.getState(e.state);null==t.snapshot&&null==t.prevSnapshot&&(i||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))&&(i=!0,n._prosemirrorChanged(e.state.doc))},destroy:()=>{n.destroy()}}}});return s},S=(t,e,n)=>{if(null!==e&&null!==e.anchor&&null!==e.head){const r=Object(d["b"])(n.doc,n.type,e.anchor,n.mapping),i=Object(d["b"])(n.doc,n.type,e.head,n.mapping);null!==r&&null!==i&&(t=t.setSelection(o["h"].create(t.doc,r,i)))}},x=(t,e)=>({anchor:Object(d["a"])(e.selection.anchor,t.type,t.mapping),head:Object(d["a"])(e.selection.head,t.type,t.mapping)});class _{constructor(t,e){this.type=t,this.prosemirrorView=e,this.mux=Object(r["a"])(),this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=x(this,e.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(g["b"]&&null===this._domSelectionInView&&(setTimeout(()=>{this._domSelectionInView=null},0),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),e=this.prosemirrorView._root.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.getClientRects();0===n.length&&e.startContainer&&e.collapsed&&e.selectNodeContents(e.startContainer);const r=e.getBoundingClientRect(),i=v["c"].documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,e){e||(e=p["t"](p["p"](),new Map)),this.prosemirrorView.dispatch(this.prosemirrorView.state.tr.setMeta(f["b"],{snapshot:t,prevSnapshot:e}))}unrenderSnapshot(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(t=>O(t,this.prosemirrorView.state.schema,this.mapping)).filter(t=>null!==t),e=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](t),0,0));e.setMeta(f["b"],{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(e)})}_forceRerender(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(t=>O(t,this.prosemirrorView.state.schema,this.mapping)).filter(t=>null!==t),e=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](t),0,0));this.prosemirrorView.dispatch(e)})}_renderSnapshot(t,e,n){t||(t=p["A"](this.doc)),this.mapping=new Map,this.mux(()=>{this.doc.transact(r=>{const o=n.permanentUserData;o&&o.dss.forEach(t=>{p["z"](r,t,t=>{})});const s=(t,e)=>{const r="added"===t?o.getUserByClientId(e.client):o.getUserByDeletedId(e);return{user:r,type:t,color:w(n.colorMapping,n.colors,r)}},a=p["B"](this.type,new p["g"](e.ds,t.sv)).map(n=>!n._item.deleted||y(n._item,t)||y(n._item,e)?O(n,this.prosemirrorView.state.schema,new Map,t,e,s):null).filter(t=>null!==t),c=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](a),0,0));this.prosemirrorView.dispatch(c)},f["b"])})}_typeChanged(t,e){const n=f["b"].getState(this.prosemirrorView.state);0!==t.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const t=(t,e)=>this.mapping.delete(e);p["z"](e,e.deleteSet,t=>t.constructor===p["e"]&&this.mapping.delete(t.content.type)),e.changed.forEach(t),e.changedParentTypes.forEach(t);const n=this.type.toArray().map(t=>C(t,this.prosemirrorView.state.schema,this.mapping)).filter(t=>null!==t);let r=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new i["j"](new i["c"](n),0,0));S(r,this.beforeTransactionSelection,this),r=r.setMeta(f["b"],{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(t){this.mux(()=>{this.doc.transact(()=>{z(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=x(this,this.prosemirrorView.state)},f["b"])})}destroy(){this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const C=(t,e,n,r,i,o)=>{const s=n.get(t);if(void 0===s){if(t instanceof p["j"])return O(t,e,n,r,i,o);throw h["b"]()}return s},O=(t,e,n,r,i,o)=>{const s=[],a=t=>{if(t.constructor===p["j"]){const a=C(t,e,n,r,i,o);null!==a&&s.push(a)}else{const a=E(t,e,n,r,i,o);null!==a&&a.forEach(t=>{null!==t&&s.push(t)})}};void 0===r||void 0===i?t.toArray().forEach(a):p["B"](t,new p["g"](i.ds,r.sv)).forEach(a);try{const a=t.getAttributes(r);void 0!==r&&(y(t._item,r)?y(t._item,i)||(a.ychange=o?o("added",t._item.id):{type:"added"}):a.ychange=o?o("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,a,s);return n.set(t,c),c}catch(c){return t.doc.transact(e=>{t._item.delete(e)},f["b"]),n.delete(t),null}},E=(t,e,n,r,i,o)=>{const s=[],a=t.toDelta(r,i,o);try{for(let t=0;t<a.length;t++){const n=a[t],r=[];for(const t in n.attributes)r.push(e.mark(t,n.attributes[t]));s.push(e.text(n.insert,r))}}catch(c){return t.doc.transact(e=>{t._item.delete(e)},f["b"]),null}return s},A=(t,e)=>{const n=new p["l"],r=t.map(t=>({insert:t.text,attributes:B(t.marks)}));return n.applyDelta(r),e.set(n,t),n},M=(t,e)=>{const n=new p["j"](t.type.name);for(const r in t.attrs){const e=t.attrs[r];null!==e&&"ychange"!==r&&n.setAttribute(r,e)}return n.insert(0,I(t).map(t=>T(t,e))),e.set(n,t),n},T=(t,e)=>t instanceof Array?A(t,e):M(t,e),R=(t,e)=>{const n=Object.keys(t).filter(e=>null!==t[e]);let r=n.length===Object.keys(e).filter(t=>null!==e[t]).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=t[o],a=e[o];r="ychange"===o||s===a||"object"===typeof s&&"object"===typeof a&&R(s,a)}return r},I=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const t=e[r];if(t.isText){const t=[];for(let n=e[r];r<e.length&&n.isText;n=e[++r])t.push(n);r--,n.push(t)}else n.push(t)}return n},D=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((t,n)=>t.insert===e[n].text&&a["c"](t.attributes||{}).length===e[n].marks.length&&e[n].marks.every(e=>R(t.attributes[e.type.name]||{},e.attrs)))},N=(t,e)=>{if(t instanceof p["j"]&&!(e instanceof Array)&&$(t,e)){const n=I(e);return t._length===n.length&&R(t.getAttributes(),e.attrs)&&t.toArray().every((t,e)=>N(t,n[e]))}return t instanceof p["l"]&&e instanceof Array&&D(t,e)},j=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((t,n)=>e[n]===t),P=(t,e,n)=>{const r=t.toArray(),i=I(e),o=i.length,a=r.length,c=s["g"](a,o);let u=0,l=0,h=!1;for(;u<c;u++){const t=r[u],e=i[u];if(j(n.get(t),e))h=!0;else if(!N(t,e))break}for(;u+l<c;l++){const t=r[a-l-1],e=i[o-l-1];if(j(n.get(t),e))h=!0;else if(!N(t,e))break}return{equalityFactor:u+l,foundMappedChild:h}},L=t=>{let e="",n=t._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof p["b"]?e+=n.content.str:n.content instanceof p["a"]&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},F=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=L(t),o=e.map(t=>({insert:t.text,attributes:Object.assign({},r,B(t.marks))})),{insert:s,remove:a,index:c}=l(i,o.map(t=>t.insert).join(""));t.delete(c,a),t.insert(c,s),t.applyDelta(o.map(t=>({retain:t.insert.length,attributes:t.attributes})))},B=t=>{const e={};return t.forEach(t=>{"ychange"!==t.type.name&&(e[t.type.name]=t.attrs)}),e},z=(t,e,n,r)=>{if(e instanceof p["j"]&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof p["j"]){const t=e.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?t[n]!==r[n]&&"ychange"!==n&&e.setAttribute(n,r[n]):e.removeAttribute(n);for(const n in t)void 0===r[n]&&e.removeAttribute(n)}const i=I(n),o=i.length,a=e.toArray(),c=a.length,u=s["g"](o,c);let l=0,h=0;for(;l<u;l++){const t=a[l],e=i[l];if(!j(r.get(t),e)){if(!N(t,e))break;r.set(t,e)}}for(;h+l+1<u;h++){const t=a[c-h-1],e=i[o-h-1];if(!j(r.get(t),e)){if(!N(t,e))break;r.set(t,e)}}t.transact(()=>{while(c-l-h>0&&o-l-h>0){const n=a[l],s=i[l],u=a[c-h-1],f=i[o-h-1];if(n instanceof p["l"]&&s instanceof Array)D(n,s)||F(n,s,r),l+=1;else{let i=n instanceof p["j"]&&$(n,s),o=u instanceof p["j"]&&$(u,f);if(i&&o){const t=P(n,s,r),e=P(u,f,r);t.foundMappedChild&&!e.foundMappedChild?o=!1:!t.foundMappedChild&&e.foundMappedChild||t.equalityFactor<e.equalityFactor?i=!1:o=!1}i?(z(t,n,s,r),l+=1):o?(z(t,u,f,r),h+=1):(e.delete(l,1),e.insert(l,[T(s,r)]),l+=1)}}const n=c-l-h;if(n>0&&e.delete(l,n),l+h<o){const t=[];for(let e=l;e<o-h;e++)t.push(T(i[e],r));e.insert(l,t)}},f["b"])},$=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name},"9bdd":function(t,e,n){var r=n("825a"),i=n("2a62");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(s){throw i(t),s}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),s=n("a04b"),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(o(t),e=s(e),o(n),i)try{return a(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),s=n("d44e"),a=n("3f8c"),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),s(t,u,!1,!0),a[u]=c,t}},"9f7f":function(t,e,n){var r=n("d039"),i=function(t,e){return RegExp(t,e)};e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a04b:function(t,e,n){var r=n("c04e"),i=n("d9b5");t.exports=function(t){var e=r(t,"string");return i(e)?e:String(e)}},a4b4:function(t,e,n){var r=n("342f");t.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("c430"),a=n("83ab"),c=n("4930"),u=n("d039"),l=n("5135"),h=n("e8b5"),f=n("861d"),p=n("d9b5"),d=n("825a"),m=n("7b0b"),g=n("fc6a"),v=n("a04b"),y=n("577e"),b=n("5c6c"),w=n("7c73"),k=n("df75"),S=n("241c"),x=n("057f"),_=n("7418"),C=n("06cf"),O=n("9bf2"),E=n("d1e7"),A=n("9112"),M=n("6eeb"),T=n("5692"),R=n("f772"),I=n("d012"),D=n("90e3"),N=n("b622"),j=n("e538"),P=n("746f"),L=n("d44e"),F=n("69f3"),B=n("b727").forEach,z=R("hidden"),$="Symbol",U="prototype",H=N("toPrimitive"),V=F.set,W=F.getterFor($),q=Object[U],J=i.Symbol,K=o("JSON","stringify"),Y=C.f,G=O.f,X=x.f,Q=E.f,Z=T("symbols"),tt=T("op-symbols"),et=T("string-to-symbol-registry"),nt=T("symbol-to-string-registry"),rt=T("wks"),it=i.QObject,ot=!it||!it[U]||!it[U].findChild,st=a&&u((function(){return 7!=w(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(q,e);r&&delete q[e],G(t,e,n),r&&t!==q&&G(q,e,r)}:G,at=function(t,e){var n=Z[t]=w(J[U]);return V(n,{type:$,tag:t,description:e}),a||(n.description=e),n},ct=function(t,e,n){t===q&&ct(tt,e,n),d(t);var r=v(e);return d(n),l(Z,r)?(n.enumerable?(l(t,z)&&t[z][r]&&(t[z][r]=!1),n=w(n,{enumerable:b(0,!1)})):(l(t,z)||G(t,z,b(1,{})),t[z][r]=!0),st(t,r,n)):G(t,r,n)},ut=function(t,e){d(t);var n=g(e),r=k(n).concat(dt(n));return B(r,(function(e){a&&!ht.call(n,e)||ct(t,e,n[e])})),t},lt=function(t,e){return void 0===e?w(t):ut(w(t),e)},ht=function(t){var e=v(t),n=Q.call(this,e);return!(this===q&&l(Z,e)&&!l(tt,e))&&(!(n||!l(this,e)||!l(Z,e)||l(this,z)&&this[z][e])||n)},ft=function(t,e){var n=g(t),r=v(e);if(n!==q||!l(Z,r)||l(tt,r)){var i=Y(n,r);return!i||!l(Z,r)||l(n,z)&&n[z][r]||(i.enumerable=!0),i}},pt=function(t){var e=X(g(t)),n=[];return B(e,(function(t){l(Z,t)||l(I,t)||n.push(t)})),n},dt=function(t){var e=t===q,n=X(e?tt:g(t)),r=[];return B(n,(function(t){!l(Z,t)||e&&!l(q,t)||r.push(Z[t])})),r};if(c||(J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,e=D(t),n=function(t){this===q&&n.call(tt,t),l(this,z)&&l(this[z],e)&&(this[z][e]=!1),st(this,e,b(1,t))};return a&&ot&&st(q,e,{configurable:!0,set:n}),at(e,t)},M(J[U],"toString",(function(){return W(this).tag})),M(J,"withoutSetter",(function(t){return at(D(t),t)})),E.f=ht,O.f=ct,C.f=ft,S.f=x.f=pt,_.f=dt,j.f=function(t){return at(N(t),t)},a&&(G(J[U],"description",{configurable:!0,get:function(){return W(this).description}}),s||M(q,"propertyIsEnumerable",ht,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:J}),B(k(rt),(function(t){P(t)})),r({target:$,stat:!0,forced:!c},{for:function(t){var e=y(t);if(l(et,e))return et[e];var n=J(e);return et[e]=n,nt[n]=e,n},keyFor:function(t){if(!p(t))throw TypeError(t+" is not a symbol");if(l(nt,t))return nt[t]},useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!a},{create:lt,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:u((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(m(t))}}),K){var mt=!c||u((function(){var t=J();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}));r({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(f(e)||void 0!==t)&&!p(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!p(e))return e}),i[1]=e,K.apply(null,i)}})}J[U][H]||A(J[U],H,J[U].valueOf),L(J,$),I[z]=!0},a5c6:function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"tableHeader",defaultOptions:{HTMLAttributes:{}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth"),n=e?[parseInt(e,10)]:null;return{colwidth:n}}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Object(r["m"])(this.options.HTMLAttributes,t),0]}});e["a"]=i},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),s=n("d039"),a=n("d066"),c=n("4840"),u=n("cdf9"),l=n("6eeb"),h=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(t){var e=c(this,a("Promise")),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then((function(){return n}))}:t,n?function(n){return u(e,t()).then((function(){throw n}))}:t)}}),!i&&"function"==typeof o){var f=a("Promise").prototype["finally"];o.prototype["finally"]!==f&&l(o.prototype,"finally",f,{unsafe:!0})}},ab13:function(t,e,n){var r=n("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae93:function(t,e,n){"use strict";var r,i,o,s=n("d039"),a=n("e163"),c=n("9112"),u=n("5135"),l=n("b622"),h=n("c430"),f=l("iterator"),p=!1,d=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):p=!0);var m=void 0==r||s((function(){var t={};return r[f].call(t)!==t}));m&&(r={}),h&&!m||u(r,f)||c(r,f,d),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&i(o,c,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},b575:function(t,e,n){var r,i,o,s,a,c,u,l,h=n("da84"),f=n("06cf").f,p=n("2cf4").set,d=n("1cdc"),m=n("a4b4"),g=n("605d"),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,b=h.process,w=h.Promise,k=f(h,"queueMicrotask"),S=k&&k.value;S||(r=function(){var t,e;g&&(t=b.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?s():o=void 0,n}}o=void 0,t&&t.enter()},d||g||m||!v||!y?w&&w.resolve?(u=w.resolve(void 0),u.constructor=w,l=u.then,s=function(){l.call(u,r)}):s=g?function(){b.nextTick(r)}:function(){p.call(h,r)}:(a=!0,c=y.createTextNode(""),new v(r).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),t.exports=S||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),s=n("90e3"),a=n("4930"),c=n("fdbf"),u=i("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)&&(a||"string"==typeof u[t])||(a&&o(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),s=n("d039"),a=s((function(){o(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(t){return o(i(t))}})},b6f5:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return m}));var r=n("7749"),i=n("2309");const o="undefined"!==typeof document?document:{},s=t=>o.createElement(t),a=()=>o.createDocumentFragment(),c=t=>o.createTextNode(t),u=("undefined"!==typeof DOMParser&&new DOMParser,(t,e)=>(r["b"](e,(e,n)=>{!1===n?t.removeAttribute(e):!0===n?t.setAttribute(e,""):t.setAttribute(e,n)}),t)),l=t=>{const e=a();for(let n=0;n<t.length;n++)g(e,t[n]);return e},h=(t,e)=>(g(t,l(e)),t),f=(t,e,n)=>t.addEventListener(e,n),p=(t,e=[],n=[])=>h(u(s(t),e),n),d=c,m=t=>i["d"](t,(t,e)=>`${e}:${t};`).join(""),g=(t,e)=>t.appendChild(e);o.ELEMENT_NODE,o.TEXT_NODE,o.CDATA_SECTION_NODE,o.COMMENT_NODE,o.DOCUMENT_NODE,o.DOCUMENT_TYPE_NODE,o.DOCUMENT_FRAGMENT_NODE},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),s=n("50c4"),a=n("65f0"),c=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,h=6==t,f=7==t,p=5==t||h;return function(d,m,g,v){for(var y,b,w=o(d),k=i(w),S=r(m,g,3),x=s(k.length),_=0,C=v||a,O=e?C(d,x):n||f?C(d,0):void 0;x>_;_++)if((p||_ in k)&&(y=k[_],b=S(y,_,w),t))if(e)O[_]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return _;case 2:c.call(O,y)}else switch(t){case 4:return!1;case 7:c.call(O,y)}return h?-1:u||l?l:O}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},bee2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("7a82");function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},bf38:function(t,e,n){"use strict";var r=n("9980"),i=200,o=function(){};o.prototype.append=function(t){return t.length?(t=o.from(t),!this.length&&t||t.length<i&&this.leafAppend(t)||this.length<i&&t.leafPrepend(this)||this.appendInner(t)):this},o.prototype.prepend=function(t){return t.length?o.from(t).append(this):this},o.prototype.appendInner=function(t){return new a(this,t)},o.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?o.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},o.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},o.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},o.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},o.from=function(t){return t instanceof o?t:t&&t.length?new s(t):o.empty};var s=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=i)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=i)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(o);o.empty=new s([]);var a=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(o),c=o,u=c,l=n("0ac0"),h=n("5313"),f=500,p=function(t,e){this.items=t,this.eventCount=e};function d(t,e){var n;return t.forEach((function(t,r){if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}p.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,i,o=this.items.length;;o--){var s=this.items.get(o-1);if(s.selection){--o;break}}e&&(r=this.remapping(o,this.items.length),i=r.maps.length);var a,c,u=t.tr,l=[],h=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(o,e+1),i=r.maps.length),i--,void h.push(t);if(r){h.push(new m(t.map));var s,f=t.step.map(r.slice(i));f&&u.maybeStep(f).doc&&(s=u.mapping.maps[u.mapping.maps.length-1],l.push(new m(s,null,null,l.length+h.length))),i--,s&&r.appendMap(s,i)}else u.maybeStep(t.step);return t.selection?(a=r?t.selection.map(r.slice(i)):t.selection,c=new p(n.items.slice(0,o).append(h.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:u,selection:a}},p.prototype.addTransform=function(t,e,n,r){for(var i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var u=t.steps[c].invert(t.docs[c]),l=new m(t.mapping.maps[c],u,e),h=void 0;(h=a&&a.merge(l))&&(l=h,c?i.pop():s=s.slice(0,s.length-1)),i.push(l),e&&(o++,e=null),r||(a=l)}var f=o-n.depth;return f>v&&(s=d(s,f),o-=f),new p(s.append(i),o)},p.prototype.remapping=function(t,e){var n=new l["a"];return this.items.forEach((function(e,r){var i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,i)}),t,e),n},p.prototype.addMaps=function(t){return 0==this.eventCount?this:new p(this.items.append(t.map((function(t){return new m(t)}))),this.eventCount)},p.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=i.getMirror(--a);if(null!=r){o=Math.min(o,r);var c=i.maps[r];if(e.step){var u=t.steps[r].invert(t.docs[r]),l=e.selection&&e.selection.map(i.slice(a+1,r));l&&s++,n.push(new m(c,u,l))}else n.push(new m(c))}}),r);for(var c=[],u=e;u<o;u++)c.push(new m(i.maps[u]));var l=this.items.slice(0,r).append(c).append(n),h=new p(l,s);return h.emptyItemCount()>f&&(h=h.compress(this.items.length-n.length)),h},p.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},p.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach((function(o,s){if(s>=t)r.push(o),o.selection&&i++;else if(o.step){var a=o.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var u=o.selection&&o.selection.map(e.slice(n));u&&i++;var l,h=new m(c.invert(),a,u),f=r.length-1;(l=r.length&&r[f].merge(h))?r[f]=l:r.push(h)}}else o.map&&n--}),this.items.length,0),new p(u.from(r.reverse()),i)},p.empty=new p(u.empty,0);var m=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};m.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new m(e.getMap().invert(),e,this.selection)}};var g=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},v=20;function y(t,e,n,r){var i,o=n.getMeta(O);if(o)return o.historyState;n.getMeta(E)&&(t=new g(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(O))return s.getMeta(O).redo?new g(t.done.addTransform(n,null,r,C(e)),t.undone,w(n.mapping.maps[n.steps.length-1]),t.prevTime):new g(t.done,t.undone.addTransform(n,null,r,C(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new g(t.done.rebased(n,i),t.undone.rebased(n,i),k(t.prevRanges,n.mapping),t.prevTime):new g(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),k(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!b(n,t.prevRanges)),c=s?k(t.prevRanges,n.mapping):w(n.mapping.maps[n.steps.length-1]);return new g(t.done.addTransform(n,a?e.selection.getBookmark():null,r,C(e)),p.empty,c,n.time)}function b(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}function w(t){var e=[];return t.forEach((function(t,n,r,i){return e.push(r,i)})),e}function k(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function S(t,e,n,r){var i=C(e),o=O.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),u=new g(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(O,{redo:r,historyState:u}).scrollIntoView())}}var x=!1,_=null;function C(t){var e=t.plugins;if(_!=e){x=!1,_=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){x=!0;break}}return x}var O=new h["e"]("history"),E=new h["e"]("closeHistory");function A(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new h["d"]({key:O,state:{init:function(){return new g(p.empty,p.empty,null,0)},apply:function(e,n,r){return y(n,r,e,t)}},config:t})}function M(t,e){var n=O.getState(t);return!(!n||0==n.done.eventCount)&&(e&&S(n,t,e,!1),!0)}function T(t,e){var n=O.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&S(n,t,e,!0),!0)}const R=r["b"].create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands(){return{undo:()=>({state:t,dispatch:e})=>M(t,e),redo:()=>({state:t,dispatch:e})=>T(t,e)}},addProseMirrorPlugins(){return[A(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}});e["a"]=R},c04e:function(t,e,n){var r=n("861d"),i=n("d9b5"),o=n("485a"),s=n("b622"),a=s("toPrimitive");t.exports=function(t,e){if(!r(t)||i(t))return t;var n,s=t[a];if(void 0!==s){if(void 0===e&&(e="default"),n=s.call(t,e),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},c088:function(t,e,n){"use strict";var r=n("9980");const i=r["d"].create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Object(r["m"])(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}});e["a"]=i},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},c77f:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return f})),n.d(e,"l",(function(){return p})),n.d(e,"h",(function(){return d}));const r=1,i=2,o=4,s=8,a=32,c=64,u=128,l=31,h=63,f=127,p=255,d=2147483647},c823:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));class r{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let i=new r,o=!0;try{"undefined"!==typeof localStorage&&(i=localStorage,o=!1)}catch(c){}const s=i,a=t=>o||addEventListener("storage",t)},c893:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return l}));var r=n("ca0e");"undefined"===typeof window||"undefined"!==typeof window.performance&&window.performance;const i="undefined"===typeof crypto?null:crypto,o=null!==i?t=>{const e=new ArrayBuffer(t),n=new Uint8Array(e);return i.getRandomValues(n),e}:t=>{const e=new ArrayBuffer(t),n=new Uint8Array(e);for(let r=0;r<t;r++)n[r]=Math.ceil(4294967295*Math.random()>>>0);return e},s=Math.random,a=()=>new Uint32Array(o(4))[0],c=t=>t[r["c"](s()*t.length)],u=[1e7]+-1e3+-4e3+-8e3+-1e11,l=()=>u.replace(/[018]/g,t=>(t^a()&15>>t/4).toString(16))},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c8d2:function(t,e,n){var r=n("d039"),i=n("5899"),o="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},ca0e:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"h",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"g",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return l}));const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round),s=Math.log10,a=(Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),c=(t,e)=>t>e?t:e,u=(Number.isNaN,Math.pow,t=>Math.pow(10,t)),l=(Math.sign,t=>0!==t?t<0:1/t<0)},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,s=n("d012");t.exports=function(t,e){var n,a=i(t),c=0,u=[];for(n in a)!r(s,n)&&r(a,n)&&u.push(n);while(e.length>c)r(a,n=e[c++])&&(~o(u,n)||u.push(n));return u}},caad:function(t,e,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("44d2");r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),s=n.resolve;return s(e),n.promise}},ce4e:function(t,e,n){var r=n("da84");t.exports=function(t,e){try{Object.defineProperty(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("da84"),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),s=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,s)&&r(t,s,{configurable:!0,value:e})}},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},d72c:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return d}));var r=n("5da9"),i=n("1d8c");n("dbda"),n("1b25");const o=t=>new Uint8Array(t),s=(t,e,n)=>new Uint8Array(t,e,n),a=t=>new Uint8Array(t),c=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=r["c"](t[n]);return btoa(e)},u=e=>t.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),l=t=>{const e=atob(t),n=o(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},h=e=>{const n=t.from(e,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)},f=i["b"]?c:u,p=i["b"]?l:h,d=t=>{const e=o(t.byteLength);return e.set(t),e}}).call(this,n("1c35").Buffer)},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("9263"),o=n("d039"),s=n("b622"),a=n("9112"),c=s("species"),u=RegExp.prototype;t.exports=function(t,e,n,l){var h=s(t),f=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=f&&!o((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!f||!p||n){var d=/./[h],m=e(h,""[t],(function(t,e,n,r,o){var s=e.exec;return s===i||s===u.exec?f&&!o?{done:!0,value:d.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));r(String.prototype,t,m[0]),r(u,h,m[1])}l&&a(u[h],"sham",!0)}},d9b5:function(t,e,n){var r=n("d066"),i=n("fdbf");t.exports=i?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return"function"==typeof e&&Object(t)instanceof e}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),s=n("fc6a"),a=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=s(t),i=a.f,u=o(r),l={},h=0;while(u.length>h)n=i(r,e=u[h++]),void 0!==n&&c(l,e,n);return l}})},dbda:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"i",(function(){return p})),n.d(e,"m",(function(){return d})),n.d(e,"k",(function(){return m})),n.d(e,"l",(function(){return g})),n.d(e,"h",(function(){return v})),n.d(e,"j",(function(){return y})),n.d(e,"n",(function(){return b})),n.d(e,"g",(function(){return O})),n.d(e,"b",(function(){return E})),n.d(e,"d",(function(){return M})),n.d(e,"a",(function(){return R})),n.d(e,"c",(function(){return I}));var r=n("d72c"),i=n("ca0e"),o=n("c77f");Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,o["h"];const s=Number.isInteger||(t=>"number"===typeof t&&isFinite(t)&&i["c"](t)===t);Number.isNaN;class a{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const c=()=>new a,u=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},l=t=>{const e=new Uint8Array(u(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(r["c"](t.cbuf.buffer,0,t.cpos),n),e},h=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(r["c"](t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*i["f"](n,e)),t.cpos=0)},f=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},p=f,d=(t,e)=>{while(e>o["k"])f(t,o["g"]|o["k"]&e),e>>>=7;f(t,o["k"]&e)},m=(t,e)=>{const n=i["d"](e);n&&(e=-e),f(t,(e>o["j"]?o["g"]:0)|(n?o["f"]:0)|o["j"]&e),e>>>=6;while(e>0)f(t,(e>o["k"]?o["g"]:0)|o["k"]&e),e>>>=7},g=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;d(t,r);for(let i=0;i<r;i++)f(t,n.codePointAt(i))},v=(t,e)=>y(t,l(e)),y=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=i["g"](n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(i["f"](2*n,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},b=(t,e)=>{d(t,e.byteLength),y(t,e)},w=(t,e)=>{h(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},k=(t,e)=>w(t,4).setFloat32(0,e,!1),S=(t,e)=>w(t,8).setFloat64(0,e,!1),x=(t,e)=>w(t,8).setBigInt64(0,e,!1),_=new DataView(new ArrayBuffer(4)),C=t=>(_.setFloat32(0,t),_.getFloat32(0)===t),O=(t,e)=>{switch(typeof e){case"string":f(t,119),g(t,e);break;case"number":s(e)&&e<=o["h"]?(f(t,125),m(t,e)):C(e)?(f(t,124),k(t,e)):(f(t,123),S(t,e));break;case"bigint":f(t,122),x(t,e);break;case"object":if(null===e)f(t,126);else if(e instanceof Array){f(t,117),d(t,e.length);for(let n=0;n<e.length;n++)O(t,e[n])}else if(e instanceof Uint8Array)f(t,116),b(t,e);else{f(t,118);const n=Object.keys(e);d(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];g(t,i),O(t,e[i])}}break;case"boolean":f(t,e?120:121);break;default:f(t,127)}};class E extends a{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&d(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const A=t=>{t.count>0&&(m(t.encoder,1===t.count?t.s:-t.s),t.count>1&&d(t.encoder,t.count-2))};class M{constructor(){this.encoder=new a,this.s=0,this.count=0}write(t){this.s===t?this.count++:(A(this),this.count=1,this.s=t)}toUint8Array(){return A(this),l(this.encoder)}}const T=t=>{if(t.count>0){const e=t.diff<<1|(1===t.count?0:1);m(t.encoder,e),t.count>1&&d(t.encoder,t.count-2)}};class R{constructor(){this.encoder=new a,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(T(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return T(this),l(this.encoder)}}class I{constructor(){this.sarr=[],this.s="",this.lensE=new M}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new a;return this.sarr.push(this.s),this.s="",g(t,this.sarr.join("")),y(t,this.lensE.toUint8Array()),l(t)}}},dce4:function(t,e,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm,o=r["c"].create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark("code"),toggleCode:()=>({commands:t})=>t.toggleMark("code"),unsetCode:()=>({commands:t})=>t.unsetMark("code")}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Object(r["k"])(i,this.type)]},addPasteRules(){return[Object(r["l"])(i,this.type)]}});e["a"]=o},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),s=n("9112"),a=n("b622"),c=a("iterator"),u=a("toStringTag"),l=o.values;for(var h in i){var f=r[h],p=f&&f.prototype;if(p){if(p[c]!==l)try{s(p,c,l)}catch(m){p[c]=l}if(p[u]||s(p,u,h),i[h])for(var d in o)if(p[d]!==o[d])try{s(p,d,o[d])}catch(m){p[d]=o[d]}}}},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),s="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),s=n("e177"),a=o("IE_PROTO"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),s=n("69f3"),a=n("7dd0"),c="Array Iterator",u=s.set,l=s.getterFor(c);t.exports=a(Array,"Array",(function(t,e){u(this,{type:c,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e394:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>void 0===t?null:t},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e3ff:function(t,e,n){"use strict";var r=n("9980");const i=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/gm,o=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/gm,s=r["c"].create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:t}){return["s",Object(r["m"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark("strike"),toggleStrike:()=>({commands:t})=>t.toggleMark("strike"),unsetStrike:()=>({commands:t})=>t.unsetMark("strike")}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Object(r["k"])(i,this.type)]},addPasteRules(){return[Object(r["l"])(o,this.type)]}});e["a"]=s},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),s=n("06cf").f,a=n("83ab"),c=i((function(){s(1)})),u=!a||c;r({target:"Object",stat:!0,forced:u,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6c4:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("2309"),i=n("4aa6"),o=n("fca1");class s{constructor(){this._observers=r["c"]()}on(t,e){r["e"](this._observers,t,i["a"]).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return o["c"]((this._observers.get(t)||r["c"]()).values()).forEach(t=>t(...e))}destroy(){this._observers=r["c"]()}}},e6cf:function(t,e,n){"use strict";var r,i,o,s,a=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),h=n("fea9"),f=n("6eeb"),p=n("e2cc"),d=n("d2bb"),m=n("d44e"),g=n("2626"),v=n("861d"),y=n("1c0b"),b=n("19aa"),w=n("8925"),k=n("2266"),S=n("1c7e"),x=n("4840"),_=n("2cf4").set,C=n("b575"),O=n("cdf9"),E=n("44de"),A=n("f069"),M=n("e667"),T=n("69f3"),R=n("94ca"),I=n("b622"),D=n("6069"),N=n("605d"),j=n("2d00"),P=I("species"),L="Promise",F=T.get,B=T.set,z=T.getterFor(L),$=h&&h.prototype,U=h,H=$,V=u.TypeError,W=u.document,q=u.process,J=A.f,K=J,Y=!!(W&&W.createEvent&&u.dispatchEvent),G="function"==typeof PromiseRejectionEvent,X="unhandledrejection",Q="rejectionhandled",Z=0,tt=1,et=2,nt=1,rt=2,it=!1,ot=R(L,(function(){var t=w(U),e=t!==String(U);if(!e&&66===j)return!0;if(c&&!H["finally"])return!0;if(j>=51&&/native code/.test(t))return!1;var n=new U((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))},i=n.constructor={};return i[P]=r,it=n.then((function(){}))instanceof r,!it||!e&&D&&!G})),st=ot||!S((function(t){U.all(t)["catch"]((function(){}))})),at=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},ct=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;C((function(){var r=t.value,i=t.state==tt,o=0;while(n.length>o){var s,a,c,u=n[o++],l=i?u.ok:u.fail,h=u.resolve,f=u.reject,p=u.domain;try{l?(i||(t.rejection===rt&&ft(t),t.rejection=nt),!0===l?s=r:(p&&p.enter(),s=l(r),p&&(p.exit(),c=!0)),s===u.promise?f(V("Promise-chain cycle")):(a=at(s))?a.call(s,h,f):h(s)):f(r)}catch(d){p&&!c&&p.exit(),f(d)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&lt(t)}))}},ut=function(t,e,n){var r,i;Y?(r=W.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!G&&(i=u["on"+t])?i(r):t===X&&E("Unhandled promise rejection",n)},lt=function(t){_.call(u,(function(){var e,n=t.facade,r=t.value,i=ht(t);if(i&&(e=M((function(){N?q.emit("unhandledRejection",r,n):ut(X,n,r)})),t.rejection=N||ht(t)?rt:nt,e.error))throw e.value}))},ht=function(t){return t.rejection!==nt&&!t.parent},ft=function(t){_.call(u,(function(){var e=t.facade;N?q.emit("rejectionHandled",e):ut(Q,e,t.value)}))},pt=function(t,e,n){return function(r){t(e,r,n)}},dt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=et,ct(t,!0))},mt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw V("Promise can't be resolved itself");var r=at(e);r?C((function(){var n={done:!1};try{r.call(e,pt(mt,n,t),pt(dt,n,t))}catch(i){dt(n,i,t)}})):(t.value=e,t.state=tt,ct(t,!1))}catch(i){dt({done:!1},i,t)}}};if(ot&&(U=function(t){b(this,U,L),y(t),r.call(this);var e=F(this);try{t(pt(mt,e),pt(dt,e))}catch(n){dt(e,n)}},H=U.prototype,r=function(t){B(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Z,value:void 0})},r.prototype=p(H,{then:function(t,e){var n=z(this),r=J(x(this,U));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=N?q.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=Z&&ct(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=pt(mt,e),this.reject=pt(dt,e)},A.f=J=function(t){return t===U||t===o?new i(t):K(t)},!c&&"function"==typeof h&&$!==Object.prototype)){s=$.then,it||(f($,"then",(function(t,e){var n=this;return new U((function(t,e){s.call(n,t,e)})).then(t,e)}),{unsafe:!0}),f($,"catch",H["catch"],{unsafe:!0}));try{delete $.constructor}catch(gt){}d&&d($,H)}a({global:!0,wrap:!0,forced:ot},{Promise:U}),m(U,L,!1,!0),g(L),o=l(L),a({target:L,stat:!0,forced:ot},{reject:function(t){var e=J(this);return e.reject.call(void 0,t),e.promise}}),a({target:L,stat:!0,forced:c||ot},{resolve:function(t){return O(c&&this===o?U:this,t)}}),a({target:L,stat:!0,forced:st},{all:function(t){var e=this,n=J(e),r=n.resolve,i=n.reject,o=M((function(){var n=y(e.resolve),o=[],s=0,a=1;k(t,(function(t){var c=s++,u=!1;o.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=J(e),r=n.reject,i=M((function(){var i=y(e.resolve);k(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),s=n("9bf2");t.exports=function(t,e){for(var n=i(e),a=s.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||a(t,l,c(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},ed4b:function(t,e,n){"use strict";var r=n("9980"),i=n("f95e");const o=r["d"].create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:"h"+t,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){const n=this.options.levels.includes(t.attrs.level),i=n?t.attrs.level:this.options.levels[0];return["h"+i,Object(r["m"])(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode("heading",t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode("heading","paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,["Mod-Alt-"+e]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Object(i["c"])(new RegExp(`^(#{1,${t}})\\s$`),this.type,{level:t}))}});e["a"]=o},ed65:function(t,e,n){},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f248:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return p}));var r=n("dbda"),i=n("1b25"),o=n("69a7"),s=n("ca0e"),a=n("e6c4"),c=n("2163");const u=3e4;class l extends a["a"]{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const t=o["a"]();null!==this.getLocalState()&&u/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach((n,r)=>{r!==this.clientID&&u<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)}),e.length>0&&h(this,e,"timeout")},s["c"](u/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:o["a"]()});const s=[],a=[],u=[],l=[];null===t?l.push(e):null==i?null!=t&&s.push(e):(a.push(e),c["b"](i,t)||u.push(e)),(s.length>0||u.length>0||l.length>0)&&this.emit("change",[{added:s,updated:u,removed:l},"local"]),this.emit("update",[{added:s,updated:a,removed:l},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const h=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:o["a"]()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},f=(t,e,n=t.states)=>{const i=e.length,o=r["e"]();r["m"](o,i);for(let s=0;s<i;s++){const i=e[s],a=n.get(i)||null,c=t.meta.get(i).clock;r["m"](o,i),r["m"](o,c),r["l"](o,JSON.stringify(a))}return r["f"](o)},p=(t,e,n)=>{const r=i["e"](e),s=o["a"](),a=[],u=[],l=[],h=[],f=i["k"](r);for(let o=0;o<f;o++){const e=i["k"](r);let n=i["k"](r);const o=JSON.parse(i["j"](r)),f=t.meta.get(e),p=t.states.get(e),d=void 0===f?0:f.clock;(d<n||d===n&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:n,lastUpdated:s}),void 0===f&&null!==o?a.push(e):void 0!==f&&null===o?h.push(e):null!==o&&(c["b"](o,p)||l.push(e),u.push(e)))}(a.length>0||l.length>0||h.length>0)&&t.emit("change",[{added:a,updated:l,removed:h},n]),(a.length>0||u.length>0||h.length>0)&&t.emit("update",[{added:a,updated:u,removed:h},n])}},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),s=o("toStringTag"),a="Arguments"==i(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=c(e=Object(t),s))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},f95e:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return h}));var r=n("5313"),i=n("0ac0"),o=function(t,e){this.match=t,this.handler="string"==typeof e?s(e):e};function s(t){return function(e,n,r,i){var o=t;if(n[1]){var s=n[0].lastIndexOf(n[1]);o+=n[0].slice(s+n[1].length),r+=s;var a=r-i;a>0&&(o=n[0].slice(s-a,s)+o,r=i)}return e.tr.insertText(o,r,i)}}var a=500;function c(t){var e=t.rules,n=new r["d"]({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,i,o){return u(t,r,i,o,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection,i=r.$cursor;i&&u(t,i.pos,i.pos,"",e,n)}))}}},isInputRules:!0});return n}function u(t,e,n,r,i,o){if(t.composing)return!1;var s=t.state,c=s.doc.resolve(e);if(c.parent.type.spec.code)return!1;for(var u=c.parent.textBetween(Math.max(0,c.parentOffset-a),c.parentOffset,null,"￼")+r,l=0;l<i.length;l++){var h=i[l].match.exec(u),f=h&&i[l].handler(s,h,e-(h[0].length-r.length),n);if(f)return t.dispatch(f.setMeta(o,{transform:f,from:e,to:n,text:r})),!0}return!1}function l(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var i=n[r],o=void 0;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){for(var s=t.tr,a=o.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));if(o.text){var u=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,u))}else s.delete(o.from,o.to);e(s)}return!0}}return!1}new o(/--$/,"—"),new o(/\.\.\.$/,"…"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new o(/"$/,"”"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new o(/'$/,"’");function h(t,e,n,r){return new o(t,(function(t,o,s,a){var c=n instanceof Function?n(o):n,u=t.tr.delete(s,a),l=u.doc.resolve(s),h=l.blockRange(),f=h&&Object(i["h"])(h,e,c);if(!f)return null;u.wrap(h,f);var p=u.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&Object(i["e"])(u.doc,s-1)&&(!r||r(o,p))&&u.join(s-1),u}))}function f(t,e,n){return new o(t,(function(t,r,i,o){var s=t.doc.resolve(i),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(i,o).setBlockType(i,i,e,a):null}))}},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fca1:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a}));const r=t=>t[t.length-1],i=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},o=Array.from,s=(t,e)=>t.every(e),a=(t,e)=>t.length===e.length&&s(t,(t,n)=>t===e[n])},fce3:function(t,e,n){var r=n("d039");t.exports=r((function(){var t=RegExp(".","string".charAt(0));return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise}}]);
//# sourceMappingURL=chunk-vendors.f2e42578.js.map